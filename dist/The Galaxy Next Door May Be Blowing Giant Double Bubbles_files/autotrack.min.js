function UrlChangeTracker(){if(history.pushState&&window.addEventListener){this.originalPushState=history.pushState,history.pushState=function(t,e){this.originalPushState.apply(history,arguments),this.updateTrackerData()}.bind(this),this.originalReplaceState=history.replaceState,history.replaceState=function(t,e){this.originalReplaceState.apply(history,arguments),this.updateTrackerData(!0)}.bind(this);var t=this;window.addEventListener("popstate",function(){t.updateTrackerData(!0)})}}function getPath(){return location.pathname+location.search+location.hash}UrlChangeTracker.prototype.updateTrackerData=function(t){t=!1!==t,setTimeout(function(){var e=this.path,a=getPath();e!=a&&(this.path=a,t&&this.newpage({page:a,title:history&&history.state&&history.state.title||document.title}))}.bind(this),0)},UrlChangeTracker.prototype.newpage=function(t){var e=function(t){var e=[],a="encodeURIComponent",n=window;for(var r in t)void 0!==t[r][0]&&e.push(n[a](t[r][0])+"="+n[a](t[r][1]));return e.join("&")},a=function(t){for(var e=t+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""},n=function(){var t=function(){return Math.floor(4294967296*(1+Math.random())).toString(16).substring(1)};return t()+t()+t()+t()},r=function(t){var e=document.createElement("a");e.href=t;var a=e.hash;return a||(a=window.location.hash),a=a.replace(/\#\!\//,"/"),a=a.replace(/\#\/?/,"/"),e.hash="",e.pathname=e.pathname.replace(/\/$/,"")+a,e.href},i=window.ndg_tracker_info,o=function(t){var e=t.c,i=t.co,o=t.snippet_allow_fragments_in_url,l=["url","_fp","iid","is_canonical","canonical_url","title"];for(var h in e.q)void 0!==e.q[h][0]&&-1!=l.indexOf(e.q[h][0])&&delete e.q[h];return o?e("url",r(window.location.href)):e("url",window.location.href),e("_fp",a(i)),e("iid",n()),e}(i);!function(t){var e=document.getElementById(t),a=e.parentNode;a.removeChild(e),clearInterval(fm_channel.Intvl_heartbeat),delete fm_channel,delete fm_share_stats,delete _fallsmbind,delete FaAdblock,delete Fallslog,delete FamShare,e=document.getElementsByTagName("script");for(var n=["cdn.ndg.io/shared/extra.min.js"],r=0;r<e.length;r++)for(var i=0;i<n.length;i++)-1!==e[r].src.indexOf(n[i])&&(a=e[r].parentNode).removeChild(e[r])}(i.id),function(t,a,n){if(!document.getElementById(n)){var r=document.createElement("script");r.id=n,r.async=!0,r.src=t+"?"+e(a.q);var i=document.getElementsByTagName("script")[0];i&&i.parentNode.insertBefore(r,i)}}("//fallsm.ndg.io/asynctracker.js",o,i.id)},UrlChangeTracker.prototype.remove=function(){window.removeEventListener("popstate",this.updateTrackerData),history.replaceState=this.originalReplaceState,history.pushState=this.originalPushState,this.tracker=null,this.opts=null,this.path=null,this.updateTrackerData=null,this.originalReplaceState=null,this.originalPushState=null};var urlTracker=new UrlChangeTracker;
//# sourceMappingURL=autotrack.min.js.map