(function(){function t(t,e){if(t!==e){var i=t===t,n=e===e;if(t>e||!i||t===x&&n)return 1;if(t<e||!n||e===x&&i)return-1}return 0}function e(t,e,i){for(var n=t.length,o=i?n:-1;i?o--:++o<n;)if(e(t[o],o,t))return o;return-1}function i(t,e,i){if(e!==e)return h(t,i);for(var n=i-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}function n(t){return"function"==typeof t||!1}function o(t){return"string"==typeof t?t:null==t?"":t+""}function s(t){return t.charCodeAt(0)}function a(t,e){for(var i=-1,n=t.length;++i<n&&e.indexOf(t.charAt(i))>-1;);return i}function r(t,e){for(var i=t.length;i--&&e.indexOf(t.charAt(i))>-1;);return i}function l(e,i){return t(e.criteria,i.criteria)||e.index-i.index}function c(e,i,n){for(var o=-1,s=e.criteria,a=i.criteria,r=s.length,l=n.length;++o<r;){var c=t(s[o],a[o]);if(c)return o>=l?c:c*(n[o]?1:-1)}return e.index-i.index}function d(t){return Ot[t]}function u(t){return Ft[t]}function p(t){return"\\"+qt[t]}function h(t,e,i){for(var n=t.length,o=e+(i?0:-1);i?o--:++o<n;){var s=t[o];if(s!==s)return o}return-1}function m(t){return!!t&&"object"==typeof t}function g(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function f(t,e){for(var i=-1,n=t.length,o=-1,s=[];++i<n;)t[i]===e&&(t[i]=z,s[++o]=i);return s}function b(t,e){for(var i,n=-1,o=t.length,s=-1,a=[];++n<o;){var r=t[n],l=e?e(r,n,t):r;n&&i===l||(i=l,a[++s]=r)}return a}function y(t){for(var e=-1,i=t.length;++e<i&&g(t.charCodeAt(e)););return e}function v(t){for(var e=t.length;e--&&g(t.charCodeAt(e)););return e}function w(t){return zt[t]}function S(g){function Ot(t){if(m(t)&&!Ir(t)&&!(t instanceof jt)){if(t instanceof zt)return t;if(zs.call(t,"__chain__")&&zs.call(t,"__wrapped__"))return on(t)}return new zt(t)}function Ft(){}function zt(t,e,i){this.__wrapped__=t,this.__actions__=i||[],this.__chain__=!!e}function jt(t){this.__wrapped__=t,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=wa,this.__views__=null}function qt(){var t=this.__actions__,e=this.__iteratees__,i=this.__views__,n=new jt(this.__wrapped__);return n.__actions__=t?ie(t):null,n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=e?ie(e):null,n.__takeCount__=this.__takeCount__,n.__views__=i?ie(i):null,n}function Ht(){if(this.__filtered__){var t=new jt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Gt(){var t=this.__wrapped__.value();if(!Ir(t))return ti(t,this.__actions__);var e=this.__dir__,i=e<0,n=Bi(0,t.length,this.__views__),o=n.start,s=n.end,a=s-o,r=i?s:o-1,l=ma(a,this.__takeCount__),c=this.__iteratees__,d=c?c.length:0,u=0,p=[];t:for(;a--&&u<l;){r+=e;for(var h=-1,m=t[r];++h<d;){var g=c[h],f=g.iteratee,b=g.type;if(b==B){if(g.done&&(i?r>g.index:r<g.index)&&(g.count=0,g.done=!1),g.index=r,!g.done){var y=g.limit;if(!(g.done=y>-1?g.count++>=y:!f(m)))continue t}}else{var v=f(m);if(b==O)m=v;else if(!v){if(b==N)continue t;break t}}}p[u++]=m}return p}function Wt(){this.__data__={}}function $t(t){return this.has(t)&&delete this.__data__[t]}function Kt(t){return"__proto__"==t?x:this.__data__[t]}function Yt(t){return"__proto__"!=t&&zs.call(this.__data__,t)}function Jt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Xt(t){var e=t?t.length:0;for(this.data={hash:da(null),set:new ia};e--;)this.push(t[e])}function te(t,e){var i=t.data;return("string"==typeof e||xo(e)?i.set.has(e):i.hash[e])?0:-1}function ee(t){var e=this.data;"string"==typeof t||xo(t)?e.set.add(t):e.hash[t]=!0}function ie(t,e){var i=-1,n=t.length;for(e||(e=_s(n));++i<n;)e[i]=t[i];return e}function ne(t,e){for(var i=-1,n=t.length;++i<n&&!1!==e(t[i],i,t););return t}function oe(t,e){for(var i=t.length;i--&&!1!==e(t[i],i,t););return t}function se(t,e){for(var i=-1,n=t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function ae(t,e){for(var i=-1,n=t.length,o=-1,s=[];++i<n;){var a=t[i];e(a,i,t)&&(s[++o]=a)}return s}function re(t,e){for(var i=-1,n=t.length,o=_s(n);++i<n;)o[i]=e(t[i],i,t);return o}function le(t){for(var e=-1,i=t.length,n=va;++e<i;){var o=t[e];o>n&&(n=o)}return n}function ce(t){for(var e=-1,i=t.length,n=wa;++e<i;){var o=t[e];o<n&&(n=o)}return n}function de(t,e,i,n){var o=-1,s=t.length;for(n&&s&&(i=t[++o]);++o<s;)i=e(i,t[o],o,t);return i}function ue(t,e,i,n){var o=t.length;for(n&&o&&(i=t[--o]);o--;)i=e(i,t[o],o,t);return i}function pe(t,e){for(var i=-1,n=t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function he(t){for(var e=t.length,i=0;e--;)i+=+t[e]||0;return i}function me(t,e){return t===x?e:t}function ge(t,e,i,n){return t!==x&&zs.call(n,i)?t:e}function fe(t,e,i){var n=Vr(e);Xs.apply(n,Fa(e));for(var o=-1,s=n.length;++o<s;){var a=n[o],r=t[a],l=i(r,e[a],a,t,e);(l===l?l===r:r!==r)&&(r!==x||a in t)||(t[a]=l)}return t}function be(t,e){for(var i=-1,n=t.length,o=Wi(n),s=e.length,a=_s(s);++i<s;){var r=e[i];a[i]=o?ji(r,n)?t[r]:x:t[r]}return a}function ye(t,e,i){i||(i={});for(var n=-1,o=e.length;++n<o;){var s=e[n];i[s]=t[s]}return i}function ve(t,e,i){var n=typeof t;return"function"==n?e===x?t:ni(t,e,i):null==t?hs:"object"==n?Be(t):e===x?vs(t):Ne(t,e)}function we(t,e,i,n,o,s,a){var r;if(i&&(r=o?i(t,n,o):i(t)),r!==x)return r;if(!xo(t))return t;var l=Ir(t);if(l){if(r=Ni(t),!e)return ie(t,r)}else{var c=qs.call(t),d=c==$;if(c!=Y&&c!=j&&(!d||o))return Bt[c]?Fi(t,c,e):o?t:{};if(r=Oi(d?{}:t),!e)return Aa(r,t)}s||(s=[]),a||(a=[]);for(var u=s.length;u--;)if(s[u]==t)return a[u];return s.push(t),a.push(r),(l?ne:Ae)(t,function(n,o){r[o]=we(n,e,i,o,t,s,a)}),r}function Se(t,e,i){if("function"!=typeof t)throw new Vs(F);return na(function(){t.apply(x,i)},e)}function xe(t,e){var n=t?t.length:0,o=[];if(!n)return o;var s=-1,a=Ui(),r=a==i,l=r&&e.length>=200?Ua(e):null,c=e.length;l&&(a=te,r=!1,e=l);t:for(;++s<n;){var d=t[s];if(r&&d===d){for(var u=c;u--;)if(e[u]===d)continue t;o.push(d)}else a(e,d,0)<0&&o.push(d)}return o}function Ie(t,e){var i=!0;return Pa(t,function(t,n,o){return i=!!e(t,n,o)}),i}function Ce(t,e,i,n){var o=t.length;for(i=null==i?0:+i||0,i<0&&(i=-i>o?0:o+i),n=n===x||n>o?o:+n||0,n<0&&(n+=o),o=i>n?0:n>>>0,i>>>=0;i<o;)t[i++]=e;return t}function Te(t,e){var i=[];return Pa(t,function(t,n,o){e(t,n,o)&&i.push(t)}),i}function _e(t,e,i,n){var o;return i(t,function(t,i,s){if(e(t,i,s))return o=n?i:t,!1}),o}function ke(t,e,i){for(var n=-1,o=t.length,s=-1,a=[];++n<o;){var r=t[n];if(m(r)&&Wi(r.length)&&(Ir(r)||go(r))){e&&(r=ke(r,e,i));var l=-1,c=r.length;for(a.length+=c;++l<c;)a[++s]=r[l]}else i||(a[++s]=r)}return a}function Ee(t,e){return Ra(t,e,Oo)}function Ae(t,e){return Ra(t,e,Vr)}function Le(t,e){return Ma(t,e,Vr)}function Pe(t,e){for(var i=-1,n=e.length,o=-1,s=[];++i<n;){var a=e[i];Tr(t[a])&&(s[++o]=a)}return s}function De(t,e,i){if(null!=t){i!==x&&i in en(t)&&(e=[i]);for(var n=-1,o=e.length;null!=t&&++n<o;)var s=t=t[e[n]];return s}}function Re(t,e,i,n,o,s){if(t===e)return 0!==t||1/t==1/e;var a=typeof t,r=typeof e;return"function"!=a&&"object"!=a&&"function"!=r&&"object"!=r||null==t||null==e?t!==t&&e!==e:Me(t,e,Re,i,n,o,s)}function Me(t,e,i,n,o,s,a){var r=Ir(t),l=Ir(e),c=q,d=q;r||(c=qs.call(t),c==j?c=Y:c!=Y&&(r=Lo(t))),l||(d=qs.call(e),d==j?d=Y:d!=Y&&(l=Lo(e)));var u=c==Y,p=d==Y,h=c==d;if(h&&!r&&!u)return Di(t,e,c);if(!o){var m=u&&zs.call(t,"__wrapped__"),g=p&&zs.call(e,"__wrapped__");if(m||g)return i(m?t.value():t,g?e.value():e,n,o,s,a)}if(!h)return!1;s||(s=[]),a||(a=[]);for(var f=s.length;f--;)if(s[f]==t)return a[f]==e;s.push(t),a.push(e);var b=(r?Pi:Ri)(t,e,i,n,o,s,a);return s.pop(),a.pop(),b}function Ve(t,e,i,n,o){for(var s=-1,a=e.length,r=!o;++s<a;)if(r&&n[s]?i[s]!==t[e[s]]:!(e[s]in t))return!1;for(s=-1;++s<a;){var l=e[s],c=t[l],d=i[s];if(r&&n[s])var u=c!==x||l in t;else(u=o?o(c,d,l):x)===x&&(u=Re(d,c,o,!0));if(!u)return!1}return!0}function Ue(t,e){var i=-1,n=Oa(t),o=Wi(n)?_s(n):[];return Pa(t,function(t,n,s){o[++i]=e(t,n,s)}),o}function Be(t){var e=Vr(t),i=e.length;if(!i)return ps(!0);if(1==i){var n=e[0],o=t[n];if($i(o))return function(t){return null!=t&&(t[n]===o&&(o!==x||n in en(t)))}}for(var s=_s(i),a=_s(i);i--;)o=t[e[i]],s[i]=o,a[i]=$i(o);return function(t){return null!=t&&Ve(en(t),e,s,a)}}function Ne(t,e){var i=Ir(t),n=Hi(t)&&$i(e),o=t+"";return t=nn(t),function(s){if(null==s)return!1;var a=o;if(s=en(s),(i||!n)&&!(a in s)){if(null==(s=1==t.length?s:De(s,We(t,0,-1))))return!1;a=yn(t),s=en(s)}return s[a]===e?e!==x||a in s:Re(e,s[a],null,!0)}}function Oe(t,e,i,n,o){if(!xo(t))return t;var s=Wi(e.length)&&(Ir(e)||Lo(e));if(!s){var a=Vr(e);Xs.apply(a,Fa(e))}return ne(a||e,function(r,l){if(a&&(l=r,r=e[l]),m(r))n||(n=[]),o||(o=[]),Fe(t,e,l,Oe,i,n,o);else{var c=t[l],d=i?i(c,r,l,t,e):x,u=d===x;u&&(d=r),!s&&d===x||!u&&(d===d?d===c:c!==c)||(t[l]=d)}}),t}function Fe(t,e,i,n,o,s,a){for(var r=s.length,l=e[i];r--;)if(s[r]==l)return void(t[i]=a[r]);var c=t[i],d=o?o(c,l,i,t,e):x,u=d===x;u&&(d=l,Wi(l.length)&&(Ir(l)||Lo(l))?d=Ir(c)?c:Oa(c)?ie(c):[]:_r(l)||go(l)?d=go(c)?Ro(c):_r(c)?c:{}:u=!1),s.push(l),a.push(d),u?t[i]=n(d,l,o,s,a):(d===d?d!==c:c===c)&&(t[i]=d)}function ze(t){return function(e){return null==e?x:e[t]}}function je(t){var e=t+"";return t=nn(t),function(i){return De(i,t,e)}}function qe(t,e){for(var i=e.length;i--;){var n=parseFloat(e[i]);if(n!=o&&ji(n)){var o=n;oa.call(t,n,1)}}return t}function He(t,e){return t+Zs(ya()*(e-t+1))}function Ge(t,e,i,n,o){return o(t,function(t,o,s){i=n?(n=!1,t):e(i,t,o,s)}),i}function We(t,e,i){var n=-1,o=t.length;e=null==e?0:+e||0,e<0&&(e=-e>o?0:o+e),i=i===x||i>o?o:+i||0,i<0&&(i+=o),o=e>i?0:i-e>>>0,e>>>=0;for(var s=_s(o);++n<o;)s[n]=t[n+e];return s}function $e(t,e){var i;return Pa(t,function(t,n,o){return!(i=e(t,n,o))}),!!i}function Ke(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}function Ye(t,e,i){var n=Vi(),o=-1;return e=re(e,function(t){return n(t)}),Ke(Ue(t,function(t){return{criteria:re(e,function(e){return e(t)}),index:++o,value:t}}),function(t,e){return c(t,e,i)})}function Ze(t,e){var i=0;return Pa(t,function(t,n,o){i+=+e(t,n,o)||0}),i}function Qe(t,e){var n=-1,o=Ui(),s=t.length,a=o==i,r=a&&s>=200,l=r?Ua():null,c=[];l?(o=te,a=!1):(r=!1,l=e?[]:c);t:for(;++n<s;){var d=t[n],u=e?e(d,n,t):d;if(a&&d===d){for(var p=l.length;p--;)if(l[p]===u)continue t;e&&l.push(u),c.push(d)}else o(l,u,0)<0&&((e||r)&&l.push(u),c.push(d))}return c}function Je(t,e){for(var i=-1,n=e.length,o=_s(n);++i<n;)o[i]=t[e[i]];return o}function Xe(t,e,i,n){for(var o=t.length,s=n?o:-1;(n?s--:++s<o)&&e(t[s],s,t););return i?We(t,n?0:s,n?s+1:o):We(t,n?s+1:0,n?o:s)}function ti(t,e){var i=t;i instanceof jt&&(i=i.value());for(var n=-1,o=e.length;++n<o;){var s=[i],a=e[n];Xs.apply(s,a.args),i=a.func.apply(a.thisArg,s)}return i}function ei(t,e,i){var n=0,o=t?t.length:n;if("number"==typeof e&&e===e&&o<=Ia){for(;n<o;){var s=n+o>>>1,a=t[s];(i?a<=e:a<e)?n=s+1:o=s}return o}return ii(t,e,hs,i)}function ii(t,e,i,n){e=i(e);for(var o=0,s=t?t.length:0,a=e!==e,r=e===x;o<s;){var l=Zs((o+s)/2),c=i(t[l]),d=c===c;if(a)var u=d||n;else u=r?d&&(n||c!==x):n?c<=e:c<e;u?o=l+1:s=l}return ma(s,xa)}function ni(t,e,i){if("function"!=typeof t)return hs;if(e===x)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,o){return t.call(e,i,n,o)};case 4:return function(i,n,o,s){return t.call(e,i,n,o,s)};case 5:return function(i,n,o,s,a){return t.call(e,i,n,o,s,a)}}return function(){return t.apply(e,arguments)}}function oi(t){return $s.call(t,0)}function si(t,e,i){for(var n=i.length,o=-1,s=ha(t.length-n,0),a=-1,r=e.length,l=_s(s+r);++a<r;)l[a]=e[a];for(;++o<n;)l[i[o]]=t[o];for(;s--;)l[a++]=t[o++];return l}function ai(t,e,i){for(var n=-1,o=i.length,s=-1,a=ha(t.length-o,0),r=-1,l=e.length,c=_s(a+l);++s<a;)c[s]=t[s];for(var d=s;++r<l;)c[d+r]=e[r];for(;++n<o;)c[d+i[n]]=t[s++];return c}function ri(t,e){return function(i,n,o){var s=e?e():{};if(n=Vi(n,o,3),Ir(i))for(var a=-1,r=i.length;++a<r;){var l=i[a];t(s,l,n(l,a,i),i)}else Pa(i,function(e,i,o){t(s,e,n(e,i,o),o)});return s}}function li(t){return lo(function(e,i){var n=-1,o=null==e?0:i.length,s=o>2&&i[o-2],a=o>2&&i[2],r=o>1&&i[o-1];for("function"==typeof s?(s=ni(s,r,5),o-=2):(s="function"==typeof r?r:null,o-=s?1:0),a&&qi(i[0],i[1],a)&&(s=o<3?null:s,o=1);++n<o;){var l=i[n];l&&t(e,l,s)}return e})}function ci(t,e){return function(i,n){var o=i?Oa(i):0;if(!Wi(o))return t(i,n);for(var s=e?o:-1,a=en(i);(e?s--:++s<o)&&!1!==n(a[s],s,a););return i}}function di(t){return function(e,i,n){for(var o=en(e),s=n(e),a=s.length,r=t?a:-1;t?r--:++r<a;){var l=s[r];if(!1===i(o[l],l,o))break}return e}}function ui(t,e){function i(){return(this&&this!==Zt&&this instanceof i?n:t).apply(e,arguments)}var n=hi(t);return i}function pi(t){return function(e){for(var i=-1,n=ds(Zo(e)),o=n.length,s="";++i<o;)s=t(s,n[i],i);return s}}function hi(t){return function(){var e=La(t.prototype),i=t.apply(e,arguments);return xo(i)?i:e}}function mi(t){function e(i,n,o){o&&qi(i,n,o)&&(n=null);var s=Li(i,t,null,null,null,null,null,n);return s.placeholder=e.placeholder,s}return e}function gi(t,e){return function(i,n,o){o&&qi(i,n,o)&&(n=null);var a=Vi(),r=null==n;if(a===ve&&r||(r=!1,n=a(n,o,3)),r){var l=Ir(i);if(l||!Ao(i))return t(l?i:tn(i));n=s}return Mi(i,n,e)}}function fi(t,i){return function(n,o,s){if(o=Vi(o,s,3),Ir(n)){var a=e(n,o,i);return a>-1?n[a]:x}return _e(n,o,t)}}function bi(t){return function(i,n,o){return i&&i.length?(n=Vi(n,o,3),e(i,n,t)):-1}}function yi(t){return function(e,i,n){return i=Vi(i,n,3),_e(e,i,t,!0)}}function vi(t){return function(){var e=arguments.length;if(!e)return function(){return arguments[0]};for(var i,n=t?e:-1,o=0,s=_s(e);t?n--:++n<e;){var a=s[o++]=arguments[n];if("function"!=typeof a)throw new Vs(F);var r=i?"":Na(a);i="wrapper"==r?new zt([]):i}for(n=i?-1:e;++n<e;){a=s[n],r=Na(a);var l="wrapper"==r?Ba(a):null;i=l&&Gi(l[0])?i[Na(l[0])].apply(i,l[3]):1==a.length&&Gi(a)?i[r]():i.thru(a)}return function(){var t=arguments;if(i&&1==t.length&&Ir(t[0]))return i.plant(t[0]).value();for(var n=0,o=s[n].apply(this,t);++n<e;)o=s[n].call(this,o);return o}}}function wi(t,e){return function(i,n,o){return"function"==typeof n&&o===x&&Ir(i)?t(i,n):e(i,ni(n,o,3))}}function Si(t){return function(e,i,n){return"function"==typeof i&&n===x||(i=ni(i,n,3)),t(e,i,Oo)}}function xi(t){return function(e,i,n){return"function"==typeof i&&n===x||(i=ni(i,n,3)),t(e,i)}}function Ii(t){return function(e,i,n){return(e=o(e))&&(t?e:"")+ki(e,i,n)+(t?"":e)}}function Ci(t){var e=lo(function(i,n){var o=f(n,e.placeholder);return Li(i,t,null,n,o)});return e}function Ti(t,e){return function(i,n,o,s){var a=arguments.length<3;return"function"==typeof n&&s===x&&Ir(i)?t(i,n,o,a):Ge(i,Vi(n,s,4),o,a,e)}}function _i(t,e,i,n,o,s,a,r,l,c){function d(){for(var w=arguments.length,S=w,I=_s(w);S--;)I[S]=arguments[S];if(n&&(I=si(I,n,o)),s&&(I=ai(I,s,a)),m||b){var _=d.placeholder,k=f(I,_);if((w-=k.length)<c){var E=r?ie(r):null,P=ha(c-w,0),D=m?k:null,R=m?null:k,M=m?I:null,V=m?null:I;e|=m?A:L,e&=~(m?L:A),g||(e&=~(C|T));var U=[t,e,i,M,D,V,R,E,l,P],B=_i.apply(x,U);return Gi(t)&&za(B,U),B.placeholder=_,B}}var N=p?i:this;return h&&(t=N[v]),r&&(I=Qi(I,r)),u&&l<I.length&&(I.length=l),(this&&this!==Zt&&this instanceof d?y||hi(t):t).apply(N,I)}var u=e&P,p=e&C,h=e&T,m=e&k,g=e&_,b=e&E,y=!h&&hi(t),v=t;return d}function ki(t,e,i){var n=t.length;if(e=+e,n>=e||!ua(e))return"";var o=e-n;return i=null==i?" ":i+"",is(i,Ks(o/i.length)).slice(0,o)}function Ei(t,e,i,n){function o(){for(var e=-1,r=arguments.length,l=-1,c=n.length,d=_s(r+c);++l<c;)d[l]=n[l];for(;r--;)d[l++]=arguments[++e];return(this&&this!==Zt&&this instanceof o?a:t).apply(s?i:this,d)}var s=e&C,a=hi(t);return o}function Ai(t){return function(e,i,n,o){var s=Vi(n);return s===ve&&null==n?ei(e,i,t):ii(e,i,s(n,o,1),t)}}function Li(t,e,i,n,o,s,a,r){var l=e&T;if(!l&&"function"!=typeof t)throw new Vs(F);var c=n?n.length:0;if(c||(e&=~(A|L),n=o=null),c-=o?o.length:0,e&L){var d=n,u=o;n=o=null}var p=l?null:Ba(t),h=[t,e,i,n,o,d,u,s,a,r];if(p&&(Ki(h,p),e=h[1],r=h[9]),h[9]=null==r?l?0:t.length:ha(r-c,0)||0,e==C)var m=ui(h[0],h[2]);else m=e!=A&&e!=(C|A)||h[4].length?_i.apply(x,h):Ei.apply(x,h);return(p?Va:za)(m,h)}function Pi(t,e,i,n,o,s,a){var r=-1,l=t.length,c=e.length,d=!0;if(l!=c&&!(o&&c>l))return!1;for(;d&&++r<l;){var u=t[r],p=e[r];if(d=x,n&&(d=o?n(p,u,r):n(u,p,r)),d===x)if(o)for(var h=c;h--&&(p=e[h],!(d=u&&u===p||i(u,p,n,o,s,a))););else d=u&&u===p||i(u,p,n,o,s,a)}return!!d}function Di(t,e,i){switch(i){case H:case G:return+t==+e;case W:return t.name==e.name&&t.message==e.message;case K:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case Z:case Q:return t==e+""}return!1}function Ri(t,e,i,n,o,s,a){var r=Vr(t),l=r.length;if(l!=Vr(e).length&&!o)return!1;for(var c=o,d=-1;++d<l;){var u=r[d],p=o?u in e:zs.call(e,u);if(p){var h=t[u],m=e[u];p=x,n&&(p=o?n(m,h,u):n(h,m,u)),p===x&&(p=h&&h===m||i(h,m,n,o,s,a))}if(!p)return!1;c||(c="constructor"==u)}if(!c){var g=t.constructor,f=e.constructor;if(g!=f&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof f&&f instanceof f))return!1}return!0}function Mi(t,e,i){var n=i?wa:va,o=n,s=o;return Pa(t,function(t,a,r){var l=e(t,a,r);((i?l<o:l>o)||l===n&&l===s)&&(o=l,s=t)}),s}function Vi(t,e,i){var n=Ot.callback||us;return n=n===us?ve:n,i?n(t,e,i):n}function Ui(t,e,n){var o=Ot.indexOf||gn;return o=o===gn?i:o,t?o(t,e,n):o}function Bi(t,e,i){for(var n=-1,o=i?i.length:0;++n<o;){var s=i[n],a=s.size;switch(s.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=ma(e,t+a);break;case"takeRight":t=ha(t,e-a)}}return{start:t,end:e}}function Ni(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&zs.call(t,"index")&&(i.index=t.index,i.input=t.input),i}function Oi(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Ds),new e}function Fi(t,e,i){var n=t.constructor;switch(e){case J:return oi(t);case H:case G:return new n(+t);case X:case tt:case et:case it:case nt:case ot:case st:case at:case rt:var o=t.buffer;return new n(i?oi(o):o,t.byteOffset,t.length);case K:case Q:return new n(t);case Z:var s=new n(t.source,_t.exec(t));s.lastIndex=t.lastIndex}return s}function zi(t,e,i){null==t||Hi(e,t)||(e=nn(e),t=1==e.length?t:De(t,We(e,0,-1)),e=yn(e));var n=null==t?t:t[e];return null==n?x:n.apply(t,i)}function ji(t,e){return t=+t,e=null==e?Ta:e,t>-1&&t%1==0&&t<e}function qi(t,e,i){if(!xo(i))return!1;var n=typeof e;if("number"==n)var o=Oa(i),s=Wi(o)&&ji(e,o);else s="string"==n&&e in i;if(s){var a=i[e];return t===t?t===a:a!==a}return!1}function Hi(t,e){var i=typeof t;return!!("string"==i&&vt.test(t)||"number"==i)||!Ir(t)&&(!yt.test(t)||null!=e&&t in en(e))}function Gi(t){var e=Na(t);return!!e&&t===Ot[e]&&e in jt.prototype}function Wi(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ta}function $i(t){return t===t&&(0===t?1/t>0:!xo(t))}function Ki(t,e){var i=t[1],n=e[1],o=i|n,s=o<P,a=n==P&&i==k||n==P&&i==D&&t[7].length<=e[8]||n==(P|D)&&i==k;if(!s&&!a)return t;n&C&&(t[2]=e[2],o|=i&C?0:_);var r=e[3];if(r){var l=t[3];t[3]=l?si(l,r,e[4]):ie(r),t[4]=l?f(t[3],z):ie(e[4])}return r=e[5],r&&(l=t[5],t[5]=l?ai(l,r,e[6]):ie(r),t[6]=l?f(t[5],z):ie(e[6])),r=e[7],r&&(t[7]=ie(r)),n&P&&(t[8]=null==t[8]?e[8]:ma(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function Yi(t,e){t=en(t);for(var i=-1,n=e.length,o={};++i<n;){var s=e[i];s in t&&(o[s]=t[s])}return o}function Zi(t,e){var i={};return Ee(t,function(t,n,o){e(t,n,o)&&(i[n]=t)}),i}function Qi(t,e){for(var i=t.length,n=ma(e.length,i),o=ie(t);n--;){var s=e[n];t[n]=ji(s,i)?o[s]:x}return t}function Ji(t){var e;Ot.support;if(!m(t)||qs.call(t)!=Y||!zs.call(t,"constructor")&&"function"==typeof(e=t.constructor)&&!(e instanceof e))return!1;var i;return Ee(t,function(t,e){i=e}),i===x||zs.call(t,i)}function Xi(t){for(var e=Oo(t),i=e.length,n=i&&t.length,o=Ot.support,s=n&&Wi(n)&&(Ir(t)||o.nonEnumArgs&&go(t)),a=-1,r=[];++a<i;){var l=e[a];(s&&ji(l,n)||zs.call(t,l))&&r.push(l)}return r}function tn(t){return null==t?[]:Wi(Oa(t))?xo(t)?t:Ds(t):Go(t)}function en(t){return xo(t)?t:Ds(t)}function nn(t){if(Ir(t))return t;var e=[];return o(t).replace(wt,function(t,i,n,o){e.push(n?o.replace(Ct,"$1"):i||t)}),e}function on(t){return t instanceof jt?t.clone():new zt(t.__wrapped__,t.__chain__,ie(t.__actions__))}function sn(t,e,i){e=(i?qi(t,e,i):null==e)?1:ha(+e||1,1);for(var n=0,o=t?t.length:0,s=-1,a=_s(Ks(o/e));n<o;)a[++s]=We(t,n,n+=e);return a}function an(t){for(var e=-1,i=t?t.length:0,n=-1,o=[];++e<i;){var s=t[e];s&&(o[++n]=s)}return o}function rn(t,e,i){return(t?t.length:0)?((i?qi(t,e,i):null==e)&&(e=1),We(t,e<0?0:e)):[]}function ln(t,e,i){var n=t?t.length:0;return n?((i?qi(t,e,i):null==e)&&(e=1),e=n-(+e||0),We(t,0,e<0?0:e)):[]}function cn(t,e,i){return t&&t.length?Xe(t,Vi(e,i,3),!0,!0):[]}function dn(t,e,i){return t&&t.length?Xe(t,Vi(e,i,3),!0):[]}function un(t,e,i,n){var o=t?t.length:0;return o?(i&&"number"!=typeof i&&qi(t,e,i)&&(i=0,n=o),Ce(t,e,i,n)):[]}function pn(t){return t?t[0]:x}function hn(t,e,i){var n=t?t.length:0;return i&&qi(t,e,i)&&(e=!1),n?ke(t,e):[]}function mn(t){return(t?t.length:0)?ke(t,!0):[]}function gn(t,e,n){var o=t?t.length:0;if(!o)return-1;if("number"==typeof n)n=n<0?ha(o+n,0):n;else if(n){var s=ei(t,e),a=t[s];return(e===e?e===a:a!==a)?s:-1}return i(t,e,n||0)}function fn(t){return ln(t,1)}function bn(){for(var t=[],e=-1,n=arguments.length,o=[],s=Ui(),a=s==i,r=[];++e<n;){var l=arguments[e];(Ir(l)||go(l))&&(t.push(l),o.push(a&&l.length>=120?Ua(e&&l):null))}if((n=t.length)<2)return r;var c=t[0],d=-1,u=c?c.length:0,p=o[0];t:for(;++d<u;)if(l=c[d],(p?te(p,l):s(r,l,0))<0){for(e=n;--e;){var h=o[e];if((h?te(h,l):s(t[e],l,0))<0)continue t}p&&p.push(l),r.push(l)}return r}function yn(t){var e=t?t.length:0;return e?t[e-1]:x}function vn(t,e,i){var n=t?t.length:0;if(!n)return-1;var o=n;if("number"==typeof i)o=(i<0?ha(n+i,0):ma(i||0,n-1))+1;else if(i){o=ei(t,e,!0)-1;var s=t[o];return(e===e?e===s:s!==s)?o:-1}if(e!==e)return h(t,o,!0);for(;o--;)if(t[o]===e)return o;return-1}function wn(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var i=0,n=Ui(),o=t.length;++i<o;)for(var s=0,a=t[i];(s=n(e,a,s))>-1;)oa.call(e,s,1);return e}function Sn(t,e,i){var n=[];if(!t||!t.length)return n;var o=-1,s=[],a=t.length;for(e=Vi(e,i,3);++o<a;){var r=t[o];e(r,o,t)&&(n.push(r),s.push(o))}return qe(t,s),n}function xn(t){return rn(t,1)}function In(t,e,i){var n=t?t.length:0;return n?(i&&"number"!=typeof i&&qi(t,e,i)&&(e=0,i=n),We(t,e,i)):[]}function Cn(t,e,i){return(t?t.length:0)?((i?qi(t,e,i):null==e)&&(e=1),We(t,0,e<0?0:e)):[]}function Tn(t,e,i){var n=t?t.length:0;return n?((i?qi(t,e,i):null==e)&&(e=1),e=n-(+e||0),We(t,e<0?0:e)):[]}function _n(t,e,i){return t&&t.length?Xe(t,Vi(e,i,3),!1,!0):[]}function kn(t,e,i){return t&&t.length?Xe(t,Vi(e,i,3)):[]}function En(t,e,n,o){if(!(t?t.length:0))return[];null!=e&&"boolean"!=typeof e&&(o=n,n=qi(t,e,o)?null:e,e=!1);var s=Vi();return s===ve&&null==n||(n=s(n,o,3)),e&&Ui()==i?b(t,n):Qe(t,n)}function An(t){for(var e=-1,i=(t&&t.length&&le(re(t,Oa)))>>>0,n=_s(i);++e<i;)n[e]=re(t,ze(e));return n}function Ln(){for(var t=-1,e=arguments.length;++t<e;){var i=arguments[t];if(Ir(i)||go(i))var n=n?xe(n,i).concat(xe(i,n)):i}return n?Qe(n):[]}function Pn(t,e){var i=-1,n=t?t.length:0,o={};for(!n||e||Ir(t[0])||(e=[]);++i<n;){var s=t[i];e?o[s]=e[i]:s&&(o[s[0]]=s[1])}return o}function Dn(t){var e=Ot(t);return e.__chain__=!0,e}function Rn(t,e,i){return e.call(i,t),t}function Mn(t,e,i){return e.call(i,t)}function Vn(){return Dn(this)}function Un(){return new zt(this.value(),this.__chain__)}function Bn(t){for(var e,i=this;i instanceof Ft;){var n=on(i);e?o.__wrapped__=n:e=n;var o=n;i=i.__wrapped__}return o.__wrapped__=t,e}function Nn(){var t=this.__wrapped__;return t instanceof jt?(this.__actions__.length&&(t=new jt(this)),new zt(t.reverse(),this.__chain__)):this.thru(function(t){return t.reverse()})}function On(){return this.value()+""}function Fn(){return ti(this.__wrapped__,this.__actions__)}function zn(t,e,i){var n=Ir(t)?se:Ie;return i&&qi(t,e,i)&&(e=null),"function"==typeof e&&i===x||(e=Vi(e,i,3)),n(t,e)}function jn(t,e,i){var n=Ir(t)?ae:Te;return e=Vi(e,i,3),n(t,e)}function qn(t,e){return Xa(t,Be(e))}function Hn(t,e,i,n){var o=t?Oa(t):0;return Wi(o)||(t=Go(t),o=t.length),!!o&&(i="number"!=typeof i||n&&qi(e,i,n)?0:i<0?ha(o+i,0):i||0,"string"==typeof t||!Ir(t)&&Ao(t)?i<o&&t.indexOf(e,i)>-1:Ui(t,e,i)>-1)}function Gn(t,e,i){var n=Ir(t)?re:Ue;return e=Vi(e,i,3),n(t,e)}function Wn(t,e){return Gn(t,vs(e))}function $n(t,e,i){var n=Ir(t)?ae:Te;return e=Vi(e,i,3),n(t,function(t,i,n){return!e(t,i,n)})}function Kn(t,e,i){if(i?qi(t,e,i):null==e){t=tn(t);var n=t.length;return n>0?t[He(0,n-1)]:x}var o=Yn(t);return o.length=ma(e<0?0:+e||0,o.length),o}function Yn(t){t=tn(t);for(var e=-1,i=t.length,n=_s(i);++e<i;){var o=He(0,e);e!=o&&(n[e]=n[o]),n[o]=t[e]}return n}function Zn(t){var e=t?Oa(t):0;return Wi(e)?e:Vr(t).length}function Qn(t,e,i){var n=Ir(t)?pe:$e;return i&&qi(t,e,i)&&(e=null),"function"==typeof e&&i===x||(e=Vi(e,i,3)),n(t,e)}function Jn(t,e,i){if(null==t)return[];i&&qi(t,e,i)&&(e=null);var n=-1;return e=Vi(e,i,3),Ke(Ue(t,function(t,i,o){return{criteria:e(t,i,o),index:++n,value:t}}),l)}function Xn(t,e,i,n){return null==t?[]:(n&&qi(e,i,n)&&(i=null),Ir(e)||(e=null==e?[]:[e]),Ir(i)||(i=null==i?[]:[i]),Ye(t,e,i))}function to(t,e){return jn(t,Be(e))}function eo(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Vs(F);var i=t;t=e,e=i}return t=ua(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}}function io(t,e,i){return i&&qi(t,e,i)&&(e=null),e=t&&null==e?t.length:ha(+e||0,0),Li(t,P,null,null,null,null,e)}function no(t,e){var i;if("function"!=typeof e){if("function"!=typeof t)throw new Vs(F);var n=t;t=e,e=n}return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}}function oo(t,e,i){function n(){p&&Ys(p),l&&Ys(l),l=p=h=x}function o(){var i=e-(dr()-d);if(i<=0||i>e){l&&Ys(l);var n=h;l=p=h=x,n&&(m=dr(),c=t.apply(u,r),p||l||(r=u=null))}else p=na(o,i)}function s(){p&&Ys(p),l=p=h=x,(f||g!==e)&&(m=dr(),c=t.apply(u,r),p||l||(r=u=null))}function a(){if(r=arguments,d=dr(),u=this,h=f&&(p||!b),!1===g)var i=b&&!p;else{l||b||(m=d);var n=g-(d-m),a=n<=0||n>g;a?(l&&(l=Ys(l)),m=d,c=t.apply(u,r)):l||(l=na(s,n))}return a&&p?p=Ys(p):p||e===g||(p=na(o,e)),i&&(a=!0,c=t.apply(u,r)),!a||p||l||(r=u=null),c}var r,l,c,d,u,p,h,m=0,g=!1,f=!0;if("function"!=typeof t)throw new Vs(F);if(e=e<0?0:+e||0,!0===i){var b=!0;f=!1}else xo(i)&&(b=i.leading,g="maxWait"in i&&ha(+i.maxWait||0,e),f="trailing"in i?i.trailing:f);return a.cancel=n,a}function so(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Vs(F);var i=function(){var n=arguments,o=i.cache,s=e?e.apply(this,n):n[0];if(o.has(s))return o.get(s);var a=t.apply(this,n);return o.set(s,a),a};return i.cache=new so.Cache,i}function ao(t){if("function"!=typeof t)throw new Vs(F);return function(){return!t.apply(this,arguments)}}function ro(t){return no(2,t)}function lo(t,e){if("function"!=typeof t)throw new Vs(F);return e=ha(e===x?t.length-1:+e||0,0),function(){for(var i=arguments,n=-1,o=ha(i.length-e,0),s=_s(o);++n<o;)s[n]=i[e+n];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,i[0],s);case 2:return t.call(this,i[0],i[1],s)}var a=_s(e+1);for(n=-1;++n<e;)a[n]=i[n];return a[e]=s,t.apply(this,a)}}function co(t){if("function"!=typeof t)throw new Vs(F);return function(e){return t.apply(this,e)}}function uo(t,e,i){var n=!0,o=!0;if("function"!=typeof t)throw new Vs(F);return!1===i?n=!1:xo(i)&&(n="leading"in i?!!i.leading:n,o="trailing"in i?!!i.trailing:o),Nt.leading=n,Nt.maxWait=+e,Nt.trailing=o,oo(t,e,Nt)}function po(t,e){return e=null==e?hs:e,Li(e,A,null,[t],[])}function ho(t,e,i,n){return e&&"boolean"!=typeof e&&qi(t,e,i)?e=!1:"function"==typeof e&&(n=i,i=e,e=!1),i="function"==typeof i&&ni(i,n,1),we(t,e,i)}function mo(t,e,i){return e="function"==typeof e&&ni(e,i,1),we(t,!0,e)}function go(t){return Wi(m(t)?t.length:x)&&qs.call(t)==j}function fo(t){return!0===t||!1===t||m(t)&&qs.call(t)==H}function bo(t){return m(t)&&qs.call(t)==G}function yo(t){return!!t&&1===t.nodeType&&m(t)&&qs.call(t).indexOf("Element")>-1}function vo(t){if(null==t)return!0;var e=Oa(t);return Wi(e)&&(Ir(t)||Ao(t)||go(t)||m(t)&&Tr(t.splice))?!e:!Vr(t).length}function wo(t,e,i,n){if(!(i="function"==typeof i&&ni(i,n,3))&&$i(t)&&$i(e))return t===e;var o=i?i(t,e):x;return o===x?Re(t,e,i):!!o}function So(t){return m(t)&&"string"==typeof t.message&&qs.call(t)==W}function xo(t){var e=typeof t;return"function"==e||!!t&&"object"==e}function Io(t,e,i,n){var o=Vr(e),s=o.length;if(!s)return!0;if(null==t)return!1;if(i="function"==typeof i&&ni(i,n,3),t=en(t),!i&&1==s){var a=o[0],r=e[a];if($i(r))return r===t[a]&&(r!==x||a in t)}for(var l=_s(s),c=_s(s);s--;)r=l[s]=e[o[s]],c[s]=$i(r);return Ve(t,o,l,c,i)}function Co(t){return ko(t)&&t!=+t}function To(t){return null!=t&&(qs.call(t)==$?Gs.test(Fs.call(t)):m(t)&&Et.test(t))}function _o(t){return null===t}function ko(t){return"number"==typeof t||m(t)&&qs.call(t)==K}function Eo(t){return m(t)&&qs.call(t)==Z||!1}function Ao(t){return"string"==typeof t||m(t)&&qs.call(t)==Q}function Lo(t){return m(t)&&Wi(t.length)&&!!Ut[qs.call(t)]}function Po(t){return t===x}function Do(t){var e=t?Oa(t):0;return Wi(e)?e?ie(t):[]:Go(t)}function Ro(t){return ye(t,Oo(t))}function Mo(t,e,i){var n=La(t);return i&&qi(t,e,i)&&(e=null),e?Aa(n,e):n}function Vo(t){return Pe(t,Oo(t))}function Uo(t,e,i){var n=null==t?x:De(t,nn(e),e+"");return n===x?i:n}function Bo(t,e){if(null==t)return!1;var i=zs.call(t,e);return i||Hi(e)||(e=nn(e),t=1==e.length?t:De(t,We(e,0,-1)),e=yn(e),i=null!=t&&zs.call(t,e)),i}function No(t,e,i){i&&qi(t,e,i)&&(e=null);for(var n=-1,o=Vr(t),s=o.length,a={};++n<s;){var r=o[n],l=t[r];e?zs.call(a,l)?a[l].push(r):a[l]=[r]:a[l]=r}return a}function Oo(t){if(null==t)return[];xo(t)||(t=Ds(t));var e=t.length;e=e&&Wi(e)&&(Ir(t)||Ea.nonEnumArgs&&go(t))&&e||0;for(var i=t.constructor,n=-1,o="function"==typeof i&&i.prototype===t,s=_s(e),a=e>0;++n<e;)s[n]=n+"";for(var r in t)a&&ji(r,e)||"constructor"==r&&(o||!zs.call(t,r))||s.push(r);return s}function Fo(t,e,i){var n={};return e=Vi(e,i,3),Ae(t,function(t,i,o){n[i]=e(t,i,o)}),n}function zo(t){for(var e=-1,i=Vr(t),n=i.length,o=_s(n);++e<n;){var s=i[e];o[e]=[s,t[s]]}return o}function jo(t,e,i){var n=null==t?x:t[e];return n===x&&(null==t||Hi(e,t)||(e=nn(e),t=1==e.length?t:De(t,We(e,0,-1)),n=null==t?x:t[yn(e)]),n=n===x?i:n),Tr(n)?n.call(t):n}function qo(t,e,i){if(null==t)return t;var n=e+"";e=null!=t[n]||Hi(e,t)?[n]:nn(e);for(var o=-1,s=e.length,a=s-1,r=t;null!=r&&++o<s;){var l=e[o];xo(r)&&(o==a?r[l]=i:null==r[l]&&(r[l]=ji(e[o+1])?[]:{})),r=r[l]}return t}function Ho(t,e,i,n){var o=Ir(t)||Lo(t);if(e=Vi(e,n,4),null==i)if(o||xo(t)){var s=t.constructor;i=o?Ir(t)?new s:[]:La(Tr(s)&&s.prototype)}else i={};return(o?ne:Ae)(t,function(t,n,o){return e(i,t,n,o)}),i}function Go(t){return Je(t,Vr(t))}function Wo(t){return Je(t,Oo(t))}function $o(t,e,i){return e=+e||0,void 0===i?(i=e,e=0):i=+i||0,t>=ma(e,i)&&t<ha(e,i)}function Ko(t,e,i){i&&qi(t,e,i)&&(e=i=null);var n=null==t,o=null==e;if(null==i&&(o&&"boolean"==typeof t?(i=t,t=1):"boolean"==typeof e&&(i=e,o=!0)),n&&o&&(e=1,o=!1),t=+t||0,o?(e=t,t=0):e=+e||0,i||t%1||e%1){var s=ya();return ma(t+s*(e-t+parseFloat("1e-"+((s+"").length-1))),e)}return He(t,e)}function Yo(t){return(t=o(t))&&t.charAt(0).toUpperCase()+t.slice(1)}function Zo(t){return(t=o(t))&&t.replace(At,d).replace(It,"")}function Qo(t,e,i){t=o(t),e+="";var n=t.length;return i=i===x?n:ma(i<0?0:+i||0,n),(i-=e.length)>=0&&t.indexOf(e,i)==i}function Jo(t){return t=o(t),t&&mt.test(t)?t.replace(pt,u):t}function Xo(t){return t=o(t),t&&xt.test(t)?t.replace(St,"\\$&"):t}function ts(t,e,i){t=o(t),e=+e;var n=t.length;if(n>=e||!ua(e))return t;var s=(e-n)/2,a=Zs(s);return i=ki("",Ks(s),i),i.slice(0,a)+t+i}function es(t,e,i){return i&&qi(t,e,i)&&(e=0),ba(t,e)}function is(t,e){var i="";if(t=o(t),(e=+e)<1||!t||!ua(e))return i;do{e%2&&(i+=t),e=Zs(e/2),t+=t}while(e);return i}function ns(t,e,i){return t=o(t),i=null==i?0:ma(i<0?0:+i||0,t.length),t.lastIndexOf(e,i)==i}function os(t,e,i){var n=Ot.templateSettings;i&&qi(t,e,i)&&(e=i=null),t=o(t),e=fe(Aa({},i||e),n,ge)
;var s,a,r=fe(Aa({},e.imports),n.imports,ge),l=Vr(r),c=Je(r,l),d=0,u=e.interpolate||Lt,h="__p += '",m=Rs((e.escape||Lt).source+"|"+u.source+"|"+(u===bt?Tt:Lt).source+"|"+(e.evaluate||Lt).source+"|$","g"),g="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Vt+"]")+"\n";t.replace(m,function(e,i,n,o,r,l){return n||(n=o),h+=t.slice(d,l).replace(Pt,p),i&&(s=!0,h+="' +\n__e("+i+") +\n'"),r&&(a=!0,h+="';\n"+r+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),d=l+e.length,e}),h+="';\n";var f=e.variable;f||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(lt,""):h).replace(ct,"$1").replace(dt,"$1;"),h="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var b=Gr(function(){return As(l,g+"return "+h).apply(x,c)});if(b.source=h,So(b))throw b;return b}function ss(t,e,i){var n=t;return(t=o(t))?(i?qi(n,e,i):null==e)?t.slice(y(t),v(t)+1):(e+="",t.slice(a(t,e),r(t,e)+1)):t}function as(t,e,i){var n=t;return t=o(t),t?(i?qi(n,e,i):null==e)?t.slice(y(t)):t.slice(a(t,e+"")):t}function rs(t,e,i){var n=t;return t=o(t),t?(i?qi(n,e,i):null==e)?t.slice(0,v(t)+1):t.slice(0,r(t,e+"")+1):t}function ls(t,e,i){i&&qi(t,e,i)&&(e=null);var n=R,s=M;if(null!=e)if(xo(e)){var a="separator"in e?e.separator:a;n="length"in e?+e.length||0:n,s="omission"in e?o(e.omission):s}else n=+e||0;if(t=o(t),n>=t.length)return t;var r=n-s.length;if(r<1)return s;var l=t.slice(0,r);if(null==a)return l+s;if(Eo(a)){if(t.slice(r).search(a)){var c,d,u=t.slice(0,r);for(a.global||(a=Rs(a.source,(_t.exec(a)||"")+"g")),a.lastIndex=0;c=a.exec(u);)d=c.index;l=l.slice(0,null==d?r:d)}}else if(t.indexOf(a,r)!=r){var p=l.lastIndexOf(a);p>-1&&(l=l.slice(0,p))}return l+s}function cs(t){return t=o(t),t&&ht.test(t)?t.replace(ut,w):t}function ds(t,e,i){return i&&qi(t,e,i)&&(e=null),t=o(t),t.match(e||Dt)||[]}function us(t,e,i){return i&&qi(t,e,i)&&(e=null),ve(t,e)}function ps(t){return function(){return t}}function hs(t){return t}function ms(t){return Be(we(t,!0))}function gs(t,e){return Ne(t,we(e,!0))}function fs(t,e,i){if(null==i){var n=xo(e),o=n&&Vr(e),s=o&&o.length&&Pe(e,o);(s?s.length:n)||(s=!1,i=e,e=t,t=this)}s||(s=Pe(e,Vr(e)));var a=!0,r=-1,l=Tr(t),c=s.length;!1===i?a=!1:xo(i)&&"chain"in i&&(a=i.chain);for(;++r<c;){var d=s[r],u=e[d];t[d]=u,l&&(t.prototype[d]=function(e){return function(){var i=this.__chain__;if(a||i){var n=t(this.__wrapped__);return(n.__actions__=ie(this.__actions__)).push({func:e,args:arguments,thisArg:t}),n.__chain__=i,n}var o=[this.value()];return Xs.apply(o,arguments),e.apply(t,o)}}(u))}return t}function bs(){return g._=Hs,this}function ys(){}function vs(t){return Hi(t)?ze(t):je(t)}function ws(t){return function(e){return De(t,nn(e),e+"")}}function Ss(t,e,i){i&&qi(t,e,i)&&(e=i=null),t=+t||0,i=null==i?1:+i||0,null==e?(e=t,t=0):e=+e||0;for(var n=-1,o=ha(Ks((e-t)/(i||1)),0),s=_s(o);++n<o;)s[n]=t,t+=i;return s}function xs(t,e,i){if((t=Zs(t))<1||!ua(t))return[];var n=-1,o=_s(ma(t,Sa));for(e=ni(e,i,1);++n<t;)n<Sa?o[n]=e(n):e(n);return o}function Is(t){var e=++js;return o(t)+e}function Cs(t,e){return(+t||0)+(+e||0)}function Ts(t,e,i){i&&qi(t,e,i)&&(e=null);var n=Vi(),o=null==e;return n===ve&&o||(o=!1,e=n(e,i,3)),o?he(Ir(t)?t:tn(t)):Ze(t,e)}g=g?Qt.defaults(Zt.Object(),g,Qt.pick(Zt,Mt)):Zt;var _s=g.Array,ks=g.Date,Es=g.Error,As=g.Function,Ls=g.Math,Ps=g.Number,Ds=g.Object,Rs=g.RegExp,Ms=g.String,Vs=g.TypeError,Us=_s.prototype,Bs=Ds.prototype,Ns=Ms.prototype,Os=(Os=g.window)&&Os.document,Fs=As.prototype.toString,zs=Bs.hasOwnProperty,js=0,qs=Bs.toString,Hs=g._,Gs=Rs("^"+Xo(qs).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ws=To(Ws=g.ArrayBuffer)&&Ws,$s=To($s=Ws&&new Ws(0).slice)&&$s,Ks=Ls.ceil,Ys=g.clearTimeout,Zs=Ls.floor,Qs=To(Qs=Ds.getOwnPropertySymbols)&&Qs,Js=To(Js=Ds.getPrototypeOf)&&Js,Xs=Us.push,ta=To(Ds.preventExtensions=Ds.preventExtensions)&&ta,ea=Bs.propertyIsEnumerable,ia=To(ia=g.Set)&&ia,na=g.setTimeout,oa=Us.splice,sa=To(sa=g.Uint8Array)&&sa,aa=To(aa=g.WeakMap)&&aa,ra=function(){try{var t=To(t=g.Float64Array)&&t,e=new t(new Ws(10),0,1)&&t}catch(t){}return e}(),la=function(){var t={1:0},e=ta&&To(e=Ds.assign)&&e;try{e(ta(t),"xo")}catch(t){}return!t[1]&&e}(),ca=To(ca=_s.isArray)&&ca,da=To(da=Ds.create)&&da,ua=g.isFinite,pa=To(pa=Ds.keys)&&pa,ha=Ls.max,ma=Ls.min,ga=To(ga=ks.now)&&ga,fa=To(fa=Ps.isFinite)&&fa,ba=g.parseInt,ya=Ls.random,va=Ps.NEGATIVE_INFINITY,wa=Ps.POSITIVE_INFINITY,Sa=Ls.pow(2,32)-1,xa=Sa-1,Ia=Sa>>>1,Ca=ra?ra.BYTES_PER_ELEMENT:0,Ta=Ls.pow(2,53)-1,_a=aa&&new aa,ka={},Ea=Ot.support={};!function(t){var e=function(){this.x=t},i=[];e.prototype={valueOf:t,y:t};for(var n in new e)i.push(n);Ea.funcDecomp=/\bthis\b/.test(function(){return this}),Ea.funcNames="string"==typeof As.name;try{Ea.dom=11===Os.createDocumentFragment().nodeType}catch(t){Ea.dom=!1}try{Ea.nonEnumArgs=!ea.call(arguments,1)}catch(t){Ea.nonEnumArgs=!0}}(1,0),Ot.templateSettings={escape:gt,evaluate:ft,interpolate:bt,variable:"",imports:{_:Ot}};var Aa=la||function(t,e){return null==e?t:ye(e,Fa(e),ye(e,Vr(e),t))},La=function(){function t(){}return function(e){if(xo(e)){t.prototype=e;var i=new t;t.prototype=null}return i||g.Object()}}(),Pa=ci(Ae),Da=ci(Le,!0),Ra=di(),Ma=di(!0),Va=_a?function(t,e){return _a.set(t,e),t}:hs;$s||(oi=Ws&&sa?function(t){var e=t.byteLength,i=ra?Zs(e/Ca):0,n=i*Ca,o=new Ws(e);if(i){var s=new ra(o,0,i);s.set(new ra(t,0,i))}return e!=n&&(s=new sa(o,n),s.set(new sa(t,n))),o}:ps(null));var Ua=da&&ia?function(t){return new Xt(t)}:ps(null),Ba=_a?function(t){return _a.get(t)}:ys,Na=function(){return Ea.funcNames?"constant"==ps.name?ze("name"):function(t){for(var e=t.name,i=ka[e],n=i?i.length:0;n--;){var o=i[n],s=o.func;if(null==s||s==t)return o.name}return e}:ps("")}(),Oa=ze("length"),Fa=Qs?function(t){return Qs(en(t))}:ps([]),za=function(){var t=0,e=0;return function(i,n){var o=dr(),s=U-(o-e);if(e=o,s>0){if(++t>=V)return i}else t=0;return Va(i,n)}}(),ja=lo(function(t,e){return Ir(t)||go(t)?xe(t,ke(e,!1,!0)):[]}),qa=bi(),Ha=bi(!0),Ga=lo(function(e,i){e||(e=[]),i=ke(i);var n=be(e,i);return qe(e,i.sort(t)),n}),Wa=Ai(),$a=Ai(!0),Ka=lo(function(t){return Qe(ke(t,!1,!0))}),Ya=lo(function(t,e){return Ir(t)||go(t)?xe(t,e):[]}),Za=lo(An),Qa=lo(function(t,e){return Wi(t?Oa(t):0)&&(t=tn(t)),be(t,ke(e))}),Ja=ri(function(t,e,i){zs.call(t,i)?++t[i]:t[i]=1}),Xa=fi(Pa),tr=fi(Da,!0),er=wi(ne,Pa),ir=wi(oe,Da),nr=ri(function(t,e,i){zs.call(t,i)?t[i].push(e):t[i]=[e]}),or=ri(function(t,e,i){t[i]=e}),sr=lo(function(t,e,i){var n=-1,o="function"==typeof e,s=Hi(e),a=Oa(t),r=Wi(a)?_s(a):[];return Pa(t,function(t){var a=o?e:s&&null!=t&&t[e];r[++n]=a?a.apply(t,i):zi(t,e,i)}),r}),ar=ri(function(t,e,i){t[i?0:1].push(e)},function(){return[[],[]]}),rr=Ti(de,Pa),lr=Ti(ue,Da),cr=lo(function(t,e){if(null==t)return[];var i=e[2];return i&&qi(e[0],e[1],i)&&(e.length=1),Ye(t,ke(e),[])}),dr=ga||function(){return(new ks).getTime()},ur=lo(function(t,e,i){var n=C;if(i.length){var o=f(i,ur.placeholder);n|=A}return Li(t,n,e,i,o)}),pr=lo(function(t,e){e=e.length?ke(e):Vo(t);for(var i=-1,n=e.length;++i<n;){var o=e[i];t[o]=Li(t[o],C,t)}return t}),hr=lo(function(t,e,i){var n=C|T;if(i.length){var o=f(i,hr.placeholder);n|=A}return Li(e,n,t,i,o)}),mr=mi(k),gr=mi(E),fr=lo(function(t,e){return Se(t,1,e)}),br=lo(function(t,e,i){return Se(t,e,i)}),yr=vi(),vr=vi(!0),wr=Ci(A),Sr=Ci(L),xr=lo(function(t,e){return Li(t,D,null,null,null,ke(e))}),Ir=ca||function(t){return m(t)&&Wi(t.length)&&qs.call(t)==q};Ea.dom||(yo=function(t){return!!t&&1===t.nodeType&&m(t)&&!_r(t)});var Cr=fa||function(t){return"number"==typeof t&&ua(t)},Tr=n(/x/)||sa&&!n(sa)?function(t){return qs.call(t)==$}:n,_r=Js?function(t){if(!t||qs.call(t)!=Y)return!1;var e=t.valueOf,i=To(e)&&(i=Js(e))&&Js(i);return i?t==i||Js(t)==i:Ji(t)}:Ji,kr=li(function(t,e,i){return i?fe(t,e,i):Aa(t,e)}),Er=lo(function(t){var e=t[0];return null==e?e:(t.push(me),kr.apply(x,t))}),Ar=yi(Ae),Lr=yi(Le),Pr=Si(Ra),Dr=Si(Ma),Rr=xi(Ae),Mr=xi(Le),Vr=pa?function(t){if(t)var e=t.constructor,i=t.length;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Wi(i)?Xi(t):xo(t)?pa(t):[]}:Xi,Ur=li(Oe),Br=lo(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=re(ke(e),Ms);return Yi(t,xe(Oo(t),e))}var i=ni(e[0],e[1],3);return Zi(t,function(t,e,n){return!i(t,e,n)})}),Nr=lo(function(t,e){return null==t?{}:"function"==typeof e[0]?Zi(t,ni(e[0],e[1],3)):Yi(t,ke(e))}),Or=pi(function(t,e,i){return e=e.toLowerCase(),t+(i?e.charAt(0).toUpperCase()+e.slice(1):e)}),Fr=pi(function(t,e,i){return t+(i?"-":"")+e.toLowerCase()}),zr=Ii(),jr=Ii(!0);8!=ba(Rt+"08")&&(es=function(t,e,i){return(i?qi(t,e,i):null==e)?e=0:e&&(e=+e),t=ss(t),ba(t,e||(kt.test(t)?16:10))});var qr=pi(function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}),Hr=pi(function(t,e,i){return t+(i?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Gr=lo(function(t,e){try{return t.apply(x,e)}catch(t){return So(t)?t:new Es(t)}}),Wr=lo(function(t,e){return function(i){return zi(i,t,e)}}),$r=lo(function(t,e){return function(i){return zi(t,i,e)}}),Kr=gi(le),Yr=gi(ce,!0);return Ot.prototype=Ft.prototype,zt.prototype=La(Ft.prototype),zt.prototype.constructor=zt,jt.prototype=La(Ft.prototype),jt.prototype.constructor=jt,Wt.prototype.delete=$t,Wt.prototype.get=Kt,Wt.prototype.has=Yt,Wt.prototype.set=Jt,Xt.prototype.push=ee,so.Cache=Wt,Ot.after=eo,Ot.ary=io,Ot.assign=kr,Ot.at=Qa,Ot.before=no,Ot.bind=ur,Ot.bindAll=pr,Ot.bindKey=hr,Ot.callback=us,Ot.chain=Dn,Ot.chunk=sn,Ot.compact=an,Ot.constant=ps,Ot.countBy=Ja,Ot.create=Mo,Ot.curry=mr,Ot.curryRight=gr,Ot.debounce=oo,Ot.defaults=Er,Ot.defer=fr,Ot.delay=br,Ot.difference=ja,Ot.drop=rn,Ot.dropRight=ln,Ot.dropRightWhile=cn,Ot.dropWhile=dn,Ot.fill=un,Ot.filter=jn,Ot.flatten=hn,Ot.flattenDeep=mn,Ot.flow=yr,Ot.flowRight=vr,Ot.forEach=er,Ot.forEachRight=ir,Ot.forIn=Pr,Ot.forInRight=Dr,Ot.forOwn=Rr,Ot.forOwnRight=Mr,Ot.functions=Vo,Ot.groupBy=nr,Ot.indexBy=or,Ot.initial=fn,Ot.intersection=bn,Ot.invert=No,Ot.invoke=sr,Ot.keys=Vr,Ot.keysIn=Oo,Ot.map=Gn,Ot.mapValues=Fo,Ot.matches=ms,Ot.matchesProperty=gs,Ot.memoize=so,Ot.merge=Ur,Ot.method=Wr,Ot.methodOf=$r,Ot.mixin=fs,Ot.negate=ao,Ot.omit=Br,Ot.once=ro,Ot.pairs=zo,Ot.partial=wr,Ot.partialRight=Sr,Ot.partition=ar,Ot.pick=Nr,Ot.pluck=Wn,Ot.property=vs,Ot.propertyOf=ws,Ot.pull=wn,Ot.pullAt=Ga,Ot.range=Ss,Ot.rearg=xr,Ot.reject=$n,Ot.remove=Sn,Ot.rest=xn,Ot.restParam=lo,Ot.set=qo,Ot.shuffle=Yn,Ot.slice=In,Ot.sortBy=Jn,Ot.sortByAll=cr,Ot.sortByOrder=Xn,Ot.spread=co,Ot.take=Cn,Ot.takeRight=Tn,Ot.takeRightWhile=_n,Ot.takeWhile=kn,Ot.tap=Rn,Ot.throttle=uo,Ot.thru=Mn,Ot.times=xs,Ot.toArray=Do,Ot.toPlainObject=Ro,Ot.transform=Ho,Ot.union=Ka,Ot.uniq=En,Ot.unzip=An,Ot.values=Go,Ot.valuesIn=Wo,Ot.where=to,Ot.without=Ya,Ot.wrap=po,Ot.xor=Ln,Ot.zip=Za,Ot.zipObject=Pn,Ot.backflow=vr,Ot.collect=Gn,Ot.compose=vr,Ot.each=er,Ot.eachRight=ir,Ot.extend=kr,Ot.iteratee=us,Ot.methods=Vo,Ot.object=Pn,Ot.select=jn,Ot.tail=xn,Ot.unique=En,fs(Ot,Ot),Ot.add=Cs,Ot.attempt=Gr,Ot.camelCase=Or,Ot.capitalize=Yo,Ot.clone=ho,Ot.cloneDeep=mo,Ot.deburr=Zo,Ot.endsWith=Qo,Ot.escape=Jo,Ot.escapeRegExp=Xo,Ot.every=zn,Ot.find=Xa,Ot.findIndex=qa,Ot.findKey=Ar,Ot.findLast=tr,Ot.findLastIndex=Ha,Ot.findLastKey=Lr,Ot.findWhere=qn,Ot.first=pn,Ot.get=Uo,Ot.has=Bo,Ot.identity=hs,Ot.includes=Hn,Ot.indexOf=gn,Ot.inRange=$o,Ot.isArguments=go,Ot.isArray=Ir,Ot.isBoolean=fo,Ot.isDate=bo,Ot.isElement=yo,Ot.isEmpty=vo,Ot.isEqual=wo,Ot.isError=So,Ot.isFinite=Cr,Ot.isFunction=Tr,Ot.isMatch=Io,Ot.isNaN=Co,Ot.isNative=To,Ot.isNull=_o,Ot.isNumber=ko,Ot.isObject=xo,Ot.isPlainObject=_r,Ot.isRegExp=Eo,Ot.isString=Ao,Ot.isTypedArray=Lo,Ot.isUndefined=Po,Ot.kebabCase=Fr,Ot.last=yn,Ot.lastIndexOf=vn,Ot.max=Kr,Ot.min=Yr,Ot.noConflict=bs,Ot.noop=ys,Ot.now=dr,Ot.pad=ts,Ot.padLeft=zr,Ot.padRight=jr,Ot.parseInt=es,Ot.random=Ko,Ot.reduce=rr,Ot.reduceRight=lr,Ot.repeat=is,Ot.result=jo,Ot.runInContext=S,Ot.size=Zn,Ot.snakeCase=qr,Ot.some=Qn,Ot.sortedIndex=Wa,Ot.sortedLastIndex=$a,Ot.startCase=Hr,Ot.startsWith=ns,Ot.sum=Ts,Ot.template=os,Ot.trim=ss,Ot.trimLeft=as,Ot.trimRight=rs,Ot.trunc=ls,Ot.unescape=cs,Ot.uniqueId=Is,Ot.words=ds,Ot.all=zn,Ot.any=Qn,Ot.contains=Hn,Ot.detect=Xa,Ot.foldl=rr,Ot.foldr=lr,Ot.head=pn,Ot.include=Hn,Ot.inject=rr,fs(Ot,function(){var t={};return Ae(Ot,function(e,i){Ot.prototype[i]||(t[i]=e)}),t}(),!1),Ot.sample=Kn,Ot.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return Kn(e,t)}):Kn(this.value())},Ot.VERSION=I,ne(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Ot[t].placeholder=Ot}),ne(["dropWhile","filter","map","takeWhile"],function(t,e){var i=e!=O,n=e==B;jt.prototype[t]=function(t,o){var s=this.__filtered__,a=s&&n?new jt(this):this.clone();return(a.__iteratees__||(a.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:Vi(t,o,1),limit:-1,type:e}),a.__filtered__=s||i,a}}),ne(["drop","take"],function(t,e){var i=t+"While";jt.prototype[t]=function(i){var n=this.__filtered__,o=n&&!e?this.dropWhile():this.clone();if(i=null==i?1:ha(Zs(i)||0,0),n)e?o.__takeCount__=ma(o.__takeCount__,i):yn(o.__iteratees__).limit=i;else{(o.__views__||(o.__views__=[])).push({size:i,type:t+(o.__dir__<0?"Right":"")})}return o},jt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()},jt.prototype[t+"RightWhile"]=function(t,e){return this.reverse()[i](t,e).reverse()}}),ne(["first","last"],function(t,e){var i="take"+(e?"Right":"");jt.prototype[t]=function(){return this[i](1).value()[0]}}),ne(["initial","rest"],function(t,e){var i="drop"+(e?"":"Right");jt.prototype[t]=function(){return this[i](1)}}),ne(["pluck","where"],function(t,e){var i=e?"filter":"map",n=e?Be:vs;jt.prototype[t]=function(t){return this[i](n(t))}}),jt.prototype.compact=function(){return this.filter(hs)},jt.prototype.reject=function(t,e){return t=Vi(t,e,1),this.filter(function(e){return!t(e)})},jt.prototype.slice=function(t,e){t=null==t?0:+t||0;var i=t<0?this.takeRight(-t):this.drop(t);return e!==x&&(e=+e||0,i=e<0?i.dropRight(-e):i.take(e-t)),i},jt.prototype.toArray=function(){return this.drop(0)},Ae(jt.prototype,function(t,e){var i=Ot[e];if(i){var n=/^(?:filter|map|reject)|While$/.test(e),o=/^(?:first|last)$/.test(e);Ot.prototype[e]=function(){var e=arguments,s=(e.length,this.__chain__),a=this.__wrapped__,r=!!this.__actions__.length,l=a instanceof jt,c=e[0],d=l||Ir(a);d&&n&&"function"==typeof c&&1!=c.length&&(l=d=!1);var u=l&&!r;if(o&&!s)return u?t.call(a):i.call(Ot,this.value());var p=function(t){var n=[t];return Xs.apply(n,e),i.apply(Ot,n)};if(d){var h=u?a:new jt(this),m=t.apply(h,e);if(!o&&(r||m.__actions__)){(m.__actions__||(m.__actions__=[])).push({func:Mn,args:[p],thisArg:Ot})}return new zt(m,s)}return this.thru(p)}}}),ne(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?Ns:Us)[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:join|pop|replace|shift)$/.test(t);Ot.prototype[t]=function(){var t=arguments;return n&&!this.__chain__?e.apply(this.value(),t):this[i](function(i){return e.apply(i,t)})}}),Ae(jt.prototype,function(t,e){var i=Ot[e];if(i){var n=i.name;(ka[n]||(ka[n]=[])).push({name:e,func:i})}}),ka[_i(null,T).name]=[{name:"wrapper",func:null}],jt.prototype.clone=qt,jt.prototype.reverse=Ht,jt.prototype.value=Gt,Ot.prototype.chain=Vn,Ot.prototype.commit=Un,Ot.prototype.plant=Bn,Ot.prototype.reverse=Nn,Ot.prototype.toString=On,Ot.prototype.run=Ot.prototype.toJSON=Ot.prototype.valueOf=Ot.prototype.value=Fn,Ot.prototype.collect=Ot.prototype.map,Ot.prototype.head=Ot.prototype.first,Ot.prototype.select=Ot.prototype.filter,Ot.prototype.tail=Ot.prototype.rest,Ot}var x,I="3.7.0",C=1,T=2,_=4,k=8,E=16,A=32,L=64,P=128,D=256,R=30,M="...",V=150,U=16,B=0,N=1,O=2,F="Expected a function",z="__lodash_placeholder__",j="[object Arguments]",q="[object Array]",H="[object Boolean]",G="[object Date]",W="[object Error]",$="[object Function]",K="[object Number]",Y="[object Object]",Z="[object RegExp]",Q="[object String]",J="[object ArrayBuffer]",X="[object Float32Array]",tt="[object Float64Array]",et="[object Int8Array]",it="[object Int16Array]",nt="[object Int32Array]",ot="[object Uint8Array]",st="[object Uint8ClampedArray]",at="[object Uint16Array]",rt="[object Uint32Array]",lt=/\b__p \+= '';/g,ct=/\b(__p \+=) '' \+/g,dt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ut=/&(?:amp|lt|gt|quot|#39|#96);/g,pt=/[&<>"'`]/g,ht=RegExp(ut.source),mt=RegExp(pt.source),gt=/<%-([\s\S]+?)%>/g,ft=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,yt=/\.|\[(?:[^[\]]+|(["'])(?:(?!\1)[^\n\\]|\\.)*?)\1\]/,vt=/^\w*$/,wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,St=/[.*+?^${}()|[\]\/\\]/g,xt=RegExp(St.source),It=/[\u0300-\u036f\ufe20-\ufe23]/g,Ct=/\\(\\)?/g,Tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_t=/\w*$/,kt=/^0[xX]/,Et=/^\[object .+?Constructor\]$/,At=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Lt=/($^)/,Pt=/['\n\r\u2028\u2029\\]/g,Dt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Rt=" \t\v\f \ufeff\n\r\u2028\u2029 ᠎             　",Mt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],Vt=-1,Ut={};Ut[X]=Ut[tt]=Ut[et]=Ut[it]=Ut[nt]=Ut[ot]=Ut[st]=Ut[at]=Ut[rt]=!0,Ut[j]=Ut[q]=Ut[J]=Ut[H]=Ut[G]=Ut[W]=Ut[$]=Ut["[object Map]"]=Ut[K]=Ut[Y]=Ut[Z]=Ut["[object Set]"]=Ut[Q]=Ut["[object WeakMap]"]=!1;var Bt={};Bt[j]=Bt[q]=Bt[J]=Bt[H]=Bt[G]=Bt[X]=Bt[tt]=Bt[et]=Bt[it]=Bt[nt]=Bt[K]=Bt[Y]=Bt[Z]=Bt[Q]=Bt[ot]=Bt[st]=Bt[at]=Bt[rt]=!0,Bt[W]=Bt[$]=Bt["[object Map]"]=Bt["[object Set]"]=Bt["[object WeakMap]"]=!1;var Nt={leading:!1,maxWait:0,trailing:!1},Ot={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Ft={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},zt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},jt={function:!0,object:!0},qt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=jt[typeof exports]&&exports&&!exports.nodeType&&exports,Gt=jt[typeof module]&&module&&!module.nodeType&&module,Wt=Ht&&Gt&&"object"==typeof global&&global&&global.Object&&global,$t=jt[typeof self]&&self&&self.Object&&self,Kt=jt[typeof window]&&window&&window.Object&&window,Yt=Gt&&Gt.exports===Ht&&Ht,Zt=Wt||Kt!==(this&&this.window)&&Kt||$t||this,Qt=S();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Zt._=Qt,define("lodash",[],function(){return Qt})):Ht&&Gt?Yt?(Gt.exports=Qt)._=Qt:Ht._=Qt:Zt._=Qt}).call(this),function(t,e){"function"==typeof define&&define.amd?define("common/util/inherits",[],e):t.inherits=e()}(this,function(){return"function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}),define("common/util/extends",["common/util/inherits","lodash"],function(t,e){return function(i,n,o){return t(i,n),i.prototype=e.extend(i.prototype,o),i}}),define("lib/ecmaScript5",[],function(){"bind"in Function.prototype||(Function.prototype.bind=function(t){var e=this;if(arguments.length<=1)return function(){return e.apply(t,arguments)};var i=Array.prototype.slice.call(arguments,1);return function(){return e.apply(t,0===arguments.length?i:i.concat(Array.prototype.slice.call(arguments)))}}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(t,e){void 0===e&&(e=0),e<0&&(e+=this.length),e<0&&(e=0);for(var i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(t,e){for(void 0===e&&(e=this.length-1),e<0&&(e+=this.length),e>this.length-1&&(e=this.length-1),e++;e-- >0;)if(e in this&&this[e]===t)return e;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(t,e){for(var i=0,n=this.length;i<n;i++)i in this&&t.call(e,this[i],i,this)}),"map"in Array.prototype||(Array.prototype.map=function(t,e){for(var i=new Array(this.length),n=0,o=this.length;n<o;n++)n in this&&(i[n]=t.call(e,this[n],n,this));return i}),"filter"in Array.prototype||(Array.prototype.filter=function(t,e){for(var i,n=[],o=0,s=this.length;o<s;o++)o in this&&t.call(e,i=this[o],o,this)&&n.push(i);return n}),"every"in Array.prototype||(Array.prototype.every=function(t,e){for(var i=0,n=this.length;i<n;i++)if(i in this&&!t.call(e,this[i],i,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=function(t,e){for(var i=0,n=this.length;i<n;i++)if(i in this&&t.call(e,this[i],i,this))return!0;return!1})}),define("lib/domReady",[],function(){"use strict";function t(t){var e;for(e=0;e<t.length;e+=1)t[e](c)}function e(){var e=d;l&&e.length&&(d=[],t(e))}function i(){l||(l=!0,a&&clearInterval(a),e())}function n(t){return l?t(c):d.push(t),n}var o,s,a,r="undefined"!=typeof window&&window.document,l=!r,c=r?document:null,d=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1);else if(window.attachEvent){window.attachEvent("onload",i),s=document.createElement("div");try{o=null===window.frameElement}catch(t){}s.doScroll&&o&&window.external&&(a=setInterval(function(){try{s.doScroll(),i()}catch(t){}},30))}"complete"===document.readyState&&i()}return n.version="2.0.1",n.load=function(t,e,i,o){o.isBuild?i(null):n(i)},n}),define("model/breakpoints",[],function(){return{0:{s:0,f:319},1:{s:320,f:399},2:{s:400,f:599},3:{s:600,f:1007},4:{s:1008,f:1e4}}}),function(t){function e(t,e,i,n,o){this._listener=e,this._isOnce=i,this.context=n,this._signal=t,this._priority=o||0}function i(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function n(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){n.prototype.dispatch.apply(t,arguments)}}e.prototype={active:!0,params:null,execute:function(t){var e,i;return this.active&&this._listener&&(i=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,i),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},n.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,i,n,o){var s,a=this._indexOfListener(t,n);if(-1!==a){if(s=this._bindings[a],s.isOnce()!==i)throw new Error("You cannot add"+(i?"":"Once")+"() then add"+(i?"Once":"")+"() the same listener without removing the relationship first.")}else s=new e(this,t,i,n,o),this._addBinding(s);return this.memorize&&this._prevParams&&s.execute(this._prevParams),s},_addBinding:function(t){var e=this._bindings.length;do{--e}while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var i,n=this._bindings.length;n--;)if(i=this._bindings[n],i._listener===t&&i.context===e)return n;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,n){return i(t,"add"),this._registerListener(t,!1,e,n)},addOnce:function(t,e,n){return i(t,"addOnce"),this._registerListener(t,!0,e,n)},remove:function(t,e){i(t,"remove");var n=this._indexOfListener(t,e);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,i=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=i),n){e=this._bindings.slice(),this._shouldPropagate=!0;do{n--}while(e[n]&&this._shouldPropagate&&!1!==e[n].execute(i))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var o=n;o.Signal=n,"function"==typeof define&&define.amd?define("signals",[],function(){return o}):"undefined"!=typeof module&&module.exports?module.exports=o:t.signals=o}(this);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("model/mediaQuery",["lib/ecmaScript5","lib/domReady","model/breakpoints","signals","orb/api"],function(t,e,i,n,o){return new function(){var t,s=!1,a=new n.Signal,r=function(){return window.innerWidth};this.init=function(){t=this.getGroup(),o.layout(this.checkGroup.bind(this))},this.checkGroup=function(){var e=this.getGroup();e!=this.getCurrentGroup()&&(t=e,a.dispatch(e))},this.subscribe=function(t,e){switch(t){case"groupChanged":a.add(e)}},this.getCurrentGroup=function(){return t},this.isMobileDevice=function(){return isMobileDevice()},this.isTablet=function(t){var e=this.getGroup();return 3==e&&!1===t||!(3!=e&&4!=e||!t)},this.getGroup=function(){if(this.isFixedWidthLayout())return 4;var t=r();for(var e in i)if(t>=i[e].s&&t<=i[e].f)return Number(e)},this.isCurrentGroupInPermittedGroupString=function(t){var e;return void 0===t||""===t||("number"==typeof t&&(t=t.toString()),e=t.split("_"),"object"!=(void 0===e?"undefined":_typeof(e))&&(e=[t]),void 0!==this.getGroup()&&"function"==typeof this.getGroup().toString&&-1!=e.indexOf(this.getGroup().toString()))},this.setFixedWidthLayout=function(t){s=t},this.isFixedWidthLayout=function(){return s},e(this.init.bind(this))}}),function(t){"use strict";var e={};e.VERSION="0.9.2";var i,n={},o=function(t,e){return function(){return e.apply(t,arguments)}},s=function(){var t,e,i=arguments,n=i[0];for(e=1;e<i.length;e++)for(t in i[e])t in n||!i[e].hasOwnProperty(t)||(n[t]=i[e][t]);return n},a=function(t,e){return{value:t,name:e}};e.DEBUG=a(1,"DEBUG"),e.INFO=a(2,"INFO"),e.WARN=a(4,"WARN"),e.ERROR=a(8,"ERROR"),e.OFF=a(99,"OFF");var r=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};r.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},debug:function(){this.invoke(e.DEBUG,arguments)},info:function(){this.invoke(e.INFO,arguments)},warn:function(){this.invoke(e.WARN,arguments)},error:function(){this.invoke(e.ERROR,arguments)},invoke:function(t,e){i&&this.enabledFor(t)&&i(e,s({level:t},this.context))}};var l=new r({filterLevel:e.OFF});!function(){var t=e;t.enabledFor=o(l,l.enabledFor),t.debug=o(l,l.debug),t.info=o(l,l.info),t.warn=o(l,l.warn),t.error=o(l,l.error),t.log=t.info}(),e.setHandler=function(t){i=t},e.setLevel=function(t){l.setLevel(t);for(var e in n)n.hasOwnProperty(e)&&n[e].setLevel(t)},e.get=function(t){return n[t]||(n[t]=new r(s({name:t},l.context)))},e.useDefaults=function(i){"console"in t&&(e.setLevel(i||e.DEBUG),e.setHandler(function(i,n){var o=t.console,s=o.log;n.name&&(i[0]="["+n.name+"] "+i[0]),n.level===e.WARN&&o.warn?s=o.warn:n.level===e.ERROR&&o.error?s=o.error:n.level===e.INFO&&o.info&&(s=o.info),"function"==typeof s&&s.apply(o,i)}))},"function"==typeof define&&define.amd?define("util/logger",e):"undefined"!=typeof module&&module.exports?module.exports=e:t.Logger=e}(window),define("model/dataModel",[],function(){function t(){}return t.prototype.init=function(t){this.setConfig(t)},t.prototype.setConfig=function(t){this.config=t},t.prototype.getData=function(){return this.data},t.prototype.setData=function(t){this.data=t},t.prototype.load=function(){},t}),define("model/pageData",["common/util/inherits","model/dataModel","signals"],function(t,e,i){function n(){this.updateSignal=new i.Signal,this.errorSignal=new i.Signal}return t(n,e),n.prototype.init=function(){this.setData({})},n.prototype.load=function(){var t={};void 0!==window.bespokePageData&&(t=window.bespokePageData),this.setData(t),this.updateSignal.dispatch(this,this.getData())},n.prototype.subscribe=function(t,e){switch(t){case"update":this.updateSignal.add(e);break;case"error":this.errorSignal.add(e)}},n}),define("model/digitalData",[],function(){return"undefined"!=typeof digitalData&&digitalData});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():"function"==typeof define&&define.amd?define("lib/spin",e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var i,n=document.createElement(t||"div");for(i in e)n[i]=e[i];return n}function e(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}function i(t,e,i,n){var o=["opacity",e,~~(100*t),i,n].join("-"),s=.01+i/n*100,a=Math.max(1-(1-t)/e*(100-s),t),r=l.substring(0,l.indexOf("Animation")).toLowerCase(),c=r&&"-"+r+"-"||"";return d[o]||(u.insertRule("@"+c+"keyframes "+o+"{0%{opacity:"+a+"}"+s+"%{opacity:"+t+"}"+(s+.01)+"%{opacity:1}"+(s+e)%100+"%{opacity:"+t+"}100%{opacity:"+a+"}}",u.cssRules.length),d[o]=1),o}function n(t,e){var i,n,o=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<c.length;n++)if(i=c[n]+e,void 0!==o[i])return i;if(void 0!==o[e])return e}function o(t,e){for(var i in e)t.style[n(t,i)||i]=e[i];return t}function s(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)void 0===t[n]&&(t[n]=i[n])}return t}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function r(t){this.opts=s(t||{},r.defaults,p)}var l,c=["webkit","Moz","ms","O"],d={},u=function(){var i=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};r.defaults={},s(r.prototype,{spin:function(e){this.stop();var i=this,n=i.opts,s=i.el=o(t(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex});n.radius,n.length,n.width;if(o(s,{left:n.left,top:n.top}),e&&e.insertBefore(s,e.firstChild||null),s.setAttribute("role","progressbar"),i.lines(s,i.opts),!l){var a,r=0,c=(n.lines-1)*(1-n.direction)/2,d=n.fps,u=d/n.speed,p=(1-n.opacity)/(u*n.trail/100),h=u/n.lines;!function t(){r++;for(var e=0;e<n.lines;e++)a=Math.max(1-(r+(n.lines-e)*h)%u*p,n.opacity),i.opacity(s,e*n.direction+c,a,n);i.timeout=i.el&&setTimeout(t,~~(1e3/d))}()}return i},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this
},lines:function(n,s){function r(e,i){return o(t(),{position:"absolute",width:s.length+s.width+"px",height:s.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/s.lines*d+s.rotate)+"deg) translate("+s.radius+"px,0)",borderRadius:(s.corners*s.width>>1)+"px"})}for(var c,d=0,u=(s.lines-1)*(1-s.direction)/2;d<s.lines;d++)c=o(t(),{position:"absolute",top:1+~(s.width/2)+"px",transform:s.hwaccel?"translate3d(0,0,0)":"",opacity:s.opacity,animation:l&&i(s.opacity,s.trail,u+d*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"}),s.shadow&&e(c,o(r("#000","0 0 4px #000"),{top:"2px"})),e(n,e(c,r(a(s.color,d),"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var h=o(t("group"),{behavior:"url(#default#VML)"});return!n(h,"transform")&&h.adj?function(){function i(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}u.addRule(".spin-vml","behavior:url(#default#VML)"),r.prototype.lines=function(t,n){function s(){return o(i("group",{coordsize:d+" "+d,coordorigin:-c+" "+-c}),{width:d,height:d})}function r(t,r,l){e(p,e(o(s(),{rotation:360/n.lines*t+"deg",left:~~r}),e(o(i("roundrect",{arcsize:n.corners}),{width:c,height:n.width,left:n.radius,top:-n.width>>1,filter:l}),i("fill",{color:a(n.color,t),opacity:n.opacity}),i("stroke",{opacity:0}))))}var l,c=n.length+n.width,d=2*c,u=2*-(n.width+n.length)+"px",p=o(s(),{position:"absolute",top:u,left:u});if(n.shadow)for(l=1;l<=n.lines;l++)r(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)r(l);return e(t,p)},r.prototype.opacity=function(t,e,i,n){var o=t.firstChild;n=n.shadow&&n.lines||0,o&&e+n<o.childNodes.length&&(o=o.childNodes[e+n],o=o&&o.firstChild,(o=o&&o.firstChild)&&(o.opacity=i))}}():l=n(h,"animation"),r}),define("module/loader",["lib/spin"],function(t){function e(t,e){this.spinner=null,this.init(t,e)}return e.prototype.init=function(e,i){var n={color:i,trail:10,shadow:!1,hwaccel:!0};this.spinner=new t(n).spin(e)},e.prototype.stop=function(){this.spinner.stop()},e.prototype.spin=function(t){this.spinner.spin(t)},e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hogan={};!function(t){function e(t,e,i){var n;return e&&"object"==(void 0===e?"undefined":_typeof(e))&&(void 0!==e[t]?n=e[t]:i&&e.get&&"function"==typeof e.get&&(n=e.get(t))),n}function i(t,e,i,n,o,s){function a(){}function r(){}a.prototype=t,r.prototype=t.subs;var l,c=new a;c.subs=new r,c.subsText={},c.buf="",n=n||{},c.stackSubs=n,c.subsText=s;for(l in e)n[l]||(n[l]=e[l]);for(l in n)c.subs[l]=n[l];o=o||{},c.stackPartials=o;for(l in i)o[l]||(o[l]=i[l]);for(l in o)c.partials[l]=o[l];return c}function n(t){return String(null===t||void 0===t?"":t)}function o(t){return t=n(t),d.test(t)?t.replace(s,"&amp;").replace(a,"&lt;").replace(r,"&gt;").replace(l,"&#39;").replace(c,"&quot;"):t}t.Template=function(t,e,i,n){t=t||{},this.r=t.code||this.r,this.c=i,this.options=n||{},this.text=e||"",this.partials=t.partials||{},this.subs=t.subs||{},this.buf=""},t.Template.prototype={r:function(t,e,i){return""},v:o,t:n,render:function(t,e,i){return this.ri([t],e||{},i)},ri:function(t,e,i){return this.r(t,e,i)},ep:function(t,e){var n=this.partials[t],o=e[n.name];if(n.instance&&n.base==o)return n.instance;if("string"==typeof o){if(!this.c)throw new Error("No compiler available.");o=this.c.compile(o,this.options)}if(!o)return null;if(this.partials[t].base=o,n.subs){e.stackText||(e.stackText={});for(key in n.subs)e.stackText[key]||(e.stackText[key]=void 0!==this.activeSub&&e.stackText[this.activeSub]?e.stackText[this.activeSub]:this.text);o=i(o,n.subs,n.partials,this.stackSubs,this.stackPartials,e.stackText)}return this.partials[t].instance=o,o},rp:function(t,e,i,n){var o=this.ep(t,i);return o?o.ri(e,i,n):""},rs:function(t,e,i){var n=t[t.length-1];if(!u(n))return void i(t,e,this);for(var o=0;o<n.length;o++)t.push(n[o]),i(t,e,this),t.pop()},s:function(t,e,i,n,o,s,a){var r;return(!u(t)||0!==t.length)&&("function"==typeof t&&(t=this.ms(t,e,i,n,o,s,a)),r=!!t,!n&&r&&e&&e.push("object"==(void 0===t?"undefined":_typeof(t))?t:e[e.length-1]),r)},d:function(t,i,n,o){var s,a=t.split("."),r=this.f(a[0],i,n,o),l=this.options.modelGet,c=null;if("."===t&&u(i[i.length-2]))r=i[i.length-1];else for(var d=1;d<a.length;d++)s=e(a[d],r,l),void 0!==s?(c=r,r=s):r="";return!(o&&!r)&&(o||"function"!=typeof r||(i.push(c),r=this.mv(r,i,n),i.pop()),r)},f:function(t,i,n,o){for(var s=!1,a=null,r=!1,l=this.options.modelGet,c=i.length-1;c>=0;c--)if(a=i[c],void 0!==(s=e(t,a,l))){r=!0;break}return r?(o||"function"!=typeof s||(s=this.mv(s,i,n)),s):!o&&""},ls:function(t,e,i,o,s){var a=this.options.delimiters;return this.options.delimiters=s,this.b(this.ct(n(t.call(e,o)),e,i)),this.options.delimiters=a,!1},ct:function(t,e,i){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(t,this.options).render(e,i)},b:function(t){this.buf+=t},fl:function(){var t=this.buf;return this.buf="",t},ms:function(t,e,i,n,o,s,a){var r,l=e[e.length-1],c=t.call(l);return"function"==typeof c?!!n||(r=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(c,l,i,r.substring(o,s),a)):c},mv:function(t,e,i){var o=e[e.length-1],s=t.call(o);return"function"==typeof s?this.ct(n(s.call(o)),o,i):s},sub:function(t,e,i,n){var o=this.subs[t];o&&(this.activeSub=t,o(e,i,this,n),this.activeSub=!1)}};var s=/&/g,a=/</g,r=/>/g,l=/\'/g,c=/\"/g,d=/[&<>\"\']/,u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}("undefined"!=typeof exports?exports:Hogan),function(t){function e(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function i(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function n(t,e,i){if(e.charAt(i)!=t.charAt(0))return!1;for(var n=1,o=t.length;n<o;n++)if(e.charAt(i+n)!=t.charAt(n))return!1;return!0}function o(e,i,n,r){var l=[],c=null,d=null,u=null;for(d=n[n.length-1];e.length>0;){if(u=e.shift(),d&&"<"==d.tag&&!(u.tag in S))throw new Error("Illegal content in < super tag.");if(t.tags[u.tag]<=t.tags.$||s(u,r))n.push(u),u.nodes=o(e,u.tag,n,r);else{if("/"==u.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+u.n);if(c=n.pop(),u.n!=c.n&&!a(u.n,c.n,r))throw new Error("Nesting error: "+c.n+" vs. "+u.n);return c.end=u.i,l}"\n"==u.tag&&(u.last=0==e.length||"\n"==e[0].tag)}l.push(u)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return l}function s(t,e){for(var i=0,n=e.length;i<n;i++)if(e[i].o==t.n)return t.tag="#",!0}function a(t,e,i){for(var n=0,o=i.length;n<o;n++)if(i[n].c==t&&i[n].o==e)return!0}function r(t){var e=[];for(var i in t)e.push('"'+c(i)+'": function(c,p,t,i) {'+t[i]+"}");return"{ "+e.join(",")+" }"}function l(t){var e=[];for(var i in t.partials)e.push('"'+c(i)+'":{name:"'+c(t.partials[i].name)+'", '+l(t.partials[i])+"}");return"partials: {"+e.join(",")+"}, subs: "+r(t.subs)}function c(t){return t.replace(y,"\\\\").replace(g,'\\"').replace(f,"\\n").replace(b,"\\r").replace(v,"\\u2028").replace(w,"\\u2029")}function d(t){return~t.indexOf(".")?"d":"f"}function u(t,e){var i="<"+(e.prefix||""),n=i+t.n+x++;return e.partials[n]={name:t.n,partials:{}},e.code+='t.b(t.rp("'+c(n)+'",c,p,"'+(t.indent||"")+'"));',n}function p(t,e){e.code+="t.b(t.t(t."+d(t.n)+'("'+c(t.n)+'",c,p,0)));'}function h(t){return"t.b("+t+");"}var m=/\S/,g=/\"/g,f=/\n/g,b=/\r/g,y=/\\/g,v=/\u2028/,w=/\u2029/;t.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},t.scan=function(o,s){function a(){h.length>0&&(g.push({tag:"_t",text:new String(h)}),h="")}function r(){for(var e=!0,i=y;i<g.length;i++)if(!(e=t.tags[g[i].tag]<t.tags._v||"_t"==g[i].tag&&null===g[i].text.match(m)))return!1;return e}function l(t,e){if(a(),t&&r())for(var i,n=y;n<g.length;n++)g[n].text&&((i=g[n+1])&&">"==i.tag&&(i.indent=g[n].text.toString()),g.splice(n,1));else e||g.push({tag:"\n"});f=!1,y=g.length}var c=o.length,d=0,u=null,p=null,h="",g=[],f=!1,b=0,y=0,v="{{",w="}}";for(s&&(s=s.split(" "),v=s[0],w=s[1]),b=0;b<c;b++)0==d?n(v,o,b)?(--b,a(),d=1):"\n"==o.charAt(b)?l(f):h+=o.charAt(b):1==d?(b+=v.length-1,p=t.tags[o.charAt(b+1)],u=p?o.charAt(b+1):"_v","="==u?(b=function(t,e){var n="="+w,o=t.indexOf(n,e),s=i(t.substring(t.indexOf("=",e)+1,o)).split(" ");return v=s[0],w=s[s.length-1],o+n.length-1}(o,b),d=0):(p&&b++,d=2),f=b):n(w,o,b)?(g.push({tag:u,n:i(h),otag:v,ctag:w,i:"/"==u?f-v.length:b+w.length}),h="",b+=w.length-1,d=0,"{"==u&&("}}"==w?b++:e(g[g.length-1]))):h+=o.charAt(b);return l(f,!0),g};var S={_t:!0,"\n":!0,$:!0,"/":!0};t.stringify=function(e,i,n){return"{code: function (c,p,i) { "+t.wrapMain(e.code)+" },"+l(e)+"}"};var x=0;t.generate=function(e,i,n){x=0;var o={code:"",subs:{},partials:{}};return t.walk(e,o),n.asString?this.stringify(o,i,n):this.makeTemplate(o,i,n)},t.wrapMain=function(t){return'var t=this;t.b(i=i||"");'+t+"return t.fl();"},t.template=t.Template,t.makeTemplate=function(t,e,i){var n=this.makePartials(t);return n.code=new Function("c","p","i",this.wrapMain(t.code)),new this.template(n,e,this,i)},t.makePartials=function(t){var e,i={subs:{},partials:t.partials,name:t.name};for(e in i.partials)i.partials[e]=this.makePartials(i.partials[e]);for(e in t.subs)i.subs[e]=new Function("c","p","t","i",t.subs[e]);return i},t.codegen={"#":function(e,i){i.code+="if(t.s(t."+d(e.n)+'("'+c(e.n)+'",c,p,1),c,p,0,'+e.i+","+e.end+',"'+e.otag+" "+e.ctag+'")){t.rs(c,p,function(c,p,t){',t.walk(e.nodes,i),i.code+="});c.pop();}"},"^":function(e,i){i.code+="if(!t.s(t."+d(e.n)+'("'+c(e.n)+'",c,p,1),c,p,1,0,0,"")){',t.walk(e.nodes,i),i.code+="};"},">":u,"<":function(e,i){var n={partials:{},code:"",subs:{},inPartial:!0};t.walk(e.nodes,n);var o=i.partials[u(e,i)];o.subs=n.subs,o.partials=n.partials},$:function(e,i){var n={subs:{},code:"",partials:i.partials,prefix:e.n};t.walk(e.nodes,n),i.subs[e.n]=n.code,i.inPartial||(i.code+='t.sub("'+c(e.n)+'",c,p,i);')},"\n":function(t,e){e.code+=h('"\\n"'+(t.last?"":" + i"))},_v:function(t,e){e.code+="t.b(t.v(t."+d(t.n)+'("'+c(t.n)+'",c,p,0)));'},_t:function(t,e){e.code+=h('"'+c(t.text)+'"')},"{":p,"&":p},t.walk=function(e,i){for(var n,o=0,s=e.length;o<s;o++)(n=t.codegen[e[o].tag])&&n(e[o],i);return i},t.parse=function(t,e,i){return i=i||{},o(t,"",[],i.sectionTags||[])},t.cache={},t.cacheKey=function(t,e){return[t,!!e.asString,!!e.disableLambda,e.delimiters,!!e.modelGet].join("||")},t.compile=function(e,i){i=i||{};var n=t.cacheKey(e,i),o=this.cache[n];if(o){var s=o.partials;for(var a in s)delete s[a].instance;return o}return o=this.generate(this.parse(this.scan(e,i.delimiters),e,i),e,i),this.cache[n]=o}}("undefined"!=typeof exports?exports:Hogan),"function"==typeof define&&define.amd&&define("hogan",Hogan),define("templates",["hogan"],function(t){var e={"ad-slot-adsense-all":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.adsense_mpu",t,e,1),t,e,0,46,72,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<wrapped-mpu0",t,e,"        "))}),t.pop()),n.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-deferred":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<div "),n.b("\n"+i),n.b("    data-bbccom-advert-deferred "),n.b("\n"+i),n.b('    data-bbccom-advert-id="'),n.b(n.v(n.f("id",t,e,0))),n.b('"'),n.b("\n"+i),n.b('    data-bbccom-advert-groups="'),n.b(n.v(n.f("groups",t,e,0))),n.b('"></div>'),n.fl()},partials:{},subs:{}}),"ad-slot-ibroadcast-image-gallery":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="ad-slot-overlay" class="ad-slot-overlay">'),n.b("\n"+i),n.s(n.f("mpu",t,e,1),t,e,0,63,93,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<wrapped-mpu0",t,e,"        "))}),t.pop()),n.b("    <p>Click cross to continue slideshow</p>"),n.b("\n"+i),n.b('    <span class="close-gallery gelicon gelicon--no"></span>'),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-infeed":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.infeed",t,e,1),t,e,0,41,60,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}}),"ad-slot-infinite-mpu":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="mpu-wrapper">'),n.b("\n"+i),n.b(n.rp("<ad-slot-infinite0",t,e,"    ")),n.b("</div> "),n.fl()},partials:{"<ad-slot-infinite0":{name:"ad-slot-infinite",partials:{},subs:{}}},subs:{}}),"ad-slot-infinite-sponsor-section-content":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.sponsor-section-content",t,e,1),t,e,0,58,99,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot-infinite-sponsor-section0",t,e,""))}),t.pop()),n.fl()},partials:{"<ad-slot-infinite-sponsor-section0":{name:"ad-slot-infinite-sponsor-section",partials:{},subs:{}}},subs:{}}),"ad-slot-infinite-sponsor-section-storyworks":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.sponsor-section-storyworks",t,e,1),t,e,0,61,102,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot-infinite-sponsor-section0",t,e,""))}),t.pop()),n.fl()},partials:{"<ad-slot-infinite-sponsor-section0":{name:"ad-slot-infinite-sponsor-section",partials:{},subs:{}}},subs:{}}),"ad-slot-infinite-sponsor-section":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div data-bbccom-infinite-advert="sponsor_section" data-bbccom-infinite-advert-text="'),n.b(n.v(n.f("text",t,e,0))),n.b('">'),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"ad-slot-infinite":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="bbccom_'),n.b(n.v(n.f("id",t,e,0))),n.b("_"),n.b(n.v(n.f("groups",t,e,0))),n.b('" data-advert-groups="'),n.b(n.v(n.f("groups",t,e,0))),n.b('" class="bbccom_slot '),n.b(n.v(n.f("slot-class",t,e,0))),n.b('" aria-hidden="true">'),n.b("\n"+i),n.b('    <div class="bbccom_advert"></div>'),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"ad-slot-leaderboard-deferred":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.leaderboard",t,e,1),t,e,0,46,73,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot-deferred0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<ad-slot-deferred0":{name:"ad-slot-deferred",partials:{},subs:{}}},subs:{}}),"ad-slot-leaderboard-primary":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.leaderboard-1_2_3",t,e,1),t,e,0,52,71,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}}),"ad-slot-leaderboard-secondary":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.leaderboard-4",t,e,1),t,e,0,48,67,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}}),"ad-slot-leaderboard":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.leaderboard",t,e,1),t,e,0,46,65,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}}),"ad-slot-mpu-bottom-deferred":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.mpu_bottom",t,e,1),t,e,0,45,76,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<wrapped-mpu-deferred0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<wrapped-mpu-deferred0":{name:"wrapped-mpu-deferred",partials:{},subs:{}}},subs:{}}),"ad-slot-mpu-bottom":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.mpu_bottom",t,e,1),t,e,0,45,71,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<wrapped-mpu0",t,e,"        "))}),t.pop()),n.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-mpu-primary":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.mpu-1_2_3",t,e,1),t,e,0,44,70,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<wrapped-mpu0",t,e,"        "))}),t.pop()),n.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-mpu-secondary":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.mpu-4",t,e,1),t,e,0,40,66,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<wrapped-mpu0",t,e,"        "))}),t.pop()),n.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-native-side":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.native_side",t,e,1),t,e,0,46,68,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<wrapped-mpu0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-parallax":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("\n"+i),n.s(n.d("meta-data.advertising.adSlots.parallax",t,e,1),t,e,0,44,117,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div class="parallax-slot-wrapper">'),n.b("\n"+i),n.b(n.rp("<ad-slot0",t,e,"        ")),n.b("    </div>"),n.b("\n"+i)}),t.pop()),n.b("\n"),n.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}}),"ad-slot-promo-feature-2":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.promo_feature_2",t,e,1),t,e,0,50,72,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<wrapped-mpu0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-promo-feature-3":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.promo_feature_3",t,e,1),t,e,0,50,72,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<wrapped-mpu0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-sponsor-fake":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div data-advert-groups="'),n.b(n.v(n.f("groups",t,e,0))),n.b('" class="bbccom_slot bbccom_sponsor_section_slot bbccom_visible slot-visible-'),n.b(n.v(n.f("groups",t,e,0))),n.b('" aria-hidden="true" id="bbccom_sponsor_section_fake">'),n.b("\n"+i),n.b('    <div class="bbccom_advert " id="bbccom_sponsor_section">'),n.b("\n"+i),n.b('        <a class="bbccom_text" href="http://advertising.bbcworldwide.com/home/advertisewithus/bbc-storyworks-content" tabindex="-1">Partnered Content Presented By</a>'),n.b("\n"+i),n.b('        <div id="sponsor_section_ad_container">'),n.b("\n"+i),n.b('            <a href="'),n.b(n.v(n.f("replace-url",t,e,0))),n.b('">'),n.b("\n"+i),n.b(n.rp("<responsive-image-tag0",t,e,"                ")),n.b("            </a>"),n.b("\n"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}}},subs:{}}),"ad-slot-sponsor-section-primary":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.sponsor-section-content",t,e,1),t,e,0,58,152,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot0",t,e,"    ")),i.s(i.f("promo-module",t,e,1),t,e,0,98,134,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<attribution-slot1",t,e,"        "))}),t.pop())}),t.pop()),n.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}},"<attribution-slot1":{name:"attribution-slot",partials:{},subs:{}}},subs:{}}),"ad-slot-sponsor-section-storyworks-deferred":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.sponsor-section-storyworks",t,e,1),t,e,0,61,90,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot-deferred0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<ad-slot-deferred0":{name:"ad-slot-deferred",partials:{},subs:{}}},subs:{}}),"ad-slot-sponsor-section-storyworks":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.sponsor-section-storyworks",t,e,1),t,e,0,61,80,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}}),"ad-slot-vertical-navbar":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.verticalnavbar",t,e,1),t,e,0,49,68,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}}),"ad-slot":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("deferred",t,e,1),t,e,1,0,0,"")||(n.b("<div "),n.s(n.f("async",t,e,1),t,e,0,29,58,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('id="bbccom_'),i.b(i.v(i.f("id",t,e,0))),i.b("_"),i.b(i.v(i.f("groups",t,e,0))),i.b('"')}),t.pop()),n.s(n.f("async",t,e,1),t,e,1,0,0,"")||(n.b('data-advert-groups="'),n.b(n.v(n.f("groups",t,e,0))),n.b('"')),n.b("\n"+i),n.b('     class="bbccom_slot" aria-hidden="true">'),n.b("\n"+i),n.b('    <div class="bbccom_advert'),n.s(n.f("async",t,e,1),t,e,1,0,0,"")||n.b(" bbccom_display_none"),n.b('">'),n.b("\n"+i),n.b('        <script type="text/javascript">'),n.b("\n"+i),n.b("            /*<![CDATA[*/"),n.b("\n"+i),n.s(n.f("text",t,e,1),t,e,0,328,552,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("                if (window.bbcdotcom && bbcdotcom.slot"),n.s(n.f("async",t,e,1),t,e,0,393,398,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("Async")}),t.pop()),n.b(") {"),n.b("\n"+i),n.b("                    bbcdotcom.slot"),n.s(n.f("async",t,e,1),t,e,0,456,461,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("Async")}),t.pop()),n.b("('"),n.b(n.v(n.f("id",t,e,0))),n.b("', "),n.b(n.v(n.f("jsonGroups",t,e,0))),n.b(", false, '"),n.b(n.v(n.f("text",t,e,0))),n.b("');"),n.b("\n"+i),n.b("                }"),n.b("\n"+i)}),t.pop()),n.s(n.f("text",t,e,1),t,e,1,0,0,"")||(n.b("                if (window.bbcdotcom && bbcdotcom.slot"),n.s(n.f("async",t,e,1),t,e,0,652,657,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("Async")}),t.pop()),n.b(") {"),n.b("\n"+i),n.b("                    bbcdotcom.slot"),n.s(n.f("async",t,e,1),t,e,0,715,720,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("Async")}),t.pop()),n.b("('"),n.b(n.v(n.f("id",t,e,0))),n.b("', "),n.b(n.v(n.f("jsonGroups",t,e,0))),n.b(");"),n.b("\n"+i),n.b("                }"),n.b("\n"+i)),n.b("            /*]]>*/"),n.b("\n"+i),n.b("        <\/script>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.s(n.f("async",t,e,1),t,e,1,0,0,"")||(n.b('        <script type="text/javascript">'),n.b("\n"+i),n.b("            /*<![CDATA[*/"),n.b("\n"+i),n.b("            if (window.bbcdotcom && bbcdotcom.show) {"),n.b("\n"+i),n.b("                bbcdotcom.show()"),n.b("\n"+i),n.b("            }"),n.b("\n"+i),n.b("            /*]]>*/"),n.b("\n"+i),n.b("        <\/script>"),n.b("\n"+i)),n.b("</div>"),n.b("\n"+i)),n.fl()},partials:{},subs:{}}),"analytics-element-metadata":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("element-id",t,e,1),t,e,0,15,43,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-id="'),i.b(i.v(i.f("element-id",t,e,0))),i.b('" ')}),t.pop()),n.b("\n"+i),n.s(n.f("event",t,e,1),t,e,0,69,95,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-event="'),i.b(i.v(i.f("event",t,e,0))),i.b('" ')}),t.pop()),n.b("\n"+i),n.s(n.f("channel-name",t,e,1),t,e,0,123,163,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-channel-name="'),i.b(i.v(i.f("channel-name",t,e,0))),i.b('" ')}),t.pop()),n.b("\n"+i),n.s(n.f("channel-location",t,e,1),t,e,0,202,250,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-channel-location="'),i.b(i.v(i.f("channel-location",t,e,0))),i.b('" ')}),t.pop()),n.b("\n"+i),n.s(n.f("element-name",t,e,1),t,e,0,289,329,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-element-name="'),i.b(i.v(i.f("element-name",t,e,0))),i.b('" ')}),t.pop()),n.b("\n"+i),n.s(n.f("element-type",t,e,1),t,e,0,364,404,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-element-type="'),i.b(i.v(i.f("element-type",t,e,0))),i.b('" ')}),t.pop()),n.b("\n"+i),n.s(n.f("element-position",t,e,1),t,e,0,443,491,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-element-position="'),i.b(i.v(i.f("element-position",t,e,0))),i.b('" ')}),t.pop()),n.b("\n"+i),n.s(n.f("total-element-count",t,e,1),t,e,0,537,591,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-total-element-count="'),i.b(i.v(i.f("total-element-count",t,e,0))),i.b('" ')}),t.pop()),n.b("\n"+i),n.s(n.f("additional-data",t,e,1),t,e,0,636,682,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-additional-data="'),i.b(i.v(i.f("additional-data",t,e,0))),i.b('" ')}),t.pop()),n.b("\n"+i),n.s(n.f("section",t,e,1),t,e,0,715,745,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-section="'),i.b(i.v(i.f("section",t,e,0))),i.b('" ')}),t.pop()),n.b("\n"+i),n.s(n.f("page-type",t,e,1),t,e,0,772,806,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-page-type="'),i.b(i.v(i.f("page-type",t,e,0))),i.b('" ')}),t.pop()),n.b("\n"+i),n.s(n.f("interaction-type",t,e,1),t,e,0,842,890,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-interaction-type="'),i.b(i.v(i.f("interaction-type",t,e,0))),i.b('" ')}),t.pop()),n.b("\n"+i),n.s(n.f("tracking-method",t,e,1),t,e,0,932,978,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-tracking-method="'),i.b(i.v(i.f("tracking-method",t,e,0))),i.b('" ')}),t.pop()),n.fl()},partials:{},subs:{}}),"analytics-module-metadata":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("module",t,e,1),t,e,0,11,39,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-cs-module="'),i.b(i.v(i.f("module",t,e,0))),i.b('" ')}),t.pop()),n.fl()},partials:{},subs:{}}),"anchor-capable-element-end":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("url",t,e,1),t,e,0,8,18,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("    </a>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{},subs:{}}),"anchor-capable-element-start":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("url",t,e,1),t,e,0,8,126,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,62,93,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{}}),"anchor-tag":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<a  href="'),n.b(n.v(n.f("link",t,e,0))),n.b('">'),n.b(n.v(n.f("text",t,e,0))),n.b("</a>"),n.fl()},partials:{},subs:{}}),"around-the-bbc-footer":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="extra-footer" class="extra-footer" class="clearfix">'),n.b("\n"+i),n.b('    <div class="page-component-wrapper">'),n.b("\n"+i),n.b('        <div id="around-bbc" class="component-placeholder around-the-bbc"></div>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"article-image":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("use-image-tag",t,e,1),t,e,0,18,296,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('<a class="responsive-image-wrapper '),n.b(n.v(n.f("additional-wrapper-class",t,e,0))),n.b('" href="'),n.b(n.v(n.f("replace-url",t,e,0))),n.b('" title="View '),n.b(n.v(n.f("caption",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,163,194,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b(n.rp("<responsive-image-tag1",t,e,"    ")),n.b(n.rp("<responsive-image-overlay2",t,e,"    ")),n.b("</a>"),n.b("\n"+i)}),t.pop()),n.s(n.f("use-image-tag",t,e,1),t,e,1,0,0,"")||n.b(n.rp("<responsive-image-data-element-with-icon3",t,e,"")),n.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-overlay2":{name:"responsive-image-overlay",partials:{},subs:{}},"<responsive-image-data-element-with-icon3":{name:"responsive-image-data-element-with-icon",partials:{},subs:{}}},subs:{}}),"third-party-content-container":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<div "),n.s(n.f("id",t,e,1),t,e,0,12,23,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('id="'),i.b(i.v(i.f("id",t,e,0))),i.b('"')}),t.pop()),n.b(' class="third-party-content">'),n.b("\n"+i),n.b('    <iframe data-tpc="frame" class="third-party-content__frame" src="'),n.b(n.v(n.f("iFrameURL",t,e,0))),n.b('" scrolling="no" frameborder="0" seamless height="'),n.b(n.v(n.f("defaultIframeHeight",t,e,0))),n.b('">'),n.b("\n"+i),n.b("    </iframe>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"attribution-slot":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sponsor-attribution slot-visible-'),n.b(n.v(n.f("groups",t,e,0))),n.b('">'),n.b("\n"+i),n.b('    <a class="sponsor-attribution__sponsor-link" href="http://advertising.bbcworldwide.com/home/advertisewithus/bbc-storyworks-content" tabindex="-1">Partnered Content Presented By</a>'),n.b("\n"+i),n.b('    <div class="sponsor-attribution__partner-name">'),n.b("\n"+i),n.b("        "),n.b(n.v(n.f("clientName",t,e,0))),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),banner:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="banner-'),n.b(n.v(n.f("id",t,e,0))),n.b('" class="responsive-banner '),n.b(n.v(n.f("class",t,e,0))),n.b('">'),n.b("\n"+i),n.b('    <div class="responsive-banner-wrapper">'),n.b("\n"+i),n.b(n.rp("<anchor-capable-element-start0",t,e,"        ")),n.b('            <div class="responsive-banner__image-wrapper responsive-banner__image-wrapper--mobile">'),n.b("\n"+i),n.s(n.f("imageMobile",t,e,1),t,e,0,279,549,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.s(n.f("banner-full",t,e,1),t,e,0,316,516,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                        <div class="responsive-banner__image responsive-banner__image--full">'),n.b("\n"+i),n.b(n.rp("<responsive-image-tag1",t,e,"                            ")),n.b("                        </div>"),n.b("\n"+i)}),t.pop())}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.s(n.f("imageTablet",t,e,1),t,e,0,613,1006,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <div class="responsive-banner__image-wrapper responsive-banner__image-wrapper--tablet">'),n.b("\n"+i),n.s(n.f("banner-full",t,e,1),t,e,0,754,954,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                        <div class="responsive-banner__image responsive-banner__image--full">'),n.b("\n"+i),n.b(n.rp("<responsive-image-tag2",t,e,"                            ")),n.b("                        </div>"),n.b("\n"+i)}),t.pop()),n.b("                </div>"),n.b("\n"+i)}),t.pop()),n.s(n.f("imageDesktop",t,e,1),t,e,0,1052,1941,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <div class="responsive-banner__image-wrapper responsive-banner__image-wrapper--desktop">'),n.b("\n"+i),n.s(n.f("banner-full",t,e,1),t,e,0,1194,1394,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                        <div class="responsive-banner__image responsive-banner__image--full">'),n.b("\n"+i),
n.b(n.rp("<responsive-image-tag3",t,e,"                            ")),n.b("                        </div>"),n.b("\n"+i)}),t.pop()),n.s(n.f("banner-1",t,e,1),t,e,0,1444,1644,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                        <div class="responsive-banner__image responsive-banner__image--left">'),n.b("\n"+i),n.b(n.rp("<responsive-image-tag4",t,e,"                            ")),n.b("                        </div>"),n.b("\n"+i)}),t.pop()),n.s(n.f("banner-2",t,e,1),t,e,0,1691,1892,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                        <div class="responsive-banner__image responsive-banner__image--right">'),n.b("\n"+i),n.b(n.rp("<responsive-image-tag5",t,e,"                            ")),n.b("                        </div>"),n.b("\n"+i)}),t.pop()),n.b("                </div>"),n.b("\n"+i)}),t.pop()),n.b(n.rp("<anchor-capable-element-end6",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<anchor-capable-element-start0":{name:"anchor-capable-element-start",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-tag2":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-tag3":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-tag4":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-tag5":{name:"responsive-image-tag",partials:{},subs:{}},"<anchor-capable-element-end6":{name:"anchor-capable-element-end",partials:{},subs:{}}},subs:{}}),"irregular-images-promo-unit":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("ad-slot",t,e,1),t,e,0,12,89,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div class="promo-unit-wrapper advert">'),n.b("\n"+i),n.b(n.rp("<ad-slot0",t,e,"        ")),n.b("    </div>"),n.b("\n"+i)}),t.pop()),n.s(n.f("ad-slot",t,e,1),t,e,1,0,0,"")||(n.b('    <div class="promo-unit-wrapper">'),n.b("\n"+i),n.b("        <article>"),n.b("\n"+i),n.b('        <div class="promo-unit-overlay"></div>'),n.b("\n"+i),n.b(n.rp("<promo-unit1",t,e,"         ")),n.b("        </article>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i)),n.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}},"<promo-unit1":{name:"promo-unit",partials:{},subs:{}}},subs:{}}),"irregular-images":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<headed-section-start0",t,e,"")),n.b('   <div class="best-of-module best-of-irregular-images" '),n.s(n.f("analytics-module-metadata",t,e,1),t,e,0,112,142,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-module-metadata1",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.s(n.f("promo-group",t,e,1),t,e,0,197,1151,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('          <div class="article-list '),n.s(n.f("class",t,e,1),t,e,0,243,265,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("article-list-"),i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b(" "),n.b(n.v(n.f("additional-class",t,e,0))),n.b('">'),n.b("\n"+i),n.b('            <div class="irregular-promo-unit-wrapper irregular-promo-unit-wrapper-first">'),n.b("\n"+i),n.s(n.f("item-one",t,e,1),t,e,0,414,474,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<irregular-images-promo-unit2",t,e,"              "))}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.b('            <div class="irregular-promo-unit-wrapper irregular-promo-unit-wrapper-middle">'),n.b("\n"+i),n.s(n.f("item-two",t,e,1),t,e,0,623,683,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<irregular-images-promo-unit3",t,e,"              "))}),t.pop()),n.s(n.f("item-three",t,e,1),t,e,0,724,784,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<irregular-images-promo-unit4",t,e,"              "))}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.b('            <div class="irregular-promo-unit-wrapper irregular-promo-unit-wrapper-last">'),n.b("\n"+i),n.s(n.f("item-four",t,e,1),t,e,0,934,994,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<irregular-images-promo-unit5",t,e,"              "))}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.b("            "),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,1,0,0,"")||n.b(n.rp("<empty-list-notice6",t,e,"                ")),n.b("          </div>"),n.b("\n"+i)}),t.pop()),n.b("   </div>"),n.b("\n"+i),n.b(n.rp("<headed-section-end7",t,e,"")),n.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<analytics-module-metadata1":{name:"analytics-module-metadata",partials:{},subs:{}},"<irregular-images-promo-unit2":{name:"irregular-images-promo-unit",partials:{},subs:{}},"<irregular-images-promo-unit3":{name:"irregular-images-promo-unit",partials:{},subs:{}},"<irregular-images-promo-unit4":{name:"irregular-images-promo-unit",partials:{},subs:{}},"<irregular-images-promo-unit5":{name:"irregular-images-promo-unit",partials:{},subs:{}},"<empty-list-notice6":{name:"empty-list-notice",partials:{},subs:{}},"<headed-section-end7":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"calendar-promo":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("\x3c!--[if (gt IE 9)]>\x3c!--\x3e"),n.b("\n"+i),n.b('<div id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" class="headed-section headed-section-calendar-promo">'),n.b("\n"+i),n.b('    <div class="headed-section-lining">'),n.b("\n"+i),n.b(n.rp("<event-filter-header0",t,e,"        ")),n.b('        <div class="section-body">'),n.b("\n"+i),n.b('            <div class="headed-section-content">'),n.b("\n"+i),n.b(n.rp("<event-filter1",t,e,"                ")),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("\x3c!--<![endif]--\x3e"),n.fl()},partials:{"<event-filter-header0":{name:"event-filter-header",partials:{},subs:{}},"<event-filter1":{name:"event-filter",partials:{},subs:{}}},subs:{}}),"google-add-to-calendar":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("https://www.google.com/calendar/render?action=TEMPLATE&trp=true&text="),n.b(n.v(n.f("name",t,e,0))),n.b("&dates="),n.b(n.v(n.f("start_date",t,e,0))),n.b("/"),n.b(n.v(n.f("end_date",t,e,0))),n.b("&details="),n.b(n.v(n.f("description",t,e,0))),n.b("&location="),n.b(n.v(n.f("location",t,e,0))),n.b("&pli=1&uid=&sf=true&output=xml"),n.fl()},partials:{},subs:{}}),"ical-add-to-calendar":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("BEGIN:VCALENDAR"),n.b("\n"+i),n.b("VERSION:2.0"),n.b("\n"+i),n.b("PRODID:-"),n.b("\n"+i),n.b("BEGIN:VEVENT"),n.b("\n"+i),n.b("ORGANIZER;CN=Organizer\\, Organizer e-mail:MAILTO:Organizer e-mail"),n.b("\n"+i),n.b("DTSTART:"),n.b(n.v(n.f("start_date",t,e,0))),n.b("\n"+i),n.b("DTEND:"),n.b(n.v(n.f("end_date",t,e,0))),n.b("\n"+i),n.b("SUMMARY:"),n.b(n.v(n.f("name",t,e,0))),n.b("\n"+i),n.b("DESCRIPTION:"),n.b(n.v(n.f("description",t,e,0))),n.b("\n"+i),n.b("LOCATION:"),n.b(n.v(n.f("location",t,e,0))),n.b("\n"+i),n.b("END:VEVENT"),n.b("\n"+i),n.b("END:VCALENDAR"),n.fl()},partials:{},subs:{}}),"outlook-add-to-calendar":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("BEGIN:VCALENDAR"),n.b("\n"+i),n.b("VERSION:2.0"),n.b("\n"+i),n.b("BEGIN:VEVENT"),n.b("\n"+i),n.b("DTSTART:"),n.b(n.v(n.f("start_date",t,e,0))),n.b("T000000"),n.b("\n"+i),n.b("DTEND:"),n.b(n.v(n.f("end_date",t,e,0))),n.b("T000000"),n.b("\n"+i),n.b("SUMMARY:"),n.b(n.v(n.f("name",t,e,0))),n.b("\n"+i),n.b("DESCRIPTION:"),n.b(n.v(n.f("description",t,e,0))),n.b("\n"+i),n.b("LOCATION:"),n.b(n.v(n.f("location",t,e,0))),n.b("\n"+i),n.b("PRIORITY:3"),n.b("\n"+i),n.b("END:VEVENT"),n.b("\n"+i),n.b("END:VCALENDAR"),n.fl()},partials:{},subs:{}}),"yahoo-add-to-calendar":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("http://calendar.yahoo.com/?v=60&view=d&type=20&title="),n.b(n.v(n.f("name",t,e,0))),n.b("&st="),n.b(n.v(n.f("start_date",t,e,0))),n.b("&dur=0000&desc="),n.b(n.v(n.f("description",t,e,0))),n.b("&in_loc="),n.b(n.v(n.f("location",t,e,0))),n.fl()},partials:{},subs:{}}),"callout-box":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("\x3c!-- callout-box start --\x3e"),n.b("\n"+i),n.b('<div class="callout-box">'),n.b("\n"+i),n.b('    <div class="content">'),n.b("\n"+i),n.b('        <div class="callout-box-head">'),n.b("\n"+i),n.s(n.f("title",t,e,1),t,e,0,140,212,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <p class="callout-box-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</p>"),n.b("\n"+i)}),t.pop()),n.s(n.f("subtitle",t,e,1),t,e,0,248,326,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <p class="callout-box-subtitle">'),n.b(n.v(n.f("subtitle",t,e,0))),n.b("</p>"),n.b("\n"+i)}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b('        <div class="callout-box-body">'),n.b("\n"+i),n.b("            "),n.b(n.t(n.f("body",t,e,0))),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i),n.b("\x3c!-- callout-box end --\x3e"),n.fl()},partials:{},subs:{}}),caption:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("caption",t,e,1),t,e,0,12,279,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('<div class="caption-wrapper">'),n.b("\n"+i),n.b('    <div class="caption-lining">'),n.b("\n"+i),n.s(n.f("caption-title",t,e,1),t,e,0,102,179,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <p class="caption-text caption-title">'),n.b(n.v(n.f("caption-title",t,e,0))),n.b("</p>"),n.b("\n"+i)}),t.pop()),n.b('        <p class="caption-text caption-body">'),n.b(n.t(n.f("caption",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{},subs:{}}),column:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("hero-unit",t,e,1),t,e,0,14,34,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<hero-unit0",t,e,"    "))}),t.pop()),n.b("\n"),n.fl()},partials:{"<hero-unit0":{name:"hero-unit",partials:{},subs:{}}},subs:{}}),"context-heading":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("hasContext",t,e,1),t,e,0,15,685,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('<ul class="seperated-list context-heading-list">'),n.b("\n"+i),n.s(n.f("contextItems",t,e,1),t,e,0,86,661,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <li class="seperated-list-item">'),n.b("\n"+i),n.s(n.f("isItemCollection",t,e,1),t,e,0,161,519,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <ul class="seperated-list context-heading-sublist '),n.s(n.f("class",t,e,1),t,e,0,238,271,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("context-heading-sublist-"),i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.s(n.f("subItems",t,e,1),t,e,0,317,471,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                        <li class="seperated-list-item">'),n.b("\n"+i),n.b(n.rp("<context-item0",t,e,"                            ")),n.b("                        </li>"),n.b("\n"+i)}),t.pop()),n.b("                </ul>"),n.b("\n"+i)}),t.pop()),n.s(n.f("isItemCollection",t,e,1),t,e,1,0,0,"")||n.b(n.rp("<context-item1",t,e,"                ")),n.b("        </li>"),n.b("\n"+i)}),t.pop()),n.b("</ul>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{"<context-item0":{name:"context-item",partials:{},subs:{}},"<context-item1":{name:"context-item",partials:{},subs:{}}},subs:{}}),"context-item":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("context",t,e,1),t,e,0,12,356,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <span class="'),n.s(n.f("context-class",t,e,1),t,e,0,48,65,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("context-class",t,e,0)))}),t.pop()),n.s(n.f("context-class",t,e,1),t,e,1,0,0,"")||n.b("context-heading"),n.b('">'),n.b("\n"+i),n.s(n.f("context-url",t,e,1),t,e,0,163,253,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <a href="'),n.b(n.v(n.f("context-url",t,e,0))),n.b('" title="View '),n.b(n.v(n.f("context",t,e,0))),n.b('">  '),n.b(n.v(n.f("context",t,e,0))),n.b("</a>"),n.b("\n"+i)}),t.pop()),n.s(n.f("context-url",t,e,1),t,e,1,0,0,"")||(n.b("            "),n.b(n.v(n.f("context",t,e,0))),n.b("\n"+i)),n.b("    </span>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{},subs:{}}),"custom-embed":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="custom-embed">'),n.b("\n"+i),n.b('    <div id="custom-embed-content">'),n.b("\n"+i),n.b("        "),n.b(n.t(n.f("embedCode",t,e,0))),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),date:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="date-item '),n.s(n.f("class",t,e,1),t,e,0,32,51,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("date-item-"),i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.s(n.f("date",t,e,1),t,e,0,77,174,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <div class="date-item-day-of-month"><p class="date-item-content">'),n.b(n.v(n.f("date",t,e,0))),n.b("</p></div>"),n.b("\n"+i)}),t.pop()),n.s(n.f("month",t,e,1),t,e,0,198,289,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <div class="date-item-month"><p class="date-item-content">'),n.b(n.v(n.f("month",t,e,0))),n.b("</p></div>"),n.b("\n"+i)}),t.pop()),n.b("</div>"),n.fl()},partials:{},subs:{}}),"destination-link":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="destination-link">'),n.b("\n"+i),n.b('    <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('">'),n.b("\n"+i),n.b('        <div class="destination-link-lining">'),n.b("\n"+i),n.b('            <span id="map-icon" class="gelicon gelicon--map"></span>'),n.b("\n"+i),n.b('            <span id="destination-name">'),n.b(n.v(n.f("name",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('            <span id="arrow-icon" class="gelicon gelicon--next-alternative"></span>'),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </a>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"map-controls":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="map-controls '),n.b(n.v(n.f("controlsClass",t,e,0))),n.b('">'),n.b("\n"+i),n.b('    <button data-map-zoomin class="map-controls__button  map-controls__button--zoomin">'),n.b("\n"+i),n.b('        <span class="map-controls__button-label  visually-hidden">Zoom in</span>'),n.b("\n"+i),n.b("        <span class='gelicon gelicon--zoomin'></span>"),n.b("\n"+i),n.b("    </button>"),n.b("\n"),n.b("\n"+i),n.b('    <button data-map-zoomout class="map-controls__button  map-controls__button--zoomout">'),n.b("\n"+i),n.b('        <span class="map-controls__button-label  visually-hidden">Zoom out</span>'),n.b("\n"+i),n.b("        <span class='gelicon gelicon--zoomout'></span>"),n.b("\n"+i),n.b("    </button>"),n.b("\n"),n.b("\n"+i),n.b('    <button data-map-center class="map-controls__button  map-controls__button--location">'),n.b("\n"+i),n.b('        <span class="map-controls__button-label  visually-hidden">Reset map to default</span>'),n.b("\n"+i),n.b("        <span class='gelicon gelicon--location'></span>"),n.b("\n"+i),n.b("    </button>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"map-popup":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="map-popup">'),n.b("\n"+i),n.b('    <div class="promo-unit '),n.s(n.f("class",t,e,1),t,e,0,61,70,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('        <div class="promo-unit-lining">'),n.b("\n"+i),n.b("            <div "),n.s(n.f("class",t,e,1),t,e,0,150,159,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b("\n"+i),n.b("                 "),n.s(n.f("brand",t,e,1),t,e,0,197,219,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-brand="'),i.b(i.v(i.f("brand",t,e,0))),i.b('"')}),t.pop()),n.b(">"),n.b("\n"+i),n.b('                <div class="promo-unit-image">'),n.b("\n"+i),n.b('                    <div class="promo-unit-image-lining">'),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,370,388,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<article-image0",t,e,""))}),t.pop()),n.b("                    </div>"),n.b("\n"+i),n.b('                    <div class="promo-unit-overlay"></div>'),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b('                <div class="promo-unit-copy">'),n.b("\n"+i),n.b('                    <div class="promo-unit-copy-lining">'),n.b("\n"+i),n.sub("header",t,e,i),n.b("                    </div>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<article-image0":{name:"article-image",partials:{},subs:{}},"<headercontext-heading1":{name:"context-heading",partials:{},subs:{}},"<headeranalytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{header:function(t,e,i,n){i.b('                        <div class="promo-unit-header '),i.s(i.f("context",t,e,1),t,e,0,713,743,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("promo-unit-header-with-context")}),t.pop()),i.b('">'),i.b("\n"+n),i.s(i.f("context",t,e,1),t,e,0,798,880,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<headercontext-heading1",t,e,"                                "))}),t.pop()),i.b('                            <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,970,1001,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<headeranalytics-element-metadata2",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('                                <h3 class="promo-unit-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h3>"),i.b("\n"+n),i.b("                            </a>"),i.b("\n"+n),i.b("                        </div>"),i.b("\n"+n)}}}),"domestic-header":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="domestic-header-wrapper">'),n.b("\n"+i),n.b('    <div class="page-component-wrapper">'),n.b("\n"+i),n.b('        <div class="user-notice user-notice-header" id="">'),n.b("\n"+i),n.b('            <div class="user-notice-lining">'),n.b("\n"+i),n.b("                <p>"),n.b(n.t(n.f("user-notice",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"empty-list-notice":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="empty-list-notice">'),n.b("\n"+i),n.b("    <h3>"),n.b(n.v(n.f("emptyListNoticeText",t,e,0))),n.b("</h3>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"event-filter-story":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<div"),n.b("\n"+i),n.b("        "),n.s(n.f("brand",t,e,1),t,e,0,23,45,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-brand="'),i.b(i.v(i.f("brand",t,e,0))),i.b('"')}),t.pop()),n.b("\n"+i),n.b('        class="promo-unit-layout-event '),n.s(n.f("class",t,e,1),t,e,0,105,114,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,180,211,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('        <div class="promo-unit-image">'),n.b("\n"+i),n.b('            <div class="promo-unit-image-lining">'),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,359,422,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<responsive-image-tag1",t,e,"                    "))}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.s(n.f("dates",t,e,1),t,e,0,474,590,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <div class="date-list">'),n.b("\n"+i),n.b(n.rp("<start-end-date2",t,e,"                    ")),n.b("                </div>"),n.b("\n"+i)}),t.pop()),n.b('            <div class="promo-unit-overlay"></div>'),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b('        <div class="promo-unit-copy">'),n.b("\n"+i),n.b('            <div class="promo-unit-copy-lining">'),n.b("\n"),n.b("\n"+i),n.s(n.f("event-type-URL",t,e,1),t,e,0,790,997,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                    <div class="promo-unit-event-type">'),n.b("\n"+i),n.b('                        <a class="promo-unit-event-type-link" href="'),n.b(n.v(n.f("event-type-URL",t,e,0))),n.b('">'),n.b(n.v(n.f("event-type",t,e,0))),n.b("</a>"),n.b("\n"+i),n.b("                    </div>"),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.b('                <div class="promo-unit-header">'),n.b("\n"+i),n.b('                    <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,1135,1166,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata3",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('                        <h3 class="promo-unit-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h3>"),n.b("\n"+i),n.b("                    </a>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.s(n.f("location",t,e,1),t,e,0,1344,1488,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                    <div class="promo-unit-location">'),n.b("\n"+i),n.b("                        <p>"),n.b(n.t(n.f("location",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b("                    </div>"),n.b("\n"+i)}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </a>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}},"<start-end-date2":{name:"start-end-date",partials:{},subs:{}},"<analytics-element-metadata3":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{}}),"event-list-two-column":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="event-list-groups">'),n.b("\n"+i),n.b('    <div class="primary-content" >'),n.b("\n"+i),n.b('        <div class="promo-group-1-wrapper">'),n.b("\n"+i),n.s(n.d("groups.group-1",t,e,1),t,e,0,142,184,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<promo-group0",t,e,"            "))}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"),n.b("\n"+i),n.b('    <div class="secondary-content" >'),n.b("\n"+i),n.b('        <div class="promo-group-2-wrapper">'),n.b("\n"+i),n.s(n.d("groups.group-2",t,e,1),t,e,0,343,385,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<promo-group1",t,e,"            "))}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"),n.fl()},partials:{"<promo-group0":{name:"promo-group",partials:{},subs:{}},"<promo-group1":{name:"promo-group",partials:{},subs:{}}},subs:{}}),"figure-with-description":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<media-with-description1",t,e,"")),n.fl()},partials:{"<media-with-description1":{name:"media-with-description",partials:{"<media-elementfigure0":{name:"figure",partials:{},subs:{}}},subs:{"media-element":function(t,e,i,n){i.s(i.f("figure",t,e,1),t,e,0,70,103,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<media-elementfigure0",t,e,"            "))}),t.pop())}}}},subs:{}}),figure:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<figure>"),n.b("\n"+i),n.b('    <div class="figure-lining">'),n.b("\n"+i),n.b(n.rp("<responsive-image-tag0",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.s(n.f("caption",t,e,1),t,e,0,102,219,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <figcaption class="caption media-caption">'),n.b("\n"+i),n.b('        <p class="img-caption">'),n.b(n.v(n.f("caption",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b("    </figcaption>"),n.b("\n"+i)}),t.pop()),n.b("</figure>"),n.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}}},subs:{}}),filter:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<headed-section-start0",t,e,"")),n.b(n.rp("<link-box-list1",t,e,"    ")),n.b(n.rp("<headed-section-end2",t,e,"")),n.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<link-box-list1":{name:"link-box-list",partials:{},subs:{}},"<headed-section-end2":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"follow-us":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<headed-section-start0",t,e,"")),n.b('    <ul id="follow-us-items" class="'),n.s(n.f("class",t,e,1),t,e,0,72,97,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("follow-us-items-"),i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('" '),n.s(n.f("analytics-module-metadata",t,e,1),t,e,0,139,169,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-module-metadata1",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.s(n.f("shareItems",t,e,1),t,e,0,224,790,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <li class="follow-us-item follow-us-item-'),n.b(n.v(n.f("class",t,e,0))),n.b('">'),n.b("\n"+i),n.b('                <div class="follow-us-item-lining">'),n.b("\n"+i),n.b('                    <a target="_blank" href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,427,458,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata2",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('                        <div class="icon-wrapper">'),n.b("\n"+i),n.b('                            <span class="icon '),n.b(n.v(n.f("icon-class",t,e,0))),n.b('"></span>'),n.b("\n"+i),n.b("                        </div>"),n.b("\n"+i),n.b('                        <div class="follow-us-item-text">'),n.b(n.v(n.f("text",t,e,0))),n.b("</div>"),n.b("\n"),n.b("\n"+i),n.b("                    </a>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </li>"),n.b("\n"+i)}),t.pop()),n.b("    </ul>"),n.b("\n"+i),n.b(n.rp("<headed-section-end3",t,e,"")),n.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<analytics-module-metadata1":{name:"analytics-module-metadata",partials:{},subs:{}},"<analytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}},"<headed-section-end3":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"form-select":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="form-select '),n.b(n.v(n.f("class",t,e,0))),n.b('">'),n.b("\n"+i),n.s(n.f("label",t,e,1),t,e,0,50,198,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <span class="form-select__label-wrapper">'),n.b("\n"+i),n.b('            <label class="form-select__label" for="'),n.b(n.v(n.f("id",t,e,0))),n.b('">'),n.b(n.v(n.f("label",t,e,0))),n.b("</label>"),n.b("\n"+i),n.b("        </span>"),n.b("\n"+i)}),t.pop()),n.b('    <div class="form-select__control-wrapper">'),n.b("\n"+i),n.b('        <select class="form-select__control" '),n.s(n.f("multiple",t,e,1),t,e,0,314,322,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("multiple")}),t.pop()),n.b(' name="'),n.b(n.v(n.f("id",t,e,0))),n.b('" id="'),n.b(n.v(n.f("id",t,e,0))),n.b('">'),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,0,385,487,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("            <option "),n.s(n.f("selected",t,e,1),t,e,0,419,427,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("selected")}),t.pop()),n.b(' value="'),n.b(n.v(n.f("id",t,e,0))),n.b('">'),n.b(n.v(n.f("title",t,e,0))),n.b("</option>"),n.b("\n"+i)}),t.pop()),n.b("        </select>"),n.b("\n"+i),n.b('        <span class="form-select__icon"></span>'),n.b("\n"+i),n.b("     </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"event-filter-header":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<header>"),n.b("\n"+i),n.b('    <div class="section-header">'),n.b("\n"+i),n.b('        <div class="section-title-wrapper">'),n.b("\n"+i),n.b(n.rp("<anchor-capable-element-start0",t,e,"            ")),n.b('                <h2 class="section-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h2>"),n.b("\n"+i),n.b(n.rp("<anchor-capable-element-end1",t,e,"            ")),n.b('            <div id="calendar-deferred-slot">'),n.b("\n"+i),n.b("                <div"),n.b("\n"+i),n.b("                        data-bbccom-advert-deferred"),n.b("\n"+i),n.b('                        data-bbccom-advert-id="responsive_box_2"'),n.b("\n"+i),n.b('                        data-bbccom-advert-groups="1_2_3_4"></div>'),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</header>"),n.fl()},partials:{"<anchor-capable-element-start0":{name:"anchor-capable-element-start",partials:{},subs:{}},"<anchor-capable-element-end1":{name:"anchor-capable-element-end",partials:{},subs:{}}},subs:{}}),"event-filter":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<form action="'),n.b(n.v(n.f("action",t,e,0))),n.b('" name="event-filter" class="event-filter '),n.s(n.f("class",t,e,1),t,e,0,76,98,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("event-filter-"),i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('" '),n.s(n.f("analytics-module-metadata",t,e,1),t,e,0,140,170,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-module-metadata0",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.s(n.f("featured-events",t,e,1),t,e,0,226,332,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <div class="event-filter-features-event">'),n.b("\n"+i),n.b(n.rp("<event-filter-story1",t,e,"            ")),n.b("        </div>"),n.b("\n"+i)}),t.pop()),n.b('    <div class="event-filter-lining">'),n.b("\n"+i),n.s(n.f("region",t,e,1),t,e,0,410,486,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <div class="event-filter-region">'),n.b(n.rp("<select-box2",t,e,"")),n.b("</div>"),n.b("\n"+i)}),t.pop()),n.b('        <div class="event-filter-type-date-wrapper">'),n.b("\n"+i),n.b('            <div class="event-filter-type-date">'),n.b("\n"+i),n.s(n.f("type",t,e,1),t,e,0,625,715,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                    <div class="event-filter-type">'),n.b(n.rp("<select-box3",t,e,"")),n.b("</div>"),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.s(n.f("date",t,e,1),t,e,0,751,841,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                    <div class="event-filter-date">'),n.b(n.rp("<select-box4",t,e,"")),n.b("</div>"),n.b("\n"+i)}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b('        <div class="event-filter-submit-wrapper">'),n.b("\n"+i),n.b('            <div class="event-filter-submit-lining">'),n.b("\n"+i),n.b('                <input id="event-filter-submit" type="submit" value="Filter events" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,1103,1134,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata5",t,e,""))}),t.pop()),n.b("></input>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</form>"),n.b("\n"),n.b("\n"),n.fl()},partials:{"<analytics-module-metadata0":{name:"analytics-module-metadata",partials:{},subs:{}},"<event-filter-story1":{name:"event-filter-story",partials:{},subs:{}},"<select-box2":{name:"select-box",partials:{},subs:{}},"<select-box3":{name:"select-box",partials:{},subs:{}},"<select-box4":{name:"select-box",partials:{},subs:{}},"<analytics-element-metadata5":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{}}),"select-box":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="form-control form-control-select">'),n.b("\n"+i),n.b('    <div class="form-control-label-wrapper">'),n.b("\n"+i),n.b('        <label for="'),n.b(n.v(n.f("id",t,e,0))),n.b('">'),n.b(n.v(n.f("title",t,e,0))),n.b(":</label>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="form-control-element-wrapper">'),n.b("\n"+i),n.b('        <div class="form-control-element">'),n.b("\n"),n.b("\n"+i),n.b("        <select "),n.s(n.f("multiple",t,e,1),t,e,0,270,278,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("multiple")}),t.pop()),n.b(' name="'),n.b(n.v(n.f("id",t,e,0))),n.b('">'),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,0,329,431,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("            <option "),
n.s(n.f("selected",t,e,1),t,e,0,363,371,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("selected")}),t.pop()),n.b(' value="'),n.b(n.v(n.f("id",t,e,0))),n.b('">'),n.b(n.v(n.f("title",t,e,0))),n.b("</option>"),n.b("\n"+i)}),t.pop()),n.b("        </select>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("     </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"),n.fl()},partials:{},subs:{}}),"fullsizeable-anchor":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<a id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" class="responsive-image-wrapper fullsizeable" data-caption="'),n.b(n.v(n.f("caption",t,e,0))),n.b('" data-caption-title="'),n.b(n.v(n.f("caption-title",t,e,0))),n.b('" data-is-clickable="'),n.b(n.v(n.f("is-clickable",t,e,0))),n.b('" href="'),n.b(n.v(n.f("url",t,e,0))),n.b('"></a>'),n.fl()},partials:{},subs:{}}),"gallery-inline-image":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<p></p>"),n.b("\n"+i),n.b(n.rp("<inline-image0",t,e,"")),n.b("<p></p>"),n.fl()},partials:{"<inline-image0":{name:"inline-image",partials:{},subs:{}}},subs:{}}),"gallery-lead":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="gallery-lead-wrapper">'),n.b("\n"+i),n.b('    <div id="gallery-lead-asset" class="gallery-lead">'),n.b("\n"+i),n.s(n.f("gallery-images",t,e,1),t,e,0,114,238,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <div class="gallery-lead-image">'),n.b("\n"+i),n.b(n.rp("<responsive-image-data-element0",t,e,"                ")),n.b("            </div>"),n.b("\n"+i)}),t.pop()),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<responsive-image-data-element0":{name:"responsive-image-data-element",partials:{},subs:{}}},subs:{}}),"headed-section-end":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("title",t,e,1),t,e,0,10,63,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{},subs:{}}),"headed-section-start":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("title",t,e,1),t,e,0,10,265,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('<div id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" class="headed-section '),n.s(n.f("class",t,e,1),t,e,0,60,84,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("headed-section-"),i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <div class="headed-section-lining">'),n.b("\n"+i),n.b(n.rp("<section-header0",t,e,"        ")),n.b('        <div class="section-body">'),n.b("\n"+i),n.b('            <div class="headed-section-content">'),n.b("\n"+i)}),t.pop()),n.fl()},partials:{"<section-header0":{name:"section-header",partials:{},subs:{}}},subs:{}}),"headed-section-with-destination-end":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("title",t,e,1),t,e,0,10,63,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{},subs:{}}),"headed-section-with-destination-start":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("title",t,e,1),t,e,0,10,970,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('<div id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" class="headed-section headed-section-with-destination '),n.s(n.f("class",t,e,1),t,e,0,92,133,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("headed-section-with-destination-"),i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <div class="headed-section-lining">'),n.b("\n"+i),n.b("        <header>"),n.b("\n"+i),n.b('            <div class="section-header">'),n.b("\n"+i),n.b('                <div class="section-header-wrapper">'),n.b("\n"+i),n.b('                    <div class="section-title-wrapper">'),n.b("\n"+i),n.b('                        <h2 class="section-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h2>"),n.b("\n"+i),n.b("                    </div>"),n.b("\n"+i),n.b('                    <div class="section-context-wrapper">'),n.b("\n"+i),n.s(n.f("context",t,e,1),t,e,0,535,598,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<context-item0",t,e,"                        "))}),t.pop()),n.b("                    </div>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b('                <div class="section-header-adslot">'),n.b("\n"+i),n.s(n.f("adSlot",t,e,1),t,e,0,740,814,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot-sponsor-section-primary1",t,e,"                    "))}),t.pop()),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </header>"),n.b("\n"+i),n.b('        <div class="section-body">'),n.b("\n"+i),n.b('            <div class="headed-section-content">'),n.b("\n"+i)}),t.pop()),n.fl()},partials:{"<context-item0":{name:"context-item",partials:{},subs:{}},"<ad-slot-sponsor-section-primary1":{name:"ad-slot-sponsor-section-primary",partials:{},subs:{}}},subs:{}}),"headed-section-with-image-end":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("title",t,e,1),t,e,0,10,63,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{},subs:{}}),"headed-section-with-image-start":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("title",t,e,1),t,e,0,10,802,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('<div id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" class="headed-section headed-section-with-image '),n.s(n.f("class",t,e,1),t,e,0,86,121,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("headed-section-with-image-"),i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <div class="headed-section-lining">'),n.b("\n"+i),n.b(n.rp("<anchor-capable-element-start0",t,e,"        ")),n.b("            <header>"),n.b("\n"+i),n.b('                <div class="section-header">'),n.b("\n"+i),n.b('                    <div class="section-header-image">'),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,371,446,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<responsive-image-tag1",t,e,"                        "))}),t.pop()),n.b("                    </div>"),n.b("\n"+i),n.b('                    <div class="section-title-wrapper">'),n.b("\n"+i),n.b('                        <h3 class="section-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h3>"),n.b("\n"),n.b("\n"+i),n.b("                    </div>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </header>"),n.b("\n"+i),n.b(n.rp("<anchor-capable-element-end2",t,e,"        ")),n.b('        <div class="section-body">'),n.b("\n"+i),n.b('            <div class="headed-section-content">'),n.b("\n"+i)}),t.pop()),n.fl()},partials:{"<anchor-capable-element-start0":{name:"anchor-capable-element-start",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}},"<anchor-capable-element-end2":{name:"anchor-capable-element-end",partials:{},subs:{}}},subs:{}}),"hero-unit":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("\x3c!-- hero-unit start --\x3e"),n.b("\n"+i),n.b("<div"),n.b("\n"+i),n.b('    class="hero-unit '),n.s(n.f("class",t,e,1),t,e,0,61,80,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("hero-unit-"),i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('" data-hero-unit="true" '),n.s(n.f("analytics-module-metadata",t,e,1),t,e,0,144,174,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-module-metadata0",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('    <div class="hero-unit-image-wrapper">'),n.b("\n"+i),n.b(n.rp("<anchor-capable-element-start1",t,e,"        ")),n.s(n.f("image",t,e,1),t,e,0,308,417,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <div class="responsive-image-wrapper">'),n.b("\n"+i),n.b(n.rp("<responsive-image-tag2",t,e,"            ")),n.b("        </div>"),n.b("\n"+i)}),t.pop()),n.b(n.rp("<anchor-capable-element-end3",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="hero-unit-overlay">'),n.b("\n"+i),n.b('        <div class="hero-unit-image-overlay-1"></div>'),n.b("\n"+i),n.b('        <div class="hero-unit-image-overlay-2"></div>'),n.b("\n"+i),n.b('        <div class="hero-unit-image-overlay-3"></div>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="hero-unit-lining">'),n.b("\n"+i),n.b('        <div class="hero-unit-header-wrapper">'),n.b("\n"+i),n.s(n.f("isVideo",t,e,1),t,e,0,794,928,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <a href="#" id="play-video"  class="hero-video-icon">'),n.b("\n"+i),n.b(n.rp("<icon4",t,e,"                    ")),n.b("                </a>"),n.b("\n"+i)}),t.pop()),n.s(n.f("isVideo",t,e,1),t,e,1,0,0,"")||n.s(n.f("heading",t,e,1),t,e,0,994,1055,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<primary-header5",t,e,"                        "))}),t.pop()),n.b('            <div class="secondary-header-wrapper">'),n.b("\n"+i),n.s(n.d("meta-data.advertising.adSlots.sponsor-section-hero",t,e,1),t,e,0,1215,1389,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot6",t,e,"                    ")),i.s(i.f("promo-module",t,e,1),t,e,0,1287,1355,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<attribution-slot7",t,e,"                        "))}),t.pop())}),t.pop()),n.s(n.f("hero-unit-location",t,e,1),t,e,0,1484,1543,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<destination-link8",t,e,"                    "))}),t.pop()),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.s(n.f("dates",t,e,1),t,e,0,1609,1713,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <div class="date-list">'),n.b("\n"+i),n.b(n.rp("<start-end-date9",t,e,"                ")),n.b("            </div>"),n.b("\n"+i)}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i),n.b("\x3c!-- hero-unit end --\x3e"),n.b("\n"),n.fl()},partials:{"<analytics-module-metadata0":{name:"analytics-module-metadata",partials:{},subs:{}},"<anchor-capable-element-start1":{name:"anchor-capable-element-start",partials:{},subs:{}},"<responsive-image-tag2":{name:"responsive-image-tag",partials:{},subs:{}},"<anchor-capable-element-end3":{name:"anchor-capable-element-end",partials:{},subs:{}},"<icon4":{name:"icon",partials:{},subs:{}},"<primary-header5":{name:"primary-header",partials:{},subs:{}},"<ad-slot6":{name:"ad-slot",partials:{},subs:{}},"<attribution-slot7":{name:"attribution-slot",partials:{},subs:{}},"<destination-link8":{name:"destination-link",partials:{},subs:{}},"<start-end-date9":{name:"start-end-date",partials:{},subs:{}}},subs:{}}),"horizontal-partner-module":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="horizontal-partner-module '),n.s(n.f("type",t,e,1),t,e,0,47,82,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("horizontal-partner-module--"),i.b(i.v(i.f("type",t,e,0)))}),t.pop()),n.b('" '),n.s(n.f("analytics-module-metadata",t,e,1),t,e,0,123,153,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-module-metadata0",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('    <div class="horizontal-partner-module__wrapper">'),n.b("\n"+i),n.b('        <a class="horizontal-partner-module__advertisement" href="http://www.bbc.co.uk/faqs/online/adverts_general">Advertisement</a>'),n.b("\n"+i),n.b('        <div class="horizontal-partner-module__body">'),n.b("\n"+i),n.s(n.f("video",t,e,1),t,e,0,448,578,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <div class="body__video">'),n.b("\n"+i),n.b(n.rp("<stand-alone-video-element1",t,e,"                    ")),n.b("                </div>"),n.b("\n"+i)}),t.pop()),n.s(n.f("video",t,e,1),t,e,1,0,0,"")||n.s(n.f("image",t,e,1),t,e,0,638,784,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                    <div class="body__promo-image">'),n.b("\n"+i),n.b(n.rp("<responsive-image-tag2",t,e,"                        ")),n.b("                    </div>"),n.b("\n"+i)}),t.pop()),n.b('            <div class="body__copy">'),n.b("\n"+i),n.s(n.f("title",t,e,1),t,e,0,881,937,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("                    <h1>"),n.b(n.v(n.f("title",t,e,0))),n.b("</h1>"),n.b("\n"+i)}),t.pop()),n.s(n.f("partnerLogo",t,e,1),t,e,0,980,1270,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                    <a class="copy__partner-logo" href="'),n.b(n.v(n.f("replace-url",t,e,0))),n.b('" title="View '),n.b(n.v(n.f("anchor-title",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,1115,1146,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata3",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b(n.rp("<responsive-image-tag4",t,e,"                        ")),n.b("                    </a>"),n.b("\n"+i)}),t.pop()),n.b('                <div class="copy__body">'),n.b("\n"+i),n.b("                    "),n.b(n.t(n.f("description",t,e,0))),n.b("\n"+i),n.s(n.f("moreInfoLink",t,e,1),t,e,0,1403,1602,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                        <a class="body__more-info-link" href="'),n.b(n.v(n.f("URL",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,1506,1537,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata5",t,e,""))}),t.pop()),n.b(">"),n.b(n.v(n.f("text",t,e,0))),n.b("</a>"),n.b("\n"+i)}),t.pop()),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<analytics-module-metadata0":{name:"analytics-module-metadata",partials:{},subs:{}},"<stand-alone-video-element1":{name:"stand-alone-video-element",partials:{},subs:{}},"<responsive-image-tag2":{name:"responsive-image-tag",partials:{},subs:{}},"<analytics-element-metadata3":{name:"analytics-element-metadata",partials:{},subs:{}},"<responsive-image-tag4":{name:"responsive-image-tag",partials:{},subs:{}},"<analytics-element-metadata5":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{}}),"html5-video":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<anchor-capable-element-start0",t,e,"")),n.b('    <video id="'),n.b(n.v(n.f("id",t,e,0))),n.b('"'),n.b("\n"+i),n.b("    "),n.s(n.f("loop",t,e,1),t,e,0,70,74,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("loop")}),t.pop()),n.b("\n"+i),n.b("    "),n.s(n.f("autoplay",t,e,1),t,e,0,101,109,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("autoplay")}),t.pop()),n.b("\n"+i),n.b("    "),n.s(n.f("preload",t,e,1),t,e,0,139,146,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("preload")}),t.pop()),n.b("\n"+i),n.b('    poster="'),n.b(n.v(n.f("poster",t,e,0))),n.b('"'),n.b("\n"+i),n.b("    >"),n.b("\n"+i),n.s(n.f("formats",t,e,1),t,e,0,209,271,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <source src="'),n.b(n.v(n.f("url",t,e,0))),n.b('" type="'),n.b(n.v(n.f("format",t,e,0))),n.b('">'),n.b("\n"+i)}),t.pop()),n.b("    </video>"),n.b("\n"+i),n.b(n.rp("<anchor-capable-element-end1",t,e,"")),n.fl()},partials:{"<anchor-capable-element-start0":{name:"anchor-capable-element-start",partials:{},subs:{}},"<anchor-capable-element-end1":{name:"anchor-capable-element-end",partials:{},subs:{}}},subs:{}}),"ibroadcast-image-gallery-advertising-overlay":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="ad-slot-overlay">'),n.b("\n"+i),n.b(n.rp("<ad-slot-mpu-secondary0",t,e,"    ")),n.b("</div>"),n.b("\n"),n.fl()},partials:{"<ad-slot-mpu-secondary0":{name:"ad-slot-mpu-secondary",partials:{},subs:{}}},subs:{}}),"ibroadcast-image-gallery-selected-image-caption":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<h2 id="selected-image-caption-title" class="selected-image-caption-title">'),n.b(n.v(n.f("caption-title",t,e,0))),n.b("</h2>"),n.b("\n"+i),n.b('<p id="selected-image-caption" class="selected-image-caption">'),n.b(n.t(n.f("caption",t,e,0))),n.b("</p>"),n.fl()},partials:{},subs:{}}),"ibroadcast-image-gallery-selected-image-tag":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<img class="selected-image responsive '),n.b(n.v(n.f("additional-class",t,e,0))),n.b('" src="'),n.b(n.v(n.f("image-src",t,e,0))),n.b('" alt="'),n.b(n.v(n.f("alt-text",t,e,0))),n.b('" data-is-watermarked="'),n.b(n.v(n.f("is-watermarked",t,e,0))),n.b('"/>'),n.fl()},partials:{},subs:{}}),"ibroadcast-image-gallery-selected-image":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<a id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" '),n.b("\n"+i),n.b('\tclass="responsive-image-wrapper fullsizeable"'),n.b("\n"+i),n.b('\tdata-caption="'),n.b(n.v(n.f("caption",t,e,0))),n.b('"'),n.b("\n"+i),n.b('\tdata-caption-title="'),n.b(n.v(n.f("caption-title",t,e,0))),n.b('"'),n.b("\n"+i),n.b('\tdata-is-clickable="'),n.b(n.v(n.f("is-clickable",t,e,0))),n.b('"'),n.b("\n"+i),n.b('\thref="'),n.b(n.v(n.f("fullsize-url",t,e,0))),n.b('">'),n.b("\n"+i),n.b("</a>"),n.b("\n"),n.fl()},partials:{},subs:{}}),"ibroadcast-image-gallery-thumbnail":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<li><a href="#"><img src="'),n.b(n.v(n.f("url",t,e,0))),n.b('" data-src-recipe="'),n.b(n.v(n.f("url",t,e,0))),n.b('" alt="'),n.b(n.v(n.f("alt",t,e,0))),n.b('" data-caption-title="'),n.b(n.v(n.f("caption-title",t,e,0))),n.b('" data-caption="'),n.b(n.v(n.f("caption",t,e,0))),n.b('" data-is-portrait="'),n.b(n.v(n.f("is-portrait",t,e,0))),n.b('" /></a></li>'),n.fl()},partials:{},subs:{}}),"ibroadcast-image-gallery":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="ib-gallery-'),n.b(n.v(n.f("id",t,e,0))),n.b('" data-gallery-id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" class="ib-gallery '),n.b(n.v(n.f("id",t,e,0))),n.b('">'),n.b("\n"+i),n.b('    <div class="ib-gallery-wrapper">'),n.b("\n"+i),n.b('        <div id="slide-wrapper" class="slide-wrapper">'),n.b("\n"+i),n.b('            <a href="#" id="selected-image-nav-prev" class="icon-wrapper gel-icon-wrapper icon-wrapper-previous">'),n.b("\n"+i),n.b('                <div class="gelicon gelicon--previous"></div>'),n.b("\n"+i),n.b("            </a>"),n.b("\n"+i),n.b('            <a href="#" id="selected-image-nav-next" class="icon-wrapper gel-icon-wrapper icon-wrapper-next">'),n.b("\n"+i),n.b('                <div class="gelicon gelicon--next"></div>'),n.b("\n"+i),n.b("            </a>"),n.b("\n"+i),n.b('            <div class="selected-image-wrapper">'),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b('        <ul id="ib-gallery-thumbnail-carousel" class="ib-gallery-thumbnail-carousel">'),n.b("\n"+i),n.s(n.f("gallery-images",t,e,1),t,e,0,750,789,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ibroadcast-image-gallery-thumbnail0",t,e,""))}),t.pop()),n.b("        </ul>"),n.b("\n"+i),n.b('        <div id="selected-image-caption-wrapper" class="selected-image-caption-wrapper">'),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.s(n.f("show-ads",t,e,1),t,e,0,955,1006,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot-ibroadcast-image-gallery1",t,e,"        "))}),t.pop()),n.b("</div>"),n.fl()},partials:{"<ibroadcast-image-gallery-thumbnail0":{name:"ibroadcast-image-gallery-thumbnail",partials:{},subs:{}},"<ad-slot-ibroadcast-image-gallery1":{name:"ad-slot-ibroadcast-image-gallery",partials:{},subs:{}}},subs:{}}),icon:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("icon-type",t,e,1),t,e,0,14,189,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <span id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" class="icon-wrapper gel-icon-wrapper icon-wrapper-'),n.b(n.v(n.f("icon-type",t,e,0))),n.b('">'),n.b("\n"+i),n.b('        <i aria-hidden="true" class="gelicon gelicon--'),n.b(n.v(n.f("icon-type",t,e,0))),n.b('"></i>'),n.b("\n"+i),n.b("    </span>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{},subs:{}}),infographic:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("infographic",t,e,1),t,e,0,16,229,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div id="custom-embed">'),n.b("\n"+i),n.b('        <div id="custom-embed-content">'),n.b("\n"+i),n.b('            <iframe src="'),n.b(n.v(n.f("infographic",t,e,0))),n.b('" scrolling="no" frameborder="0" seamless height="500">'),n.b("\n"+i),n.b("            </iframe>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{},subs:{}}),"inline-horizontal-partner-module":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<p></p>"),n.b("\n"+i),n.b('<div class="inline-media inline-horizontal-partner-module">'),n.b("\n"+i),n.b(n.rp("<horizontal-partner-module0",t,e,"    ")),n.b("</div>"),n.b("\n"+i),n.b("<p></p>"),n.fl()},partials:{"<horizontal-partner-module0":{name:"horizontal-partner-module",partials:{},subs:{}}},subs:{}}),"inline-ibroadcast-image-gallery":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="inline-media inline-gallery '),n.b(n.v(n.f("id",t,e,0))),n.b('">'),n.b("\n"+i),n.b(n.rp("<ibroadcast-image-gallery0",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<ibroadcast-image-gallery0":{name:"ibroadcast-image-gallery",partials:{},subs:{}}},subs:{}}),"inline-image":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="inline-media inline-image">'),n.b("\n"+i),n.b(n.rp("<responsive-image-data-element0",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<responsive-image-data-element0":{name:"responsive-image-data-element",partials:{},subs:{}}},subs:{}}),"inline-magnify":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="magnify'),n.b(n.v(n.f("id",t,e,0))),n.b('"class="inline-media inline-magnify">'),n.b("\n"+i),n.b(n.rp("<magnify0",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<magnify0":{name:"magnify",partials:{},subs:{}}},subs:{}}),"inline-video":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="inline-media inline-video">'),n.b("\n"+i),n.b(n.rp("<stand-alone-video-element0",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<stand-alone-video-element0":{name:"stand-alone-video-element",partials:{},subs:{}}},subs:{}}),"inline-youtube":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="inline-media inline-youtube">'),n.b("\n"+i),n.b(n.rp("<youtube0",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<youtube0":{name:"youtube",partials:{},subs:{}}},subs:{}}),intro:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("intro",t,e,1),t,e,0,10,109,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div class="introduction-wrapper">'),n.b("\n"+i),n.b('        <p class="introduction">'),n.b(n.t(n.f("intro",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{},subs:{}}),"link-box-anchor-simple":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<a "),n.s(n.f("id",t,e,1),t,e,0,10,21,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('id="'),i.b(i.v(i.f("id",t,e,0))),i.b('"')}),t.pop()),n.b(' href="'),n.b(n.v(n.f("url",t,e,0))),n.b('">'),n.b(n.v(n.f("title",t,e,0))),n.b(" </a>"),n.fl()},partials:{},subs:{}}),"link-box-anchor":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<a "),n.s(n.f("id",t,e,1),t,e,0,10,21,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('id="'),i.b(i.v(i.f("id",t,e,0))),i.b('"')}),t.pop()),n.b("\n"+i),n.b('        href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,83,114,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b(n.rp("<link-box1",t,e,"    ")),n.b("</a>"),n.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}},"<link-box1":{name:"link-box",partials:{},subs:{}}},subs:{}}),"link-box-list":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<ul class="link-box-list '),n.b(n.v(n.f("class",t,e,0))),n.b('">'),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,0,51,135,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <li class="link-box-list-item">'),n.b("\n"+i),n.b(n.rp("<link-box-anchor0",t,e,"            ")),n.b("    </li>"),n.b("\n"+i)}),t.pop()),n.b("</ul>"),n.fl()},partials:{"<link-box-anchor0":{name:"link-box-anchor",partials:{},subs:{}}},subs:{}}),"link-box":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="link-box '),n.b(n.v(n.f("class",t,e,0))),n.b('" >'),n.b("\n"+i),n.s(n.f("title",t,e,1),t,e,0,48,98,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <span class="link-text">'),n.b(n.v(n.f("title",t,e,0))),n.b("</span>"),n.b("\n"+i)}),t.pop()),n.s(n.f("icon",t,e,1),t,e,0,122,208,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <span class="icon-wrapper"><div class="icon-arrow-right-small"></div></span>'),n.b("\n"+i)}),t.pop()),n.b('    <div class="pointer"></div>'),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"load-more":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("next-page",t,e,1),t,e,0,14,249,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <a id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" href="'),n.b(n.v(n.f("url",t,e,0))),n.b('">'),n.b("\n"+i),n.b('        <div class="load-more-lining">'),n.b("\n"+i),n.b('            <span id="load-more-label">'),n.b(n.v(n.f("title",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('            <span id="loading-spinner" class="gelicon gelicon--refresh"></span>'),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </a>"),n.b("\n"+i)}),t.pop()),n.b("\n"),n.fl()},partials:{},subs:{}}),"lorem-ipsum":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut"),n.b("\n"+i),n.b("labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco"),n.b("\n"+i),n.b("laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit"),n.b("\n"+i),n.b("in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat"),n.b("\n"+i),n.b("cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum"),n.fl()},partials:{},subs:{}}),mapbox:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("isMapDataAvailable",t,e,1),t,e,0,23,538,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("<section"),n.b("\n"+i),n.b('    class="map '),n.b(n.v(n.f("class",t,e,0))),n.b('"'),n.b("\n"+i),n.b('    data-mapbox-latitude="'),n.b(n.v(n.f("latitude",t,e,0))),n.b('"'),n.b("\n"+i),n.b('    data-mapbox-longitude="'),n.b(n.v(n.f("longitude",t,e,0))),n.b('"'),n.b("\n"+i),n.b('    data-mapbox-zoomlevel="'),n.b(n.v(n.f("zoomLevel",t,e,0))),n.b('">'),n.b("\n"+i),n.b('    <div class="page-component-wrapper map__title-wrapper">'),n.b("\n"+i),n.b('        <h1 class="map__title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h1>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div id="'),n.b(n.v(n.f("mapContainerId",t,e,0))),n.b('" class="map__container"></div>'),n.b("\n"+i),n.b('    <div class="page-component-wrapper map__page-component-wrapper">'),n.b("\n"+i),n.b('        <div class="map__controls">'),n.b("\n"+i),n.b(n.rp("<map-controls0",t,e,"            ")),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</section>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{"<map-controls0":{name:"map-controls",partials:{},subs:{}}},subs:{}}),"media-with-description":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="media-with-introduction">'),n.b("\n"+i),n.b('    <div class="media">'),n.b("\n"+i),n.b('        <div class="media-lining">'),n.b("\n"+i),n.sub("media-element",t,e,i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b(n.rp("<intro0",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<intro0":{name:"intro",partials:{},subs:{}}},subs:{"media-element":function(t,e,i,n){}}}),"more-amazing-stories":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="page-component-wrapper">'),n.b("\n"+i),n.b('    <div class="single-column">'),n.b("\n"+i),n.b('        <div class="primary-content" >'),n.b("\n"+i),n.b('            <div id="more-amazing-stories-primary" class="component-placeholder more-amazing-stories-list"></div>'),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"more-stories-wrapper":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<ul id="more-stories-wrapper" class="article-list" data-cs-module="more-stories-wrapper"></ul>'),n.fl()},partials:{},subs:{}}),"most-popular":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("has-children",t,e,1),t,e,0,17,1532,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<headed-section-start0",t,e,"    ")),n.b('    <div class="most-popular '),n.b(n.v(n.f("class",t,e,0))),n.b('" '),n.s(n.f("analytics-module-metadata",t,e,1),t,e,0,118,148,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-module-metadata1",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.s(n.d("first-promo.image",t,e,1),t,e,0,210,538,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <a href="'),n.b(n.v(n.f("replace-url",t,e,0))),n.b('" title="View '),n.b(n.v(n.f("title",t,e,0))),n.b('" class="most-popular-image-wrapper" '),n.s(n.d("first-promo.analytics-element-metadata",t,e,1),t,e,0,346,377,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata2",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b(n.rp("<standard-image-tag3",t,e,"            ")),n.b('            <div class="most-popular-image-overlay"></div>'),n.b("\n"+i),n.b("        </a>"),n.b("\n"+i)}),t.pop()),n.b('        <ol class="most-popular-items">'),n.b("\n"+i),n.s(n.f("promos",t,e,1),t,e,0,624,1467,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <li class="most-popular-item most-popular-item-'),n.b(n.v(n.f("brand",t,e,0))),n.b('">'),n.b("\n"+i),n.b('                <div class="most-popular-image-overlay"></div>'),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,785,880,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <div class="most-popular-image">'),n.b(n.rp("<standard-image-tag4",t,e,"")),n.b("</div>"),n.b("\n"+i)}),t.pop()),n.b('                <a class="most-popular-item-lining" href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" title="View '),n.b(n.v(n.f("title",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,1012,1043,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata5",t,e,""))}),t.pop()),n.b(">"),n.b("\n"),n.b("\n"),n.b("\n"+i),n.b('                    <div class="most-popular-item-title-wrapper">'),n.b("\n"+i),n.b('                        <div class="most-popular-item-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</div>"),n.b("\n"+i),n.b("                    </div>"),n.b("\n"+i),n.b('                    <div class="most-popular-item-rank-wrapper">'),n.b("\n"+i),n.b('                        <div class="most-popular-item-rank">'),n.b(n.v(n.f("rank",t,e,0))),n.b("</div>"),n.b("\n"+i),n.b("                    </div>"),n.b("\n"),n.b("\n"+i),n.b("                </a>"),n.b("\n"+i),n.b("            </li>"),n.b("\n"+i)}),t.pop()),n.b("        </ol>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b(n.rp("<headed-section-end6",t,e,"    "))}),t.pop()),n.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<analytics-module-metadata1":{name:"analytics-module-metadata",partials:{},subs:{}},"<analytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}},"<standard-image-tag3":{name:"standard-image-tag",partials:{},subs:{}},"<standard-image-tag4":{name:"standard-image-tag",partials:{},subs:{}},"<analytics-element-metadata5":{name:"analytics-element-metadata",partials:{},subs:{}},"<headed-section-end6":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"related-stories":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="related-stories-mvt '),
n.s(n.f("class",t,e,1),t,e,0,42,81,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("related-stories-mvt-variation-"),i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <h2 class="related-stories-mvt__header">Related Stories</h2>'),n.b("\n"+i),n.b('    <ol class="related-stories-mvt__stories">'),n.b("\n"+i),n.s(n.d("promo-group.items",t,e,1),t,e,0,235,1564,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <li class="related-stories-mvt__story">'),n.b("\n"+i),n.b('            <a class="related-stories-mvt__story-link" href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,385,416,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('                <div class="related-stories-mvt__image-container">'),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,542,655,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<responsive-image-tag1",t,e,"                    ")),i.b(i.rp("<responsive-image-overlay2",t,e,"                    "))}),t.pop()),n.b('                    <div class="related-stories-mvt__image-filter"></div>'),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </a>"),n.b("\n"+i),n.b('            <div class="related-stories-mvt__content">'),n.b("\n"+i),n.b('                <h3 class="related-stories-mvt__title">'),n.b("\n"+i),n.b('                    <a class="related-stories-mvt__title-link" href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,1e3,1031,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata3",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('                        <span class="related-stories-mvt__title-link-wrap">'),n.b(n.v(n.f("title",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b("                    </a>"),n.b("\n"+i),n.b("                </h3>"),n.b("\n"+i),n.s(n.d("tags.items",t,e,1),t,e,0,1234,1507,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("                    <a class='related-stories-mvt__tag-link' "),n.s(n.f("id",t,e,1),t,e,0,1303,1314,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('id="'),i.b(i.v(i.f("id",t,e,0))),i.b('"')}),t.pop()),n.b(' href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,1368,1399,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata4",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b("                        "),n.b(n.v(n.f("title",t,e,0))),n.b("\n"+i),n.b("                    </a>"),n.b("\n"+i)}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.b("        </li>"),n.b("\n"+i)}),t.pop()),n.b("    </ol>"),n.b("\n"+i),n.b("</div>"),n.b("\n"),n.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-overlay2":{name:"responsive-image-overlay",partials:{},subs:{}},"<analytics-element-metadata3":{name:"analytics-element-metadata",partials:{},subs:{}},"<analytics-element-metadata4":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{}}),"navigation-wrapper":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="nav-branding-wrapper">'),n.b("\n"+i),n.b('    <div id="nav-branding">'),n.b("\n"+i),n.b(n.rp("<page-header-branding0",t,e,"        ")),n.s(n.f("navigation",t,e,1),t,e,0,117,252,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.s(n.f("menu",t,e,1),t,e,0,139,234,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <div id="nav-top">'),n.b("\n"+i),n.b(n.rp("<navigation1",t,e,"                ")),n.b("            </div>"),n.b("\n"+i)}),t.pop())}),t.pop()),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<page-header-branding0":{name:"page-header-branding",partials:{},subs:{}},"<navigation1":{name:"navigation",partials:{},subs:{}}},subs:{}}),navigation:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="navigation-wrapper '),n.b(n.v(n.f("wrapperClass",t,e,0))),n.b('" '),n.s(n.f("analytics-module-metadata",t,e,1),t,e,0,79,109,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-module-metadata0",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('    <ul class="navigation-list" role="navigation" aria-label="'),n.b(n.v(n.f("label",t,e,0))),n.b('">'),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,0,233,826,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <li class="'),n.b(n.v(n.f("class",t,e,0))),n.b('">'),n.b("\n"+i),n.b('            <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" class="navigation-link" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,350,381,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata1",t,e,""))}),t.pop()),n.b(">"),n.b("\n"),n.b("\n"+i),n.b("                "),n.s(n.f("line1",t,e,1),t,e,0,441,481,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('<div class="line1">'),i.b(i.v(i.f("line1",t,e,0))),i.b("&nbsp;</div>")}),t.pop()),n.b("\n"+i),n.s(n.f("line2",t,e,1),t,e,0,518,775,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                    <div class="line2">'),n.b("\n"+i),n.b("                        "),n.s(n.f("image",t,e,1),t,e,0,593,674,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('<img width="'),i.b(i.v(i.d("image.width",t,e,0))),i.b('" height="'),i.b(i.v(i.d("image.height",t,e,0))),i.b('" src="'),i.b(i.v(i.d("image.url",t,e,0))),i.b('"></img>')}),t.pop()),n.b("\n"+i),n.b("                        <span>"),n.b(n.v(n.f("line2",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b("                    </div>"),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.b("            </a>"),n.b("\n"+i),n.b("        </li>"),n.b("\n"+i)}),t.pop()),n.s(n.f("showAds",t,e,1),t,e,0,857,984,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <li class="featured featured-native last">'),n.b("\n"+i),n.b(n.rp("<ad-slot-vertical-navbar2",t,e,"                ")),n.b("            </li>"),n.b("\n"+i)}),t.pop()),n.b("    </ul>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<analytics-module-metadata0":{name:"analytics-module-metadata",partials:{},subs:{}},"<analytics-element-metadata1":{name:"analytics-element-metadata",partials:{},subs:{}},"<ad-slot-vertical-navbar2":{name:"ad-slot-vertical-navbar",partials:{},subs:{}}},subs:{}}),"nested-list":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<ul class="nested-list">'),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,0,39,596,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("    <li>"),n.b("\n"+i),n.b("        "),n.b(n.rp("<anchor-capable-element-start0",t,e,"")),n.b(n.v(n.f("title",t,e,0))),n.b(n.rp("<anchor-capable-element-end1",t,e,"")),n.b("\n"),n.b("\n"+i),n.b("            <ul>"),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,0,171,553,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("                <li>"),n.b("\n"+i),n.b("                    "),n.b(n.rp("<anchor-capable-element-start2",t,e,"")),n.b(n.v(n.f("title",t,e,0))),n.b(n.rp("<anchor-capable-element-end3",t,e,"")),n.b("\n"+i),n.b("                    <ul>"),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,0,346,482,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("                            <li>"),n.b(n.rp("<anchor-capable-element-start4",t,e,"")),n.b(n.v(n.f("title",t,e,0))),n.b(n.rp("<anchor-capable-element-end5",t,e,"")),n.b("</li>"),n.b("\n"+i)}),t.pop()),n.b("                    </ul>"),n.b("\n"+i),n.b("                </li>"),n.b("\n"+i)}),t.pop()),n.b("            </ul>"),n.b("\n"+i),n.b("    </li>"),n.b("\n"+i)}),t.pop()),n.b("</ul>"),n.fl()},partials:{"<anchor-capable-element-start0":{name:"anchor-capable-element-start",partials:{},subs:{}},"<anchor-capable-element-end1":{name:"anchor-capable-element-end",partials:{},subs:{}},"<anchor-capable-element-start2":{name:"anchor-capable-element-start",partials:{},subs:{}},"<anchor-capable-element-end3":{name:"anchor-capable-element-end",partials:{},subs:{}},"<anchor-capable-element-start4":{name:"anchor-capable-element-start",partials:{},subs:{}},"<anchor-capable-element-end5":{name:"anchor-capable-element-end",partials:{},subs:{}}},subs:{}}),"news-feed-module-placeholder":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<p></p>"),n.b("\n"+i),n.b('<div id="news-feed-'),n.b(n.v(n.f("feed-id",t,e,0))),n.b('" class="news-feed-module-placeholder"></div>'),n.b("\n"+i),n.b("<p></p>"),n.fl()},partials:{},subs:{}}),"news-feed-promo-group":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="inline-media news-feed-module">'),n.b("\n"+i),n.s(n.f("title",t,e,1),t,e,0,58,1138,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <div id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" class="headed-section '),n.s(n.f("class",t,e,1),t,e,0,116,140,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("headed-section-"),i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('            <div class="headed-section-lining">'),n.b("\n"+i),n.b("                <header>"),n.b("\n"+i),n.b('                    <div class="section-header">'),n.b("\n"+i),n.b('                        <div class="section-title-wrapper">'),n.b("\n"+i),n.s(n.f("feed-promo-image",t,e,1),t,e,0,384,867,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                                <div class="feed-promo-image">'),n.b("\n"+i),n.s(n.f("feed-URL",t,e,1),t,e,0,497,598,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                                        <a href="'),n.b(n.v(n.f("feed-URL",t,e,0))),n.b('">'),n.b("\n"+i)}),t.pop()),n.b('                                            <img src="'),n.b(n.v(n.f("image-URL",t,e,0))),n.b('" />'),n.b("\n"+i),n.s(n.f("feed-URL",t,e,1),t,e,0,733,815,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("                                        </a>"),n.b("\n"+i)}),t.pop()),n.b("                                </div>")}),t.pop()),n.b("\n"+i),n.b('                            <h2 class="section-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h2>"),n.b("\n"+i),n.b("                        </div>"),n.b("\n"+i),n.b("                    </div>"),n.b("\n"+i),n.b("                </header>"),n.b("\n"+i),n.b('            <div class="section-body">'),n.b("\n"+i),n.b('                <div class="headed-section-content">'),n.b("\n"+i)}),t.pop()),n.b('                    <div class="news-feed davos-news-feed" '),n.s(n.f("analytics-module-metadata",t,e,1),t,e,0,1238,1268,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-module-metadata0",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.s(n.f("promo-group",t,e,1),t,e,0,1340,3692,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                            <ul class="article-list">'),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,0,1437,3477,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                                    <li class="news-feed-item-wrapper">'),n.b("\n"+i),n.b("                                        <article>"),n.b("\n"+i),n.b('                                            <div class="news-feed-item '),n.s(n.f("class",t,e,1),t,e,0,1641,1650,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('                                                <div class="news-feed-item-lining">'),n.b("\n"+i),n.b('                                                    <div class="news-feed-item-image">'),n.b("\n"+i),n.b('                                                        <div class="news-feed-item-image-lining">'),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,2002,2020,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<article-image1",t,e,""))}),t.pop()),n.b("                                                        </div>"),n.b("\n"+i),n.b('                                                        <div class="news-feed-item-overlay"></div>'),n.b("\n"+i),n.b("                                                    </div>"),n.b("\n"+i),n.b('                                                    <div class="news-feed-item-copy">'),n.b("\n"+i),n.b('                                                        <div class="news-feed-item-copy-lining">'),n.b("\n"+i),n.sub("header",t,e,i),n.b("                                                        </div>"),n.b("\n"+i),n.b("                                                    </div>"),n.b("\n"+i),n.b("                                                </div>"),n.b("\n"+i),n.b("                                            </div>"),n.b("\n"+i),n.b("                                        </article>"),n.b("\n"+i),n.b("                                    </li>"),n.b("\n"+i)}),t.pop()),n.s(n.f("items",t,e,1),t,e,1,0,0,"")||n.b(n.rp("<empty-list-notice3",t,e,"                                    ")),n.b("                            </ul>"),n.b("\n"+i)}),t.pop()),n.b("                    </div>"),n.b("\n"+i),n.s(n.f("title",t,e,1),t,e,0,3750,3823,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i)}),t.pop()),n.b("</div>"),n.fl()},partials:{"<analytics-module-metadata0":{name:"analytics-module-metadata",partials:{},subs:{}},"<article-image1":{name:"article-image",partials:{},subs:{}},"<headeranalytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}},"<empty-list-notice3":{name:"empty-list-notice",partials:{},subs:{}}},subs:{header:function(t,e,i,n){i.b('                                                                <div class="news-feed-item-header">'),i.b("\n"+n),i.b('                                                                    <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,2724,2755,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<headeranalytics-element-metadata2",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('                                                                        <h3 class="news-feed-item-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h3>"),i.b("\n"+n),i.b("                                                                    </a>"),i.b("\n"+n),i.b("                                                                </div>"),i.b("\n"+n)}}}),"options-list":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="options-list  '),n.s(n.f("class",t,e,1),t,e,0,36,58,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("options-list-"),i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b(n.rp("<link-box-list0",t,e,"   ")),n.b("</div>"),n.b("\n"),n.fl()},partials:{"<link-box-list0":{name:"link-box-list",partials:{},subs:{}}},subs:{}}),"page-header-branding":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("\x3c!-- page-header-branding start --\x3e"),n.b("\n"+i),n.b('<div id="branding">'),n.b("\n"+i),n.b('    <div id="branding-top">'),n.b("\n"+i),n.b('        <div class="branding-left"></div>'),n.b("\n"+i),n.b('        <div class="branding-right"></div>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i),n.b('<div class="site-brand">'),n.b("\n"+i),n.b('    <div class="site-brand-lining">'),n.b("\n"+i),n.s(n.f("module",t,e,1),t,e,0,267,529,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <a href="/'),n.b(n.v(n.f("domain",t,e,0))),n.b('" id="brand">'),n.b(n.v(n.f("name",t,e,0))),n.b("</a>"),n.b("\n"+i),n.b('        <a id="sections-nav-button" href="#nav-bottom" role=".navigation" aria-label="secondary">'),n.b("\n"+i),n.b('            <span class="icon-sections"></span><span class="title-sections">Menu</span>'),n.b("\n"+i),n.b("        </a>"),n.b("\n"+i)}),t.pop()),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i),n.b("\x3c!-- page-header-branding end --\x3e"),n.fl()},partials:{},subs:{}}),"page-header":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("domestic-messaging-header",t,e,1),t,e,0,30,56,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<domestic-header0",t,e,"    "))}),t.pop()),n.b(n.rp("<ad-slot-leaderboard1",t,e,"")),n.b("\x3c!-- page-header start --\x3e"),n.b("\n"+i),n.b(n.rp("<navigation-wrapper2",t,e,"")),n.b("\x3c!-- page-header end --\x3e"),n.b("\n"),n.fl()},partials:{"<domestic-header0":{name:"domestic-header",partials:{},subs:{}},"<ad-slot-leaderboard1":{name:"ad-slot-leaderboard",partials:{},subs:{}},"<navigation-wrapper2":{name:"navigation-wrapper",partials:{},subs:{}}},subs:{}}),"partner-promo":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="partner-promo" class="partner-promo">'),n.b("\n"+i),n.b('    <div class="partner-promo-wrapper">'),n.b("\n"+i),n.b('        <a href="'),n.b(n.v(n.f("URL",t,e,0))),n.b('">'),n.b("\n"+i),n.b('            <div class="partner-promo-left">'),n.b("\n"+i),n.b('                <div class="left-wrapper">'),n.b("\n"+i),n.b('                    <span class="title">'),n.b("\n"+i),n.b("                        Read more from"),n.b("\n"+i),n.s(n.f("partnerLogo",t,e,1),t,e,0,322,401,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<responsive-image-tag0",t,e,"                            "))}),t.pop()),n.b("                    </span>"),n.b("\n"+i),n.s(n.f("description",t,e,1),t,e,0,482,630,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                        <div class="description">'),n.b("\n"+i),n.b("                            "),n.b(n.t(n.f("description",t,e,0))),n.b("\n"+i),n.b("                        </div>"),n.b("\n"+i)}),t.pop()),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b('            <div class="partner-promo-right">'),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,761,824,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<responsive-image-tag1",t,e,"                    "))}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.b("        </a>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}}},subs:{}}),"person-bio":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<headed-section-start0",t,e,"")),n.b('    <div class="person-bio-text">'),n.b(n.t(n.f("bio",t,e,0))),n.b("</div>"),n.b("\n"+i),n.b(n.rp("<headed-section-end1",t,e,"")),n.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<headed-section-end1":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),pointer:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="pointer"></div>'),n.fl()},partials:{},subs:{}}),"primary-header":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="primary-header-wrapper">'),n.b("\n"+i),n.b('    <div class="primary-header '),n.s(n.f("context",t,e,1),t,e,0,80,107,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("primary-header-with-context")}),t.pop()),n.b('">'),n.b("\n"+i),n.b(n.rp("<icon0",t,e,"        ")),n.s(n.f("context",t,e,1),t,e,0,160,202,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<context-heading1",t,e,"            "))}),t.pop()),n.b(n.rp("<anchor-capable-element-start2",t,e,"        ")),n.b('        <h1 class="primary-heading" role="heading">'),n.b(n.v(n.f("heading",t,e,0))),n.b("</h1>"),n.b("\n"+i),n.b(n.rp("<anchor-capable-element-end3",t,e,"        ")),n.b("\n"),n.b("\n"+i),n.s(n.f("intro",t,e,1),t,e,0,385,417,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<intro4",t,e,"            "))}),t.pop()),n.b("    </div>"),n.b("\n"+i),n.b(" </div>"),n.b("\n"),n.fl()},partials:{"<icon0":{name:"icon",partials:{},subs:{}},"<context-heading1":{name:"context-heading",partials:{},subs:{}},"<anchor-capable-element-start2":{name:"anchor-capable-element-start",partials:{},subs:{}},"<anchor-capable-element-end3":{name:"anchor-capable-element-end",partials:{},subs:{}},"<intro4":{name:"intro",partials:{},subs:{}}},subs:{}}),"promo-group-list-items":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("items",t,e,1),t,e,0,10,293,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.s(n.f("ad-slot",t,e,1),t,e,0,27,118,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <li class="promo-unit-wrapper advert">'),n.b("\n"+i),n.b(n.rp("<ad-slot0",t,e,"            ")),n.b("        </li>"),n.b("\n"+i)}),t.pop()),n.s(n.f("ad-slot",t,e,1),t,e,1,0,0,"")||(n.b('        <li class="promo-unit-wrapper">'),n.b("\n"+i),n.b("            <article>"),n.b("\n"+i),n.b(n.rp("<promo-unit1",t,e,"             ")),n.b("            </article>"),n.b("\n"+i),n.b("        </li>"),n.b("\n"+i))}),t.pop()),n.s(n.f("items",t,e,1),t,e,1,0,0,"")||n.b(n.rp("<empty-list-notice2",t,e,"    ")),n.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}},"<promo-unit1":{name:"promo-unit",partials:{},subs:{}},"<empty-list-notice2":{name:"empty-list-notice",partials:{},subs:{}}},subs:{}}),"promo-group-more-stories":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("groups",t,e,1),t,e,0,11,189,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.s(i.f("group-1",t,e,1),t,e,0,28,58,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<promo-group0",t,e,"        "))}),t.pop()),i.s(i.f("group-2",t,e,1),t,e,0,87,117,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<promo-group1",t,e,"        "))}),t.pop()),i.s(i.f("group-3",t,e,1),t,e,0,146,176,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<promo-group2",t,e,"        "))}),t.pop())}),t.pop()),n.fl()},partials:{"<promo-group0":{name:"promo-group",partials:{},subs:{}},"<promo-group1":{name:"promo-group",partials:{},subs:{}},"<promo-group2":{name:"promo-group",partials:{},subs:{}}},subs:{}}),"promo-group-without-container":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("promo-group",t,e,1),t,e,0,16,49,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<promo-group-list-items0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<promo-group-list-items0":{name:"promo-group-list-items",partials:{},subs:{}}},subs:{}}),"promo-group":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("promo-group.has-children",t,e,1),t,e,0,29,393,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<headed-section-start0",t,e,"    ")),n.s(n.f("promo-group",t,e,1),t,e,0,84,348,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <ul class="article-list '),n.s(n.f("class",t,e,1),t,e,0,131,153,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("article-list-"),i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b(" "),n.b(n.v(n.f("additional-class",t,e,0))),n.b('" '),n.s(n.f("analytics-module-metadata",t,e,1),t,e,0,216,246,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-module-metadata1",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b(n.rp("<promo-group-list-items2",t,e,"                ")),n.b("            </ul>"),n.b("\n"+i)}),t.pop()),n.b(n.rp("<headed-section-end3",t,e,"    "))}),t.pop()),n.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<analytics-module-metadata1":{name:"analytics-module-metadata",partials:{},subs:{}},"<promo-group-list-items2":{name:"promo-group-list-items",partials:{},subs:{}},"<headed-section-end3":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"promo-index":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("hero-unit",t,e,1),t,e,0,14,34,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<hero-unit0",t,e,"    "))}),t.pop()),n.s(n.f("promo-group-1",t,e,1),t,e,0,67,90,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<promo-group1",t,e,"    "))}),t.pop()),n.fl()},partials:{"<hero-unit0":{name:"hero-unit",partials:{},subs:{}},"<promo-group1":{name:"promo-group",partials:{},subs:{}}},subs:{}}),"promo-module":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="promo-module '),n.s(n.f("class",t,e,1),t,e,0,35,44,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <div class="promo-module-lining">'),n.b("\n"),n.b("\n"+i),n.b('        <div class="promo-module-image">'),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,159,184,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<responsive-image-tag0",t,e,""))}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b('        <div class="promo-module-overlay"></div>'),n.b("\n"),n.b("\n"+i),n.s(n.f("logoImage",t,e,1),t,e,0,282,325,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<ad-slot-sponsor-fake1",t,e,"        "))}),t.pop()),n.b("\n"+i),n.b('        <div class="promo-module-copy">'),n.b("\n"+i),n.b('            <div class="promo-module-copy-lining">'),n.b("\n"+i),n.sub("header",t,e,i),n.s(n.f("summary",t,e,1),t,e,0,655,742,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <div class="promo-module-summary">'),n.b(n.t(n.f("summary",t,e,0))),n.b("</div>"),n.b("\n"+i)}),t.pop()),n.s(n.f("CTA",t,e,1),t,e,0,779,1275,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                    <a class="promo-module__more-info-link" href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,886,917,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata2",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('                        <div class="content">'),n.b("\n"+i),n.s(n.f("title",t,e,1),t,e,0,1034,1136,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                                <span class="link-text">'),n.b(n.v(n.f("title",t,e,0))),n.b("</span>"),n.b("\n"+i)}),t.pop()),n.b('                            <div class="pointer"></div>'),n.b("\n"+i),n.b("                        </div>"),n.b("\n"+i),n.b("                    </a>"),n.b("\n"+i)}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}},"<ad-slot-sponsor-fake1":{name:"ad-slot-sponsor-fake",partials:{},subs:{}},"<analytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{header:function(t,e,i,n){i.b('                <div class="promo-module-header">'),i.b("\n"+n),i.b('                    <h3 class="promo-module-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h3>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n)}}}),"promo-unit-basic":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="promo-unit">'),n.b("\n"+i),n.b('    <div class="promo-unit-lining">'),n.b("\n"+i),n.b('        <div class="promo-unit-copy">'),n.b("\n"+i),n.b('            <div class="promo-unit-copy-lining">'),n.b("\n"+i),n.b('                <div class="promo-unit-header">'),n.b("\n"+i),n.b('                    <h3 class="promo-unit-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h3>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.s(n.f("summary",t,e,1),t,e,0,311,390,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <p class="promo-unit-summary">'),n.b(n.v(n.f("summary",t,e,0))),n.b("</p>"),n.b("\n"+i)}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"promo-unit-end":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"promo-unit-layout-alternative":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<anchor-capable-element-start0",t,e,"")),n.b('<div class="promo-unit-layout-alternative '),n.s(n.f("class",t,e,1),t,e,0,86,95,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <div class="promo-unit-image-wrapper">'),n.b("\n"+i),n.b('        <div class="promo-unit-header">'),n.b("\n"+i),n.b('            <div class="promo-unit-header-lining">'),n.b("\n"+i),n.sub("header",t,e,i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b('        <div class="promo-unit-image">'),n.b("\n"+i),n.b('            <div class="promo-unit-image-lining">'),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,511,624,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<responsive-image-tag1",t,e,"                    ")),i.b(i.rp("<responsive-image-overlay2",t,e,"                    "))}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b('        <div class="promo-unit-copy">'),n.b("\n"+i),n.b('            <div class="promo-unit-copy-lining">'),n.b("\n"+i),n.s(n.f("summary",t,e,1),t,e,0,784,863,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <p class="promo-unit-summary">'),n.b(n.v(n.f("summary",t,e,0))),n.b("</p>"),n.b("\n"+i)}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i),n.b(n.rp("<anchor-capable-element-end3",t,e,"")),n.fl()},partials:{"<anchor-capable-element-start0":{name:"anchor-capable-element-start",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-overlay2":{name:"responsive-image-overlay",partials:{},subs:{}},"<anchor-capable-element-end3":{name:"anchor-capable-element-end",partials:{},subs:{}}},subs:{header:function(t,e,i,n){i.b('                    <h3 class="promo-unit-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h3>"),i.b("\n"+n)}}}),"promo-unit-layout-clip":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<div"),n.b("\n"+i),n.b("    "),n.s(n.f("brand",t,e,1),t,e,0,19,41,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-brand="'),i.b(i.v(i.f("brand",t,e,0))),i.b('"')}),t.pop()),n.b("\n"+i),n.b('    class="promo-unit-layout-clip '),n.s(n.f("class",t,e,1),t,e,0,96,105,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <div class="promo-unit-image">'),n.b("\n"+i),n.b('        <div class="promo-unit-image-lining">'),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,221,239,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<article-image0",t,e,""))}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b('        <div class="promo-unit-overlay"></div>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="promo-unit-copy">'),n.b("\n"+i),n.b('        <div class="promo-unit-copy-lining">'),n.b("\n"+i),n.sub("header",t,e,i),n.s(n.f("summary",t,e,1),t,e,0,905,980,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <p class="promo-unit-summary">'),n.b(n.v(n.f("summary",t,e,0))),n.b("</p>"),n.b("\n"+i)}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<article-image0":{name:"article-image",partials:{},subs:{}},"<headercontext-heading1":{name:"context-heading",partials:{},subs:{}},"<headeranalytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{header:function(t,e,i,n){i.b('            <div class="promo-unit-header '),i.s(i.f("context",t,e,1),t,e,0,480,510,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("promo-unit-header-with-context")}),t.pop()),i.b('">'),i.b("\n"+n),i.s(i.f("context",t,e,1),t,e,0,553,611,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<headercontext-heading1",t,e,"                    "))}),t.pop()),i.b('                <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,689,720,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<headeranalytics-element-metadata2",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('                    <h3 class="promo-unit-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h3>"),i.b("\n"+n),i.b("                </a>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n)}}}),"promo-unit-layout-event":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<div"),n.b("\n"+i),n.b("    "),n.s(n.f("brand",t,e,1),t,e,0,19,41,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-brand="'),i.b(i.v(i.f("brand",t,e,0))),i.b('"')}),t.pop()),n.b("\n"+i),n.b('    class="promo-unit-layout-event '),n.s(n.f("class",t,e,1),t,e,0,97,106,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <div class="promo-unit-image">'),n.b("\n"+i),n.b('        <div class="promo-unit-image-lining">'),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,222,240,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<article-image0",t,e,""))}),t.pop()),
n.b("        </div>"),n.b("\n"+i),n.b('        <div class="promo-unit-overlay"></div>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="promo-unit-copy">'),n.b("\n"+i),n.b('        <div class="promo-unit-copy-lining">'),n.b("\n"+i),n.s(n.f("dates",t,e,1),t,e,0,425,529,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <div class="date-list">'),n.b("\n"+i),n.b(n.rp("<start-end-date1",t,e,"                ")),n.b("            </div>"),n.b("\n"+i)}),t.pop()),n.s(n.f("event-type-URL",t,e,1),t,e,0,571,750,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <div class="promo-unit-event-type">'),n.b("\n"+i),n.b('                <a class="promo-unit-event-type-link" href="'),n.b(n.v(n.f("event-type-URL",t,e,0))),n.b('">'),n.b(n.v(n.f("event-type",t,e,0))),n.b("</a>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.b('            <div class="promo-unit-header">'),n.b("\n"+i),n.b('                <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('">'),n.b("\n"+i),n.b('                    <h3 class="promo-unit-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h3>"),n.b("\n"+i),n.b("                </a>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.s(n.f("location",t,e,1),t,e,0,979,1095,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <div class="promo-unit-location">'),n.b("\n"+i),n.b("                <p>"),n.b(n.t(n.f("location",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i)}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<article-image0":{name:"article-image",partials:{},subs:{}},"<start-end-date1":{name:"start-end-date",partials:{},subs:{}}},subs:{}}),"promo-unit-layout-standard":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<div"),n.b("\n"+i),n.b("        "),n.s(n.f("brand",t,e,1),t,e,0,23,45,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-brand="'),i.b(i.v(i.f("brand",t,e,0))),i.b('"')}),t.pop()),n.b("\n"+i),n.b('        class="promo-unit-layout-standard '),n.s(n.f("class",t,e,1),t,e,0,108,117,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <div class="promo-unit-image">'),n.b("\n"+i),n.b('        <div class="promo-unit-image-lining">'),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,233,251,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<article-image0",t,e,""))}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b('        <div class="promo-unit-overlay"></div>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="promo-unit-copy">'),n.b("\n"+i),n.b('        <div class="promo-unit-copy-lining">'),n.b("\n"+i),n.sub("header",t,e,i),n.s(n.f("summary",t,e,1),t,e,0,917,992,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <p class="promo-unit-summary">'),n.b(n.v(n.f("summary",t,e,0))),n.b("</p>"),n.b("\n"+i)}),t.pop()),n.s(n.f("tags",t,e,1),t,e,0,1026,1074,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<link-box-list3",t,e,"                "))}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"),n.fl()},partials:{"<article-image0":{name:"article-image",partials:{},subs:{}},"<headercontext-heading1":{name:"context-heading",partials:{},subs:{}},"<headeranalytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}},"<link-box-list3":{name:"link-box-list",partials:{},subs:{}}},subs:{header:function(t,e,i,n){i.b('            <div class="promo-unit-header '),i.s(i.f("context",t,e,1),t,e,0,492,522,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("promo-unit-header-with-context")}),t.pop()),i.b('">'),i.b("\n"+n),i.s(i.f("context",t,e,1),t,e,0,565,623,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<headercontext-heading1",t,e,"                    "))}),t.pop()),i.b('                <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,701,732,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<headeranalytics-element-metadata2",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('                    <h3 class="promo-unit-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h3>"),i.b("\n"+n),i.b("                </a>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n)}}}),"promo-unit-start":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="promo-unit '),n.s(n.f("class",t,e,1),t,e,0,33,42,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <div class="promo-unit-lining">'),n.fl()},partials:{},subs:{}}),"promo-unit":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="promo-unit '),n.s(n.f("class",t,e,1),t,e,0,33,42,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("class",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <div class="promo-unit-lining">'),n.b("\n"+i),n.s(n.f("useAlternativeLayout",t,e,1),t,e,0,124,180,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<promo-unit-layout-alternative0",t,e,"            "))}),t.pop()),n.s(n.f("useStandardLayout",t,e,1),t,e,0,236,289,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<promo-unit-layout-standard1",t,e,"            "))}),t.pop()),n.s(n.f("useEventLayout",t,e,1),t,e,0,339,389,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<promo-unit-layout-event2",t,e,"            "))}),t.pop()),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<promo-unit-layout-alternative0":{name:"promo-unit-layout-alternative",partials:{},subs:{}},"<promo-unit-layout-standard1":{name:"promo-unit-layout-standard",partials:{},subs:{}},"<promo-unit-layout-event2":{name:"promo-unit-layout-event",partials:{},subs:{}}},subs:{}}),"responsive-image-data-element-with-icon":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<a data-replace-url="'),n.b(n.v(n.f("replace-url",t,e,0))),n.b('"'),n.b("\n"+i),n.b('   data-anchor-title="'),n.b(n.v(n.f("anchor-title",t,e,0))),n.b('"'),n.b("\n"+i),n.b('   data-caption="'),n.b(n.v(n.f("caption",t,e,0))),n.b('"'),n.b("\n"+i),n.b('   data-caption-title="'),n.b(n.v(n.f("caption-title",t,e,0))),n.b('"'),n.b("\n"+i),n.b('   data-replace-image="true"'),n.b("\n"+i),n.b('   data-is-portrait="'),n.b(n.v(n.f("is-portrait",t,e,0))),n.b('"'),n.b("\n"+i),n.b('   data-additional-wrapper-class="'),n.b(n.v(n.f("additional-wrapper-class",t,e,0))),n.b('"'),n.b("\n"+i),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,316,347,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),n.b('   class="replace-image"'),n.b("\n"+i),n.b('   title="'),n.b(n.v(n.f("alt",t,e,0))),n.b('"'),n.b("\n"+i),n.b('   href="'),n.b(n.v(n.f("url",t,e,0))),n.b('">'),n.b("\n"+i),n.b('    <div class="replace-image-additional-content">'),n.b(n.rp("<responsive-image-overlay1",t,e,"")),n.b("</div>"),n.b("\n"+i),n.b("    View image of "),n.b(n.v(n.f("alt",t,e,0))),n.b("\n"+i),n.b("</a>"),n.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}},"<responsive-image-overlay1":{name:"responsive-image-overlay",partials:{},subs:{}}},subs:{}}),"responsive-image-data-element":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<a data-replace-url="'),n.b(n.v(n.f("replace-url",t,e,0))),n.b('"'),n.b("\n"+i),n.b('   data-anchor-title="'),n.b(n.v(n.f("anchor-title",t,e,0))),n.b('"'),n.b("\n"+i),n.b('   data-caption="'),n.b(n.v(n.f("caption",t,e,0))),n.b('"'),n.b("\n"+i),n.b('   data-caption-title="'),n.b(n.v(n.f("caption-title",t,e,0))),n.b('"'),n.b("\n"+i),n.b('   data-replace-image="true"'),n.b("\n"+i),n.b('   data-is-portrait="'),n.b(n.v(n.f("is-portrait",t,e,0))),n.b('"'),n.b("\n"+i),n.b('   class="replace-image"'),n.b("\n"+i),n.b('   title="'),n.b(n.v(n.f("alt",t,e,0))),n.b('"'),n.b("\n"+i),n.b('   href="'),n.b(n.v(n.f("url",t,e,0))),n.b('">'),n.b("\n"+i),n.b("    View image of "),n.b(n.v(n.f("alt",t,e,0))),n.b("\n"+i),n.b("</a>"),n.fl()},partials:{},subs:{}}),"responsive-image-lazy-load-placeholder":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="),n.fl()},partials:{},subs:{}}),"responsive-image-overlay":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<icon0",t,e,"")),n.b(n.rp("<pointer1",t,e,"")),n.fl()},partials:{"<icon0":{name:"icon",partials:{},subs:{}},"<pointer1":{name:"pointer",partials:{},subs:{}}},subs:{}}),"responsive-image-tag":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<img data-fixed-width-format="'),n.b(n.v(n.f("fixed-width-format",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     width="'),n.b(n.v(n.f("width",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     height="'),n.b(n.v(n.f("height",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     title="'),n.b(n.v(n.f("alt",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     alt="'),n.b(n.v(n.f("alt",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     class="'),n.b(n.v(n.f("class",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     data-caption="'),n.b(n.v(n.f("caption",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     data-caption-title="'),n.b(n.v(n.f("caption-title",t,e,0))),n.b('"'),n.b("\n"+i),n.s(n.f("lazy-load",t,e,1),t,e,0,260,372,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('     data-lazy-load="true"'),n.b("\n"+i),n.b('     data-src="'),n.b(n.v(n.f("url",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     src="'),n.b(n.rp("<responsive-image-lazy-load-placeholder0",t,e,"")),n.b('"'),n.b("\n"+i)}),t.pop()),n.s(n.f("lazy-load",t,e,1),t,e,1,0,0,"")||(n.b('     src="'),n.b(n.v(n.f("url",t,e,0))),n.b('"'),n.b("\n"+i)),n.s(n.f("is-portrait",t,e,1),t,e,0,467,492,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("     data-portrait"),n.b("\n"+i)}),t.pop()),n.s(n.f("is-portrait",t,e,1),t,e,1,0,0,"")||(n.b("     data-landscape"),n.b("\n"+i)),n.b("/>"),n.fl()},partials:{"<responsive-image-lazy-load-placeholder0":{name:"responsive-image-lazy-load-placeholder",partials:{},subs:{}}},subs:{}}),"responsive-image-wrapper":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="responsive-image-wrapper">'),n.b("\n"+i),n.b(n.rp("<responsive-image-tag0",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}}},subs:{}}),"responsive-image":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("replace-url",t,e,1),t,e,0,16,234,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <a class="responsive-image-wrapper '),n.b(n.v(n.f("additional-wrapper-class",t,e,0))),n.b('" href="'),n.b(n.v(n.f("replace-url",t,e,0))),n.b('" title="View '),n.b(n.v(n.f("anchor-title",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,170,201,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i)}),t.pop()),n.b('        <div class="inline-image-wrapper">'),n.b("\n"+i),n.b(n.rp("<responsive-image-tag1",t,e,"            ")),n.b("            "),n.b(n.t(n.f("additional-content",t,e,0))),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b(n.rp("<caption2",t,e,"        ")),n.s(n.f("replace-url",t,e,1),t,e,0,421,431,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("    </a>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}},"<caption2":{name:"caption",partials:{},subs:{}}},subs:{}}),"search-results-status":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="search-results-status">'),n.b("\n"+i),n.b('    <div class="search-results-status-lining">'),n.b("\n"+i),n.s(n.f("results-found",t,e,1),t,e,0,109,333,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <h3 class="status">We\'ve found <span class="branded">'),n.b(n.v(n.f("results-count",t,e,0))),n.b("</span> matches for the keyword"),n.s(n.f("multiple-keywords",t,e,1),t,e,0,245,246,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("s")}),t.pop()),n.b(' "<span class="branded">'),n.b(n.v(n.f("search-keywords",t,e,0))),n.b('</span>"</h3>'),n.b("\n"+i)}),t.pop()),n.s(n.f("results-found",t,e,1),t,e,1,0,0,"")||(n.b('            <h3 class="status">Unfortunately we couldn\'t find any results that match "<span class="branded">'),n.b(n.v(n.f("search-keywords",t,e,0))),n.b('</span>"</h3>'),n.b("\n"),n.b("\n"+i),n.b('            <div class="onward-journey-wrapper">'),n.b("\n"+i),n.b("                <h3>What can I do now?</h3>"),n.b("\n"+i),n.b("                <ul>"),n.b("\n"+i),n.b("                    <li><b>Search again</b> - try using a simple keyword</li>"),n.b("\n"+i),n.b('                    <li><a href="/'),n.b(n.v(n.d("module.domain",t,e,0))),n.b('">Browse our latest stories</a></li>'),n.b("\n"+i),n.b("                </ul>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"),n.b("\n"+i)),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"secondary-content-destination-results":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<ad-slot-mpu-secondary0",t,e,"")),n.b("\n"+i),n.b(n.rp("<ad-slot-native-side1",t,e,"")),n.b("\n"+i),n.b('<div id="weather-forecast-secondary" class="component-placeholder"></div>'),n.b("\n"),n.b("\n"+i),n.s(n.f("best-of",t,e,1),t,e,0,141,220,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('<div id="best-of-secondary" class="best-of-list">'),n.b("\n"+i),n.b(n.rp("<promo-group2",t,e,"    ")),n.b("</div>"),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.s(n.f("follow-us",t,e,1),t,e,0,248,268,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<follow-us3",t,e,"    "))}),t.pop()),n.b("\n"+i),n.b(n.rp("<ad-slot-adsense-all4",t,e,"")),n.b("\n"+i),n.b(n.rp("<ad-slot-mpu-bottom5",t,e,"")),n.fl()},partials:{"<ad-slot-mpu-secondary0":{name:"ad-slot-mpu-secondary",partials:{},subs:{}},"<ad-slot-native-side1":{name:"ad-slot-native-side",partials:{},subs:{}},"<promo-group2":{name:"promo-group",partials:{},subs:{}},"<follow-us3":{name:"follow-us",partials:{},subs:{}},"<ad-slot-adsense-all4":{name:"ad-slot-adsense-all",partials:{},subs:{}},"<ad-slot-mpu-bottom5":{name:"ad-slot-mpu-bottom",partials:{},subs:{}}},subs:{}}),"secondary-content-standard":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<ad-slot-mpu-secondary0",t,e,"")),n.b("\n"+i),n.b(n.rp("<ad-slot-native-side1",t,e,"")),n.b("\n"+i),n.s(n.f("best-of",t,e,1),t,e,0,66,145,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('<div id="best-of-secondary" class="best-of-list">'),n.b("\n"+i),n.b(n.rp("<promo-group2",t,e,"    ")),n.b("</div>"),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.s(n.f("follow-us",t,e,1),t,e,0,173,193,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<follow-us3",t,e,"    "))}),t.pop()),n.b("\n"+i),n.b(n.rp("<ad-slot-adsense-all4",t,e,"")),n.b("\n"+i),n.b(n.rp("<ad-slot-mpu-bottom5",t,e,"")),n.fl()},partials:{"<ad-slot-mpu-secondary0":{name:"ad-slot-mpu-secondary",partials:{},subs:{}},"<ad-slot-native-side1":{name:"ad-slot-native-side",partials:{},subs:{}},"<promo-group2":{name:"promo-group",partials:{},subs:{}},"<follow-us3":{name:"follow-us",partials:{},subs:{}},"<ad-slot-adsense-all4":{name:"ad-slot-adsense-all",partials:{},subs:{}},"<ad-slot-mpu-bottom5":{name:"ad-slot-mpu-bottom",partials:{},subs:{}}},subs:{}}),"secondary-content-story-simple":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<ad-slot-mpu-secondary0",t,e,"")),n.fl()},partials:{"<ad-slot-mpu-secondary0":{name:"ad-slot-mpu-secondary",partials:{},subs:{}}},subs:{}}),"secondary-content-story":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<ad-slot-mpu-secondary0",t,e,"")),n.b("\n"+i),n.b(n.rp("<ad-slot-native-side1",t,e,"")),n.b("\n"+i),n.b('<div id="related-stories-secondary" class="component-placeholder related-stories"></div>'),n.b("\n"),n.b("\n"+i),n.b('<div class="secondary-content__ad-slot">'),n.b("\n"+i),n.b(n.rp("<ad-slot-infeed2",t,e,"    ")),n.b("</div>"),n.b("\n"),n.b("\n"+i),n.b('<div id="weather-forecast-secondary" class="component-placeholder"></div>'),n.b("\n"),n.b("\n"+i),n.s(n.f("follow-us",t,e,1),t,e,0,306,326,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<follow-us3",t,e,"    "))}),t.pop()),n.b("\n"+i),n.s(n.f("calendar-promo",t,e,1),t,e,0,361,386,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<calendar-promo4",t,e,"    "))}),t.pop()),n.b("\n"),n.b("\n"+i),n.b('<div id="best-of-secondary" class="component-placeholder best-of-list"></div>'),n.b("\n"),n.b("\n"+i),n.b(n.rp("<ad-slot-adsense-all5",t,e,"")),n.b("\n"+i),n.b(n.rp("<ad-slot-mpu-bottom6",t,e,"")),n.fl()},partials:{"<ad-slot-mpu-secondary0":{name:"ad-slot-mpu-secondary",partials:{},subs:{}},"<ad-slot-native-side1":{name:"ad-slot-native-side",partials:{},subs:{}},"<ad-slot-infeed2":{name:"ad-slot-infeed",partials:{},subs:{}},"<follow-us3":{name:"follow-us",partials:{},subs:{}},"<calendar-promo4":{name:"calendar-promo",partials:{},subs:{}},"<ad-slot-adsense-all5":{name:"ad-slot-adsense-all",partials:{},subs:{}},"<ad-slot-mpu-bottom6":{name:"ad-slot-mpu-bottom",partials:{},subs:{}}},subs:{}}),"section-header":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<header>"),n.b("\n"+i),n.b('    <div class="section-header">'),n.b("\n"+i),n.b('        <div class="section-title-wrapper">'),n.b("\n"+i),n.b('            <h2 class="section-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h2>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</header>"),n.fl()},partials:{},subs:{}}),"series-box":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<h4 class="series-list-title">'),n.b(n.v(n.f("title",t,e,0))),n.b(":</h4>"),n.b("\n"+i),n.b(n.rp("<link-box-list0",t,e,"")),n.fl()},partials:{"<link-box-list0":{name:"link-box-list",partials:{},subs:{}}},subs:{}}),"share-tool-item":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<li class="share-item">'),n.b("\n"+i),n.b('    <div class="share-item-lining">'),n.b("\n"+i),n.b("        <a "),n.b("\n"+i),n.b('            class="share-button '),n.b(n.v(n.f("class",t,e,0))),n.b('"'),n.b("\n"+i),n.b('            href="'),n.b(n.v(n.f("url",t,e,0))),n.b('"'),n.b("\n"+i),n.b('            data-share-destination="'),n.b(n.v(n.f("class",t,e,0))),n.b('"'),n.b("\n"+i),n.b('            data-tracking-id="'),n.b(n.v(n.f("trackingId",t,e,0))),n.b('"'),n.b("\n"+i),n.b('            target="_blank">'),n.b("\n"+i),n.b('            <span class="share-icon-wrapper share-icon-wrapper--social">'),n.b("\n"+i),n.b('                <span class="icon '),n.b(n.v(n.f("icon-class",t,e,0))),n.b('"></span>'),n.b("\n"+i),n.b("            </span>"),n.b("\n"+i),n.b('            <span class="share-item-text">'),n.b(n.v(n.f("text",t,e,0))),n.b("</span>"),n.b("\n"+i),n.sub("share-tool-additional-content",t,e,i),n.b("        </a>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</li>"),n.fl()},partials:{},subs:{"share-tool-additional-content":function(t,e,i,n){}}}),"share-tools-content":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<ul class="share share--mobile '),n.b(n.v(n.f("class",t,e,0))),n.b('">'),n.b("\n"+i),n.s(n.f("shareItemsMobile",t,e,1),t,e,0,64,90,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<share-tool-item0",t,e,"    "))}),t.pop()),n.b("</ul>"),n.b("\n"+i),n.b('<ul class="share share--desktop '),n.b(n.v(n.f("class",t,e,0))),n.b('">'),n.b("\n"+i),n.s(n.f("shareItemsDesktop",t,e,1),t,e,0,184,210,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<share-tool-item1",t,e,"    "))}),t.pop()),n.b("</ul>"),n.fl()},partials:{"<share-tool-item0":{name:"share-tool-item",partials:{},subs:{}},"<share-tool-item1":{name:"share-tool-item",partials:{},subs:{}}},subs:{}}),"share-tools-expandable-button-close":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<span class="share-tools-control-close">'),n.b("\n"+i),n.b('    <button class="share-tools-control-close-button" data-share-close>'),n.b("\n"+i),n.b('        <span class="share-tools-control-close-icon gelicon--no"></span>'),n.b("\n"+i),n.b('        <span class="share-tools-control-close-button-text">Close</span>'),n.b("\n"+i),n.b("    </button>"),n.b("\n"+i),n.b("</span>"),n.fl()},partials:{},subs:{}}),"share-tools-expandable":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="share-tools '),n.b(n.v(n.f("class",t,e,0))),n.b('" data-share aria-labelledby="share-tools-title">'),n.b("\n"+i),n.b('    <h2 id="share-tools-title" class="share-tools-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h2>"),n.b("\n"+i),n.b('    <div class="share-tools-content" data-share-content>'),n.b("\n"+i),n.b('        <div class="share-tools-content-wrapper">'),n.b("\n"+i),n.b(n.rp("<share-tools-expandable-button-close0",t,e,"            ")),n.b(n.rp("<share-tools-content1",t,e,"            ")),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="share-tools-controls" data-share-controls>'),n.b("\n"+i),n.b('        <button class="share-tools-control" title="Toggle Share" data-share-toggle>'),n.b("\n"+i),n.b('            <span class="share-tools-control-label">'),n.b(n.v(n.f("title",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('            <span class="share-tools-control-share gelicon--share"></span>'),n.b("\n"),n.b("\n"+i),n.b('            <span class="share-tools-control-toggle">'),n.b("\n"+i),n.b('                <span class="share-tools-control-toggle-icon"></span>'),n.b("\n"+i),n.b("            </span>"),n.b("\n"+i),n.b("        </button>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<share-tools-expandable-button-close0":{name:"share-tools-expandable-button-close",partials:{},subs:{}},"<share-tools-content1":{name:"share-tools-content",partials:{},subs:{}}},subs:{}}),"share-tools":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<headed-section-start0",t,e,"")),n.b(n.rp("<share-tools-content1",t,e,"    ")),n.b(n.rp("<headed-section-end2",t,e,"")),n.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<share-tools-content1":{name:"share-tools-content",partials:{},subs:{}},"<headed-section-end2":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"slideshow-footer":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="fullsized_footer" class="open">'),n.b("\n"+i),n.b('    <a id="fullsized_footer_toggle_wrapper" href="#">'),n.b("\n"+i),n.b('        <span id="fullsize_footer_toggle_text">Hide image caption</span>'),n.b("\n"+i),n.b('        <span id="fullsize_footer_toggle_symbol"></span>'),n.b("\n"+i),n.b("    </a>"),n.b("\n"+i),n.b('    <div id="fullsized_footer_overlay">'),n.b("\n"+i),n.b('        <div id="fullsized_footer_lining">'),n.b("\n"+i),n.b('            <div id="fullsized_caption_wrapper">'),n.b("\n"+i),n.b('                <div id="fullsized_caption_lining">'),n.b("\n"+i),n.b('                    <span class="fullsized_caption_title"></span>'),n.b("\n"+i),n.b('                    <span class="fullsized_caption caption"></span>'),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b('            <div id="fullsized_share_tools_wrapper">'),n.b("\n"+i),n.b('                <div id="fullsized_share_tools"></div>'),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"sg-controls":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-controls" data-sg="controls">'),n.b("\n"+i),n.b(n.rp("<sg-info-button0",t,e,"    ")),n.b(n.rp("<sg-prev-next1",t,e,"    ")),n.s(n.f("share-tools",t,e,1),t,e,0,111,195,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div id="slideshow-gallery-share-tools">'),n.b(n.rp("<share-tools-expandable2",t,e,"")),n.b("</div>"),n.b("\n"+i)}),t.pop()),n.b(n.rp("<sg-progress3",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<sg-info-button0":{name:"sg-info-button",partials:{},subs:{}},"<sg-prev-next1":{name:"sg-prev-next",partials:{},subs:{}},"<share-tools-expandable2":{name:"share-tools-expandable",partials:{},subs:{}},"<sg-progress3":{name:"sg-progress",partials:{},subs:{}}},subs:{}}),"sg-end-slate-mpu":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-ad-slot sg-ad-slot--end-slate">'),n.b("\n"+i),n.b("    <div data-sg-end-slate-mpu>"),n.b("\n"+i),n.b(n.rp("<ad-slot-mpu-bottom-deferred0",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<ad-slot-mpu-bottom-deferred0":{name:"ad-slot-mpu-bottom-deferred",partials:{},subs:{}}},subs:{}}),"sg-end-slate-promo-group-items":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-related-galleries-promo-group '),n.s(n.f("adsEnabled",t,e,1),t,e,0,60,105,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("sg-related-galleries-promo-group--ads-enabled")}),t.pop()),n.b(" "),n.b(n.v(n.f("class",t,e,0))),n.b('">'),n.b("\n"+i),n.s(n.f("promo-group",t,e,1),t,e,0,149,372,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.s(n.f("items",t,e,1),t,e,0,164,299,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <div class="promo-unit-wrapper">'),n.b("\n"+i),n.b("            <article>"),n.b("\n"+i),n.b(n.rp("<promo-unit0",t,e,"             ")),n.b("            </article>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i)}),t.pop()),n.s(n.f("items",t,e,1),t,e,1,0,0,"")||n.b(n.rp("<empty-list-notice1",t,e,"        "))}),t.pop()),n.b("</div>"),n.fl()},partials:{"<promo-unit0":{name:"promo-unit",partials:{},subs:{}},"<empty-list-notice1":{name:"empty-list-notice",partials:{},subs:{}}},subs:{}}),"sg-end-slate-related-galleries":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-related-galleries">'),n.b("\n"+i),n.b('    <div class="sg-related-galleries-wrapper">'),n.b("\n"+i),n.b('        <h2 class="sg-related-galleries-heading">More amazing galleries</h2>'),n.b("\n"+i),n.b('        <div class="sg-related-galleries-content">'),n.b("\n"+i),n.b('            <div class="sg-related-galleries-ad-slot">'),n.b("\n"+i),n.s(n.f("adsEnabled",t,e,1),t,e,0,296,355,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<sg-end-slate-mpu0",t,e,"                    "))}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.s(n.d("related-galleries.groups.group-1",t,e,1),t,e,0,439,504,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<sg-end-slate-promo-group-items1",t,e,"                "))}),t.pop()),n.s(n.d("related-galleries.groups.group-2",t,e,1),t,e,0,591,656,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<sg-end-slate-promo-group-items2",t,e,"                "))}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<sg-end-slate-mpu0":{name:"sg-end-slate-mpu",partials:{},subs:{}},"<sg-end-slate-promo-group-items1":{name:"sg-end-slate-promo-group-items",partials:{},subs:{}},"<sg-end-slate-promo-group-items2":{name:"sg-end-slate-promo-group-items",partials:{},subs:{}}},subs:{}}),"sg-end-slate":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-end-slate" data-sg-slide data-sg-end-slate>'),n.b("\n"+i),n.b('    <div data-sg-slide-contents class="clearfix  sg-end-slate-inner" data-sg-slide-text>'),n.b("\n"+i),n.b(n.rp("<sg-end-slate-related-galleries0",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<sg-end-slate-related-galleries0":{name:"sg-end-slate-related-galleries",partials:{},subs:{}}},subs:{}}),"sg-horizontal-banner":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("brand-banner",t,e,1),t,e,0,17,35,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<banner0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<banner0":{name:"banner",partials:{},subs:{}}},subs:{}}),"sg-info-button":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<button class="sg-info-button gelicon--info" data-sg-info-button title="Toggle text">'),n.b("\n"+i),n.b('    <span class="sg-info-button-text">Toggle slide info text</span>'),n.b("\n"+i),n.b("</button>"),n.fl()},partials:{},subs:{}}),"sg-main":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div data-sg="main" class="sg-main">'),n.b("\n"+i),n.b(n.rp("<sg-controls0",t,e,"    ")),n.b(n.rp("<sg-start-overlay1",t,e,"    ")),n.b(n.rp("<sg-transition-overlay2",t,e,"    ")),n.b(n.rp("<sg-splash3",t,e,"    ")),n.b(n.rp("<sg-slides4",t,e,"    ")),n.b(n.rp("<sg-end-slate5",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<sg-controls0":{name:"sg-controls",partials:{},subs:{}},"<sg-start-overlay1":{name:"sg-start-overlay",partials:{},subs:{}},"<sg-transition-overlay2":{name:"sg-transition-overlay",partials:{},subs:{}},"<sg-splash3":{name:"sg-splash",partials:{},subs:{}},"<sg-slides4":{name:"sg-slides",partials:{},subs:{}},"<sg-end-slate5":{name:"sg-end-slate",partials:{},subs:{}}},subs:{}}),"sg-outward-link-layout":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("\n"+i),n.b('<div class="sg-slide-storyworks-read-all-wrapper">'),n.b("\n"+i),n.b('    <span class="sg-slide-storyworks-read-all-line"></span>'),n.b("\n"+i),n.b("    <a href="),n.b(n.t(n.f("url",t,e,0))),n.b(" "),n.s(n.f("external",t,e,1),t,e,0,147,162,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('target="_blank"')}),t.pop()),n.b(">"),n.b("\n"+i),n.b('        <div class="sg-slide-storyworks-read-all-inner-wrapper">'),n.b("\n"+i),n.b('            <span class="sg-slide-storyworks-read-all-content" >'),n.b(n.t(n.f("text",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('            <span class="gelicon gelicon--next sg-slide-storyworks-gelicon"></span>'),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </a>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"sg-prev-next":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<button class="sg-slide-nav-button sg-slide-nav-button-prev gelicon gelicon--previous is-inactive" data-sg-prev>'),n.b("\n"+i),n.b('    <span class="sg-slide-nav-button-text">Previous slide</span>'),n.b("\n"+i),n.b("</button>"),n.b("\n"+i),n.b('<button class="sg-slide-nav-button sg-slide-nav-button-next gelicon gelicon--next is-inactive" data-sg-next>'),n.b("\n"+i),n.b('    <span class="sg-slide-nav-button-text">Next slide</span>'),n.b("\n"+i),n.b("</button>"),n.fl()},partials:{},subs:{}}),"sg-progress":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<span role="progressbar" class="sg-progress" data-sg-progress id="slide-info">'),n.b("\n"+i),n.b('    <span class="visually-hidden">Slide</span>'),n.b("\n"+i),n.b("    <span data-sg-progress-index></span>"),n.b("\n"+i),n.b('    <span class="visually-hidden">of</span>'),n.b("\n"+i),n.b('    <span class="sg-progress-total" data-sg-progress-total></span>'),n.b("\n"+i),n.b("</span>"),n.fl()},partials:{},subs:{}}),"sg-share-tools-button-close":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<span class="sg-share-tools-control-close">'),n.b("\n"+i),n.b('    <button class="sg-share-tools-control-close-button" data-sg-share-close>'),n.b("\n"+i),n.b('        <span class="sg-share-tools-control-close-icon gelicon--no"></span>'),n.b("\n"+i),n.b('        <span class="sg-share-tools-control-close-button-text">Close</span>'),n.b("\n"+i),n.b("    </button>"),n.b("\n"+i),n.b("</span>"),n.fl()},partials:{},subs:{}}),"sg-share-tools-content":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<ul class="share share--mobile '),n.b(n.v(n.f("class",t,e,0))),n.b('">'),n.b("\n"+i),n.s(n.f("shareItemsMobile",t,e,1),t,e,0,64,90,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<share-tool-item0",t,e,"    "))}),t.pop()),n.b("</ul>"),n.b("\n"),n.b("\n"+i),n.b('<ul class="share share--desktop '),n.b(n.v(n.f("class",t,e,0))),n.b('">'),n.b("\n"+i),n.s(n.f("shareItemsDesktop",t,e,1),t,e,0,185,211,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<share-tool-item1",t,e,"    "))}),t.pop()),n.b("</ul>"),n.fl()},partials:{
"<share-tool-item0":{name:"share-tool-item",partials:{},subs:{}},"<share-tool-item1":{name:"share-tool-item",partials:{},subs:{}}},subs:{}}),"sg-share-tools":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("share-tools",t,e,1),t,e,0,16,997,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div class="sg-share-tools" data-sg-share aria-labelledby="share-tools-title" id="slideshow-gallery-share-tools">'),n.b("\n"+i),n.b('        <h2 id="share-tools-title" class="sg-share-tools-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h2>"),n.b("\n"+i),n.b('        <div class="sg-share-tools-content" data-sg-share-content>'),n.b("\n"+i),n.b('            <div class="sg-share-tools-content-wrapper">'),n.b("\n"+i),n.b(n.rp("<sg-share-tools-button-close0",t,e,"                ")),n.b(n.rp("<sg-share-tools-content1",t,e,"                ")),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b('        <div class="sg-share-tools-controls" data-sg-share-controls>'),n.b("\n"+i),n.b('            <button class="sg-share-tools-control" title="Toggle Share" data-sg-share-toggle>'),n.b("\n"+i),n.b('                <span class="sg-share-tools-control-label">'),n.b(n.v(n.f("title",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('                <span class="sg-share-tools-control-share gelicon--share"></span>'),n.b("\n"),n.b("\n"+i),n.b('                <span class="sg-share-tools-control-toggle">'),n.b("\n"+i),n.b('                    <span class="sg-share-tools-control-toggle-icon"></span>'),n.b("\n"+i),n.b("                </span>"),n.b("\n"+i),n.b("            </button>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{"<sg-share-tools-button-close0":{name:"sg-share-tools-button-close",partials:{},subs:{}},"<sg-share-tools-content1":{name:"sg-share-tools-content",partials:{},subs:{}}},subs:{}}),"sg-slide-ambient-video":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("ambientVideo",t,e,1),t,e,0,17,291,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <video class="sg-ambient-video hidden" data-ambient-video'),n.b("\n"+i),n.b("           loop"),n.b("\n"+i),n.b("           mute"),n.b("\n"+i),n.b('           preload="none"'),n.b("\n"+i),n.b('           poster="'),n.b(n.v(n.f("placeholderImageURL",t,e,0))),n.b('">'),n.b("\n"+i),n.s(n.f("formats",t,e,1),t,e,0,203,265,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <source src="'),n.b(n.v(n.f("URL",t,e,0))),n.b('" type="'),n.b(n.v(n.f("Format",t,e,0))),n.b('">'),n.b("\n"+i)}),t.pop()),n.b("    </video>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{},subs:{}}),"sg-slide-image-background":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-slide-background-wrapper">'),n.b("\n"+i),n.b('    <div class="sg-slide-background '),n.s(n.f("is-portrait",t,e,1),t,e,0,94,122,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("sg-slide-background-portrait")}),t.pop()),n.b(" "),n.s(n.f("is-portrait",t,e,1),t,e,1,0,0,"")||n.b("sg-slide-background-landscape"),n.b('" data-sg-full-height>'),n.b("\n"+i),n.b('        <div data-src="'),n.b(n.v(n.f("url",t,e,0))),n.b('" class="sg-slide-background-image" data-fixed-width-format="'),n.b(n.v(n.f("fixed-width-format",t,e,0))),n.b('" data-lazy-load="true" data-background '),n.s(n.f("is-portrait",t,e,1),t,e,0,392,405,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("data-portrait")}),t.pop()),n.s(n.f("is-portrait",t,e,1),t,e,1,0,0,"")||n.b("data-landscape"),n.b("></div>"),n.b("\n"+i),n.b(n.rp("<sg-slide-ambient-video0",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<sg-slide-ambient-video0":{name:"sg-slide-ambient-video",partials:{},subs:{}}},subs:{}}),"sg-slide-image-inline":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-slide-inline-image  '),n.s(n.f("is-portrait",t,e,1),t,e,0,51,83,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("sg-slide-inline-image--portrait ")}),t.pop()),n.b('" data-sg="inline-image">'),n.b("\n"+i),n.b('    <div class="sg-slide-inline-image-wrapper">'),n.b("\n"+i),n.b('        <div class="sg-slide-inline-image-responsive-box responsive-box '),n.s(n.f("is-portrait",t,e,1),t,e,0,261,291,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("responsive-box--portrait-wide ")}),t.pop()),n.b(" "),n.s(n.f("is-portrait",t,e,1),t,e,1,0,0,"")||n.b("responsive-box--landscape"),n.b('">'),n.b("\n"+i),n.b('            <div class="responsive-box__content">'),n.b("\n"+i),n.b(n.rp("<responsive-image-tag0",t,e,"                ")),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b(n.rp("<caption1",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}},"<caption1":{name:"caption",partials:{},subs:{}}},subs:{}}),"sg-slide-image":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("image",t,e,1),t,e,0,10,77,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<sg-slide-image-inline0",t,e,"    ")),i.b(i.rp("<sg-slide-image-background1",t,e,"    "))}),t.pop()),n.fl()},partials:{"<sg-slide-image-inline0":{name:"sg-slide-image-inline",partials:{},subs:{}},"<sg-slide-image-background1":{name:"sg-slide-image-background",partials:{},subs:{}}},subs:{}}),"sg-slide-layout-image-only":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<sg-slide-image0",t,e,"")),n.fl()},partials:{"<sg-slide-image0":{name:"sg-slide-image",partials:{},subs:{}}},subs:{}}),"sg-slide-layout-overlay":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<sg-slide-image0",t,e,"")),n.b("\n"+i),n.b('<div class="sg-slide-content-wrap  sg-slide-overlay-content-wrap" data-sg-slide-text>'),n.b("\n"+i),n.b('    <div class="sg-slide-content clearfix" data-sg-slide-contents>'),n.b("\n"+i),n.b('        <div class="sg-slide-inner sg-slide-overlay-content">'),n.b("\n"+i),n.b('            <div class="sg-slide-inner-lining">'),n.b("\n"+i),n.b('                <div class="sg-slide-overlay-content-holder" id="slide-label-'),n.b(n.v(n.f("slideIndex",t,e,0))),n.b('">'),n.b("\n"+i),n.b("                    "),n.b(n.t(n.f("body",t,e,0))),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<sg-slide-image0":{name:"sg-slide-image",partials:{},subs:{}}},subs:{}}),"sg-slide-layout-sidebar":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<sg-slide-image0",t,e,"")),n.b("\n"+i),n.b('<div class="sg-slide-content-wrap">'),n.b("\n"+i),n.b('    <div class="sg-slide-content-wrap-inner" data-sg-full-height>'),n.b("\n"+i),n.b('        <div class="sg-slide-content sg-slide-sidebar-content" data-sg-slide-text>'),n.b("\n"+i),n.b('            <div class="sg-slide-inner sg-slide-sidebar-inner">'),n.b("\n"+i),n.b('                <div class="sg-slide-inner-lining sg-slide-sidebar-inner-lining">'),n.b("\n"+i),n.b('                    <h2 class="sg-slide-sidebar-title" id="slide-label-'),n.b(n.v(n.f("slideIndex",t,e,0))),n.b('">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h2>"),n.b("\n"+i),n.b("                    "),n.b(n.t(n.f("body",t,e,0))),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<sg-slide-image0":{name:"sg-slide-image",partials:{},subs:{}}},subs:{}}),"sg-slide-layout-video":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("video",t,e,1),t,e,0,10,35,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<sg-slide-video0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<sg-slide-video0":{name:"sg-slide-video",partials:{},subs:{}}},subs:{}}),"sg-slide-video-caption":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-slide-video-caption">'),n.b("\n"+i),n.b('    <div class="sg-slide-video-caption-lining">'),n.b("\n"+i),n.s(n.f("title",t,e,1),t,e,0,103,193,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <h2 class="sg-slide-video-caption-text caption-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h2>"),n.b("\n"+i)}),t.pop()),n.b('        <div class="sg-slide-video-caption-text caption-body">'),n.b(n.t(n.f("body",t,e,0))),n.b("</div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"sg-slide-video":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-slide-video" data-sg-video>'),n.b("\n"+i),n.b('    <div class="sg-slide-video-wrapper" data-sg-slide-contents>'),n.b("\n"+i),n.b(n.rp("<stand-alone-video-element0",t,e,"        ")),n.b(n.rp("<sg-slide-video-caption1",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<stand-alone-video-element0":{name:"stand-alone-video-element",partials:{},subs:{}},"<sg-slide-video-caption1":{name:"sg-slide-video-caption",partials:{},subs:{}}},subs:{}}),"sg-slides":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-slides">'),n.b("\n"+i),n.s(n.f("slides",t,e,1),t,e,0,39,1545,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.s(n.f("content",t,e,1),t,e,0,60,1528,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("        <div"),n.b("\n"+i),n.b('            class="sg-slides-item"'),n.b("\n"+i),n.b("            data-sg-slide"),n.b("\n"+i),n.b("            data-sg-content-slide"),n.b("\n"+i),n.b('            data-sg-slide-text-color="'),n.b(n.v(n.f("textColor",t,e,0))),n.b('"'),n.b("\n"+i),n.b('            data-sg-slide-type="'),n.b(n.v(n.f("layoutOption",t,e,0))),n.b('"'),n.b("\n"+i),n.s(n.f("ambientVideo",t,e,1),t,e,0,301,362,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("                data-sg-slide-has-ambient-video"),n.b("\n"+i)}),t.pop()),n.s(n.f("isStoryWorksPaidContent",t,e,1),t,e,0,420,476,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("                data-sg-slide-paid-content"),n.b("\n"+i)}),t.pop()),n.b('            aria-labelledby="slide-info slide-label-'),n.b(n.v(n.f("slideIndex",t,e,0))),n.b('">'),n.b("\n"+i),n.b('            <div class="sg-slide sg-slide-'),n.b(n.v(n.f("layoutOption",t,e,0))),n.b(" sg-slide-"),n.b(n.v(n.f("textColor",t,e,0))),n.b('" data-sg-full-height data-sg-info-content>'),n.b("\n"+i),n.b("               "),n.b("\n"+i),n.s(n.f("isStoryWorksPaidContent",t,e,1),t,e,0,759,826,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<sg-storyworks-layout0",t,e,"                        "))}),t.pop()),n.s(n.f("isStoryWorksPaidContent",t,e,1),t,e,1,0,0,"")||(n.s(n.f("useOverlayLayout",t,e,1),t,e,0,941,1015,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<sg-slide-layout-overlay1",t,e,"                        "))}),t.pop()),n.s(n.f("useSidebarLayout",t,e,1),t,e,0,1078,1148,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<sg-slide-layout-sidebar2",t,e,"                    "))}),t.pop()),n.s(n.f("useVideoLayout",t,e,1),t,e,0,1209,1281,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<sg-slide-layout-video3",t,e,"                        "))}),t.pop()),n.s(n.f("useDefaultLayout",t,e,1),t,e,0,1342,1419,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<sg-slide-layout-image-only4",t,e,"                        "))}),t.pop())),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i)}),t.pop())}),t.pop()),n.b("</div>"),n.fl()},partials:{"<sg-storyworks-layout0":{name:"sg-storyworks-layout",partials:{},subs:{}},"<sg-slide-layout-overlay1":{name:"sg-slide-layout-overlay",partials:{},subs:{}},"<sg-slide-layout-sidebar2":{name:"sg-slide-layout-sidebar",partials:{},subs:{}},"<sg-slide-layout-video3":{name:"sg-slide-layout-video",partials:{},subs:{}},"<sg-slide-layout-image-only4":{name:"sg-slide-layout-image-only",partials:{},subs:{}}},subs:{}}),"sg-spinner":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-spinner">'),n.b("\n"+i),n.b('    <svg class="sg-spinner-svg" xmlns="http://www.w3.org/2000/svg">'),n.b("\n"+i),n.b('        <circle stroke-width="12%" r="44%" cx="50%" cy="50%" class="sg-spinner-svg-circle" />'),n.b("\n"+i),n.b("    </svg>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"sg-splash-primary":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-splash-primary">'),n.b("\n"),n.b("\n"+i),n.b('    <div class="sg-splash-column-lining">'),n.b("\n"),n.b("\n"+i),n.s(n.f("title",t,e,1),t,e,0,94,158,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <h1 class="sg-splash-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h1>"),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.b('        <div class="sg-splash-attribution">'),n.b("\n"+i),n.s(n.f("author",t,e,1),t,e,0,237,318,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <span class="sg-splash-author">By '),n.b(n.v(n.f("author",t,e,0))),n.b("</span>"),n.b("\n"+i)}),t.pop()),n.s(n.f("display-date",t,e,1),t,e,0,359,441,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <span class="sg-splash-date">'),n.b(n.v(n.f("display-date",t,e,0))),n.b("</span>"),n.b("\n"+i)}),t.pop()),n.b("        </div>"),n.b("\n"),n.b("\n"+i),n.b('        <div class="sg-splash-sponsor">'),n.b("\n"+i),n.b('            <div class="sg-splash-sponsor__inner">'),n.b("\n"+i),n.b(n.rp("<ad-slot-sponsor-section-primary0",t,e,"            ")),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"),n.b("\n"+i),n.s(n.f("summary",t,e,1),t,e,0,670,736,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <p class="sg-splash-intro">'),n.b(n.t(n.f("summary",t,e,0))),n.b("</p>"),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.b(n.rp("<sg-splash-start1",t,e,"        ")),n.b(n.rp("<sg-splash-scroll2",t,e,"        ")),n.b("\n"+i),n.b("    </div>"),n.b("\n"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<ad-slot-sponsor-section-primary0":{name:"ad-slot-sponsor-section-primary",partials:{},subs:{}},"<sg-splash-start1":{name:"sg-splash-start",partials:{},subs:{}},"<sg-splash-scroll2":{name:"sg-splash-scroll",partials:{},subs:{}}},subs:{}}),"sg-splash-scroll":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<span class="sg-splash-scroll">'),n.b("\n"+i),n.b('    <span class="sg-splash-scroll-text">Scroll to view the gallery</span>'),n.b("\n"+i),n.b('    <span class="sg-splash-scroll-icon gelicon gelicon--down"></span>'),n.b("\n"+i),n.b("</span>"),n.fl()},partials:{},subs:{}}),"sg-splash-secondary":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-splash-secondary">'),n.b("\n"+i),n.b('    <div class="sg-splash-column-lining">'),n.b("\n"+i),n.b('        <div class="sg-splash-secondary-content">'),n.b("\n"+i),n.s(n.f("adsEnabled",t,e,1),t,e,0,153,312,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <div class="sg-ad-slot sg-ad-slot--splash-desktop sg-ad-slot--desktop">'),n.b("\n"+i),n.b(n.rp("<ad-slot-mpu-secondary0",t,e,"                ")),n.b("            </div>"),n.b("\n"+i)}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<ad-slot-mpu-secondary0":{name:"ad-slot-mpu-secondary",partials:{},subs:{}}},subs:{}}),"sg-splash-start":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<button class="sg-splash-start" data-sg-start aria-labelledby="splash-start-label">'),n.b("\n"+i),n.b('    <span class="sg-splash-start-label" id="splash-start-label">Start the gallery</span>'),n.b("\n"+i),n.b('    <span class="sg-splash-start-icon gelicon gelicon--next"></span>'),n.b("\n"+i),n.b("</button>"),n.fl()},partials:{},subs:{}}),"sg-splash":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-splash" data-sg-slide data-sg-full-height>'),n.b("\n"),n.b("\n"+i),n.b('    <div class="sg-splash-inner" data-sg-full-height>'),n.b("\n"),n.b("\n"+i),n.b('        <div data-sg-slide-text class="sg-splash-content">'),n.b("\n"),n.b("\n"+i),n.b('            <div class="sg-splash-content-inner">'),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,250,453,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <div data-src="'),n.b(n.v(n.f("url",t,e,0))),n.b('" class="sg-splash-background" data-background data-background-splash data-lazy-load="true" data-fixed-width-format="'),n.b(n.v(n.f("fixed-width-format",t,e,0))),n.b('"></div>'),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.b('                <div class="page-component-wrapper">'),n.b("\n"+i),n.b('                    <div class="sg-splash-wrapper" data-sg-slide-contents>'),n.b("\n"+i),n.b(n.rp("<sg-splash-primary0",t,e,"                        ")),n.b(n.rp("<sg-splash-secondary1",t,e,"                        ")),n.b("                    </div>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"),n.b("\n"+i),n.b('            <div class="sg-splash-footer" data-sg-slide-contents>'),n.b("\n"+i),n.s(n.f("domestic-messaging-inline",t,e,1),t,e,0,871,929,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<domestic-header2",t,e,"                    "))}),t.pop()),n.s(n.f("brand-banner",t,e,1),t,e,0,993,1043,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<banner3",t,e,"                    "))}),t.pop()),n.b("            </div>"),n.b("\n"),n.b("\n"+i),n.b("        </div>"),n.b("\n"),n.b("\n"+i),n.b("    </div>"),n.b("\n"),n.b("\n"+i),n.s(n.f("adsEnabled",t,e,1),t,e,0,1128,1257,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div class="sg-ad-slot sg-ad-slot--mobile sg-ad-slot--interstitial-mobile">'),n.b("\n"+i),n.b(n.rp("<ad-slot-mpu-primary4",t,e,"        ")),n.b("    </div>"),n.b("\n"+i)}),t.pop()),n.b("</div>"),n.fl()},partials:{"<sg-splash-primary0":{name:"sg-splash-primary",partials:{},subs:{}},"<sg-splash-secondary1":{name:"sg-splash-secondary",partials:{},subs:{}},"<domestic-header2":{name:"domestic-header",partials:{},subs:{}},"<banner3":{name:"banner",partials:{},subs:{}},"<ad-slot-mpu-primary4":{name:"ad-slot-mpu-primary",partials:{},subs:{}}},subs:{}}),"sg-start-overlay":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-start-overlay" data-sg-start-overlay>'),n.b("\n"+i),n.b('    <div class="sg-start-overlay-loader">'),n.b("\n"+i),n.b(n.rp("<sg-spinner0",t,e,"        ")),n.b('        <span class="sg-start-overlay-loader-text">Loading gallery...</span>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<sg-spinner0":{name:"sg-spinner",partials:{},subs:{}}},subs:{}}),"sg-storyworks-layout":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-slide-storyworks">'),n.b("\n"+i),n.b('    <div class="sg-slide-storyworks-content-wrap ">'),n.b("\n"+i),n.b('        <div class="sg-slide-storyworks-content-wrap-inner" data-sg-full-height>'),n.b("\n"),n.b("\n"+i),n.b('            <div class="sg-slide-storyworks-about">'),n.b("\n"+i),n.b('                <div class="sg-slide-storyworks-title-wrapper">'),n.b("\n"+i),n.b('                <p class="sg-slide-storyworks-replace">StoryWorks</p></div>'),n.b("\n"+i),n.b('                <div class="sg-slide-storyworks-sponsor-wrapper">'),n.b("\n"+i),n.b('                    <a class="sg-slide-storyworks-about-content" href='),n.b(n.t(n.f("storyWorksAdvertiseUrl",t,e,0))),n.b(">About this content</a>"),n.b("\n"+i),n.b('                    <div class="sg-slide-storyworks-sponsor-inner-wrapper">'),n.b("\n"+i),n.b('                        <div class="sg-slide-storyworks-sponsor">'),n.b("\n"+i),n.b(n.rp("<ad-slot-infinite-sponsor-section-storyworks0",t,e,"                            ")),n.b("                        </div>"),n.b("\n"+i),n.b("                    </div>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("            "),n.b("\n"+i),n.b('            <div class="sg-slide-storyworks-image-wrap">'),n.b("\n"+i),n.b(n.rp("<sg-slide-image1",t,e,"                ")),n.b('                <p class="sg-slide-storyworks-replace">StoryWorks</p>'),n.b("\n"+i),n.b("            </div>"),n.b("\n"),n.b("\n"+i),n.b('            <div class="sg-slide-content sg-slide-sidebar-content sg-slide-storyworks-content-container" data-sg-slide-text>'),n.b("\n"+i),n.b('                <div class="sg-slide-storyworks-inner--container">'),n.b("\n"+i),n.b('                    <div class="sg-slide-storyworks-inner sg-slide-sidebar-inner">'),n.b("\n"+i),n.b('                        <div class="sg-slide-inner-lining sg-slide-storyworks-inner-lining">'),n.b("\n"+i),n.b('                            <h2 class="sg-slide-storyworks-title" id="slide-label-'),n.b(n.v(n.f("slideIndex",t,e,0))),n.b('">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h2>"),n.b("\n"+i),n.b("                            "),n.b(n.t(n.f("body",t,e,0))),n.b("\n"+i),n.b("                        </div>"),n.b("\n"+i),n.b("                    </div>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.s(n.f("outwardLink",t,e,1),t,e,0,1696,1761,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<sg-outward-link-layout2",t,e,"                    "))}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<ad-slot-infinite-sponsor-section-storyworks0":{name:"ad-slot-infinite-sponsor-section-storyworks",partials:{},subs:{}},"<sg-slide-image1":{name:"sg-slide-image",partials:{},subs:{}},"<sg-outward-link-layout2":{name:"sg-outward-link-layout",partials:{},subs:{}}},subs:{}}),"sg-transition-overlay":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sg-transition-overlay" data-sg-transition-overlay>'),n.b("\n"+i),n.b('    <div class="sg-transition-overlay-loader">'),n.b("\n"+i),n.b(n.rp("<sg-spinner0",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<sg-spinner0":{name:"sg-spinner",partials:{},subs:{}}},subs:{}}),"app-cta":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="app-cta">'),n.b("\n"),n.b("\n"+i),n.b('    <h2 class="app-cta__title  app-cta__title--mobile-only">Create your own life story</h2>'),n.b("\n"+i),n.b('    <h2 class="app-cta__title  app-cta__title--tablet-only"></h2>'),n.b("\n"+i),n.b('    <h2 class="app-cta__title  app-cta__title--desktop-only"></h2>'),n.b("\n"),n.b("\n"+i),n.b('    <ul class="app-cta__buttons">'),n.b("\n"+i),n.b('        <li class="app-cta__buttons__item">'),n.b("\n"+i),n.b(n.rp("<button-google-play0",t,e,"            ")),n.b("        </li>"),n.b("\n"+i),n.b('        <li class="app-cta__buttons__item">'),n.b("\n"+i),n.b(n.rp("<button-app-store1",t,e,"            ")),n.b("        </li>"),n.b("\n"+i),n.b("    </ul>"),n.b("\n"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<button-google-play0":{name:"button-google-play",partials:{},subs:{}},"<button-app-store1":{name:"button-app-store",partials:{},subs:{}}},subs:{}}),"app-download":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="app-download">'),n.b("\n"+i),n.b('    <h1 class="app-download__title">'),n.b("\n"+i),n.b('        <span class="app-download__title-line1">'),n.s(n.f("catch-page",t,e,1),t,e,0,127,139,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("headline",t,e,0)))}),t.pop()),n.b("</span>"),n.b("\n"+i),n.b('        <span class="app-download__title-line2">'),n.s(n.f("catch-page",t,e,1),t,e,0,225,241,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("sub-headline",t,e,0)))}),t.pop()),n.b("</span>"),n.b("\n"+i),n.b('        <img class="app-download__title-signature" src="'),n.s(n.f("catch-page",t,e,1),t,e,0,335,371,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("attenborough-signature-image-url",t,e,0)))}),t.pop()),n.b('"/>'),n.b("\n"+i),n.b("    </h1>"),n.b("\n"),n.b("\n"+i),n.s(n.d("meta-data.advertising.adSlots.sponsor_section",t,e,1),t,e,0,455,608,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <div class="app-download__ad">'),n.b("\n"+i),n.b("            <h3>in association with</h3>"),n.b("\n"+i),n.b('            <div class="app-download__adslot"></div>'),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.b('    <p class="app-download__content">'),n.s(n.f("catch-page",t,e,1),t,e,0,712,726,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("intro-copy",t,e,0)))}),t.pop()),n.b("</p>"),n.b("\n"),n.b("\n"+i),n.b('    <div class="app-download__cta">'),n.b("\n"+i),n.b(n.rp("<app-cta0",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<app-cta0":{name:"app-cta",partials:{},subs:{}}},subs:{}}),"button-app-store":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<a class="button-app-store" target="_blank" href="'),n.s(n.f("catch-page",t,e,1),t,e,0,65,82,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("app-store-url",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <img class="button-image" alt="Download on the App Store" src="'),n.s(n.f("catch-page",t,e,1),t,e,0,182,212,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("app-store-button-image-url",t,e,0)))}),t.pop()),n.b('" />'),n.b("\n"+i),n.b("</a>"),n.fl()},partials:{},subs:{}}),"button-google-play":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<a class="button-google-play" target="_blank" href="'),n.s(n.f("catch-page",t,e,1),t,e,0,67,86,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("google-play-url",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.b('    <img class="button-image" alt="Get it on Google Play" src="'),n.s(n.f("catch-page",t,e,1),t,e,0,182,214,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("google-play-button-image-url",t,e,0)))}),t.pop()),n.b('" />'),n.b("\n"+i),n.b("</a>"),n.fl()},partials:{},subs:{}}),catch:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="catch">'),n.b("\n"+i),n.s(n.d("meta-data.meta-tags.image",t,e,1),t,e,0,54,141,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <img class="catch__pinterest-image" src="'),n.b(n.v(n.f("url",t,e,0))),n.b('" width="0" height="0" />'),n.b("\n"+i)}),t.pop()),n.b('    <div class="catch__background desktop" style="background-image: url(\''),n.s(n.f("catch-page",t,e,1),t,e,0,260,281,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("desktop-image-url",t,e,0)))}),t.pop()),n.b("')\"></div>"),n.b("\n"+i),n.b('    <div class="catch__background tablet" style="background-image: url(\''),n.s(n.f("catch-page",t,e,1),t,e,0,394,414,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("tablet-image-url",t,e,0)))}),t.pop()),n.b("')\"></div>"),n.b("\n"+i),n.b('    <div class="catch__background mobile" style="background-image: url(\''),n.s(n.f("catch-page",t,e,1),t,e,0,527,547,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("mobile-image-url",t,e,0)))}),t.pop()),n.b("')\"></div>"),n.b("\n"+i),n.b('    <div class="catch__primary">'),n.b("\n"+i),n.b('        <div class="catch-primary__inner">'),n.b("\n"+i),n.b(n.rp("<app-download0",t,e,"            ")),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="catch__footer">'),n.b("\n"+i),n.b('        <div class="catch__footer__inner">'),n.b("\n"+i),n.s(n.f("continue-promo",t,e,1),t,e,0,811,860,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<continue-promo1",t,e,"                "))}),t.pop()),n.s(n.f("domestic-messaging-inline",t,e,1),t,e,0,922,972,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<domestic-header2",t,e,"                "))}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<app-download0":{name:"app-download",partials:{},subs:{}},"<continue-promo1":{name:"continue-promo",partials:{},subs:{}},"<domestic-header2":{name:"domestic-header",partials:{},subs:{}}},subs:{}}),"continue-promo":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("URL",t,e,1),t,e,0,8,630,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <a class="continue-promo" href="'),n.b(n.v(n.f("URL",t,e,0))),n.b('">'),n.b("\n"+i),n.b('        <div class="continue-promo__content-col">'),n.b("\n"+i),n.b('            <div class="continue-promo__content-wrap">'),n.b("\n"+i),n.b('                <span class="continue-promo__title continue-promo__title1">Continue to watch</span>'),n.b("\n"+i),n.b('                <span class="continue-promo__title continue-promo__title2">'),n.b(n.v(n.f("title",t,e,0))),n.b("</span>"),n.b("\n"+i),n.s(n.f("image",t,e,1),t,e,0,378,576,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                    <span class="continue-promo__image"><img src="'),n.b(n.v(n.f("url",t,e,0))),n.b('" alt="'),n.b(n.v(n.f("title",t,e,0))),n.b('" '),n.s(n.f("pinterest-image",t,e,1),t,e,0,490,530,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-pin-media="'),i.b(i.v(i.d("pinterest-image.url",t,e,0))),i.b('"')}),t.pop()),n.b("/></span>"),n.b("\n"+i)}),t.pop()),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </a>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{},subs:{}}),"source-attribution":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="byline">'),n.b("\n"+i),n.b('    <span class="byline-heading"></span>'),n.b("\n"+i),n.b('        <div class="source-attribution-wrapper">'),n.b("\n"+i),n.s(n.d("author.avatar",t,e,1),t,e,0,137,586,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <div class="source-attribution-image-wrapper">'),n.b("\n"+i),n.b('            <div class="source-attribution-image">'),n.b("\n"+i),n.b('            <img data-fixed-width-format="'),n.b(n.v(n.f("fixed-width-format",t,e,0))),n.b('"'),n.b("\n"+i),n.b('               title="'),n.b(n.v(n.f("alt",t,e,0))),n.b('"'),n.b("\n"+i),n.b('               alt="'),n.b(n.v(n.f("alt",t,e,0))),n.b('"'),n.b("\n"+i),n.b('               class="'),n.b(n.v(n.f("class",t,e,0))),n.b('"'),n.b("\n"+i),n.b('               data-caption="'),n.b(n.v(n.f("caption",t,e,0))),n.b('"'),n.b("\n"+i),n.b('               data-caption-title="'),n.b(n.v(n.f("caption-title",t,e,0))),n.b('"'),n.b("\n"+i),n.b('               src="'),n.b(n.v(n.f("url",t,e,0))),n.b('"'),n.b("\n"+i),n.b("            />"),n.b("\n"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i)}),t.pop()),n.b('        <div class="source-attribution-detail" >'),n.b("\n"),n.b("\n"+i),n.b('        <ul class="seperated-list source-attribution">'),n.b("\n"+i),n.s(n.f("author",t,e,1),t,e,0,733,869,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <li class="seperated-list-item source-attribution-author"><span class="index-body">By '),n.b(n.v(n.f("name",t,e,0))),n.b("</span></li>"),n.b("\n"+i)}),t.pop()),n.s(n.f("partner",t,e,1),t,e,0,905,1076,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <li class="seperated-list-item source-attribution-partner"><span class="partner-attribution">From <a href="'),n.b(n.v(n.f("URL",t,e,0))),n.b('">'),n.b(n.v(n.f("title",t,e,0))),n.b("</a></span></li>"),n.b("\n"+i)}),t.pop()),n.b("        </ul>"),n.b("\n"),n.b("\n"+i),n.s(n.f("publication-date",t,e,1),t,e,0,1129,1212,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <span class="publication-date index-body">'),n.b(n.v(n.f("publication-date",t,e,0))),n.b("</span>"),n.b("\n"+i)}),t.pop()),n.b("    </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"),n.fl()},partials:{},subs:{}}),"standard-image-tag":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<img    class="'),n.b(n.v(n.f("class",t,e,0))),n.b('"'),n.b("\n"+i),n.b('        src="'),n.b(n.v(n.f("url",t,e,0))),n.b('"'),n.b("\n"+i),n.b('        title="'),n.b(n.v(n.f("alt",t,e,0))),n.b('"'),n.b("\n"+i),n.b('        alt="'),n.b(n.v(n.f("alt",t,e,0))),n.b('"'),n.b("\n"+i),n.b("        />"),n.fl()},partials:{},subs:{}}),"start-end-date":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<span class="calendar-icon"></span>'),n.b("\n"+i),n.b('<div class="date-item-group">'),n.b("\n"+i),n.s(n.f("start-date",t,e,1),t,e,0,85,104,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<date0",t,e,"    "))}),t.pop()),n.b('    <div class="date-item-divider"></div>'),n.b("\n"+i),
n.s(n.f("end-date",t,e,1),t,e,0,179,198,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<date1",t,e,"    "))}),t.pop()),n.b("</div>"),n.b("\n"),n.fl()},partials:{"<date0":{name:"date",partials:{},subs:{}},"<date1":{name:"date",partials:{},subs:{}}},subs:{}}),"story-content":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("\x3c!-- story start --\x3e"),n.b("\n"+i),n.b('<div class="primary-content-lining">'),n.b("\n"+i),n.b("    \x3c!-- top-unit start --\x3e"),n.b("\n"+i),n.b('    <div class="top-unit">'),n.b("\n"+i),n.s(n.f("heading",t,e,1),t,e,0,133,170,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<primary-header0",t,e,"        "))}),t.pop()),n.b("\n"+i),n.b(n.rp("<intro1",t,e,"        ")),n.b('        <div id="share-tools-top">'),n.b("\n"+i),n.s(n.f("shareTools",t,e,1),t,e,0,265,307,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<share-tools2",t,e,"            "))}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.s(n.f("assetCustom",t,e,1),t,e,0,362,397,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<custom-embed3",t,e,"        "))}),t.pop()),n.b("    </div>"),n.b("\n"+i),n.b("    \x3c!-- top-unit end --\x3e"),n.b("\n"+i),n.b("    \x3c!-- mid-unit start --\x3e"),n.b("\n"+i),n.b('    <div class="mid-unit"> </div>'),n.b("\n"+i),n.b("    \x3c!-- mid-unit end --\x3e"),n.b("\n"+i),n.b("    \x3c!-- bottom-unit start --\x3e"),n.b("\n"+i),n.b('    <div class="bottom-unit">'),n.b("\n"+i),n.b(n.rp("<source-attribution4",t,e,"        ")),n.b("\n"+i),n.b(n.rp("<infographic5",t,e,"        ")),n.b("\n"+i),n.b('        <div class="body-content">'),n.b("\n"+i),n.b("            "),n.b(n.t(n.f("body",t,e,0))),n.b("\n"+i),n.b("        </div>"),n.b("\n"),n.b("\n"+i),n.s(n.f("partner",t,e,1),t,e,0,753,793,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<partner-promo6",t,e,"            "))}),t.pop()),n.b("    </div>"),n.b("\n"+i),n.b("    \x3c!-- bottom-unit end --\x3e"),n.b("\n"+i),n.b('    <div class="clearfix"></div>'),n.b("\n"+i),n.b("    <section>"),n.b("\n"+i),n.b('        <div id="share-tools-bottom"></div>'),n.b("\n"+i),n.b("    </section>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i),n.b("        \x3c!-- story end --\x3e"),n.fl()},partials:{"<primary-header0":{name:"primary-header",partials:{},subs:{}},"<intro1":{name:"intro",partials:{},subs:{}},"<share-tools2":{name:"share-tools",partials:{},subs:{}},"<custom-embed3":{name:"custom-embed",partials:{},subs:{}},"<source-attribution4":{name:"source-attribution",partials:{},subs:{}},"<infographic5":{name:"infographic",partials:{},subs:{}},"<partner-promo6":{name:"partner-promo",partials:{},subs:{}}},subs:{}}),"story-page-related-footer":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="page-component-wrapper">'),n.b("\n"+i),n.b('    <div class="single-column">'),n.b("\n"+i),n.b('        <div class="primary-content" >'),n.b("\n"+i),n.s(n.f("related-stories",t,e,1),t,e,0,140,186,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<promo-group0",t,e,"                "))}),t.pop()),n.s(n.f("related-stories",t,e,1),t,e,1,0,0,"")||(n.b('                <div id="related-stories-primary" class="component-placeholder related-stories"></div>'),n.b("\n"+i)),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i),n.b(n.rp("<more-amazing-stories1",t,e,"")),n.fl()},partials:{"<promo-group0":{name:"promo-group",partials:{},subs:{}},"<more-amazing-stories1":{name:"more-amazing-stories",partials:{},subs:{}}},subs:{}}),"super-section-ad-slot-mpu-primary":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.mpu-1_2_3",t,e,1),t,e,0,44,70,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<wrapped-mpu0",t,e,"        "))}),t.pop()),n.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"super-section-ad-slot-mpu-secondary":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.d("meta-data.advertising.adSlots.mpu-3_4",t,e,1),t,e,0,42,64,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<wrapped-mpu0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"super-section-leaderboard":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="top-leaderboard-wrapper">'),n.b("\n"+i),n.b('  <div class="top-leaderboard fixed-position-hack">'),n.b("\n"+i),n.b(n.rp("<ad-slot-leaderboard0",t,e,"    ")),n.b("  </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"),n.fl()},partials:{"<ad-slot-leaderboard0":{name:"ad-slot-leaderboard",partials:{},subs:{}}},subs:{}}),"super-section-primary-content-meta-data":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<super-section-ad-slot-mpu-primary0",t,e,"")),n.b("\n"+i),n.b('<div class="clearfix">'),n.b("\n"+i),n.b(n.rp("<ad-slot-sponsor-section-primary1",t,e,"  ")),n.b("</div>"),n.b("\n"),n.b("\n"+i),n.s(n.f("assetCustom",t,e,1),t,e,0,126,147,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<custom-embed2",t,e,"  "))}),t.pop()),n.fl()},partials:{"<super-section-ad-slot-mpu-primary0":{name:"super-section-ad-slot-mpu-primary",partials:{},subs:{}},"<ad-slot-sponsor-section-primary1":{name:"ad-slot-sponsor-section-primary",partials:{},subs:{}},"<custom-embed2":{name:"custom-embed",partials:{},subs:{}}},subs:{}}),"super-section-secondary-content-meta-data":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<source-attribution0",t,e,"")),n.b("\n"+i),n.s(n.f("heading",t,e,1),t,e,0,37,179,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.s(n.f("context",t,e,1),t,e,0,52,166,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.s(n.f("hasContext",t,e,1),t,e,0,72,148,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <h2 class="context-list-title">Tags:</h2>'),n.b("\n"+i),n.b(n.rp("<context-heading1",t,e,"    "))}),t.pop())}),t.pop())}),t.pop()),n.b("\n"),n.fl()},partials:{"<source-attribution0":{name:"source-attribution",partials:{},subs:{}},"<context-heading1":{name:"context-heading",partials:{},subs:{}}},subs:{}}),"super-section-secondary-content-story":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="sticky-side-wrapper">'),n.b("\n"+i),n.b('  <div class="sticky-side fixed-position-hack">'),n.b("\n"+i),n.b(n.rp("<super-section-ad-slot-mpu-secondary0",t,e,"    ")),n.b("  </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i),n.b('<div class="bottom-sticked-side-wrapper">'),n.b("\n"+i),n.b('  <div class="bottom-sticked-side">'),n.b("\n"),n.b("\n"+i),n.s(n.f("related-articles",t,e,1),t,e,0,247,332,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('      <div id="related-stories-secondary">'),n.b("\n"+i),n.b(n.rp("<promo-group1",t,e,"    \t  ")),n.b("      </div>"),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.s(n.f("related-articles",t,e,1),t,e,1,0,0,"")||(n.b('      <div id="related-stories-secondary" class="component-placeholder related-stories"></div>'),n.b("\n"+i)),n.b("\n"),n.b("\n"+i),n.b("  </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"),n.fl()},partials:{"<super-section-ad-slot-mpu-secondary0":{name:"super-section-ad-slot-mpu-secondary",partials:{},subs:{}},"<promo-group1":{name:"promo-group",partials:{},subs:{}}},subs:{}}),"super-section-story-button":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="show-story" id='),n.b(n.t(n.f("showStoryId",t,e,0))),n.b(">"),n.b("\n"+i),n.b('    <div class="show-story-button">'),n.b("\n"+i),n.b("        <p>Read more</p>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="fade-story"></div>'),n.b("\n"+i),n.b("</div>"),n.b("\n"),n.fl()},partials:{},subs:{}}),"super-section-story-content":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("\x3c!-- story start --\x3e"),n.b("\n"+i),n.b('<div class="primary-content-lining">'),n.b("\n"+i),n.b("    \x3c!-- top-unit start --\x3e"),n.b("\n"+i),n.b('    <div class="top-unit">'),n.b("\n"+i),n.b(n.rp("<super-section-primary-content-meta-data0",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.b("    \x3c!-- top-unit end --\x3e"),n.b("\n"+i),n.b("    \x3c!-- mid-unit start --\x3e"),n.b("\n"+i),n.b('    <div class="mid-unit"> </div>'),n.b("\n"+i),n.b("    \x3c!-- mid-unit end --\x3e"),n.b("\n"+i),n.b("    \x3c!-- bottom-unit start --\x3e"),n.b("\n"+i),n.b('    <div class="bottom-unit">'),n.b("\n"),n.b("\n"+i),n.b(n.rp("<infographic1",t,e,"        ")),n.b("\n"+i),n.b('        <div class="body-content">'),n.b("\n"+i),n.b("            "),n.b(n.t(n.f("body",t,e,0))),n.b("\n"+i),n.b("        </div>"),n.b("\n"),n.b("\n"+i),n.s(n.f("hideStory",t,e,1),t,e,0,475,528,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<super-section-story-button2",t,e,"            "))}),t.pop()),n.b("\n"+i),n.s(n.f("partner",t,e,1),t,e,0,564,604,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<partner-promo3",t,e,"            "))}),t.pop()),n.b("    </div>"),n.b("\n"+i),n.b("    \x3c!-- bottom-unit end --\x3e"),n.b("\n"+i),n.b('    <div class="clearfix"></div>'),n.b("\n"+i),n.b("    <section>"),n.b("\n"+i),n.b('        <div id="share-tools-bottom">'),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </section>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i),n.b("        \x3c!-- story end --\x3e"),n.b("\n"),n.fl()},partials:{"<super-section-primary-content-meta-data0":{name:"super-section-primary-content-meta-data",partials:{},subs:{}},"<infographic1":{name:"infographic",partials:{},subs:{}},"<super-section-story-button2":{name:"super-section-story-button",partials:{},subs:{}},"<partner-promo3":{name:"partner-promo",partials:{},subs:{}}},subs:{}}),"super-section-story-contents":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="story-page" class="'),n.s(n.f("type",t,e,1),t,e,0,37,57,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(" story-type-"),i.b(i.v(i.f("type",t,e,0)))}),t.pop()),n.b('">'),n.b("\n"+i),n.s(n.f("hero-unit",t,e,1),t,e,0,85,101,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<hero-unit0",t,e," "))}),t.pop()),n.b('  <div id="story-content" class="page-component-wrapper standard article-content">'),n.b("\n"+i),n.s(n.f("intro",t,e,1),t,e,0,213,380,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div class="primary-content-top" id="primary-content-top" role="main">'),n.b("\n"+i),n.b('      <div class="primary-content-wrapper">'),n.b("\n"+i),n.b(n.rp("<intro1",t,e,"        ")),n.b("      </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i)}),t.pop()),n.b("    \x3c!-- secondary content start --\x3e"),n.b("\n"+i),n.b('    <div class="secondary-content-top" id="secondary-content-top">'),n.b("\n"+i),n.b('      <div class="secondary-content-wrapper">'),n.b("\n"+i),n.b(n.rp("<super-section-secondary-content-meta-data2",t,e,"        ")),n.b("      </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("    \x3c!-- secondary content end --\x3e"),n.b("\n"+i),n.b("    \x3c!-- primary content start --\x3e"),n.b("\n"+i),n.b('    <div class="primary-content" id="primary-content" role="main">'),n.b("\n"+i),n.b('      <div class="primary-content-wrapper">'),n.b("\n"+i),n.s(n.f("brand-banner",t,e,1),t,e,0,826,840,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<banner3",t,e," "))}),t.pop()),n.b(n.rp("<super-section-story-content4",t,e," ")),n.b("      </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("    \x3c!-- primary content end --\x3e"),n.b("\n"+i),n.b("    \x3c!-- secondary content start --\x3e"),n.b("\n"+i),n.b('    <div class="secondary-content" id="secondary-content">'),n.b("\n"+i),n.b('      <div class="secondary-content-wrapper">'),n.b("\n"+i),n.b(n.rp("<super-section-secondary-content-story5",t,e,"        ")),n.b("      </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("    \x3c!-- secondary content end --\x3e"),n.b("\n"+i),n.b("  </div>"),n.b("\n"+i),n.b(n.rp("<more-amazing-stories6",t,e,"  ")),n.b("</div>"),n.b("\n"),n.fl()},partials:{"<hero-unit0":{name:"hero-unit",partials:{},subs:{}},"<intro1":{name:"intro",partials:{},subs:{}},"<super-section-secondary-content-meta-data2":{name:"super-section-secondary-content-meta-data",partials:{},subs:{}},"<banner3":{name:"banner",partials:{},subs:{}},"<super-section-story-content4":{name:"super-section-story-content",partials:{},subs:{}},"<super-section-secondary-content-story5":{name:"super-section-secondary-content-story",partials:{},subs:{}},"<more-amazing-stories6":{name:"more-amazing-stories",partials:{},subs:{}}},subs:{}}),"super-section-story-detail":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.sub("content",t,e,i),n.b("</div>"),n.b("\n"),n.b("\n"),n.b("\n"),n.fl()},partials:{"<contentsuper-section-leaderboard0":{name:"super-section-leaderboard",partials:{},subs:{}},"<contentsuper-section-story-contents1":{name:"super-section-story-contents",partials:{},subs:{}}},subs:{content:function(t,e,i,n){i.b(i.rp("<contentsuper-section-leaderboard0",t,e,"   ")),i.b(i.rp("<contentsuper-section-story-contents1",t,e,"  "))}}}),"topbar-menu-desktop":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="topbar-menu-desktop">'),n.b("\n"+i),n.b(n.rp("<topbar-menu0",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<topbar-menu0":{name:"topbar-menu",partials:{},subs:{}}},subs:{}}),"topbar-menu-mobile":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="topbar-menu-mobile" data-topbar-menu-mobile>'),n.b("\n"+i),n.b(n.rp("<topbar-menu-toggle0",t,e,"    ")),n.b('    <div data-topbar-menu-drop-down class="topbar-menu-mobile-panel">'),n.b("\n"+i),n.b('        <div class="topbar-menu-mobile-wrapper">'),n.b("\n"+i),n.b('            <div class="topbar-menu-mobile-lining">'),n.b("\n"+i),n.b(n.rp("<topbar-menu1",t,e,"                ")),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<topbar-menu-toggle0":{name:"topbar-menu-toggle",partials:{},subs:{}},"<topbar-menu1":{name:"topbar-menu",partials:{},subs:{}}},subs:{}}),"topbar-menu-noscript":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("<noscript>"),n.b("\n"+i),n.b('    <div id="menu-bottom" class="topbar-menu-noscript">'),n.b("\n"+i),n.b(n.rp("<topbar-menu-mobile0",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.b("</noscript>"),n.fl()},partials:{"<topbar-menu-mobile0":{name:"topbar-menu-mobile",partials:{},subs:{}}},subs:{}}),"topbar-menu-toggle":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<a class="topbar-menu-toggle" role="navigation" aria-label="secondary" data-topbar-menu-toggle href="#menu-bottom">'),n.b("\n"+i),n.b('    <span class="topbar-menu-toggle-text">Menu</span>'),n.b("\n"+i),n.b('    <span class="topbar-menu-toggle-icon">'),n.b("\n"+i),n.b('        <svg class="topbar-menu-toggle-icon-svg" viewBox="0 0 28 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'),n.b("\n"+i),n.b('            <defs><rect class="svg-burger" id="rect" x="0" width="28" height="3"></rect><rect class="svg-burger svg-burger-small" id="rect-small" x="0" width="28" height="3"></rect></defs>'),n.b("\n"+i),n.b('            <g fill="currentColor">'),n.b("\n"+i),n.b('                <use xlink:href="#rect" y="0" />'),n.b("\n"+i),n.b('                <use class="svg-burger-2" xlink:href="#rect-small" y="9" />'),n.b("\n"+i),n.b('                <use class="svg-burger-3" xlink:href="#rect" y="18" />'),n.b("\n"+i),n.b("            </g>"),n.b("\n"+i),n.b("        </svg>"),n.b("\n"+i),n.b("    </span>"),n.b("\n"+i),n.b("</a>"),n.fl()},partials:{},subs:{}}),"topbar-menu":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="topbar-menu '),n.b(n.v(n.f("wrapperClass",t,e,0))),n.b('" '),n.s(n.f("analytics-module-metadata",t,e,1),t,e,0,72,102,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-module-metadata0",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('    <ul class="topbar-menu-list" role="navigation" aria-label="'),n.b(n.v(n.f("label",t,e,0))),n.b('">'),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,0,227,743,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <li class="topbar-menu-list-item '),n.b(n.v(n.f("class",t,e,0))),n.b('">'),n.b("\n"+i),n.b('                <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" class="topbar-menu-link" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,375,406,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<analytics-element-metadata1",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.s(n.f("is_featured",t,e,1),t,e,1,0,0,"")||(n.b("                        "),n.s(n.f("line1",t,e,1),t,e,0,510,519,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("line1",t,e,0)))}),t.pop()),n.b("\n"+i)),n.b("\n"+i),n.s(n.f("is_featured",t,e,1),t,e,0,604,679,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("                        "),n.s(n.f("line2",t,e,1),t,e,0,639,648,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("line2",t,e,0)))}),t.pop()),n.b("\n"+i)}),t.pop()),n.b("                </a>"),n.b("\n"+i),n.b("            </li>"),n.b("\n"+i)}),t.pop()),n.b("    </ul>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<analytics-module-metadata0":{name:"analytics-module-metadata",partials:{},subs:{}},"<analytics-element-metadata1":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{}}),topbar:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="topbar-wrapper">'),n.b("\n"+i),n.b('<div class="topbar" id="nav-branding">'),n.b("\n"+i),n.s(n.f("navigation",t,e,1),t,e,0,87,349,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div class="topbar-inner">'),n.b("\n"+i),n.b('        <div class="topbar-lining">'),n.b("\n"+i),n.b('            <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" class="topbar-logo">'),n.b(n.v(n.f("name",t,e,0))),n.b("</a>"),n.b("\n"+i),n.s(n.f("menu",t,e,1),t,e,0,239,263,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<topbar-menu-desktop0",t,e,""))}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.s(n.f("menu",t,e,1),t,e,0,312,335,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<topbar-menu-mobile1",t,e,""))}),t.pop())}),t.pop()),n.b("</div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"),n.fl()},partials:{"<topbar-menu-desktop0":{name:"topbar-menu-desktop",partials:{},subs:{}},"<topbar-menu-mobile1":{name:"topbar-menu-mobile",partials:{},subs:{}}},subs:{}}),"twitter-feed":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b(n.rp("<headed-section-start0",t,e,"")),n.b('    <div id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" class="'),n.b(n.v(n.f("class",t,e,0))),n.b('" >'),n.b("\n"+i),n.b('        <ul class="twitter-feed-posts">'),n.b("\n"+i),n.s(n.f("posts",t,e,1),t,e,0,129,538,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <li class="twitter-feed-post">'),n.b("\n"+i),n.b('                <div class="twitter-feed-post-entry">'),n.b("\n"+i),n.b("                    <p>"),n.b(n.t(n.f("entry",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b('                <div class="twitter-feed-post-details">'),n.b("\n"+i),n.b('                    <p>Posted by <a href="'),n.b(n.v(n.f("accountURL",t,e,0))),n.b('" title="Goto '),n.b(n.v(n.f("account",t,e,0))),n.b(' twitter account">'),n.b(n.v(n.f("account",t,e,0))),n.b("</a> "),n.b(n.v(n.f("elapsed-time",t,e,0))),n.b(" ago</p>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </li>"),n.b("\n"+i)}),t.pop()),n.b("        </ul>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b(n.rp("<headed-section-end1",t,e," ")),n.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<headed-section-end1":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"two-column":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b("\n"+i),n.b('        <div class="'),n.b(n.v(n.d("page.class",t,e,0))),n.b('" id="'),n.b(n.v(n.d("page.id",t,e,0))),n.b('">'),n.b("\n"+i),n.b('            <div class="primary-content"  role="main">'),n.b("\n"+i),n.sub("two-column-primary-content",t,e,i),n.b("            </div>"),n.b("\n"+i),n.b('            <div class="secondary-content">'),n.b("\n"+i),n.sub("two-column-secondary-content",t,e,i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.fl()},partials:{},subs:{"two-column-primary-content":function(t,e,i,n){},"two-column-secondary-content":function(t,e,i,n){}}}),"video-player-prototype":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="video-player-prototype-placeholder"'),n.b("\n"+i),n.b('     class="video-player"'),n.b("\n"+i),n.b('     data-video-title="My Test Video"'),n.b("\n"+i),n.b('     data-video-player-vpid="p03tqf0s"'),n.b("\n"+i),n.b('     data-video-player-mediator="mc"'),n.b("\n"+i),n.b('     data-brand-color="#589e50"'),n.b("\n"+i),n.b('     data-video-player-image-url="http://ichef.bbci.co.uk/wwfeatures/live/original/images/live/p0/3t/qd/p03tqddv.jpg"'),n.b("\n"+i),n.b('     data-show-ads="false"'),n.b("\n"+i),n.b(">"),n.b("\n"+i),n.b("    <noscript>"),n.b("\n"+i),n.b('        <div class="warning">'),n.b("\n"+i),n.b("            <p><strong>This media cannot be played on your device.</strong></p>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </noscript>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),magnify:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<iframe src="http://bbcworldwide.magnify.net/video/'),n.b(n.v(n.f("id",t,e,0))),n.b('/player?layout=&amp;read_more=1" width="420" height="395" frameborder="0" scrolling="no"></iframe>'),n.b("\n"),n.fl()},partials:{},subs:{}}),"stand-alone-video-element":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="'),n.b(n.v(n.f("id",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     class="'),n.b(n.v(n.f("class",t,e,0))),n.b(' video-player"'),n.b("\n"+i),n.b("     data-video-player"),n.b("\n"+i),n.b('     data-video-title="'),n.b(n.v(n.f("title",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     data-video-player-vpid="'),n.b(n.v(n.f("vpid",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     data-video-player-mediator="'),n.b(n.v(n.f("mediator",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     data-brand-color="'),n.b(n.v(n.f("brand-color",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     data-video-player-image-url="'),n.b(n.v(n.f("image-url",t,e,0))),n.b('"'),n.b("\n"+i),n.b('     data-show-ads="'),n.b(n.v(n.f("show-ads",t,e,0))),n.b('"'),n.b("\n"+i),n.b("        >"),n.b("\n"+i),n.b("    <noscript>"),n.b("\n"+i),n.b('        <div class="warning">'),n.b("\n"+i),n.b("            <p><strong>This media cannot be played on your device.</strong></p>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </noscript>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"video-lead":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="video-lead-wrapper" class="disabled">'),n.b("\n"+i),n.b(n.rp("<stand-alone-video-element0",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<stand-alone-video-element0":{name:"stand-alone-video-element",partials:{},subs:{}}},subs:{}}),"vpp-additional-controls":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="vpp-additional-controls">'),n.b("\n"+i),n.b('    <span class="vpp-additional-controls__skip">'),n.b("\n"+i),n.b(n.rp("<vpp-skip-control0",t,e,"        ")),n.b("    </span>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<vpp-skip-control0":{name:"vpp-skip-control",partials:{},subs:{}}},subs:{}}),"vpp-control-panel-metadata":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("clip-metadata",t,e,1),t,e,0,18,46,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<vpp-clip-metadata0",t,e,"    "))}),t.pop()),n.b("\n"+i),n.s(n.f("playlist-metadata",t,e,1),t,e,0,88,277,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('<div class="vpp-control-panel__playlist-metadata">'),n.b("\n"+i),n.b('    <div class="m-vpp-playlist-metadata--compact m-vpp-playlist-metadata-author--alt">'),n.b("\n"+i),n.b(n.rp("<vpp-playlist-metadata1",t,e,"    ")),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{"<vpp-clip-metadata0":{name:"vpp-clip-metadata",partials:{},subs:{}},"<vpp-playlist-metadata1":{name:"vpp-playlist-metadata",partials:{},subs:{}}},subs:{}}),"vpp-control-panel":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="vpp-control-panel" vpp-control-panel>'),n.b("\n"+i),n.b('    <div class="vpp-control-panel__metadata" data-vpp-control-panel-metadata>'),n.b("\n"+i),n.b(n.rp("<vpp-control-panel-metadata0",t,e,"    ")),n.b("    </div>"),n.b("\n"),n.b("\n"+i),n.b('    <div class="vpp-control-panel__additional-controls">'),n.b("\n"+i),n.b(n.rp("<vpp-additional-controls1",t,e,"    ")),n.b("    </div>"),n.b("\n"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<vpp-control-panel-metadata0":{name:"vpp-control-panel-metadata",partials:{},subs:{}},"<vpp-additional-controls1":{name:"vpp-additional-controls",partials:{},subs:{}}},subs:{}}),"vpp-clip-metadata-duration":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<span class="vpp-clip-metadata__running-time-icon gelicon gelicon--duration"></span>'),n.b("\n"+i),n.b('<span class="vpp-clip-metadata__running-time-text">'),n.b(n.v(n.f("minutes",t,e,0))),n.b(":"),n.b(n.v(n.f("seconds",t,e,0))),n.b("</span>"),n.fl()},partials:{},subs:{}}),"vpp-clip-metadata":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="vpp-clip-metadata">'),n.b("\n"),n.b("\n"+i),n.b('    <h1 class="vpp-clip-metadata__title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h1>"),n.b("\n"),n.b("\n"+i),n.b('    <p class="vpp-clip-metadata__description">'),n.b(n.v(n.f("description",t,e,0))),n.b("</p>"),n.b("\n"),n.b("\n"+i),n.s(n.f("duration",t,e,1),t,e,0,174,283,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <span class="vpp-clip-metadata__running-time">'),n.b("\n"+i),n.b(n.rp("<vpp-clip-metadata-duration0",t,e,"        ")),n.b("    </span>"),n.b("\n"+i)}),t.pop()),n.b("</div>"),n.b("\n"),n.fl()},partials:{"<vpp-clip-metadata-duration0":{name:"vpp-clip-metadata-duration",partials:{},subs:{}}},subs:{}}),"vpp-clip-preview-image-item":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<span class="vpp-clip-viewer-preview-image '),n.b(n.v(n.f("class",t,e,0))),n.b('">'),n.b("\n"+i),n.b('    <span class="vpp-clip-viewer-preview-image__item" style="background-image: url('),n.b(n.v(n.f("url",t,e,0))),n.b(')"></span>'),n.b("\n"+i),n.b("</span>"),n.fl()},partials:{},subs:{}}),"vpp-clip-promo-icon":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("icon-type",t,e,1),t,e,0,14,71,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <span class="vpp-clip-promo__icon">'),n.b(n.rp("<icon0",t,e,"")),n.b("</span>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{"<icon0":{name:"icon",partials:{},subs:{}}},subs:{}}),"vpp-clip-promo-image":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("image",t,e,1),t,e,0,10,274,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div class="vpp-clip-promo__media">'),n.b("\n"+i),n.b('        <div class="vpp-clip-promo__image-wrapper">'),n.b("\n"+i),n.b(n.rp("<responsive-image-tag0",t,e,"        ")),n.b(n.rp("<vpp-clip-promo-icon1",t,e,"        ")),n.b(n.rp("<vpp-clip-promo-status2",t,e,"        ")),n.b(n.rp("<responsive-image-overlay-text3",t,e,"        ")),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i)}),t.pop()),n.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}},"<vpp-clip-promo-icon1":{name:"vpp-clip-promo-icon",partials:{},subs:{}},"<vpp-clip-promo-status2":{name:"vpp-clip-promo-status",partials:{},subs:{}},"<responsive-image-overlay-text3":{name:"responsive-image-overlay-text",partials:{},subs:{}}},subs:{}}),"vpp-clip-promo-status":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<span class="vpp-clip-promo__status">Now Playing</span>'),n.b("\n"),n.fl()},partials:{},subs:{}}),"vpp-clip-promo":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<article class="vpp-clip-promo'),n.s(n.f("is-active",t,e,1),t,e,0,44,70,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(" vpp-clip-promo--is-active")}),t.pop()),n.b('" data-vpp-clip-promo-button'),n.s(n.f("vpid",t,e,1),t,e,0,121,132,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('="'),i.b(i.v(i.f("vpid",t,e,0))),i.b('"')}),t.pop()),n.b(">"),n.b("\n"+i),n.b('    <button class="vpp-clip-promo__button">'),n.b("\n"+i),n.b('        <div class="vpp-clip-promo__wrapper">'),n.b("\n"+i),n.b(n.rp("<vpp-clip-promo-image0",t,e,"            ")),n.s(n.f("title",t,e,1),t,e,0,293,446,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <div class="vpp-clip-promo__title-wrapper">'),n.b("\n"+i),n.b('                <h2 class="vpp-clip-promo__title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h2>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i)}),t.pop()),n.b("        </div>"),n.b("\n"+i),n.b("    </button>"),n.b("\n"+i),n.b("</article>"),n.fl()},partials:{"<vpp-clip-promo-image0":{name:"vpp-clip-promo-image",partials:{},subs:{}}},subs:{}}),"vpp-clip-viewer-player":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="vpp-clip-viewer-player" data-vpp-clip-viewer-player>'),n.b("\n"+i),n.b('    <div class="vpp-clip-viewer-player__video">'),n.b("\n"+i),n.b(n.rp("<vpp-video0",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="vpp-clip-viewer-player__control-panel">'),n.b("\n"+i),n.b(n.rp("<vpp-control-panel1",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<vpp-video0":{name:"vpp-video",partials:{},subs:{}},"<vpp-control-panel1":{name:"vpp-control-panel",partials:{},subs:{}}},subs:{}}),"vpp-clip-viewer-preview-image":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("responsive-images",t,e,1),t,e,0,22,240,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.s(n.f("small",t,e,1),t,e,0,37,83,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<vpp-clip-preview-image-item0",t,e,"        "))}),t.pop()),n.b("\n"+i),n.s(n.f("medium",t,e,1),t,e,0,110,156,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<vpp-clip-preview-image-item1",t,e,"        "))}),t.pop()),n.b("\n"+i),n.s(n.f("large",t,e,1),t,e,0,183,229,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<vpp-clip-preview-image-item2",t,e,"        "))}),t.pop())}),t.pop()),n.b("\n"+i),n.s(n.f("responsive-images",t,e,1),t,e,1,0,0,"")||n.s(n.f("image",t,e,1),t,e,0,301,347,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<vpp-clip-preview-image-item3",t,e,"        "))}),t.pop()),n.fl()},partials:{"<vpp-clip-preview-image-item0":{name:"vpp-clip-preview-image-item",partials:{},subs:{}},"<vpp-clip-preview-image-item1":{name:"vpp-clip-preview-image-item",partials:{},subs:{}},"<vpp-clip-preview-image-item2":{name:"vpp-clip-preview-image-item",partials:{},subs:{}},"<vpp-clip-preview-image-item3":{name:"vpp-clip-preview-image-item",partials:{},subs:{}}},subs:{}}),"vpp-clip-viewer-preview":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="vpp-clip-viewer-preview" data-vpp-clip-viewer-preview>'),n.b("\n"+i),n.b('    <span class="vpp-clip-viewer-preview__image">'),n.b("\n"+i),n.b(n.rp("<vpp-clip-viewer-preview-image0",t,e,"        ")),n.b('        <div class="vpp-clip-viewer-preview__play-control">'),n.b("\n"+i),n.b('            <span class="m-vpp-play-control--icon-only--tablet-and-down  m-vpp-play-control--icon-only-big--tablet-only">'),n.b("\n"+i),n.b(n.rp("<vpp-play-control1",t,e,"            ")),n.b("            </span>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </span>"),n.b("\n"+i),n.b('    <div class="vpp-clip-viewer-preview__playlist-metadata">'),n.b("\n"+i),n.b('        <div class="m-vpp-playlist-metadata--centered--tablet-and-down">'),n.b("\n"+i),n.b(n.rp("<vpp-playlist-metadata2",t,e,"            ")),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<vpp-clip-viewer-preview-image0":{name:"vpp-clip-viewer-preview-image",partials:{},subs:{}},"<vpp-play-control1":{
name:"vpp-play-control",partials:{},subs:{}},"<vpp-playlist-metadata2":{name:"vpp-playlist-metadata",partials:{},subs:{}}},subs:{}}),"vpp-clip-viewer":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="vpp-clip-viewer">'),n.b("\n"+i),n.b('    <div class="vpp-clip-viewer__preview vpp-clip-viewer__preview--is-active" data-vpp-clip-viewer-preview-container>'),n.b("\n"+i),n.b(n.rp("<vpp-clip-viewer-preview0",t,e,"    ")),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="vpp-clip-viewer__player" data-vpp-clip-viewer-player-container>'),n.b("\n"+i),n.b(n.rp("<vpp-clip-viewer-player1",t,e,"    ")),n.b("    </div>"),n.b("\n"+i),n.s(n.f("share-tools",t,e,1),t,e,0,335,468,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <div class="vpp-clip-viewer__share-tools" data-vpp-share-tools>'),n.b("\n"+i),n.b(n.rp("<share-tools-expandable2",t,e,"            ")),n.b("        </div>"),n.b("\n"+i)}),t.pop()),n.b("</div>"),n.fl()},partials:{"<vpp-clip-viewer-preview0":{name:"vpp-clip-viewer-preview",partials:{},subs:{}},"<vpp-clip-viewer-player1":{name:"vpp-clip-viewer-player",partials:{},subs:{}},"<share-tools-expandable2":{name:"share-tools-expandable",partials:{},subs:{}}},subs:{}}),"vpp-main":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="vpp-main" data-vpp-main>'),n.b("\n"+i),n.b('    <article class="vpp-main__viewer">'),n.b("\n"+i),n.b(n.rp("<vpp-clip-viewer0",t,e,"    ")),n.b("    </article>"),n.b("\n"+i),n.b('    <aside class="vpp-main__playlist">'),n.b("\n"+i),n.b('        <div class="m-vpp-playlist--dark--desktop-only  m-vpp-clip-promo--light-text--desktop-only  m-vpp-clip-promo--big--tablet-only">'),n.b("\n"+i),n.b(n.rp("<vpp-playlist1",t,e,"            ")),n.b("        </div>"),n.b("\n"+i),n.b("    </aside>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<vpp-clip-viewer0":{name:"vpp-clip-viewer",partials:{},subs:{}},"<vpp-playlist1":{name:"vpp-playlist",partials:{},subs:{}}},subs:{}}),"vpp-play-control":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<button class="vpp-play-control" data-vpp-control-play>'),n.b("\n"+i),n.b('    <span class="vpp-play-control__icon">'),n.b("\n"+i),n.b('        <span class="icon-wrapper gel-icon-wrapper icon-wrapper-play">'),n.b("\n"+i),n.b('            <i aria-hidden="true" class="gelicon gelicon--play"></i>'),n.b("\n"+i),n.b("        </span>"),n.b("\n"+i),n.b("    </span>"),n.b("\n"+i),n.s(n.f("play-control-text",t,e,1),t,e,0,292,393,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <span class="vpp-play-control__text">'),n.b("\n"+i),n.b("            "),n.b(n.v(n.f("play-control-text",t,e,0))),n.b("\n"+i),n.b("        </span>"),n.b("\n"+i)}),t.pop()),n.b("</button>"),n.fl()},partials:{},subs:{}}),"vpp-playlist-metadata-author":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<h2 class="vpp-playlist-metadata-author">'),n.b("\n"+i),n.b('    <span class="vpp-playlist-metadata-author__prefix">by</span>'),n.b("\n"+i),n.b('    <span class="vpp-playlist-metadata-author__name">'),n.b(n.v(n.f("curatorName",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b("</h2>"),n.b("\n"),n.fl()},partials:{},subs:{}}),"vpp-playlist-metadata":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="vpp-playlist-metadata" data-vpp-playlist-metadata '),n.s(n.f("class",t,e,1),t,e,0,72,89,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('class="'),i.b(i.v(i.f("class",t,e,0))),i.b('"')}),t.pop()),n.b(">"),n.b("\n"),n.b("\n"+i),n.s(n.f("title",t,e,1),t,e,0,116,320,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <h2 class="vpp-playlist-metadata__title">'),n.b("\n"+i),n.b('        <span class="vpp-playlist-metadata__title-prefix">From</span>'),n.b("\n"+i),n.b('        <span class="vpp-playlist-metadata__title-text">'),n.b(n.v(n.f("title",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b("    </h2>"),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.s(n.f("curatorName",t,e,1),t,e,0,352,446,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <span class="vpp-playlist-metadata__author">'),n.b(n.rp("<vpp-playlist-metadata-author0",t,e,"")),n.b("</span>"),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.s(n.f("description",t,e,1),t,e,0,484,559,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <p class="vpp-playlist-metadata__description">'),n.b(n.v(n.f("description",t,e,0))),n.b("</p>"),n.b("\n"+i)}),t.pop()),n.b("\n"+i),n.b("</div>"),n.b("\n"),n.fl()},partials:{"<vpp-playlist-metadata-author0":{name:"vpp-playlist-metadata-author",partials:{},subs:{}}},subs:{}}),"vpp-playlist":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="vpp-playlist" data-vpp-playlist>'),n.b("\n"+i),n.b('    <div class="vpp-playlist__ad-wrapper">'),n.b("\n"+i),n.b(n.rp("<ad-slot-leaderboard-primary0",t,e,"    ")),n.b(n.rp("<ad-slot-mpu-secondary1",t,e,"    ")),n.b("    </div>"),n.b("\n"+i),n.s(n.f("playlist-header-text",t,e,1),t,e,0,196,332,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div class="vpp-playlist__heading-wrapper">'),n.b("\n"+i),n.b('        <h2 class="vpp-playlist__heading">'),n.b(n.v(n.f("playlist-header-text",t,e,0))),n.b("</h2>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i)}),t.pop()),n.b('    <div class="vpp-playlist__sponsor-wrapper">'),n.b("\n"+i),n.b('        <div class="vpp-sponsor">'),n.b("\n"+i),n.b(n.rp("<ad-slot-sponsor-section-primary2",t,e,"        ")),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <ul class="vpp-playlist__items">'),n.b("\n"+i),n.s(n.f("clipList",t,e,1),t,e,0,565,686,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('        <li class="vpp-playlist__item" '),n.s(n.f("vpid",t,e,1),t,e,0,614,647,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('data-vpp-playlist-item="'),i.b(i.v(i.f("vpid",t,e,0))),i.b('"')}),t.pop()),n.b(">"),n.b(n.rp("<vpp-clip-promo3",t,e,"")),n.b("</li>"),n.b("\n"+i)}),t.pop()),n.b("    </ul>"),n.b("\n"+i),n.b("</div>"),n.b("\n"),n.fl()},partials:{"<ad-slot-leaderboard-primary0":{name:"ad-slot-leaderboard-primary",partials:{},subs:{}},"<ad-slot-mpu-secondary1":{name:"ad-slot-mpu-secondary",partials:{},subs:{}},"<ad-slot-sponsor-section-primary2":{name:"ad-slot-sponsor-section-primary",partials:{},subs:{}},"<vpp-clip-promo3":{name:"vpp-clip-promo",partials:{},subs:{}}},subs:{}}),"vpp-skip-control":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<button class="vpp-skip-control" data-vpp-control-skip>'),n.b("\n"+i),n.b('    <span class="vpp-skip-control__text">Skip</span>'),n.b("\n"+i),n.b('    <span class="vpp-skip-control__icon">'),n.b("\n"+i),n.b('        <span aria-hidden="true" class="gelicon gelicon--next"></span>'),n.b("\n"+i),n.b("    </span>"),n.b("\n"+i),n.b("</button>"),n.fl()},partials:{},subs:{}}),"vpp-smp-placeholder":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="vpp-smp-placeholder" data-vpp-smp data-vpp-smp-brand-color="'),n.b(n.v(n.f("brand-color",t,e,0))),n.b('" data-vpp-smp-show-ads="'),n.b(n.v(n.f("show-ads",t,e,0))),n.b('">'),n.b("\n"+i),n.b("    <noscript>"),n.b("\n"+i),n.b('        <div class="warning">'),n.b("\n"+i),n.b("            <p><strong>This media cannot be played on your device.</strong></p>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </noscript>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"vpp-video-player":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("video",t,e,1),t,e,0,10,46,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<stand-alone-video-element0",t,e,"    "))}),t.pop()),n.fl()},partials:{"<stand-alone-video-element0":{name:"stand-alone-video-element",partials:{},subs:{}}},subs:{}}),"vpp-video":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="vpp-video">'),n.b("\n"+i),n.b('    <div class="vpp-video__player" data-vpp-video>'),n.b("\n"+i),n.b(n.rp("<vpp-smp-placeholder0",t,e,"        ")),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<vpp-smp-placeholder0":{name:"vpp-smp-placeholder",partials:{},subs:{}}},subs:{}}),youtube:new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<iframe id="ytplayer'),n.b(n.v(n.f("id",t,e,0))),n.b('" type="text/html" src="http://www.youtube.com/embed/'),n.b(n.v(n.f("id",t,e,0))),n.b('" frameborder="0"></iframe>'),n.fl()},partials:{},subs:{}}),"weather-forecast-clean":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="weather-module" class="weather-module">'),n.b("\n"+i),n.b('    <div class="weather-module-lining">'),n.b("\n"+i),n.b(n.rp("<weather-forecast-header0",t,e,"        ")),n.b("        "),n.s(n.f("weatherURL",t,e,1),t,e,0,149,174,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('<a href="'),i.b(i.v(i.f("weatherURL",t,e,0))),i.b('">')}),t.pop()),n.b("\n"+i),n.b('            <div class="today-forecast">'),n.b("\n"+i),n.b('                <div class="today-forecast-lining">'),n.b("\n"+i),n.s(n.f("todayForecast",t,e,1),t,e,0,321,763,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                        <p class="temperature">'),n.b("\n"+i),n.b('                            <span class="day-name">'),n.b(n.v(n.f("dayNameAbbreviation",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('                            <span class="weather-icon '),n.s(n.f("weatherCode",t,e,1),t,e,0,522,543,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("wi-"),i.b(i.v(i.f("weatherCode",t,e,0))),i.b("-xl")}),t.pop()),n.b('">'),n.b(n.v(n.f("weatherCaption",t,e,0))),n.b("</span>"),n.s(n.f("temperature",t,e,1),t,e,0,602,697,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("\n"+i),n.b(n.rp("<weather-forecast-temperature1",t,e,"                                "))}),t.pop()),n.b("                        </p>"),n.b("\n"+i)}),t.pop()),n.b('                    <p class="location-name">'),n.b(n.v(n.f("locationName",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b('                    <p class="country-name">'),n.b(n.v(n.f("countryName",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b('            <div class="forecast">'),n.b("\n"+i),n.b('                <div class="forecast-lining">'),n.b("\n"+i),n.b('                    <ul class="forecast-list">'),n.b("\n"+i),n.s(n.f("todayForecast",t,e,1),t,e,0,1124,1770,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                            <li class="forecast-item forecast-item-today">'),n.b("\n"+i),n.b('                                <span class="day-name">'),n.b(n.v(n.f("dayNameAbbreviation",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('                                <span class="weather-icon '),n.s(n.f("weatherCode",t,e,1),t,e,0,1360,1389,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("wi-"),i.b(i.v(i.f("weatherCode",t,e,0))),i.b(" responsive")}),t.pop()),n.b('">'),n.b(n.v(n.f("weatherCaption",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('                                <span class="temperature">'),n.b("\n"+i),n.s(n.f("temperature",t,e,1),t,e,0,1544,1655,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<weather-forecast-temperature2",t,e,"                                        "))}),t.pop()),n.b("                                </span>"),n.b("\n"+i),n.b("                            </li>"),n.b("\n"+i)}),t.pop()),n.s(n.f("forecast",t,e,1),t,e,0,1826,2458,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                            <li class="forecast-item">'),n.b("\n"+i),n.b('                                <span class="day-name">'),n.b(n.v(n.f("dayNameAbbreviation",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('                                <span class="weather-icon '),n.s(n.f("weatherCode",t,e,1),t,e,0,2042,2071,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("wi-"),i.b(i.v(i.f("weatherCode",t,e,0))),i.b(" responsive")}),t.pop()),n.b('">'),n.b(n.v(n.f("weatherCaption",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('                                <span class="temperature">'),n.b("\n"+i),n.s(n.f("maxTemperature",t,e,1),t,e,0,2229,2340,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<weather-forecast-temperature3",t,e,"                                        "))}),t.pop()),n.b("                                </span>"),n.b("\n"+i),n.b("                            </li>"),n.b("\n"+i)}),t.pop()),n.b("                    </ul>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        "),n.s(n.f("weatherURL",t,e,1),t,e,0,2563,2567,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("</a>")}),t.pop()),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<weather-forecast-header0":{name:"weather-forecast-header",partials:{},subs:{}},"<weather-forecast-temperature1":{name:"weather-forecast-temperature",partials:{},subs:{}},"<weather-forecast-temperature2":{name:"weather-forecast-temperature",partials:{},subs:{}},"<weather-forecast-temperature3":{name:"weather-forecast-temperature",partials:{},subs:{}}},subs:{}}),"weather-forecast-header":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="module-header">'),n.b("\n"+i),n.b('    <div class="module-header-lining">'),n.b("\n"+i),n.b('        <div class="module-header-section">'),n.b("\n"+i),n.b('            <h2 class="module-header-section-title"><span class="weather-module-title-intro">Weather in </span>'),n.b(n.v(n.f("locationName",t,e,0))),n.b("</h2>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b('        <div class="module-header-section module-header-section-controls">'),n.b("\n"+i),n.b('            <button data-weather-settings-button="fahrenheit" class="settings-control-text settings-control-text-fahrenheit" title="Fahrenheit">'),n.b("\n"+i),n.b('                <span class="settings-control-text-part1">F</span><span class="settings-control-text-part2">ahrenheit</span>'),n.b("\n"+i),n.b("            </button>"),n.b("\n"+i),n.b('            <span class="settings-control-sep"></span>'),n.b("\n"+i),n.b('            <button data-weather-settings-button="centigrade" class="settings-control-text settings-control-text-centigrade" title="Celsius">'),n.b("\n"+i),n.b('                <span class="settings-control-text-part1">C</span><span class="settings-control-text-part2">elsius</span>'),n.b("\n"+i),n.b("            </button>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}}),"weather-forecast-temperature":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<span data-weather-icon="centigrade" class="centigrade is-hidden">'),n.b("\n"+i),n.b("    "),n.b(n.v(n.f("centigrade",t,e,0))),n.b('&deg;<span class="units" aria-label="celsius">c</span>'),n.b("\n"+i),n.b("</span>"),n.b("\n"+i),n.b('<span data-weather-icon="fahrenheit" class="fahrenheit is-hidden">'),n.b("\n"+i),n.b("    "),n.b(n.v(n.f("fahrenheit",t,e,0))),n.b('&deg;<span class="units" aria-label="fahrenheit">f</span>'),n.b("\n"+i),n.b("</span>"),n.fl()},partials:{},subs:{}}),"weather-forecast-toggle":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<span id="settings-button" class="settings-control">'),n.b("\n"+i),n.b('    <button data-weather-settings-button="toggle" class="settings-control-toggle weather-icon"></button>'),n.b("\n"+i),n.b("</span>"),n.fl()},partials:{},subs:{}}),"weather-forecast":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="weather-module" class="weather-module">'),n.b("\n"+i),n.b('    <div class="weather-module-lining">'),n.b("\n"+i),n.b('        <a href="'),n.b(n.v(n.f("weatherURL",t,e,0))),n.b('">'),n.b("\n"+i),n.b('            <div class="today-forecast">'),n.b("\n"+i),n.b(n.rp("<weather-forecast-toggle0",t,e,"                ")),n.b('                <div class="today-forecast-lining">'),n.b("\n"+i),n.s(n.f("todayForecast",t,e,1),t,e,0,299,687,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                        <p class="temperature">'),n.b("\n"+i),n.b('                            <span class="weather-icon '),n.s(n.f("weatherCode",t,e,1),t,e,0,418,438,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("wi-"),i.b(i.v(i.f("weatherCode",t,e,0))),i.b("-l")}),t.pop()),n.b('">'),n.b(n.v(n.f("weatherCaption",t,e,0))),n.b("</span>"),n.b("\n"+i),n.s(n.f("temperature",t,e,1),t,e,0,526,621,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.rp("<weather-forecast-temperature1",t,e,"                                "))}),t.pop()),n.b("                        </p>"),n.b("\n"+i)}),t.pop()),n.b('                    <p class="location-name">'),n.b(n.v(n.f("locationName",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b('                    <p class="country-name">'),n.b(n.v(n.f("countryName",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b('            <div class="forecast">'),n.b("\n"+i),n.b('                <div class="forecast-lining">'),n.b("\n"+i),n.b('                    <ul class="forecast-list">'),n.b("\n"+i),n.s(n.f("forecast",t,e,1),t,e,0,1043,1381,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                            <li class="forecast-item">'),n.b("\n"+i),n.b('                                <span class="day-name">'),n.b(n.v(n.f("dayNameAbbreviation",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('                                <span class="weather-icon '),n.s(n.f("weatherCode",t,e,1),t,e,0,1259,1279,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("wi-"),i.b(i.v(i.f("weatherCode",t,e,0))),i.b("-m")}),t.pop()),n.b('">'),n.b(n.v(n.f("weatherCaption",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b("                            </li>"),n.b("\n"+i)}),t.pop()),n.b("                    </ul>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </a>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{"<weather-forecast-toggle0":{name:"weather-forecast-toggle",partials:{},subs:{}},"<weather-forecast-temperature1":{name:"weather-forecast-temperature",partials:{},subs:{}}},subs:{}}),"wrapped-mpu-deferred":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="mpu-wrapper">'),n.b("\n"+i),n.b(n.rp("<ad-slot-deferred0",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<ad-slot-deferred0":{name:"ad-slot-deferred",partials:{},subs:{}}},subs:{}}),"wrapped-mpu":new t.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="mpu-wrapper">'),n.b("\n"+i),n.b(n.rp("<ad-slot0",t,e,"    ")),n.b("</div>"),n.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}})},i=function(t){var i=e[t];return function(t,n,o){return i.render(t,n||e,o)}};return{"ad-slot-adsense-all":i("ad-slot-adsense-all"),"ad-slot-deferred":i("ad-slot-deferred"),"ad-slot-ibroadcast-image-gallery":i("ad-slot-ibroadcast-image-gallery"),"ad-slot-infeed":i("ad-slot-infeed"),"ad-slot-infinite-mpu":i("ad-slot-infinite-mpu"),"ad-slot-infinite-sponsor-section-content":i("ad-slot-infinite-sponsor-section-content"),"ad-slot-infinite-sponsor-section-storyworks":i("ad-slot-infinite-sponsor-section-storyworks"),"ad-slot-infinite-sponsor-section":i("ad-slot-infinite-sponsor-section"),"ad-slot-infinite":i("ad-slot-infinite"),"ad-slot-leaderboard-deferred":i("ad-slot-leaderboard-deferred"),"ad-slot-leaderboard-primary":i("ad-slot-leaderboard-primary"),"ad-slot-leaderboard-secondary":i("ad-slot-leaderboard-secondary"),"ad-slot-leaderboard":i("ad-slot-leaderboard"),"ad-slot-mpu-bottom-deferred":i("ad-slot-mpu-bottom-deferred"),"ad-slot-mpu-bottom":i("ad-slot-mpu-bottom"),"ad-slot-mpu-primary":i("ad-slot-mpu-primary"),"ad-slot-mpu-secondary":i("ad-slot-mpu-secondary"),"ad-slot-native-side":i("ad-slot-native-side"),"ad-slot-parallax":i("ad-slot-parallax"),"ad-slot-promo-feature-2":i("ad-slot-promo-feature-2"),"ad-slot-promo-feature-3":i("ad-slot-promo-feature-3"),"ad-slot-sponsor-fake":i("ad-slot-sponsor-fake"),"ad-slot-sponsor-section-primary":i("ad-slot-sponsor-section-primary"),"ad-slot-sponsor-section-storyworks-deferred":i("ad-slot-sponsor-section-storyworks-deferred"),"ad-slot-sponsor-section-storyworks":i("ad-slot-sponsor-section-storyworks"),"ad-slot-vertical-navbar":i("ad-slot-vertical-navbar"),"ad-slot":i("ad-slot"),"analytics-element-metadata":i("analytics-element-metadata"),"analytics-module-metadata":i("analytics-module-metadata"),"anchor-capable-element-end":i("anchor-capable-element-end"),"anchor-capable-element-start":i("anchor-capable-element-start"),"anchor-tag":i("anchor-tag"),"around-the-bbc-footer":i("around-the-bbc-footer"),"article-image":i("article-image"),"third-party-content-container":i("third-party-content-container"),"attribution-slot":i("attribution-slot"),banner:i("banner"),"irregular-images-promo-unit":i("irregular-images-promo-unit"),"irregular-images":i("irregular-images"),"calendar-promo":i("calendar-promo"),"google-add-to-calendar":i("google-add-to-calendar"),"ical-add-to-calendar":i("ical-add-to-calendar"),"outlook-add-to-calendar":i("outlook-add-to-calendar"),"yahoo-add-to-calendar":i("yahoo-add-to-calendar"),"callout-box":i("callout-box"),caption:i("caption"),column:i("column"),"context-heading":i("context-heading"),"context-item":i("context-item"),"custom-embed":i("custom-embed"),date:i("date"),"destination-link":i("destination-link"),"map-controls":i("map-controls"),"map-popup":i("map-popup"),"domestic-header":i("domestic-header"),"empty-list-notice":i("empty-list-notice"),"event-filter-story":i("event-filter-story"),"event-list-two-column":i("event-list-two-column"),"figure-with-description":i("figure-with-description"),figure:i("figure"),filter:i("filter"),"follow-us":i("follow-us"),"form-select":i("form-select"),"event-filter-header":i("event-filter-header"),"event-filter":i("event-filter"),"select-box":i("select-box"),"fullsizeable-anchor":i("fullsizeable-anchor"),"gallery-inline-image":i("gallery-inline-image"),"gallery-lead":i("gallery-lead"),"headed-section-end":i("headed-section-end"),"headed-section-start":i("headed-section-start"),"headed-section-with-destination-end":i("headed-section-with-destination-end"),"headed-section-with-destination-start":i("headed-section-with-destination-start"),"headed-section-with-image-end":i("headed-section-with-image-end"),"headed-section-with-image-start":i("headed-section-with-image-start"),"hero-unit":i("hero-unit"),"horizontal-partner-module":i("horizontal-partner-module"),"html5-video":i("html5-video"),"ibroadcast-image-gallery-advertising-overlay":i("ibroadcast-image-gallery-advertising-overlay"),"ibroadcast-image-gallery-selected-image-caption":i("ibroadcast-image-gallery-selected-image-caption"),"ibroadcast-image-gallery-selected-image-tag":i("ibroadcast-image-gallery-selected-image-tag"),"ibroadcast-image-gallery-selected-image":i("ibroadcast-image-gallery-selected-image"),"ibroadcast-image-gallery-thumbnail":i("ibroadcast-image-gallery-thumbnail"),"ibroadcast-image-gallery":i("ibroadcast-image-gallery"),icon:i("icon"),infographic:i("infographic"),"inline-horizontal-partner-module":i("inline-horizontal-partner-module"),"inline-ibroadcast-image-gallery":i("inline-ibroadcast-image-gallery"),"inline-image":i("inline-image"),"inline-magnify":i("inline-magnify"),"inline-video":i("inline-video"),"inline-youtube":i("inline-youtube"),intro:i("intro"),"link-box-anchor-simple":i("link-box-anchor-simple"),"link-box-anchor":i("link-box-anchor"),"link-box-list":i("link-box-list"),"link-box":i("link-box"),"load-more":i("load-more"),"lorem-ipsum":i("lorem-ipsum"),mapbox:i("mapbox"),"media-with-description":i("media-with-description"),"more-amazing-stories":i("more-amazing-stories"),"more-stories-wrapper":i("more-stories-wrapper"),"most-popular":i("most-popular"),"related-stories":i("related-stories"),"navigation-wrapper":i("navigation-wrapper"),navigation:i("navigation"),"nested-list":i("nested-list"),"news-feed-module-placeholder":i("news-feed-module-placeholder"),"news-feed-promo-group":i("news-feed-promo-group"),"options-list":i("options-list"),"page-header-branding":i("page-header-branding"),"page-header":i("page-header"),"partner-promo":i("partner-promo"),"person-bio":i("person-bio"),pointer:i("pointer"),"primary-header":i("primary-header"),"promo-group-list-items":i("promo-group-list-items"),"promo-group-more-stories":i("promo-group-more-stories"),"promo-group-without-container":i("promo-group-without-container"),"promo-group":i("promo-group"),"promo-index":i("promo-index"),"promo-module":i("promo-module"),"promo-unit-basic":i("promo-unit-basic"),"promo-unit-end":i("promo-unit-end"),"promo-unit-layout-alternative":i("promo-unit-layout-alternative"),"promo-unit-layout-clip":i("promo-unit-layout-clip"),"promo-unit-layout-event":i("promo-unit-layout-event"),"promo-unit-layout-standard":i("promo-unit-layout-standard"),"promo-unit-start":i("promo-unit-start"),"promo-unit":i("promo-unit"),"responsive-image-data-element-with-icon":i("responsive-image-data-element-with-icon"),"responsive-image-data-element":i("responsive-image-data-element"),"responsive-image-lazy-load-placeholder":i("responsive-image-lazy-load-placeholder"),"responsive-image-overlay":i("responsive-image-overlay"),"responsive-image-tag":i("responsive-image-tag"),"responsive-image-wrapper":i("responsive-image-wrapper"),"responsive-image":i("responsive-image"),"search-results-status":i("search-results-status"),"secondary-content-destination-results":i("secondary-content-destination-results"),"secondary-content-standard":i("secondary-content-standard"),"secondary-content-story-simple":i("secondary-content-story-simple"),"secondary-content-story":i("secondary-content-story"),"section-header":i("section-header"),"series-box":i("series-box"),"share-tool-item":i("share-tool-item"),"share-tools-content":i("share-tools-content"),"share-tools-expandable-button-close":i("share-tools-expandable-button-close"),"share-tools-expandable":i("share-tools-expandable"),"share-tools":i("share-tools"),"slideshow-footer":i("slideshow-footer"),"sg-controls":i("sg-controls"),"sg-end-slate-mpu":i("sg-end-slate-mpu"),"sg-end-slate-promo-group-items":i("sg-end-slate-promo-group-items"),"sg-end-slate-related-galleries":i("sg-end-slate-related-galleries"),"sg-end-slate":i("sg-end-slate"),"sg-horizontal-banner":i("sg-horizontal-banner"),"sg-info-button":i("sg-info-button"),"sg-main":i("sg-main"),"sg-outward-link-layout":i("sg-outward-link-layout"),"sg-prev-next":i("sg-prev-next"),"sg-progress":i("sg-progress"),"sg-share-tools-button-close":i("sg-share-tools-button-close"),"sg-share-tools-content":i("sg-share-tools-content"),"sg-share-tools":i("sg-share-tools"),"sg-slide-ambient-video":i("sg-slide-ambient-video"),"sg-slide-image-background":i("sg-slide-image-background"),"sg-slide-image-inline":i("sg-slide-image-inline"),"sg-slide-image":i("sg-slide-image"),"sg-slide-layout-image-only":i("sg-slide-layout-image-only"),"sg-slide-layout-overlay":i("sg-slide-layout-overlay"),"sg-slide-layout-sidebar":i("sg-slide-layout-sidebar"),"sg-slide-layout-video":i("sg-slide-layout-video"),"sg-slide-video-caption":i("sg-slide-video-caption"),"sg-slide-video":i("sg-slide-video"),"sg-slides":i("sg-slides"),"sg-spinner":i("sg-spinner"),"sg-splash-primary":i("sg-splash-primary"),"sg-splash-scroll":i("sg-splash-scroll"),"sg-splash-secondary":i("sg-splash-secondary"),"sg-splash-start":i("sg-splash-start"),"sg-splash":i("sg-splash"),"sg-start-overlay":i("sg-start-overlay"),"sg-storyworks-layout":i("sg-storyworks-layout"),"sg-transition-overlay":i("sg-transition-overlay"),"app-cta":i("app-cta"),"app-download":i("app-download"),"button-app-store":i("button-app-store"),"button-google-play":i("button-google-play"),catch:i("catch"),"continue-promo":i("continue-promo"),"source-attribution":i("source-attribution"),"standard-image-tag":i("standard-image-tag"),"start-end-date":i("start-end-date"),"story-content":i("story-content"),"story-page-related-footer":i("story-page-related-footer"),"super-section-ad-slot-mpu-primary":i("super-section-ad-slot-mpu-primary"),"super-section-ad-slot-mpu-secondary":i("super-section-ad-slot-mpu-secondary"),"super-section-leaderboard":i("super-section-leaderboard"),"super-section-primary-content-meta-data":i("super-section-primary-content-meta-data"),"super-section-secondary-content-meta-data":i("super-section-secondary-content-meta-data"),"super-section-secondary-content-story":i("super-section-secondary-content-story"),"super-section-story-button":i("super-section-story-button"),"super-section-story-content":i("super-section-story-content"),"super-section-story-contents":i("super-section-story-contents"),"super-section-story-detail":i("super-section-story-detail"),"topbar-menu-desktop":i("topbar-menu-desktop"),"topbar-menu-mobile":i("topbar-menu-mobile"),"topbar-menu-noscript":i("topbar-menu-noscript"),"topbar-menu-toggle":i("topbar-menu-toggle"),"topbar-menu":i("topbar-menu"),topbar:i("topbar"),"twitter-feed":i("twitter-feed"),"two-column":i("two-column"),"video-player-prototype":i("video-player-prototype"),magnify:i("magnify"),"stand-alone-video-element":i("stand-alone-video-element"),"video-lead":i("video-lead"),"vpp-additional-controls":i("vpp-additional-controls"),"vpp-control-panel-metadata":i("vpp-control-panel-metadata"),"vpp-control-panel":i("vpp-control-panel"),"vpp-clip-metadata-duration":i("vpp-clip-metadata-duration"),"vpp-clip-metadata":i("vpp-clip-metadata"),"vpp-clip-preview-image-item":i("vpp-clip-preview-image-item"),"vpp-clip-promo-icon":i("vpp-clip-promo-icon"),"vpp-clip-promo-image":i("vpp-clip-promo-image"),"vpp-clip-promo-status":i("vpp-clip-promo-status"),"vpp-clip-promo":i("vpp-clip-promo"),"vpp-clip-viewer-player":i("vpp-clip-viewer-player"),"vpp-clip-viewer-preview-image":i("vpp-clip-viewer-preview-image"),"vpp-clip-viewer-preview":i("vpp-clip-viewer-preview"),"vpp-clip-viewer":i("vpp-clip-viewer"),"vpp-main":i("vpp-main"),"vpp-play-control":i("vpp-play-control"),"vpp-playlist-metadata-author":i("vpp-playlist-metadata-author"),"vpp-playlist-metadata":i("vpp-playlist-metadata"),"vpp-playlist":i("vpp-playlist"),"vpp-skip-control":i("vpp-skip-control"),"vpp-smp-placeholder":i("vpp-smp-placeholder"),"vpp-video-player":i("vpp-video-player"),"vpp-video":i("vpp-video"),youtube:i("youtube"),"weather-forecast-clean":i("weather-forecast-clean"),"weather-forecast-header":i("weather-forecast-header"),"weather-forecast-temperature":i("weather-forecast-temperature"),"weather-forecast-toggle":i("weather-forecast-toggle"),"weather-forecast":i("weather-forecast"),"wrapped-mpu-deferred":i("wrapped-mpu-deferred"),"wrapped-mpu":i("wrapped-mpu")}}),require([],function(){return String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String}),define("extension/String",function(){}),define("lib/jquery.inview",["jquery"],function(t){!function(t){function e(){var e,i,n={height:l.innerHeight,width:l.innerWidth};return n.height||!(e=r.compatMode)&&t.support.boxModel||(i="CSS1Compat"===e?c:r.body,n={height:i.clientHeight,width:i.clientWidth}),n}function i(){return{top:l.pageYOffset||c.scrollTop||r.body.scrollTop,left:l.pageXOffset||c.scrollLeft||r.body.scrollLeft}}function n(){var n,r=t(),l=0;if(t.each(a,function(t,e){var i=e.data.selector,n=e.$element;r=r.add(i?n.find(i):n)}),n=r.length)for(o=o||e(),s=s||i();l<n;l++)if(t.contains(c,r[l])){var d,u,p,h=t(r[l]),m={height:h.height(),width:h.width()},g=h.offset(),f=h.data("inview");if(!s||!o)return;g.top+m.height>s.top&&g.top<s.top+o.height&&g.left+m.width>s.left&&g.left<s.left+o.width?(d=s.left>g.left?"right":s.left+o.width<g.left+m.width?"left":"both",u=s.top>g.top?"bottom":s.top+o.height<g.top+m.height?"top":"both",p=d+"-"+u,f&&f===p||h.data("inview",p).trigger("inview",[!0,d,u])):f&&h.data("inview",!1).trigger("inview",[!1])}}var o,s,a={},r=document,l=window,c=r.documentElement,d=t.expando;t.event.special.inview={add:function(e){a[e.guid+"-"+this[d]]={data:e,$element:t(this)}},remove:function(t){try{delete a[t.guid+"-"+this[d]]}catch(t){}}},t(l).bind("scroll resize",function(){o=s=null}),!c.addEventListener&&c.attachEvent&&c.attachEvent("onfocusin",function(){s=null}),setInterval(n,250)}(t)}),define("lib/jquery.getSelector",["jquery"],function(t){!function(t){
var e=function(t){for(pieces=[];t&&void 0!==t.tagName;t=t.parentNode){if(t.className){var e=t.className.split(" ");for(var i in e)e.hasOwnProperty(i)&&e[i]&&(pieces.unshift(e[i]),pieces.unshift("."))}t.id&&!/\s/.test(t.id)&&(pieces.unshift(t.id),pieces.unshift("#")),pieces.unshift(t.tagName),pieces.unshift(" > ")}return pieces.slice(1).join("")};t.fn.getSelector=function(i){return!0===i?e(this[0]):t.map(this,function(t){return e(t)})}}(t)}),define("lib/jquery.dataDom",["jquery","extension/String"],function(t,e){t.fn.dataDom=function(t,e){var i,n,o="";if(void 0!==e){for(i=t.split("-"),n=0;n<i.length;n++)o+=0!=n?i[n].ucfirst():i[n];t="data-"+t,this.data(o,e),this.attr(t,e)}}}),define("util/getQuadrentOfCoordinateInContainer",["jquery"],function(t){var e=function(t,e,i){return t>=e&&t<=i},i=function(t,i){return!(!e(t.x,i.left,i.right)||!e(t.y,i.top,i.bottom))},n=function(t){var e={left:t.left,right:t.left+(t.right-t.left)/3,top:t.top,bottom:t.top+(t.bottom-t.top)/3},i={left:e.right,right:e.right+(t.right-t.left)/3,top:t.top,bottom:e.bottom},n={left:i.right,right:t.right,top:t.top,bottom:e.bottom},o={left:e.left,right:e.right,top:e.bottom,bottom:e.bottom+(t.bottom-t.top)/3},s={left:i.left,right:i.right,top:o.top,bottom:o.bottom},a={left:n.left,right:n.right,top:o.top,bottom:o.bottom},r={left:e.left,right:e.right,top:o.bottom,bottom:t.bottom};return{"top-left":e,"top-center":i,"top-right":n,"mid-left":o,"mid-center":s,"mid-right":a,"bottom-left":r,"bottom-center":{left:i.left,right:i.right,top:r.top,bottom:r.bottom},"bottom-right":{left:n.left,right:n.right,top:r.top,bottom:r.bottom}}};return function(t,e){var o=n(e);for(var s in o){var a=o[s];if(i(t,a))return s}return!1}}),define("common/util/getter-setter",["lodash"],function(t){function e(){this.data={}}return t.extend(e.prototype,{set:function(t){this.data=t},setProperty:function(t,e){this.data[t]=e},get:function(){return this.data}}),e}),define("common/config",["lodash","common/util/extends","common/util/getter-setter"],function(t,e,i){function n(){i.call(this)}return e(n,i,{}),new n}),define("model/exposed-config",["lodash","common/config"],function(t,e){return t.has(window,"_config")?(t.has(_config,"module")&&t.has(_config.module,"domain")&&(_config.api={version:"v1",url:"/"+_config.module.domain+"/data"}),_config):{}}),define("common/util/logger",["lodash","common/util/extends","common/util/getter-setter"],function(t,e,i){function n(){i.call(this),this.data={debug:function(){},warn:function(){},info:function(){},error:function(){}}}return e(n,i,{}),new n}),define("common/util/accessor",["lodash"],function(t){function e(t,e){this.init(t,e)}return t.extend(e.prototype,{init:function(e,i){t.extend(this,e)},get:function(e,i){return t.has(this,e)&&!t.isNull(this[e])?this[e]:!t.isUndefined(i)&&i},set:function(t,e){return this[t]=e,this.get(t)},delete:function(e){t.has(this,e)&&delete this[e]},map:function(e,i){t.has(this,e)&&this[e]&&this.set(i,this.get(e)),this.delete(e)}}),e}),define("common/entity/factory",["lodash"],function(t){function e(e){this.entities={},t.each(e,function(t,e){this.set(e,t)},this)}return t.extend(e.prototype,{set:function(t,e){this.entities[t]=e},get:function(e){return!!t.has(this.entities,e)&&this.entities[e]},create:function(t,e,i){var n=this.get(t);if(n)return new n(e,i);throw new Error("Function EntityFactory.create cannot find "+t+" entity")},canProvide:function(e){return t.every(e,function(e){return!t.isUndefined(this.entities[e])},this)}}),e}),define("common/entity/base",["lodash","common/util/extends","common/util/accessor","common/entity/factory"],function(t,e,i,n,o){function s(e,n){var o={};i.call(this,t.extend(o,e),n)}return e(s,i,{init:function(e,o){t.isUndefined(e)||i.prototype.init.apply(this,arguments),(t.isUndefined(o)||t.isUndefined(o.canProvide))&&(o=new n),this.setEntityFactory(o)},getClass:function(){return this.get("class")?this.get("class"):""},setClass:function(t){this.class=t},entityFactoryDependencies:[],setEntityFactory:function(t){if(!t.canProvide(this.entityFactoryDependencies))throw new Error("BaseEntity.setEntityFactory called factory must support methods ("+this.entityFactoryDependencies.join(",")+")");this.entityFactory=t},getEntityFactory:function(){return this.entityFactory}}),s}),define("common/entity/config",["lodash","common/util/extends","common/entity/base"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{getDefaults:function(){return this.get("defaults",{})}}),n}),define("common/util/interface",["lodash"],function(t){var e=function(t,e){if(2!=arguments.length)throw new Error("Interface constructor called with "+arguments.length+"arguments, but expected exactly 2.");this.name=t,this.methods=[];for(var i=0,n=e.length;i<n;i++){if("string"!=typeof e[i])throw new Error("Interface constructor expects method names to be passed in as a string.");this.methods.push(e[i])}};return e.ensureImplements=function(t){if(arguments.length<2)throw new Error("Function Interface.ensureImplements called with "+arguments.length+"arguments, but expected at least 2.");for(var i=1,n=arguments.length;i<n;i++){var o=arguments[i];if(o.constructor!==e)throw new Error("Function Interface.ensureImplements expects arguments two and above to be instances of Interface.");for(var s=0,a=o.methods.length;s<a;s++){var r=o.methods[s];if(!t[r]||"function"!=typeof t[r])throw new Error("Function Interface.ensureImplements:  "+t.constructor.name+" does not implement the "+o.name+" interface. Method "+r+" was not found.")}}},e}),define("common/interface/entity/base",["lodash","common/util/interface"],function(t,e){return new e("BaseEntity",["get","set","map","getClass","setClass"])}),define("common/view/model-v2/base",["lodash","common/util/logger","signals","common/entity/config","common/util/interface","common/entity/base","common/entity/factory","common/interface/entity/base"],function(t,e,i,n,o,s,a,r){var l=function(e,n){t.isUndefined(e)&&(e=new s),this.setConfig(n,!1),t.extend(this,this.getConfig().getDefaults()),this.setEntity(e),this.signals={updated:new i.Signal}};return t.extend(l.prototype,{entityInterface:r,setConfig:function(t,e){this.config=new n(t),!0===e&&this.updateViewData()},getConfig:function(){return this.config},updateViewData:function(){this.setViewData(),this.signals.updated.dispatch(this.getViewData())},setViewData:function(){this.viewData=this.getEntity()},getViewData:function(){return this.viewData},setEntity:function(t){o.ensureImplements(t,this.entityInterface),this.entity=t},getEntity:function(){return this.entity},setSourceData:function(t,e){return!1!==e&&this.getEntity().init(t,this.getEntity().getEntityFactory()),this.updateViewData(),this.getViewData()},subscribe:function(t,e){switch(t){case"update":this.signals.updated.add(e)}}}),l}),define("common/interface/entity/link",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,i){return new e("Link",i.methods.concat(["getId","getTitle","getURL","getImage"]))}),define("common/interface/entity/promo",["lodash","common/util/interface","common/interface/entity/link"],function(t,e,i){return new e("PromoEntity",i.methods.concat(["getContext","getShortName","getClientName","getSummary","setSummary","getSummaryLong","getIconType","getType","getRelatedLinks"]))}),define("common/interface/entity/document/base",["lodash","common/util/interface","common/interface/entity/promo"],function(t,e,i){return new e("DocumentEntity",i.methods.concat(["getKeywords","getAuthor","getPartner","getAdZoneId","getAdSlots","getSearchTerms","getError","areAdvertsDisabled"]))}),define("common/util/request",["lodash","common/util/extends","common/util/getter-setter"],function(t,e,i){function n(){i.call(this),this.data={isUK:{},contentRegion:!1,request:{}}}return e(n,i,{}),new n}),define("common/interface/entity/image",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,i){return new e("ImageEntity",i.methods.concat(["getId","getURL","getTitle","getWidth","getHeight","getSynopsisShort","getSynopsisMedium","getSynopsisLong","getIconType","setIconType","getReplaceURL","setReplaceURL"]))}),define("common/interface/entity/analytics/interaction-element-meta-data",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,i){return new e("AnalyticsInteractionElementMetaData",i.methods.concat(["getElementId","getEvent","getChannelName","getChannelLocation","getElementName","getElementType","getElementPosition","getTotalElementCount","getAdditionalData","getSection","getPageType","getInteractionType","getTrackingMethod"]))}),define("common/view/model-v2/analytics/interaction-element-meta-data",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/analytics/interaction-element-meta-data"],function(t,e,i,n){function o(){i.apply(this,arguments)}return e(o,i,{entityInterface:n,setViewData:function(){var t=this.getEntity();this.viewData={"element-id":t.getElementId(),event:t.getEvent(),"channel-name":t.getChannelName(),"channel-location":t.getChannelLocation(),"element-name":t.getElementName(),"element-type":t.getElementType(),"element-position":t.getElementPosition(),"total-element-count":t.getTotalElementCount(),"additional-data":t.getAdditionalData(),section:t.getSection(),"page-type":t.getPageType(),"interaction-type":t.getInteractionType(),"tracking-method":t.getTrackingMethod()}}}),o}),define("common/entity/vanilla/analytics/interaction-element-meta-data",["lodash","common/util/extends","common/entity/base"],function(t,e,i){function n(e){var n={elementId:!1,event:"click",channelName:!1,channelLocation:!1,elementName:!1,elementType:!1,elementPosition:!1,totalElementCount:!1,additionalData:!1,section:!1,pageType:!1,interactionType:!1,trackingMethod:!1};i.call(this,t.extend(n,e))}return e(n,i,{getElementId:function(){return this.elementId},getEvent:function(){return this.event},getChannelName:function(){return this.channelName},getChannelLocation:function(){return this.channelLocation},getElementName:function(){return this.elementName},getElementType:function(){return this.elementType},getElementPosition:function(){return this.elementPosition},getTotalElementCount:function(){return this.totalElementCount},getAdditionalData:function(){return this.additionalData},getSection:function(){return this.section},getPageType:function(){return this.pageType},getInteractionType:function(){return this.interactionType},getTrackingMethod:function(){return this.trackingMethod}}),n}),define("common/interface/entity/analytics/module-meta-data",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,i){return new e("AnalyticsModuleMetaData",i.methods.concat(["getModule"]))}),define("common/view/model-v2/analytics/module-meta-data",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/analytics/module-meta-data"],function(t,e,i,n){function o(){i.apply(this,arguments)}return e(o,i,{entityInterface:n,setViewData:function(){var t=this.getEntity();this.viewData={module:t.getModule()}}}),o}),define("common/entity/vanilla/analytics/module-meta-data",["lodash","common/util/extends","common/entity/base"],function(t,e,i){function n(e){var n={module:!1};i.call(this,t.extend(n,e))}return e(n,i,{getModule:function(){return this.module}}),n}),define("common/view/model-v2/analytics/factory",["lodash","common/util/logger","common/view/model-v2/analytics/interaction-element-meta-data","common/entity/vanilla/analytics/interaction-element-meta-data","common/view/model-v2/analytics/module-meta-data","common/entity/vanilla/analytics/module-meta-data"],function(t,e,i,n,o,s){return{getModuleMetadata:function(t){try{if("string"!=typeof t||t.length<1)throw new Error("moduleName is not defined");return new o(new s({module:t}),{}).setSourceData({},!1)}catch(t){return e.get().error(t),{}}},getElementMetadata:function(t,o,s){try{if("string"!=typeof t||t.length<1)throw new Error("elementId is not defined");if("string"!=typeof o||o.length<1)throw new Error("elementName is not defined");var a={elementId:t,elementName:o};return"string"==typeof s&&s.length>0&&(a.elementType=s),new i(new n(a),{}).setSourceData({},!1)}catch(t){return e.get().error(t),{}}}}}),define("common/view/model-v2/image/html-element",["lodash","common/config","common/util/extends","common/view/model-v2/base","common/interface/entity/image","templates","common/util/logger","common/view/model-v2/analytics/factory"],function(t,e,i,n,o,s,a,r){function l(){n.apply(this,arguments)}return i(l,n,{entityInterface:o,setViewData:function(){var i=this.getEntity(),n=(i.getHeight(),this.getEntity().getURL()),o="{x}_{y}",s=this.getImageFormat(),a=this.getConfig().get("captionStyle","short"),l={},c=i.getSynopsisShort(),d=e.get(),u=this.getConfig().get("imageAnalyticsConfig",!1);if(this.getConfig().get("travelCaptionOverride",!1)&&(c=i.getTitle()),l["use-image-tag"]=this.getConfig().get("useImageTag",!1),l["anchor-title"]=c,l["icon-type"]=i.getIconType(),l["replace-url"]=i.getReplaceURL(),l.class=this.getConfig().get("class",this.getEntity().getClass()),l["is-portrait"]=s.isPortrait,l.title=i.getTitle(),l.alt=this.getAltTag(c,i.getSynopsisLong()),l["lazy-load"]=this.getConfig().get("lazyLoad",!1),t.has(s,"useOriginal")&&!0===s.useOriginal?o="original":t.has(s,"x")&&t.has(s,"y")?(o=o.replace("{x}",s.x),o=o.replace("{y}",s.y)):o=!1,n&&!1!==o){var p="";!0===t.has(d,"image_recipe.watermarking_enabled")&&!0===d.image_recipe.watermarking_enabled&&!0===this.getConfig().get("isWatermarked",!1)&&(p+="wm/"),t.has(d,"image_recipe.recipe_prefix")&&(p+=d.image_recipe.recipe_prefix),o=p+o,n=n.replace("$recipe",o),l.url=n,l.width=s.x,l.height=s.y,l["is-portrait"]=s.isPortrait}if(this.getConfig().get("includeCaption",!0)){switch(a){case"long":l.caption=this.replaceLongSynopsisLinks(i.getSynopsisLong()),l["caption-title"]=c;break;default:l.caption=i.getSynopsisMedium()}l.caption=l.caption.replace(/\r?\n/g,"<br />")}this.getConfig().get("additional-wrapper-class")&&(l["additional-wrapper-class"]=this.getConfig().get("additional-wrapper-class")),!0===this.getConfig().get("showBrandedBorder",!1)&&(l["additional-wrapper-class"]="branded-border"),!1!==u&&(l["analytics-element-metadata"]=r.getElementMetadata(u.elementId,u.elementName,u.elementType)),this.viewData=l},getImageFormat:function(){var e=this.getEntity(),i=e.getWidth(),n=e.getHeight(),o=this.getConfig().get("format"),s={x:"130",y:"73"},a={x:"90",y:"130"},r=!1;return t.has(o,"useOriginal")&&!0===o.useOriginal?{useOriginal:!0}:(t.has(o,"landscape")&&(s=o.landscape),t.has(o,"portrait")&&(a=o.portrait),t.has(o,"portraitPermitted")&&(r=o.portraitPermitted),i<n&&r?(a.isPortrait=!0,a):(s.isPortrait=!1,s))},getClass:function(){return""!==this.getEntity().getClass()?this.getEntity().getClass():this.getConfig().get("class",this.getEntity().getClass())},replaceLongSynopsisLinks:function(e){var i=/\*?\*?\[.[^\(\)]+\]\(.[^\(\)]+\)\*?\*?/g,n=e.match(i);return t.each(n,function(t){var i=/\[.+\]/,n=/\(.+\)/,o=t.match(i),a=t.match(n);if(null!==o&&o.length>0&&null!==a&&a.length>0){o=o[0],a=a[0];var r=o.substr(1,o.length-2),l=a.substr(1,a.length-2),c=s["anchor-tag"]({link:l,text:r});e=e.replace(t,c)}},this),e},getAltTag:function(t,e){return-1===t.toLowerCase().indexOf("credit:")?t+" "+this.getImageCredit(e):t},getImageCredit:function(t){var e,i=/\([^\(\)]+\)$/g;if(null!==(e=t.match(i))&&e.length>0){var n=e[e.length-1];return n=n.slice(0,1)+"Credit: "+n.slice(1,n.length)}return""}}),l}),define("common/view/model-v2/document/meta-data/meta-tags",["lodash","common/util/logger","common/util/extends","common/view/model-v2/base","common/view/model-v2/image/html-element","common/interface/entity/document/base","common/config"],function(t,e,i,n,o,s,a){function r(){n.apply(this,arguments)}return i(r,n,{entityInterface:s,imageConfig:{format:{landscape:{x:"624",y:"351"}}},setViewData:function(){this.viewData={title:this.getTitle(),"short-title":this.getEntity().getTitle(),image:this.getImage(),author:!1,url:this.getEntity().getURL(),description:this.getEntity().getSummary(),video:this.getEntity().get("video"),type:this.getPageType(),"og-type":this.getOGType(),keywords:this.getKeywords(),"no-index":this.shouldIndex(),"alternate-links":this.getAlternateLinks(),"twitter-username":this.getTwitterUserName(),"canonical-url":this.getCanonicalUrl(),"fb-page-ids":this.getFacebookPageIds()},this.getEntity().getAuthor()&&(this.viewData.author=this.getEntity().getAuthor().getName())},getPageType:function(){return this.getEntity().getType()},getOGType:function(){var t=this.getEntity().getType();return t=""===t?"website":"article"},getImage:function(){return!!this.getEntity().getImage()&&new o(this.getEntity().getImage(),this.imageConfig).setSourceData({},!1)},getTitle:function(){var e=this.getEntity(),i=["BBC"];return t.has(this.getConfig(),"module")&&t.has(this.getConfig().module,"name")&&i.push(this.getConfig().module.name),i.push(e.getTitle()),i.join(" - ")},getKeywords:function(){var e=this.getEntity().getKeywords(),i=[];return t.each(e,function(t,e){"1"==t?i.push(e):i.push(t)}),i.join(", ")},getAlternateLinks:function(){var e=this.getConfig(),i=e.get("alternate-links",{}),n=[];return i.is_enabled&&t.has(i,"links")&&t.each(i.links,function(t,e){n.push({lang:e,URL:t})},this),n},getCanonicalUrl:function(){var e=this.getConfig(),i=e.get("canonical-url",!1);return!!(t.has(i,"is_enabled")&&i.is_enabled&&t.has(i,"url"))&&e["canonical-url"]},shouldIndex:function(){return!0===this.getConfig().get("robotsNoIndex",!1)},getTwitterUserName:function(){var e=a.get();return!!t.has(e,"socialLinks.twitter.username")&&e.socialLinks.twitter.username},getFacebookPageIds:function(){var e=a.get();return!(!t.has(e,"facebookPageIds")||"string"!=typeof e.facebookPageIds)&&e.facebookPageIds}}),r}),define("common/entity/habitat/base",["lodash","common/util/extends","common/entity/base"],function(t,e,i){function n(){i.apply(this,arguments)}return e(n,i,{init:function(t,e){i.prototype.init.apply(this,arguments),this.mapProperties(),this.getId()&&this.set("shortId",this.generateShortId())},mapProperties:function(){var e=this.get("Content");t.extend(e,this.get("Metadata",{})),t.each(e,function(e,i){t.isString(i)&&(i=i.substr(0,1).toLowerCase()+i.substr(1),this.set(i,e))},this),this.map("Urn","urn"),this.map("entity","entityType")},getEntityType:function(){return this.entityType},getId:function(t){return t?this.shortId:this.id},generateShortId:function(){var e=this.getId().split("/");return t.last(e)},getArrayNestedAsset:function(e){var i=this.get(e,!1);if(t.isArray(i)&&i.length>0){var n=i[0];return(!t.isString(n)||"urn:"!==n.substr(0,4))&&i[0]}return!1}}),n}),define("common/entity/habitat/image/base",["lodash","common/util/extends","common/entity/habitat/base","common/util/logger"],function(t,e,i,n){function o(e){var n={URL:!1,templateUrl:"",sourceUrl:"",title:"",sourceWidth:2,sourceHeight:1,synopsisShort:"",synopsisMedium:"",synopsisLong:"",class:"",replaceUrl:"",iconType:""};i.call(this,t.extend(n,e)),this.setURL(this.templateUrl,this.sourceUrl)}var s=function(t){return t.split(".").pop()};return e(o,i,{setURL:function(t,e){var i=s(t),n=s(e);i.length>0&&n.length>0&&i!==n?this.URL=t.substr(0,t.lastIndexOf("."))+"."+n:this.URL=t},getURL:function(){return this.URL},getTitle:function(){return this.title},getWidth:function(){return this.sourceWidth},getHeight:function(){return this.sourceHeight},getSynopsisShort:function(){return this.synopsisShort},getSynopsisMedium:function(){return this.synopsisMedium},getSynopsisLong:function(){return this.synopsisLong},getIconType:function(){return this.iconType},setIconType:function(t){this.iconType=t},getReplaceURL:function(){return this.replaceUrl},setReplaceURL:function(t){this.replaceUrl=t}}),o}),function(){var t=function(t){function e(t,e){if(t.indexOf)return t.indexOf(e);for(var i=t.length;i--;)if(t[i]===e)return i;return-1}function i(t,i){var n=e(t,i);-1!==n&&t.splice(n,1)}function n(t,e){return"[object "+e+"]"===Object.prototype.toString.call(t)}function o(t){return n(t,"RegExp")}function s(t){return n(t,"Array")}function a(t){return"function"==typeof t}function r(t){return null===t||"null"===t?null:"true"===t||"false"!==t&&(t===m||"undefined"===t?m:""===t||isNaN(t)?t:parseFloat(t))}function l(t){for(var e=t.length,i=[];e--;)i[e]=r(t[e]);return i}function c(t,e){for(var i,n,o,a,l=(t||"").replace("?","").split("&"),c=-1,d={};n=l[++c];)i=n.indexOf("="),a=n.substring(0,i),o=decodeURIComponent(n.substring(i+1)),!1!==e&&(o=r(o)),a in d?s(d[a])?d[a].push(o):d[a]=[d[a],o]:d[a]=o;return d}function d(){this.bypassed=new t.Signal,this.routed=new t.Signal,this._routes=[],this._prevRoutes=[],this._piped=[],this.resetState()}function u(e,i,n,s){var a=o(e),r=s.patternLexer;this._router=s,this._pattern=e,this._paramsIds=a?null:r.getParamIds(e),this._optionalParamsIds=a?null:r.getOptionalParamsIds(e),this._matchRegexp=a?e:r.compilePattern(e,s.ignoreCase),this.matched=new t.Signal,this.switched=new t.Signal,i&&this.matched.add(i),this._priority=n||0}var p,h,m;return h=""===/t(.+)?/.exec("t")[1],d.prototype={greedy:!1,greedyEnabled:!0,ignoreCase:!0,ignoreState:!1,shouldTypecast:!1,normalizeFn:null,resetState:function(){this._prevRoutes.length=0,this._prevMatchedRequest=null,this._prevBypassedRequest=null},create:function(){return new d},addRoute:function(t,e,i){var n=new u(t,e,i,this);return this._sortedInsert(n),n},removeRoute:function(t){i(this._routes,t),t._destroy()},removeAllRoutes:function(){for(var t=this.getNumRoutes();t--;)this._routes[t]._destroy();this._routes.length=0},parse:function(t,e){if(t=t||"",e=e||[],this.ignoreState||t!==this._prevMatchedRequest&&t!==this._prevBypassedRequest){var i,n=this._getMatchedRoutes(t),o=0,s=n.length;if(s)for(this._prevMatchedRequest=t,this._notifyPrevRoutes(n,t),this._prevRoutes=n;o<s;)i=n[o],i.route.matched.dispatch.apply(i.route.matched,e.concat(i.params)),i.isFirst=!o,this.routed.dispatch.apply(this.routed,e.concat([t,i])),o+=1;else this._prevBypassedRequest=t,this.bypassed.dispatch.apply(this.bypassed,e.concat([t]));this._pipeParse(t,e)}},_notifyPrevRoutes:function(t,e){for(var i,n=0;i=this._prevRoutes[n++];)i.route.switched&&this._didSwitch(i.route,t)&&i.route.switched.dispatch(e)},_didSwitch:function(t,e){for(var i,n=0;i=e[n++];)if(i.route===t)return!1;return!0},_pipeParse:function(t,e){for(var i,n=0;i=this._piped[n++];)i.parse(t,e)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(t){var e=this._routes,i=e.length;do{--i}while(e[i]&&t._priority<=e[i]._priority);e.splice(i+1,0,t)},_getMatchedRoutes:function(t){for(var e,i=[],n=this._routes,o=n.length;(e=n[--o])&&((!i.length||this.greedy||e.greedy)&&e.match(t)&&i.push({route:e,params:e._getParamsArray(t)}),this.greedyEnabled||!i.length););return i},pipe:function(t){this._piped.push(t)},unpipe:function(t){i(this._piped,t)},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}},p=new d,p.VERSION="0.12.2",p.NORM_AS_ARRAY=function(t,e){return[e.vals_]},p.NORM_AS_OBJECT=function(t,e){return[e]},u.prototype={greedy:!1,rules:void 0,match:function(t){return t=t||"",this._matchRegexp.test(t)&&this._validateParams(t)},_validateParams:function(t){var e,i=this.rules,n=this._getParamsObject(t);for(e in i)if("normalize_"!==e&&i.hasOwnProperty(e)&&!this._isValidParam(t,e,n))return!1;return!0},_isValidParam:function(t,i,n){var r=this.rules[i],l=n[i],c=!1,d=0===i.indexOf("?");return null==l&&this._optionalParamsIds&&-1!==e(this._optionalParamsIds,i)?c=!0:o(r)?(d&&(l=n[i+"_"]),c=r.test(l)):s(r)?(d&&(l=n[i+"_"]),c=this._isValidArrayRule(r,l)):a(r)&&(c=r(l,t,n)),c},_isValidArrayRule:function(t,i){if(!this._router.ignoreCase)return-1!==e(t,i);"string"==typeof i&&(i=i.toLowerCase());for(var n,o=t.length;o--;)if(n=t[o],("string"==typeof n?n.toLowerCase():n)===i)return!0;return!1},_getParamsObject:function(t){for(var i,n,o=this._router.shouldTypecast,s=this._router.patternLexer.getParamValues(t,this._matchRegexp,o),a={},l=s.length;l--;)n=s[l],this._paramsIds&&(i=this._paramsIds[l],0===i.indexOf("?")&&n&&(a[i+"_"]=n,n=c(n,o),s[l]=n),h&&""===n&&-1!==e(this._optionalParamsIds,i)&&(n=void 0,s[l]=n),a[i]=n),a[l]=n;return a.request_=o?r(t):t,a.vals_=s,a},_getParamsArray:function(t){var e=this.rules?this.rules.normalize_:null;return e=e||this._router.normalizeFn,e&&a(e)?e(t,this._getParamsObject(t)):this._getParamsObject(t).vals_},interpolate:function(t){var e=this._router.patternLexer.interpolate(this._pattern,t);if(!this._validateParams(e))throw new Error("Generated string doesn't validate against `Route.rules`.");return e},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.switched.dispose(),this.matched=this.switched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},d.prototype.patternLexer=function(){function t(t,e){var i,n=[];for(t.lastIndex=0;i=t.exec(e);)n.push(i[1]);return n}function e(e){return t(p,e)}function i(e){return t(h.OP.rgx,e)}function n(t,e){return t=t||"",t&&(b===m?t=t.replace(d,""):b===f&&(t=t.replace(u,"")),t=o(t,"rgx","save"),t=t.replace(c,"\\$&"),t=o(t,"rRestore","res"),b===m&&(t="\\/?"+t)),b!==g&&(t+="\\/?"),new RegExp("^"+t+"$",e?"i":"")}function o(t,e,i){var n,o;for(o in h)h.hasOwnProperty(o)&&(n=h[o],t=t.replace(n[e],n[i]));return t}function a(t,e,i){var n=e.exec(t);return n&&(n.shift(),i&&(n=l(n))),n}function r(t,e){if(e=e||{},"string"!=typeof t)throw new Error("Route pattern should be a string.");var i=function(t,i){var n;if(i="?"===i.substr(0,1)?i.substr(1):i,null!=e[i]){if("object"==typeof e[i]){var o,a=[];for(var r in e[i])if(o=e[i][r],s(o))for(var l in o)"[]"==r.slice(-2)?a.push(encodeURI(r.slice(0,-2))+"[]="+encodeURI(o[l])):a.push(encodeURI(r+"="+o[l]));else a.push(encodeURI(r+"="+o));n="?"+a.join("&")}else n=String(e[i]);if(-1===t.indexOf("*")&&-1!==n.indexOf("/"))throw new Error('Invalid value "'+n+'" for segment "'+t+'".')}else{if(-1!==t.indexOf("{"))throw new Error("The segment "+t+" is required.");n=""}return n};return h.OS.trail||(h.OS.trail=new RegExp("(?:"+h.OS.id+")+$")),t.replace(h.OS.rgx,h.OS.save).replace(p,i).replace(h.OS.trail,"").replace(h.OS.rRestore,"/")}var c=/[\\.+*?\^$\[\](){}\/'#]/g,d=/^\/|\/$/g,u=/\/$/g,p=/(?:\{|:)([^}:]+)(?:\}|:)/g,h={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},m=1,g=2,f=3,b=m;return function(){var t,e;for(t in h)h.hasOwnProperty(t)&&(e=h[t],e.id="__CR_"+t+"__",e.save="save"in e?e.save.replace("{{id}}",e.id):e.id,e.rRestore=new RegExp(e.id,"g"))}(),{strict:function(){b=g},loose:function(){b=m},legacy:function(){b=f},getParamIds:e,getOptionalParamsIds:i,getParamValues:a,compilePattern:n,interpolate:r}}(),p};"function"==typeof define&&define.amd?define("crossroads",["signals"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("signals")):window.crossroads=t(window.signals)}(),define("common/view/entity-URL-router",["lodash","common/config","crossroads","common/util/logger"],function(t,e,i,n){var o;return{setRoutes:function(t){this.routes=t},getRoutes:function(t){return this.routes},init:function(e){var n=[];o=i.create(),o.ignoreState=!0,o.normalizeFn=i.NORM_AS_OBJECT,t.each(e,function(t){n.push({entityRoute:o.addRoute(t["entity-mapping"]),URLRoute:o.addRoute(t.route)})}),this.setRoutesMapping(e),this.setRoutes(n)},getFullURL:function(t){var e=this.getURL(t);return this.getDomain()+e},getFullURLWithQuery:function(t,e){var i=this.getURLWithQuery(t,e);return this.getDomain()+i},getURLWithQuery:function(e,i){var n="";return!1!==i?t.some(this.routes,function(t){if(!0===t.entityRoute.match(e))return n=t.URLRoute.interpolate({query:i}),!0},this):n=this.getURL(e),n},getDomain:function(){var i=e.get();return t.has(i,"domain")?"http://"+i.domain:""},getURL:function(e){var i="",n={};return t.some(this.routes,function(t){if(n=this.getParametersFromRouteForEntity(t,e))return i=t.URLRoute.interpolate(n),!0},this),i},setRoutesMapping:function(t){this.routesMapping=t},getRoutesMapping:function(){return this.routesMapping},getMappingFromIndex:function(e){var i=this.getRoutesMapping();return!!t.has(i,e)&&i[e]["entity-mapping"]},getFullURLWithIndex:function(t){var e=this.getURLWithIndex(t);return this.getDomain()+e},getURLWithIndex:function(t){var e=this.getMappingFromIndex(t);return!!e&&this.getURL(e)},getVideoEpisodeURL:function(e,i){var n=this.getURLParameters(e),o=e;return t.isObject(n)&&t.has(n,"id")&&(o=i+"/"+n.id),this.getURL(o)},getURLParameters:function(e){var i={};return t.some(this.routes,function(t){if(i=this.getParametersFromRouteForEntity(t,e))return!0},this),i},getParametersFromRouteForEntity:function(e,i){var n=["vals_","request_","0"],o=function(e,i){if(t.contains(n,i))return!0};return!0===e.entityRoute.match(i)&&t.omit(e.entityRoute._getParamsObject(i),o)},getEntityId:function(e,i,n){if(t.has(e,"module")&&t.has(e.module,"id"))return e.module.id+"/"+i+"/"+n},getWeatherForecastURL:function(i){var n=e.get(),o="";return t.has(n,"weather_api")&&t.has(n.weather_api,"full_forecast_url")&&(o=n.weather_api.full_forecast_url+i),o}}}),define("common/entity/vanilla/image",["lodash","common/util/extends","common/entity/base"],function(t,e,i){function n(e){var n={id:0,URL:"",title:"",width:2,height:1,synopsisShort:"",synopsisMedium:"",synopsisLong:"",replaceURL:"",iconType:""};i.call(this,t.extend(n,e))}return e(n,i,{getId:function(){return this.id},getURL:function(){return this.URL},getTitle:function(){return this.title},getWidth:function(){return this.width},getHeight:function(){return this.height},getSynopsisShort:function(){return this.synopsisShort},getSynopsisMedium:function(){return this.synopsisMedium},getSynopsisLong:function(){return this.synopsisLong},getIconType:function(){return this.iconType},setIconType:function(t){this.iconType=t},getReplaceURL:function(){return this.replaceURL},setReplaceURL:function(t){this.replaceURL=t}}),n}),define("common/helper/placeholder-images",["lodash","common/config","common/entity/vanilla/image"],function(t,e,i){return{get:function(n){var o=e.get();if(t.has(o,"images")){if(t.has(o.images,n))return new i(o.images[n]);if(t.has(o.images,"default"))return new i(o.images.default)}}}}),define("common/entity/habitat/link",["lodash","common/util/extends","common/entity/habitat/base","common/entity/habitat/image/base","common/view/entity-URL-router","common/helper/placeholder-images"],function(t,e,i,n,o,s){function a(e,n){var o={URL:"",shortURL:"",title:"",id:!1,image:!1};i.call(this,t.extend(o,e),n)}return e(a,i,{init:function(){i.prototype.init.apply(this,arguments),this.initURL()},initURL:function(){var t=o.getURL(this.getId());this.set("URL",t),this.set("shortURL",t)},initFullURL:function(){!1!==this.getId()?this.set("URL",o.getFullURL(this.getId())):this.set("URL",!1)},getURL:function(){return this.URL},getShortURL:function(){return this.shortURL},getTitle:function(){return this.title},getImage:function(){return this.image},initImage:function(t,e,i){var o;o=e?new n(e):s.get(i),this.set(t,o)}}),a}),define("common/entity/habitat/partner",["lodash","common/util/extends","common/entity/habitat/link"],function(t,e,i){function n(e){var n={partnerLogo:!1,readMorePromoImage:!1,title:"",description:"",URL:""};i.call(this,t.extend(n,e))}return e(n,i,{init:function(t){i.prototype.init.call(this,t),this.map("linkUrl","URL"),this.map("name","title"),this.initImage("partnerLogo",this.getArrayNestedAsset("assetImage")),this.initImage("image",this.getArrayNestedAsset("promoImage"))},getPartnerLogo:function(){return this.partnerLogo},getReadMorePromoImage:function(){return this.readMorePromoImage},getDescription:function(){
return this.description}}),n}),define("common/entity/habitat/promo",["lodash","common/util/extends","common/entity/habitat/link","common/entity/habitat/image/base","common/view/entity-URL-router"],function(t,e,i,n,o){function s(e,n){var o={name:"",clientName:"",summary:"",type:"",iconType:"",context:!1,relatedLinks:!1};i.call(this,t.extend(o,e),n)}return e(s,i,{init:function(){i.prototype.init.apply(this,arguments)},getSummary:function(){return this.summary},setSummary:function(t){this.summary=t},getShortName:function(){return this.name},getClientName:function(){return this.clientName},getSummaryLong:function(){return this.getSummary()},getContext:function(){return this.context},getIconType:function(){return this.iconType},getType:function(){return this.type},getRelatedLinks:function(){return this.relatedLinks},setRelatedLinks:function(t){this.relatedLinks=t}}),s}),define("common/entity/habitat/campaign/promo",["lodash","common/util/extends","common/util/logger","common/entity/habitat/promo"],function(t,e,i,n){function o(e){var i={campaignCover:!1,campaignLogo:!1};n.call(this,t.extend(i,e))}return e(o,n,{init:function(t){n.prototype.init.call(this,t),this.map("description","summary"),this.map("name","title"),this.map("linkUrl","URL"),this.initImage("logoImage",this.getArrayNestedAsset("assetImage"),"campaignLogo"),this.initImage("coverImage",this.getArrayNestedAsset("coverAssetImage"),"campaignCover")},getImage:function(t){return t?this.logoImage:this.coverImage}}),o}),define("common/view/model-v2/document/meta-data/digital-data-layer/document",["lodash","common/util/extends","common/util/logger","common/util/interface","common/view/model-v2/base","common/entity/base","common/interface/entity/document/base","common/interface/entity/link","common/entity/habitat/partner","common/entity/habitat/campaign/promo"],function(t,e,i,n,o,s,a,r,l,c){function d(){o.apply(this,arguments)}return e(d,o,{entityInterface:a,setViewData:function(){var t=this.getEntity(),e={environment:this.getConfig().get("environment",""),pageInstanceID:this.getPageInstanceID(t),module:this.getConfig().get("module",{}),page:this.getPageData(t)};this.viewData=e},getPageInstanceID:function(e){var i=e.getURL();return t.isString(i)?i.replace("http://",""):""},getPageData:function(t){return{attributes:{country:"GB",language:"en-GB"},pageInfo:this.getPageInfo(t),keywords:t.getKeywords(),tags:this.getTags(t.getKeywords()),category:this.getCategories()}},getTags:function(e){var i=[];return t.each(e,function(t,e){"1"==t?i.push(e):i.push(t)}),i},getCategories:function(){var e=this.getEntity(),i=new s(e.getKeywords()),n=t.clone(i);return n.column=i.get("column"),n.pageType=i.get("pageType",""),n.primaryCategory="",n.section=i.get("section"),t.has(this.getConfig(),"module")&&t.has(this.getConfig().module,"domain")&&(n.primaryCategory=this.getConfig().module.domain),n},getPageInfo:function(t){var e={affiliate:!1,author:"",pageID:t.getId(),shortPageID:this.getShortPageID(t.getId()),pageName:t.getTitle(),description:t.getSummary(),partner:this.getPartner(t),publicationDate:t.get("publicationDate"),"business-unit":t.get("business-unit","BBC.com"),destinationURL:t.get("uri",""),bodyTextCharacterLength:this.getBodyTextCharacterLength(t.get("body"))};return this.getEntity().getAuthor()&&(e.author=this.getEntity().getAuthor().getName()),e},getShortPageID:function(t){if(!1!==t){var e,i=t.split("/");return 3==i.length?(e=i[2].split("-"),e.length>1?e.splice(1).join("-"):i[2]):t}return""},getBodyTextCharacterLength:function(t){return this.sanitiseHTMLString(t).length||!1},sanitiseHTMLString:function(e){return t.isString(e)&&e.length>0?e.replace(/<\/?[^>]+(>|$)|\s|\t|\l/gim,""):""},getPartner:function(){var t=this.getEntity();if(t.get("partner",!1)){var e=new l(t.get("partner"));return n.ensureImplements(e,r),e.getTitle()}if(t.get("campaign",!1)){var i=new c(t.get("campaign"));return n.ensureImplements(i,r),i.getTitle()}return!1}}),d}),define("common/interface/entity/document/article",["lodash","common/util/interface","common/interface/entity/document/base"],function(t,e,i){return new e("ArticleEntity",i.methods.concat(["getPublicationDate","getDisplayDate","getRelatedArticles","getGalleryImages","getIntro","getBody","getVideo","getCustomEmbed","getInfographic","getPromoModule","hasLeadAssetModule","getHorizontal","getSupersection","getTheme"]))}),define("common/view/model-v2/document/meta-data/digital-data-layer/story",["lodash","common/util/extends","common/util/logger","common/util/interface","common/view/model-v2/document/meta-data/digital-data-layer/document","common/entity/base","common/interface/entity/document/article","common/interface/entity/link","common/entity/habitat/partner","common/entity/habitat/campaign/promo"],function(t,e,i,n,o,s,a,r,l,c){function d(){o.apply(this,arguments)}return e(d,o,{entityInterface:a,getCategories:function(){var e=this.getEntity(),i={horizontal:!1,supersection:!1};return e.getHorizontal()&&(i.horizontal=e.getHorizontal().getName()),e.getSupersection()&&(i.supersection=e.getSupersection().getTitle()),t.extend(o.prototype.getCategories.call(this),i)},getPageInfo:function(e){return t.extend(o.prototype.getPageInfo.call(this,e),{publicationDate:e.get("publicationDate"),bodyTextCharacterLength:this.getBodyTextCharacterLength(e.get("body"))})},getBodyTextCharacterLength:function(t){return this.sanitiseHTMLString(t).length||!1},sanitiseHTMLString:function(e){return t.isString(e)&&e.length>0?e.replace(/<\/?[^>]+(>|$)|\s|\t|\l/gim,""):""}}),d}),define("common/helper/analytics",["lodash"],function(t){return{sanitisePageName:function(t){return"string"!=typeof t?t:t.toLowerCase().replace(/[\s]/g,"_").replace(/[^a-zA-Z0-9\-\._]/g,"").replace(/_{2,}/g,"_")},getSectionData:function(e){var i="";return t.has(e,"supersection")&&!1!==e.supersection?i="supersection."+e.supersection:t.has(e,"horizontal")&&!1!==e.horizontal?i="horizontal."+e.horizontal:t.has(e,"section")&&!1!==e.section?i="section."+e.section:t.has(e,"column")&&!1!==e.column&&(i="column."+e.column),this.sanitisePageName(i)},getSubSectionData:function(e){var i=[];return i[0]=e.primaryCategory,t.has(e,"column")&&!1!==e.column?i[1]=e.column:t.has(e,"section")&&!1!==e.section?i[1]=e.section:t.has(e,"sectn")&&!1!==e.sectn?i[1]=e.sectn:i[1]=!1,t.has(e,"subsect")&&!1!==e.subsect?i[2]=e.subsect:i[2]=!1,i},getPageType:function(t){var e={index:"idx|na",column:"idx|col",section:"idx|sec",tag:"idx|tag","calendar-index":"idx|cal",story:"sty|na",image:"sty|img",audio:"sty|aud",video:"sty|vid",slideshow:"sty|sli","slideshow-gallery":"sty|sli",event:"sty|evt",infographic:"sty|tpc"};return void 0!==e[t]?e[t]:"na|na"}}}),define("common/helper/url",[],function(){return{sanitiseUrl:function(t){return"string"!=typeof t?t:t=decodeURIComponent(t).replace(/<([a-zA-Z0-9]*)\b[^>]*>(.*?)<\/[a-zA-Z0-9]*>|<\/[a-zA-Z0-9]*>|['"<>\(\)]/gi,"")}}}),define("common/view/model-v2/document/meta-data/comscore",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/document/base","common/util/logger","common/util/request","common/view/model-v2/document/meta-data/meta-tags","common/view/model-v2/document/meta-data/digital-data-layer/document","common/view/model-v2/document/meta-data/digital-data-layer/story","common/helper/analytics","common/helper/url"],function(t,e,i,n,o,s,a,r,l,c,d){function u(){i.apply(this,arguments)}return e(u,i,{entityInterface:n,setViewData:function(){var t=this.getConfig(),e={comscoreActive:!1,noScriptURL:!1,exposedKeyValues:!1};if(this.comscoreIsEnabled()){e.comscoreActive=!0;var i=this.getKeyValues();e.exposedKeyValues=JSON.stringify(i),e.noScriptURL=this.getNoScriptURL(i)}else o.get().warn("ComscoreDataViewModel:setViewData:Comscore Analytics not enabled or unexpected config",t);this.viewData=e},comscoreIsEnabled:function(){var e=this.getConfig();return!(!t.has(e,"analytics")||!0!==e.analytics.is_enabled||!t.has(e.analytics,"comscore")||!0!==e.analytics.comscore.is_enabled)},getKeyValues:function(){var e,i=this.getEntity(),n=this.getConfig(),o=n.analytics.comscore,u=new r(i,n).setSourceData({},!1),p=new a(i,n).setSourceData({},!1),h={},m=c.sanitisePageName(p.title),g=n.get("module").domain,f=c.getSectionData(u.page.category);if(subSectionStrings=c.getSubSectionData(u.page.category),h.c2=o.customer_id,h.ns_site=o.suite,h.name=m,h.b_vs_un="bc",h.c7=d.sanitiseUrl(i.get("URL")),h.b_c7=d.sanitiseUrl(i.get("URL")),h.c8=m,h.b_app_type="web",h.b_app_name=g+"|"+n.get("version"),h.b_code_ver=n.get("version"),h.b_imp_ver=n.get("version"),h.b_imp_src="wwf",h.b_site_section=f,h.b_site_channel=g,h.b_site_subsec1=subSectionStrings[1]===subSectionStrings[0]?"":subSectionStrings[1],h.b_edition="international",h.b_column=u.page.category.column,h.b_page_type=c.getPageType(p.type),!1!==i.getSearchTerms()&&(h.ns_search_term=i.get("searchTerms")),!1!==i.getError()&&(h.ns_type="hidden",h.ns_http_status=i.getError().status),"story"===u.page.category.pageType){var b=new l(i,n).setSourceData({},!1),y=b.page.pageInfo,v=c.getSectionData(b.page.category);parsedDate=new Date(y.publicationDate).getTime(),h.b_site_section=v,h.b_article_title=y.pageName,h.b_article_id=y.pageID,h.b_article_author=y.author,h.b_article_partner=y.partner,h.b_article_theme=b.page.keywords.tags.join("|"),h.b_article_date=parsedDate,h.b_article_update=parsedDate,h.b_article_length=y.bodyTextCharacterLength}if(void 0!==(e=s.get())&&t.has(e,"request")){t.has(e,"contentRegion")&&!1!==e.contentRegion&&(h.b_edition=e.contentRegion);var w,S=e.request,x=S.headers;w=t.has(x,"referer")&&void 0!==x.referer?x.referer.substr(0,255):"",h.c9=d.sanitiseUrl(w),h.b_c9=d.sanitiseUrl(w),h.b_c7=d.sanitiseUrl(i.get("URL")),h.c7=h.b_c7}return h=this.sanitiseKeyValues(h)},getNoScriptURL:function(e){var i=this.getConfig(),n=i.analytics.comscore,o="[url]?c1=2",s=["b_code_ver"];return void 0!==e&&(o=o.replace("[url]",n.url_ssc_http),t.each(e,function(i,n){t.contains(s,n)||(o+="&amp;"+n+"="+this.encodeValue(e[n]))},this),o)},sanitiseKeyValues:function(t){var e,i={};for(e in t)if(void 0!==t[e]&&!1!==t[e]&&""!==t[e]&&null!==t[e]&&"na"!==t[e]){var n=isNaN(t[e])?t[e]:String(t[e]);i[e]=n.toLowerCase()}return i},encodeValue:function(t){return/^\{[a-zA-Z0-9\-_]+\}$/.test(t)?t:encodeURIComponent(t)}}),u}),define("optimizely-dax",[],function(){function t(t){return t.toLowerCase().replace(r,"_")}function e(t){return t.replace(r,"-")}function i(i,n){var o=n.experiment.id,s=window.optimizely.get("visitor");if(s&&(!s.custom||s.custom&&!s.custom[o])){var a={};if(a[o]=!0,window.optimizely.push({type:"user",attributes:a}),!n.isInCampaignHoldback){var r={},l=n.experiment.name,c=n.variation.name;r.mvt_experience=e(l+"."+c),r[t("mvt_"+l)]=e(c),i.log("ab-test","optimizely",r)}}}function n(t,e){i(e,window.optimizely.get("state").getCampaignStates({isActive:!0})[t])}function o(t){window.optimizely=window.optimizely||[],window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:function(e){n(e.data.campaign.id,t)}})}function s(t){window.optimizely=window.optimizely||[];var e=window.optimizely.get&&window.optimizely.get("state");if(e){var i=e.getCampaignStates({isActive:!0});for(var o in i)i.hasOwnProperty(o)&&n(o,t)}}function a(t){s(t),o(t)}var r=/[^A-Za-z0-9.]/g;return{init:a}}),define("module/analytics/comscore-optimizely-dax",["istats-1","optimizely-dax"],function(t,e){return{init:function(){t.isReady(function(){e.init(t)})}}}),define("module/analytics/vendors/comscore",["lodash","util/logger","common/view/model-v2/document/meta-data/comscore","model/exposed-config","module/analytics/comscore-optimizely-dax"],function(t,e,i,n,o){var s=!1,a=function(){try{if(void 0===window.comscore)throw new Error("comscore global is not defined");s=window.comscore}catch(t){e.get().error("ComscoreAnalyticsModule:init:Cant init comscore vendor module",t)}return this},r=function(t){try{if(void 0!==t&&!1!==n){var o=new i(t,n).setSourceData({},!1);s.trackPageView(JSON.parse(o.exposedKeyValues))}else s.trackPageView()}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},l=function(t){try{s.trackInteraction(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},c=function(t){try{s.startPlaylist(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},d=function(t){try{s.startAdvert(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},u=function(t){try{s.endAdvert(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},p=function(t){try{s.startClip(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},h=function(t){try{s.startPause(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},m=function(t){try{s.endPause(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},g=function(t){try{s.startSeek(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},f=function(t){try{s.endSeek(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},b=function(t){try{s.endClip(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},y=function(t){try{s.endPlaylist(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},v=function(t){o.init()};return t.extend(v.prototype,{init:a,page:r,trackInteraction:l,startPlaylist:c,startAdvert:d,endAdvert:u,startClip:p,startPause:h,endPause:m,startSeek:g,endSeek:f,endClip:b,endPlaylist:y,isPlaylistStarted:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){return isPlaylistStarted})}),v}),define("module/analytics/vendors/vendor-manager",["model/exposed-config","module/analytics/vendors/comscore","util/logger"],function(t,e,i){var n={},o={},s=function(t,e){var n,s=Array.prototype.slice.call(e);for(n in o)void 0!==o[n][t]?o[n][t].apply(this,s):i.error("AnalyticsManager:executeMethod:Vendor: "+n+" is missing Method: "+t)},a=function(){var o=t;void 0!==o.analytics&&void 0!==o.analytics.comscore?!0===o.analytics.is_enabled?!0===o.analytics.comscore.is_enabled&&n.registerVendor("comScore",new e(o.analytics.comscore)):i.warn("Analytics is not enabled"):i.error("Unexpected analytics config")};return n.registerVendor=function(t,e){o[t]=e},n.init=function(){return i.debug("Init analytics"),a(),s("init",arguments),this},n.page=function(){return i.debug("Page Track"),s("page",arguments),this},n.trackInteraction=function(){return i.debug("Track Interaction"),s("trackInteraction",arguments),this},n.startPlaylist=function(){return i.debug("Start Playlist"),s("startPlaylist",arguments),this},n.endPlaylist=function(){return i.debug("End Playlist"),s("endPlaylist",arguments),this},n.adRequest=function(){return i.debug("adRequest"),s("adRequest",arguments),this},n.adManagerLoaded=function(){return i.debug("Ad Manager Loaded"),s("adManagerLoaded",arguments),this},n.startAdvert=function(){return i.debug("Start Advert"),s("startAdvert",arguments),this},n.endAdvert=function(){return i.debug("End Advert"),s("endAdvert",arguments),this},n.startClip=function(){return i.debug("Start Clip"),s("startClip",arguments),this},n.endClip=function(){return i.debug("End Clip"),s("endClip",arguments),this},n.startPause=function(){return i.debug("Start Pause"),s("startPause",arguments),this},n.endPause=function(){return i.debug("End Pause"),s("endPause",arguments),this},n.startSeek=function(){return i.debug("Start Seek"),s("startSeek",arguments),this},n.endSeek=function(){return i.debug("End Seek"),s("endSeek",arguments),this},isPlaylistStarted=function(){return s("isPlaylistStarted",arguments)},n.r=function(){return o={},this},n}),define("module/youtubeHelper",["jquery","lib/ecmaScript5","signals"],function(t,e,i){return function(){var t,e,n=new i.Signal;this.setPlayerId=function(t){e=t,this.loadAPI(),window.onYouTubePlayerAPIReady=this.setupPlayer.bind(this)},this.stateChanged=function(t){1==t.data&&n.dispatch()},this.setupPlayer=function(){var i=this.getFrameID(e);i&&(t=new YT.Player(i,{events:{onStateChange:this.stateChanged.bind(this)}}))},this.getFrameID=function(t){var e=document.getElementById(t);if(e){if(/^iframe$/i.test(e.tagName))return t;var i=e.getElementsByTagName("iframe");if(!i.length)return null;for(var n=0;n<i.length&&!/^https?:\/\/(?:www\.)?youtube(?:-nocookie)?\.com(\/|$)/i.test(i[n].src);n++);if(e=i[n],e.id)return e.id;do{t+="-frame"}while(document.getElementById(t));return e.id=t,t}return null},this.loadAPI=function(){!function(){var t=document.createElement("script");t.src=("https:"==location.protocol?"https":"http")+"://www.youtube.com/player_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()},this.subscribe=function(t,e){switch(t){case"play":n.add(e)}}}}),define("util/content-loader-event-handler",["lodash"],function(t){var e={};return{ACTION_LAZY_LOADED_STORY:"lazyload:story",ACTION_LAZY_LOADED_CONTENTS:"lazyload:contents",ACTION_STORY_BLOCK_CHANGED:"storyblock:changed",TYPE_RESPONSIVE_IMAGE:"responsiveImage",TYPE_LEAD_GALLERY:"leadGallery",TYPE_INLINE_GALLERY:"inlineGallery",TYPE_FULL_STORY:"fullStory",on:function(t,i){e[t]||(e[t]=[]),e[t].push(i)},trigger:function(i){var n=arguments;t.has(e,i)&&t.each(e[i],function(t){t.apply(null,n)})}}}),define("module/analytics/main",["lodash","lib/ecmaScript5","extension/String","lib/domReady","jquery","lib/jquery.inview","lib/jquery.getSelector","lib/jquery.dataDom","util/getQuadrentOfCoordinateInContainer","module/analytics/vendors/vendor-manager","module/youtubeHelper","model/exposed-config","util/content-loader-event-handler"],function(t,e,i,n,o,s,a,r,l,c,d,u,p){return new function(){var e,i,s,a=this,r={news:"bbc.co.uk/news/",culture:"/culture/",travel:"/travel/",capital:"/capital/",autos:"/autos/",future:"/future/",earth:"/earth/",britain:"/britain/"},h=["click","inview","mouseover","submit","track","youtube"],m=!1;this.init=function(){if(!1===u||!t.has(u,"analytics"))throw new Error("AnalyticsManager:init:invalid config");s=u.analytics,o("#content-wrapper").length?this.setContentSelector("#content-wrapper"):this.setContentSelector("#wwfeatures-container"),this.setContentContainer(),this.setupVendorManager(),this.addEventListeners()},this.setupVendorManager=function(){var t=c;t.init(),m=t},this.addEventListeners=function(){var t,e;for(var i in this.getSupportedEvents())t=this.getSupportedEvents()[i],e="[data-cs-event='"+t+"']",o(document).on(this.getNamespacedEvent(t),e,this.trackInteraction.bind(this));this.setupInfiniteScrollPageTracking(),this.simulateYoutubeEvents()},this.setupInfiniteScrollPageTracking=function(){p.on(p.ACTION_STORY_BLOCK_CHANGED,function(t,e,i,n,o){n>0&&void 0!==e&&!0===e.firstAppearance&&m.page(e.storyEntity)})},this.simulateYoutubeEvents=function(){o(document).find("[data-cs-event='youtube']").each(function(){a.simulateYoutubeEventForElement(o(this))})},this.simulateYoutubeEventForElement=function(t){var e=new d;e.subscribe("play",function(){t.trigger(this.getNamespacedEvent("youtube"))}),e.setPlayerId(t.attr("id"))},this.getNamespacedEvent=function(t){return t+"."+this.getEventNamespace()},this.getTrackingDataFromTarget=function(t){var e={id:t.data("csId"),pageName:t.data("csPageName"),channelName:t.data("csChannelName")||this.getChannel(t),channelLocation:t.data("csChannelLocation"),elementName:t.data("csElementName"),elementType:t.data("csElementType"),additionalData:t.data("csAdditionalData"),section:t.data("csSection"),pageType:t.data("csPageType"),event:t.data("csEvent"),elementPosition:t.data("csElementPosition"),totalElementCount:t.data("csTotalElementCount"),interactionType:t.data("csInteractionType")||this.getDefaultInteractionType(),trackingMethod:this.getTrackingMethod(t.data("csTrackingMethod"))},i=t.closest("ul[data-cs-module],div[data-cs-module],section[data-cs-module],form[data-cs-module]");return i&&i.length>0&&(e.moduleName=i.data("csModule"),this.setContentContainer(),e.modulePlacement=this.getModulePagePlacement(i),void 0===e.elementPosition&&(e.elementPosition=this.getTargetPosition(t,i)),void 0===e.totalElementCount&&(e.totalElementCount=this.getModuleElementCount(i))),"link"==e.interactionType&&(t.is("a")||t.find("a:first-child").length>0&&(t=t.find("a:first-child")),e.domElement=t.get(0)),e},this.trackInteraction=function(t){var e=o(t.currentTarget),i=this.getTrackingDataFromTarget(e);i.event=t,m.trackInteraction(i)},this.trackAVEvent=function(t,e){m[t](e)},this.addTrackingForSelector=function(t,e){var i=o(t),n=e.event||"click";i.length>0&&(this.addTrackingAttribute(i,"id",e.id,!0),this.addTrackingAttribute(i,"page-name",e.pageName),this.addTrackingAttribute(i,"event",n,!0),this.addTrackingAttribute(i,"channel-name",e.channelName),this.addTrackingAttribute(i,"channel-location",e.channelLocation),this.addTrackingAttribute(i,"element-name",e.elementName),this.addTrackingAttribute(i,"element-type",e.elementType),this.addTrackingAttribute(i,"element-position",e.elementPosition),this.addTrackingAttribute(i,"total-element-count",e.totalElementCount),this.addTrackingAttribute(i,"additional-data",e.additionalData),this.addTrackingAttribute(i,"section",e.section),this.addTrackingAttribute(i,"page-type",e.pageType),this.addTrackingAttribute(i,"interaction-type",e.interactionType),this.addTrackingAttribute(i,"tracking-method",e.trackingMethod))},this.addTrackingForModule=function(t,e){var i=o(t);this.addTrackingAttribute(i,"module",e.module,!0)},this.addTrackingAttribute=function(t,e,i,n){void 0!==i&&(e="cs-"+e,n?t.dataDom(e,i):t.data(e,i))},this.getChannel=function(t,e){var i;if(void 0===e){i=t.attr("href");for(var n in this.getChannels())if(-1!=i.indexOf(r[n]))return n}return e},this.setContentContainer=function(){var t=e.offset();i={left:t.left,right:t.left+e.width(),top:t.top,bottom:t.top+e.height()}},this.getModulePagePlacement=function(t){var e=this.getContentContainer(),i=t.offset();return coordinate={x:i.left+t.width()/2,y:i.top+t.height()/2},l(coordinate,e)},this.getTargetPosition=function(t,e){var i=e.find("[data-cs-id]"),n=0,s=0,a="";return i.each(function(e,i){a!==o(i).data("csId")&&(s++,a=o(i).data("csId")),a===t.data("csId")&&(n=s)}),n},this.getModuleElementCount=function(t){return t.find("[data-cs-id]").length},this.getTrackingMethod=function(t){switch(t){case"cookie":return"ck";case"page-load":return"pl";case"ajax":return"aj";default:return"cl"}},this.getEventNamespace=function(){return"analytics"},this.setContentSelector=function(t){e=o(t)},this.getContentSelector=function(){return e},this.getSupportedEvents=function(){return h},this.getContentContainer=function(){return i},this.getChannels=function(){return r},this.getDefaultInteractionType=function(){return"link"},this.getDefaultEventType=function(){return"click"},this.formatMultiOptionVariable=function(t){return t.length>0?t.replace(",","/"):"na"},this.formatArrayVariable=function(t){return t.length>0?t.join("/"):"na"},n(this.init.bind(this))}}),define("module/heroUnit",["lib/ecmaScript5","jquery","module/loader","model/mediaQuery","signals","orb/api","templates","module/analytics/main"],function(t,e,i,n,o,s,a,r){function l(t,i){i=i||"",this.height=0,this.storyBlock=i,this.playButtonSelector=this.getStoryBlock()+"#play-video",this.overlaySelector=this.getStoryBlock()+".hero-unit-overlay",this.videoLinkSelector=this.getStoryBlock()+"> a",this.imageWrapperSelector=this.getStoryBlock()+".hero-unit-image-wrapper",this.headingLinkSelector=this.getStoryBlock()+".hero-unit-lining .primary-header > a",this.headingSelector=this.headingLinkSelector+" h1.primary-heading",this.navBrandingSelector=this.getStoryBlock()+"#nav-branding-wrapper",this.overlayThreeElement=e(this.getStoryBlock()+".hero-unit-image-overlay-3"),this.selector=this.getStoryBlock()+".hero-unit",this.el=e(this.selector),this.videoIconSelector=this.getStoryBlock()+".hero-video-icon",this.playVideoSignal=new o.Signal,this.storyModel=t,this.addEventListeners(),this.reset()}return l.prototype.getUrl=function(){var t=this.el.find(".hero-unit-image-wrapper > a");return t.length>0&&t.attr("href")},l.prototype.addEventListeners=function(){this.hasVideo()&&e(this.playButtonSelector).click(this.playVideo.bind(this)),this.storyModel.subscribe("update",this.checkVideoHeader.bind(this)),this.storyModel.subscribe("update",this.checkCalendarEventHeader.bind(this)),s.layout(this.resize.bind(this)),"function"==typeof window.requestAnimationFrame&&e(window).on("scroll",window.requestAnimationFrame.bind(window,this.scroll.bind(this)))},l.prototype.resize=function(){this.reset()},l.prototype.isScrollable=function(){return!(this.el.hasClass("hero-unit-minor")||this.hasVideo()||n.isMobileDevice())},l.prototype.hasVideo=function(t){return this.el.hasClass("hero-unit-video")},l.prototype.scroll=function(t){var e,i,o;o=this.getScroll(),4==n.getGroup()&&this.isScrollable()&&!n.isFixedWidthLayout()&&(this.overlayThreeElement.addClass("notransition"),i=o/this.getHeight(),e=this.getHeight()-o/2,o<this.getHeight()&&(this.el.height(e),this.overlayThreeElement.css("opacity",i)))},l.prototype.getOffset=function(){var t=""===this.storyBlock?e("#nav-branding").offset():this.el.offset();return void 0!==t.top?t.top:0},l.prototype.getScroll=function(){var t=e(window).scrollTop(),i=this.getOffset();return t<i?0:t-i},l.prototype.reset=function(){this.isScrollable()&&(this.overlayThreeElement.removeClass("notransition"),this.el.height("auto"),this.overlayThreeElement.css("opacity",0),this.setHeight())},l.prototype.getHeight=function(){return this.height},l.prototype.setHeight=function(){this.height=e(this.imageWrapperSelector).height()},l.prototype.checkVideoHeader=function(t){if(void 0!==t.getData()["video-header"]&&4==n.getGroup()&&!n.isFixedWidthLayout()&&!n.isMobileDevice()){this.addVideoHeader(t.getData()["video-header"]);var e=this.el.find(this.videoLinkSelector),i=this.el.find(this.headingSelector);r.addTrackingForSelector(e,{id:"hero-image",elementType:"hero",elementName:i.text(),elementPosition:1,totalLinkCount:1})}},l.prototype.removeImage=function(){e(this.imageWrapperSelector).find("img").remove()},l.prototype.getStoryBlock=function(){return this.storyBlock+" "},l.prototype.addVideoHeader=function(t){var e=t.url=this.getUrl();e&&(t.url=e),t.preload=!0,t.autoplay=!0,t.id="hero-unit-video";var i=a["html5-video"](t);this.el.append(i)},l.prototype.playVideo=function(t){void 0!==t&&t.preventDefault(),this.playVideoSignal.dispatch(this)},l.prototype.subscribe=function(t,e){switch(t){case"playVideo":this.playVideoSignal.add(e)}},l.prototype.showVideoLoader=function(){var t=e(this.videoIconSelector+" .icon-wrapper");t.append('<div class="loader"></div>');var n=e(this.videoIconSelector+" .loader");e(this.videoIconSelector+" .gelicon");n.css({position:"inital",height:t.width(),top:0}),this.loader=new i(n.get(0),"white")},l.prototype.activateVideoUI=function(){e(this.playButtonSelector).addClass("active"),e(this.videoIconSelector).addClass("active"),this.loader.stop()},l.prototype.softenOverlay=function(){e(this.overlaySelector).addClass("soften")},l.prototype.softenOverlay=function(){e(this.overlaySelector).addClass("soften")},l.prototype.getVerticalSpace=function(){return this.el.height()-e(this.navBrandingSelector).height()},l.prototype.checkCalendarEventHeader=function(t){void 0===t.getData()["calendar-event"]||n.isFixedWidthLayout()||n.isMobileDevice()||this.addCalendarEventHeader(t.getData()["calendar-event"])},l.prototype.addCalendarEventHeader=function(t){var e=new Date(t["start-date"]),i=new Date(t["end-date"]),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.startDateDay=("0"+e.getUTCDate()).slice(-2),t.startDateMonth=n[e.getUTCMonth()],t.endDateDay=("0"+i.getUTCDate()).slice(-2),t.endDateMonth=n[i.getUTCMonth()],e.getTime()===i.getTime()?t.dateRange=t.startDateDay:t.dateRange=t.startDateDay+" - "+t.endDateDay;var o=a["calendar-event"](t),s=this.el.find(".hero-unit-header-wrapper .secondary-header-wrapper");s.append(o),t.startDateMonth===t.endDateMonth&&s.find(".calendar-event").addClass("single-month")},l}),define("module/topbar-menu",["jquery","lib/ecmaScript5"],function(t,e){var i=function(t){return this.selector=t,this};return i.prototype.init=function(){var t=this.getSelector();this.setSelector(t)&&(this.setOpened(!1),this.setupSelectors(),this.setupUIEvents())},i.prototype.setupSelectors=function(t){this.dropDownSelector="[data-topbar-menu-drop-down]",this.toggleButtonSelector="[data-topbar-menu-toggle]",this.$dropDown=this.getSelector().find(this.dropDownSelector),this.$toggleButton=this.getSelector().find(this.toggleButtonSelector),this.openedClass="is-active"},i.prototype.open=function(){this.setOpened(!0),this.getSelector().addClass(this.openedClass),this.$dropDown.slideDown()},i.prototype.close=function(){var t=this;this.setOpened(!1),this.$dropDown.slideUp("fast",function(){t.getSelector().removeClass(t.openedClass)})},i.prototype.isOpen=function(){return this.opened},i.prototype.setOpened=function(t){_.isBoolean(t)&&(this.opened=t)},i.prototype.toggle=function(){return this.isOpen()?this.close():this.open()},i.prototype.handleToggleButtonClick=function(t){t.preventDefault(),this.toggle()},i.prototype.bindToggleButtonEvents=function(){this.$toggleButton.on("click",this.handleToggleButtonClick)},i.prototype.setupUIEvents=function(){this.handleToggleButtonClick=this.handleToggleButtonClick.bind(this),this.bindToggleButtonEvents()},i.prototype.setSelector=function(e){return this.selector=t(e),this.selector.length>0},i.prototype.getSelector=function(){return this.selector},i}),define("layouts/base",["lodash","lib/ecmaScript5","jquery","lib/domReady","orb/api","model/pageData","model/digitalData","module/heroUnit","module/topbar-menu"],function(t,e,i,n,o,s,a,r,l){var c=function(t){this.heroUnitSelector="[data-hero-unit]",this.topBarMenuMobileSelector="[data-topbar-menu-mobile]",this.setSelector(t),this.model=new s,this.model.init({url:a.page.pageInfo.destinationURL}),this.initUIComponents(),this.model.load()};return t.extend(c.prototype,{initUIComponents:function(){this.initHeroUnit(),this.initTopBar()},initHeroUnit:function(){i(this.heroUnitSelector).length>0&&(this.heroUnit=new r(this.model))},initTopBar:function(){i(this.topBarMenuMobileSelector).length>0&&(this.topbar=new l(this.topBarMenuMobileSelector),this.topbar.init())},setSelector:function(t){this.selector=i(t)},getSelector:function(){return this.selector}}),c}),define("module/navigation/primary",["jquery","!lib/domReady"],function(t,e){return function(i){var n;this.init=function(){this.setSelector(i)},this.toggleOverlay=function(){this.getSelector().toggleClass("overlay-enabled")},this.disableOverlay=function(){this.getSelector().removeClass("overlay-enabled")},this.setSelector=function(e){n=t(e)},this.getSelector=function(){return n},e(this.init.bind(this))}}),define("module/navigation/toggle",["jquery","signals","!lib/domReady","lib/ecmaScript5"],function(t,e,i){return function(n){var o,s=new e.Signal;this.init=function(){this.setSelector(n),this.addEventListeners()},this.addEventListeners=function(){this.getSelector().click(this.toggle.bind(this))},this.toggle=function(t){return t.preventDefault(),this.toggleActivate(),s.dispatch(),!1},this.toggleActivate=function(t){this.getSelector().toggleClass("active")},this.deactivate=function(){this.getSelector().hasClass("active")&&this.toggleActivate()},this.subscribe=function(t,e){switch(t){case"toggle":s.add(e)}},this.setSelector=function(e){o=t(e)},this.getSelector=function(){return o},i(this.init.bind(this))}}),define("actual",["jquery"],function(t){!function(t){t.fn.addBack=t.fn.addBack||t.fn.andSelf,t.fn.extend({actual:function(e,i){if(!this[e])throw'$.actual => The jQuery method "'+e+'" you called does not exist';var n,o,s={absolute:!1,clone:!1,includeMargin:!1},a=t.extend(s,i),r=this.eq(0);if(!0===a.clone)n=function(){r=r.clone().attr("style","position: absolute !important; top: -1000 !important; ").appendTo("body")},o=function(){r.remove()};else{
var l,c=[],d="";n=function(){l=r.parents().addBack().filter(":hidden"),d+="visibility: hidden !important; display: block !important; ",!0===a.absolute&&(d+="position: absolute !important; "),l.each(function(){var e=t(this),i=e.attr("style");c.push(i),e.attr("style",i?i+";"+d:d)})},o=function(){l.each(function(e){var i=t(this),n=c[e];void 0===n?i.removeAttr("style"):i.attr("style",n)})}}n();var u=/(outer)/.test(e)?r[e](a.includeMargin):r[e]();return o(),u}})}(t)}),define("module/responsiveImages/responsiveImage",["lodash","lib/ecmaScript5","jquery","model/mediaQuery","actual","util/content-loader-event-handler"],function(t,e,i,n,o,s){var a=function(t,e,n){this.loadedImages={},this.el=t,this.arrFormats=e,this.imageReplacedCallback=n,this.isInitialised=!1,this.setLazyLoad(!!i(this.el).attr("data-lazy-load")),this.srcAttr=this.isLazyLoad()?"data-src":"src",this.setInitialFormat()};return a.prototype.setInitialFormat=function(){var t,e,n=i(this.el).attr(this.srcAttr);for(t in this.arrFormats)if(e=this.arrFormats[t],e.src==n){this.objCurrentFormat=e,this.isInitialised=!0;break}},a.prototype.executeCallbacks=function(t){void 0!==this.imageReplacedCallback&&this.imageReplacedCallback(this),"function"==typeof t&&t.apply(this),s.trigger(s.ACTION_LAZY_LOADED_CONTENTS,s.TYPE_RESPONSIVE_IMAGE,this)},a.prototype.loadLazyImage=function(t){var e=i(this.el).attr("data-src");this.isLazyLoad()&&(void 0===e?this.executeCallbacks(t):this.isLazyLoaded(i(this.el))?this.executeCallbacks(t):this.loadImage(e,t))},a.prototype.isLazyLoaded=function(){var t=i(this.el).attr("data-src"),e=this.getSrc();return t&&e&&t===e},a.prototype.getSrc=function(){return this.isBackgroundImage()?this.getBackgroundImageSrc():this.getInlineImageSrc()},a.prototype.respond=function(){var t,e=i(this.el).parent().actual("width");this.isInitialised&&(i(this.el).data("fixedWidthFormat")&&n.isFixedWidthLayout()?this.loadFormat(this.getFormatByName(i(this.el).data("fixedWidthFormat"))):(t=this.getFormatForWidth(e),this.isLargerFormat(t)||this.hasRatioChanged(t)?this.loadFormat(t):void 0!==this.imageReplacedCallback&&this.imageReplacedCallback(this.el)))},a.prototype.getFormatForWidth=function(t){var e;for(var i in this.arrFormats)if(e=this.arrFormats[i],void 0!==e.dimensions&&e.dimensions.width>t)break;return e},a.prototype.hasRatioChanged=function(t){return this.getRatioOfFormat(t)!=this.getRatioOfFormat(this.objCurrentFormat)},a.prototype.getFormatByName=function(t){for(var e in this.arrFormats)if(void 0!==this.arrFormats[e].name&&this.arrFormats[e].name==t)return this.arrFormats[e];return!1},a.prototype.loadFormat=function(t){t.name!==this.objCurrentFormat.name&&(this.objCurrentFormat=t,this.loadedImages[t.name]=!0,this.isLazyLoad()?this.setImageDataSrc(t.src):"string"!=typeof t.preload||this.isFormatLoaded(t.name)?this.loadImage(t.src):this.loadImage(t.preload,this.loadImage.bind(this,t.src)),this.setFormatLoaded(t))},a.prototype.setImageDataSrc=function(t){void 0!==t&&i(this.el).attr(this.srcAttr,t)},a.prototype.getBackgroundImageSrc=function(){var t=i(this.el).css("background-image");return!!t&&t.replace(/.*\s?url\([\'\"]?/,"").replace(/[\'\"]?\).*/,"")},a.prototype.getInlineImageSrc=function(){return this.el.src},a.prototype.isLazyLoad=function(){return!!this.lazyLoad},a.prototype.setLazyLoad=function(t){if(!0===t)return void(this.lazyLoad=!0);this.lazyLoad=!1},a.prototype.setFormatLoaded=function(t){this.loadedImages[t.name]=!0},a.prototype.isFormatLoaded=function(t){return void 0!==this.loadedImages[t.name]},a.prototype.loadImage=function(t,e){return this.isBackgroundImage()?this.loadBackgroundImage(t,e):this.loadInlineImage(t,e)},a.prototype.loadInlineImage=function(t,e){var i=this;this.el.onload=function(){i.executeCallbacks(e)},this.el.src=t},a.prototype.loadBackgroundImage=function(t,e){var n=this,o=new Image;o.onload=function(){n.setBackgroundImageSrc(i(n.el),t),n.executeCallbacks(e)},o.onerror=function(){n.executeCallbacks(e)},o.src=t},a.prototype.isBackgroundImage=function(){return i(this.el).is("[data-background]")},a.prototype.setBackgroundImageSrc=function(t,e){t.css({"background-image":"url("+e+")"})},a.prototype.isLargerFormat=function(t){return t.dimensions.width>this.objCurrentFormat.dimensions.width},a.prototype.getRatioOfFormat=function(t){return t.dimensions.height/t.dimensions.width},a}),define("module/responsiveImages/main",["lib/ecmaScript5","jquery","module/responsiveImages/responsiveImage"],function(t,e,i){var n=function(){return this._arrImages=[],this};return n.prototype.add=function(t,e,i){t.each(this.addResponsiveImage.bind(this,e,i))},n.prototype.addResponsiveImage=function(t,n,o,s){if(!this.isAdded(s)){var a,r=new t(s,n);a=new i(s,r.getFormatsForImage()),this.addToImagesArray(a),e(s).data("responsiveImagesIsAdded",!0)}},n.prototype.addToImagesArray=function(t){this._arrImages.push(t)},n.prototype.isAdded=function(t){return!!e(t).data("responsiveImagesIsAdded")},n.prototype.getImages=function(){return this._arrImages},n.prototype.respond=function(){this.getImages().forEach(function(t){t.respond()},this)},n.prototype.loadLazyImages=function(){this.getImages().forEach(function(t){t.loadLazyImage()},this)},n}),define("module/responsiveImages/formats/wwfeatures16x9",["jquery"],function(t){var e=function(t,e){this.image=t,this.requiredRatio=e,this.imageNamespace="wwfeatures",this.arrFormats=[{name:"wwfeatures-130-73",dimensions:{width:130,height:73}},{name:"wwfeatures-160-90",dimensions:{width:160,height:90}},{name:"wwfeatures-224-126",dimensions:{width:224,height:126}},{name:"wwfeatures-384-216",dimensions:{width:384,height:216}},{name:"wwfeatures-464-261",dimensions:{width:464,height:261}},{name:"wwfeatures-624-351",dimensions:{width:624,height:351}},{name:"wwfeatures-976-549",dimensions:{width:976,height:549}},{name:"wwfeatures-1280-720",dimensions:{width:1280,height:720}},{name:"wwfeatures-1600-900",dimensions:{width:1600,height:900}}]};return e.prototype.isImageCompliant=function(t){return t[3]==this.imageNamespace},e.prototype.isLazyLoad=function(e){return!!t(e).data("lazyLoad")},e.prototype.getFormatsForImage=function(){var e,i,n=this.isLazyLoad(this.image)?"data-src":"src",o=t(this.image).attr(n).replace(/\/\s*$/,"").split("/"),s=[];if(!this.isImageCompliant(o))return[];o.shift();for(e in this.arrFormats)if(void 0!==this.arrFormats[e].dimensions){var a=4;"wm"===o[3]&&a++,o[a]=this.arrFormats[e].dimensions.width+"_"+this.arrFormats[e].dimensions.height,i=this.arrFormats[e].dimensions.height/this.arrFormats[e].dimensions.width,this.arrFormats[e].src="http:/"+o.join("/"),void 0!==this.arrFormats[e].preload&&(o[a]=this.arrFormats[e].preload.width+"_"+this.arrFormats[e].preload.height,this.arrFormats[e].preload="http:/"+o.join("/")),void 0!==this.requiredRatio&&this.requiredRatio!=i.toFixed(2)||s.push(this.arrFormats[e])}return s},e}),define("module/responsiveImages/formats/wwfeaturesHero",["jquery","module/responsiveImages/formats/wwfeatures16x9","common/util/inherits"],function(t,e,i){function n(t){this.image=t,this.imageNamespace="wwfeatures",this.arrFormats=[{name:"wwfeatures-130-73",dimensions:{width:130,height:73}},{name:"wwfeatures-300-150",dimensions:{width:300,height:150}},{name:"wwfeatures-300-120",dimensions:{width:300,height:120}},{name:"wwfeatures-304-171",dimensions:{width:304,height:171}},{name:"wwfeatures-384-216",dimensions:{width:384,height:216}},{name:"wwfeatures-464-261",dimensions:{width:464,height:261}},{name:"wwfeatures-624-351",dimensions:{width:624,height:351}},{name:"wwfeatures-976-549",dimensions:{width:976,height:549}},{name:"wwfeatures-1280-640",dimensions:{width:1280,height:640}},{name:"wwfeatures-1600-640",dimensions:{width:1600,height:640}}]}return i(n,e),n}),define("module/responsiveImages/formats/wwfeatures83x120",["jquery","module/responsiveImages/formats/wwfeatures16x9","common/util/inherits"],function(t,e,i){function n(t){this.image=t,this.imageNamespace="wwfeatures",this.arrFormats=[{name:"wwfeatures-90-130",dimensions:{width:90,height:130}},{name:"wwfeatures-111-160",dimensions:{width:111,height:160}},{name:"wwfeatures-155-224",dimensions:{width:155,height:224}},{name:"wwfeatures-266-384",dimensions:{width:266,height:384}},{name:"wwfeatures-321-464",dimensions:{width:321,height:464}},{name:"wwfeatures-432-624",dimensions:{width:432,height:624}},{name:"wwfeatures-498-720",dimensions:{width:498,height:720}},{name:"wwfeatures-747-1080",dimensions:{width:747,height:1080}},{name:"wwfeatures-885-1280",dimensions:{width:885,height:1280}}]}return i(n,e),n}),define("module/responsiveImages/formats/wwfeaturesBanner",["jquery","module/responsiveImages/formats/wwfeatures16x9","common/util/inherits"],function(t,e,i){function n(t){this.image=t,this.imageNamespace="wwfeatures",this.arrFormats=[{name:"wwfeatures-288-72",dimensions:{width:288,height:72}},{name:"wwfeatures-600-150",dimensions:{width:600,height:150}},{name:"wwfeatures-960-240",dimensions:{width:960,height:240}}]}return i(n,e),n}),define("module/imageReplacer",["lodash","lib/ecmaScript5","jquery","templates"],function(t,e,i,n){var o=function(){};return o.prototype.renderImage=function(e,o,s){var a={id:s.id,url:s.href,alt:s.title,class:e,"additional-wrapper-class":i(s).data("additionalWrapperClass"),"is-watermarked":i(s).data("isWatermarked"),"replace-url":i(s).data("replaceUrl"),"anchor-title":i(s).data("anchorTitle"),caption:i(s).data("caption"),"caption-title":i(s).data("captionTitle"),"additional-content":i(s).find(".replace-image-additional-content").html()},r=i(s).data("csId");if(r&&""!==r){var l={"element-id":"csId",event:"csEvent","channel-name":"csChannelName","channel-location":"csChannelLocation","element-name":"csElementName","element-type":"csElementType","element-position":"csElementPosition","total-element-count":"csTotalElementCount","additional-data":"csAdditionalData",section:"csSection","page-type":"csPageType","interaction-type":"csInteractionType","tracking-method":"csTrackingMethod"},c={};t.each(l,function(t,e){var n=i(s).data(t);n&&""!==n&&(c[e]=n)},this),a["analytics-element-metadata"]=c}i(s).data("href")&&""!==i(s).data("href")&&(a.url=i(s).data("href")),i(s).replaceWith(n["responsive-image"](a))},o.prototype.replace=function(t,e){i(t).each(this.renderImage.bind(this,e))},o}),define("config",[],function(){return new function(){var t;this.setup=function(e){t=e},this.getConfig=function(){return t}}}),define("module/search",["jquery","config","common/config","util/logger"],function(t,e,i,n){return function(e){var n=t(e);n.submit(function(t){t.preventDefault(),window.location="/"+i.get().module.domain+"/search/"+n.find("input[name='q']").val()})}}),define("module/responsiveFrame",["jquery","lib/ecmaScript5","orb/api"],function(t,e,i){var n=function(t){this.el=t};return n.prototype.init=function(){t(window).scroll(this.sendScroll.bind(this)),window.addEventListener?window.addEventListener("message",this.messageReceived.bind(this)):window.attachEvent&&window.attachEvent("onmessage",this.messageReceived.bind(this)),i.layout(this.sendScroll.bind(this)),this.sendMessage({event:"init"}),this.sendMessage({event:"resize"})},n.prototype.messageReceived=function(t){if(void 0!==t.data){var e=this.parseMessage(t.data);!1!==e&&void 0!==e.event&&"resize"==e.event&&void 0!==e.height&&this.el.attr("height",e.height)}},n.prototype.parseMessage=function(t){try{return JSON.parse(t)}catch(e){return console.log("Failed to parse message: "+t+", error: "+e.message),!1}},n.prototype.sendScroll=function(e){var i=t(window).scrollTop()-this.getOffset();if(i>0&&i<this.el.height()){var n='{"event":"scroll","top":'+i+"}";this.sendMessage(n)}},n.prototype.sendMessage=function(t){this.el.get(0).contentWindow.postMessage(t,"*")},n.prototype.getOffset=function(){var t=this.el.offset();return void 0!==t.top?t.top:0},n}),define("module/responsiveFrameManager",["lib/ecmaScript5","jquery","module/responsiveFrame"],function(t,e,i){var n=function(){};return n.prototype.init=function(){e("iframe.responsive-frame").each(this.add.bind(this))},n.prototype.add=function(t,n){new i(e(n)).init()},new n}),define("interaction-controller/base",["lodash","jquery","templates","common/util/accessor","module/imageReplacer","module/responsiveImages/main","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures83x120","module/responsiveImages/formats/wwfeaturesHero"],function(t,e,i,n,o,s,a,r,l){var c=function(t){this.setConfig(t)};return t.extend(c.prototype,{init:function(t,e){this.component=e,this.el=t},setConfig:function(t){this.config=new n(t)},getConfig:function(){return this.config},refresh:function(t){var e=new o,i=new s;e.replace("a[data-replace-image='true'][data-is-portrait='false']","responsive landscape"),e.replace("a[data-replace-image='true'][data-is-portrait='true']","responsive portrait"),i.add(this.el.find("img.responsive.landscape"),a),i.add(this.el.find("img.responsive.portrait"),r),i.respond()}}),c}),define("module/component-loader",["lib/ecmaScript5","lodash","jquery","templates","module/loader","interaction-controller/base","util/logger"],function(t,e,i,n,o,s,a){var r=function(t,i,n){try{this.interactionController=new s,this.mode="replace",this.isContentRendered=!1,this.loaderHeight=308,this.isInitalRenderDisabled=!1,this.component=i,this.el=t,e.isObject(n)&&e.extend(this,n),this.isContentRendered&&(this.isInitalRenderDisabled=!0),this.component.subscribe("update",this.render.bind(this)),this.interactionController.init(t,i)}catch(t){console.log(t)}};return e.extend(r.prototype,{render:function(t){!1===this.isInitalRenderDisabled?(this.prepareRender(),this.el.css({height:"auto"}),this.el.append(t),this.interactionController.refresh()):this.isInitalRenderDisabled=!1},load:function(){try{return this.showLoader(),this.component.load().then(this.componentLoaded.bind(this)).fail(this.loadingError.bind(this))}catch(t){console.error(t)}},componentLoaded:function(){},removeSpinner:function(){e.isObject(this.spinner)&&e.isFunction(this.spinner.stop)&&this.spinner.stop()},showLoader:function(){!1===this.isInitalRenderDisabled&&(this.el.css({position:"relative",height:this.loaderHeight}),this.spinner=new o(this.el.get(0),"#333"))},loadingError:function(t){this.prepareRender(),this.empty(),this.el.css({height:"auto"}),a.error("Error loading component:",t)},prepareRender:function(){this.removeSpinner(),"replace"==this.mode&&this.empty()},empty:function(){this.el.empty()}}),r});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module)))module.exports=t();else if("function"==typeof define&&define.amd)define("q",t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else Q=t()}(function(){"use strict";function t(t){return function(){return G.apply(t,arguments)}}function e(t){return t===Object(t)}function i(t){return"[object StopIteration]"===X(t)||t instanceof z}function n(t,e){if(O&&e.stack&&"object"===(void 0===t?"undefined":_typeof(t))&&null!==t&&t.stack&&-1===t.stack.indexOf(tt)){for(var i=[],n=e;n;n=n.source)n.stack&&i.unshift(n.stack);i.unshift(t.stack);var s=i.join("\n"+tt+"\n");t.stack=o(s)}}function o(t){for(var e=t.split("\n"),i=[],n=0;n<e.length;++n){var o=e[n];r(o)||s(o)||!o||i.push(o)}return i.join("\n")}function s(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function a(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var i=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(i)return[i[1],Number(i[2])];var n=/.*@(.+):(\d+)$/.exec(t);return n?[n[1],Number(n[2])]:void 0}function r(t){var e=a(t);if(!e)return!1;var i=e[0],n=e[1];return i===F&&n>=j&&n<=ot}function l(){if(O)try{throw new Error}catch(n){var t=n.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],i=a(e);if(!i)return;return F=i[0],i[1]}}function c(t){return t instanceof h?t:b(t)?_(t):T(t)}function d(){function t(t){e=t,s.source=t,$(i,function(e,i){H(function(){t.promiseDispatch.apply(t,i)})},void 0),i=void 0,n=void 0}var e,i=[],n=[],o=Z(d.prototype),s=Z(h.prototype);if(s.promiseDispatch=function(t,o,s){var a=W(arguments);i?(i.push(a),"when"===o&&s[1]&&n.push(s[1])):H(function(){e.promiseDispatch.apply(e,a)})},s.valueOf=function(){if(i)return s;var t=g(e);return f(t)&&(e=t),t},s.inspect=function(){return e?e.inspect():{state:"pending"}},c.longStackSupport&&O)try{throw new Error}catch(t){s.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return o.promise=s,o.resolve=function(i){e||t(c(i))},o.fulfill=function(i){e||t(T(i))},o.reject=function(i){e||t(C(i))},o.notify=function(t){e||$(n,function(e,i){H(function(){i(t)})},void 0)},o}function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=d();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function p(t){return u(function(e,i){for(var n=0,o=t.length;n<o;n++)c(t[n]).then(e,i)})}function h(t,e,i){void 0===e&&(e=function(t){return C(new Error("Promise does not support operation: "+t))}),void 0===i&&(i=function(){return{state:"unknown"}});var n=Z(h.prototype);if(n.promiseDispatch=function(i,o,s){var a;try{a=t[o]?t[o].apply(n,s):e.call(n,o,s)}catch(t){a=C(t)}i&&i(a)},n.inspect=i,i){var o=i();"rejected"===o.state&&(n.exception=o.reason),n.valueOf=function(){var t=i();return"pending"===t.state||"rejected"===t.state?n:t.value}}return n}function m(t,e,i,n){return c(t).then(e,i,n)}function g(t){if(f(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function f(t){return e(t)&&"function"==typeof t.promiseDispatch&&"function"==typeof t.inspect}function b(t){return e(t)&&"function"==typeof t.then}function y(t){return f(t)&&"pending"===t.inspect().state}function v(t){return!f(t)||"fulfilled"===t.inspect().state}function w(t){return f(t)&&"rejected"===t.inspect().state}function S(){et.length=0,it.length=0,nt||(nt=!0)}function x(t,e){nt&&(it.push(t),e&&void 0!==e.stack?et.push(e.stack):et.push("(no stack) "+e))}function I(t){if(nt){var e=K(it,t);-1!==e&&(it.splice(e,1),et.splice(e,1))}}function C(t){var e=h({when:function(e){return e&&I(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return x(e,t),e}function T(t){return h({when:function(){return t},get:function(e){return t[e]},set:function(e,i){t[e]=i},delete:function(e){delete t[e]},post:function(e,i){return null===e||void 0===e?t.apply(void 0,i):t[e].apply(t,i)},apply:function(e,i){return t.apply(e,i)},keys:function(){return J(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function _(t){var e=d();return H(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function k(t){return h({isDef:function(){}},function(e,i){return R(t,e,i)},function(){return c(t).inspect()})}function E(t,e,i){return c(t).spread(e,i)}function A(t){return function(){function e(t,e){var a;if("undefined"==typeof StopIteration){try{a=n[t](e)}catch(t){return C(t)}return a.done?c(a.value):m(a.value,o,s)}try{a=n[t](e)}catch(t){return i(t)?c(t.value):C(t)}return m(a,o,s)}var n=t.apply(this,arguments),o=e.bind(e,"next"),s=e.bind(e,"throw");return o()}}function L(t){c.done(c.async(t)())}function P(t){throw new z(t)}function D(t){return function(){return E([this,M(arguments)],function(e,i){return t.apply(e,i)})}}function R(t,e,i){return c(t).dispatch(e,i)}function M(t){return m(t,function(t){var e=0,i=d();return $(t,function(n,o,s){var a;f(o)&&"fulfilled"===(a=o.inspect()).state?t[s]=a.value:(++e,m(o,function(n){t[s]=n,0==--e&&i.resolve(t)},i.reject,function(t){i.notify({index:s,value:t})}))},void 0),0===e&&i.resolve(t),i.promise})}function V(t){return m(t,function(t){return t=Y(t,c),m(M(Y(t,function(t){return m(t,q,q)})),function(){return t})})}function U(t){return c(t).allSettled()}function B(t,e){return c(t).then(void 0,void 0,e)}function N(t,e){return c(t).nodeify(e)}var O=!1;try{throw new Error}catch(t){O=!!t.stack}var F,z,j=l(),q=function(){},H=function(){function t(){for(;e.next;){e=e.next;var i=e.task;e.task=void 0;var o=e.domain;o&&(e.domain=void 0,o.enter());try{i()}catch(e){if(s)throw o&&o.exit(),setTimeout(t,0),o&&o.enter(),e;setTimeout(function(){throw e},0)}o&&o.exit()}n=!1}var e={task:void 0,next:null},i=e,n=!1,o=void 0,s=!1;if(H=function(t){i=i.next={task:t,domain:s&&process.domain,next:null},n||(n=!0,o())},"undefined"!=typeof process&&process.nextTick)s=!0,o=function(){process.nextTick(t)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=r,a.port1.onmessage=t,t()};var r=function(){a.port2.postMessage(0)};o=function(){setTimeout(t,0),r()}}else o=function(){setTimeout(t,0)};return H}(),G=Function.call,W=t(Array.prototype.slice),$=t(Array.prototype.reduce||function(t,e){var i=0,n=this.length;if(1===arguments.length)for(;;){if(i in this){e=this[i++];break}if(++i>=n)throw new TypeError}for(;i<n;i++)i in this&&(e=t(e,this[i],i));return e}),K=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),Y=t(Array.prototype.map||function(t,e){var i=this,n=[];return $(i,function(o,s,a){n.push(t.call(e,s,a,i))},void 0),n}),Z=Object.create||function(t){function e(){}return e.prototype=t,new e},Q=t(Object.prototype.hasOwnProperty),J=Object.keys||function(t){var e=[];for(var i in t)Q(t,i)&&e.push(i);return e},X=t(Object.prototype.toString);z="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var tt="From previous event:";c.resolve=c,c.nextTick=H,c.longStackSupport=!1,c.defer=d,d.prototype.makeNodeResolver=function(){var t=this;return function(e,i){e?t.reject(e):arguments.length>2?t.resolve(W(arguments,1)):t.resolve(i)}},c.Promise=u,c.promise=u,u.race=p,u.all=M,u.reject=C,u.resolve=c,c.passByCopy=function(t){return t},h.prototype.passByCopy=function(){return this},c.join=function(t,e){return c(t).join(e)},h.prototype.join=function(t){return c([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},c.race=p,h.prototype.race=function(){return this.then(c.race)},c.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(t,e,i){function o(e){try{return"function"==typeof t?t(e):e}catch(t){return C(t)}}function s(t){if("function"==typeof e){n(t,r);try{return e(t)}catch(t){return C(t)}}return C(t)}function a(t){return"function"==typeof i?i(t):t}var r=this,l=d(),u=!1;return H(function(){r.promiseDispatch(function(t){u||(u=!0,l.resolve(o(t)))},"when",[function(t){u||(u=!0,l.resolve(s(t)))}])}),r.promiseDispatch(void 0,"when",[void 0,function(t){var e,i=!1;try{e=a(t)}catch(t){if(i=!0,!c.onerror)throw t;c.onerror(t)}i||l.notify(e)}]),l.promise},c.when=m,h.prototype.thenResolve=function(t){return this.then(function(){return t})},c.thenResolve=function(t,e){return c(t).thenResolve(e)},h.prototype.thenReject=function(t){return this.then(function(){throw t})},c.thenReject=function(t,e){return c(t).thenReject(e)},c.nearer=g,c.isPromise=f,c.isPromiseAlike=b,c.isPending=y,h.prototype.isPending=function(){return"pending"===this.inspect().state},c.isFulfilled=v,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},c.isRejected=w,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var et=[],it=[],nt=!0;c.resetUnhandledRejections=S,c.getUnhandledReasons=function(){return et.slice()},c.stopUnhandledRejectionTracking=function(){S(),nt=!1},S(),c.reject=C,c.fulfill=T,c.master=k,c.spread=E,h.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},c.async=A,c.spawn=L,c.return=P,c.promised=D,c.dispatch=R,h.prototype.dispatch=function(t,e){var i=this,n=d();return H(function(){i.promiseDispatch(n.resolve,t,e)}),n.promise},c.get=function(t,e){return c(t).dispatch("get",[e])},h.prototype.get=function(t){return this.dispatch("get",[t])},c.set=function(t,e,i){return c(t).dispatch("set",[e,i])},h.prototype.set=function(t,e){return this.dispatch("set",[t,e])},c.del=c.delete=function(t,e){return c(t).dispatch("delete",[e])},h.prototype.del=h.prototype.delete=function(t){return this.dispatch("delete",[t])},c.mapply=c.post=function(t,e,i){return c(t).dispatch("post",[e,i])},h.prototype.mapply=h.prototype.post=function(t,e){return this.dispatch("post",[t,e])},c.send=c.mcall=c.invoke=function(t,e){return c(t).dispatch("post",[e,W(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(t){return this.dispatch("post",[t,W(arguments,1)])},c.fapply=function(t,e){return c(t).dispatch("apply",[void 0,e])},h.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},c.try=c.fcall=function(t){return c(t).dispatch("apply",[void 0,W(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,W(arguments)])},c.fbind=function(t){var e=c(t),i=W(arguments,1);return function(){return e.dispatch("apply",[this,i.concat(W(arguments))])}},h.prototype.fbind=function(){var t=this,e=W(arguments);return function(){return t.dispatch("apply",[this,e.concat(W(arguments))])}},c.keys=function(t){return c(t).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},c.all=M,h.prototype.all=function(){return M(this)},c.allResolved=function(t,e,i){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+i+" instead.",new Error("").stack),t.apply(t,arguments)}}(V,"allResolved","allSettled"),h.prototype.allResolved=function(){return V(this)},c.allSettled=U,h.prototype.allSettled=function(){return this.then(function(t){return M(Y(t,function(t){function e(){return t.inspect()}return t=c(t),t.then(e,e)}))})},c.fail=c.catch=function(t,e){return c(t).then(void 0,e)},h.prototype.fail=h.prototype.catch=function(t){return this.then(void 0,t)},c.progress=B,h.prototype.progress=function(t){return this.then(void 0,void 0,t)},c.fin=c.finally=function(t,e){return c(t).finally(e)},h.prototype.fin=h.prototype.finally=function(t){return t=c(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},c.done=function(t,e,i,n){return c(t).done(e,i,n)},h.prototype.done=function(t,e,i){var o=function(t){H(function(){if(n(t,s),!c.onerror)throw t;c.onerror(t)})},s=t||e||i?this.then(t,e,i):this;"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process&&process.domain&&(o=process.domain.bind(o)),s.then(void 0,o)},c.timeout=function(t,e,i){return c(t).timeout(e,i)},h.prototype.timeout=function(t,e){var i=d(),n=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),i.reject(e)},t);return this.then(function(t){clearTimeout(n),i.resolve(t)},function(t){clearTimeout(n),i.reject(t)},i.notify),i.promise},c.delay=function(t,e){return void 0===e&&(e=t,t=void 0),c(t).delay(e)},h.prototype.delay=function(t){return this.then(function(e){var i=d();return setTimeout(function(){i.resolve(e)},t),i.promise})},c.nfapply=function(t,e){return c(t).nfapply(e)},h.prototype.nfapply=function(t){var e=d(),i=W(t);return i.push(e.makeNodeResolver()),this.fapply(i).fail(e.reject),e.promise},c.nfcall=function(t){var e=W(arguments,1);return c(t).nfapply(e)},h.prototype.nfcall=function(){var t=W(arguments),e=d();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},c.nfbind=c.denodeify=function(t){var e=W(arguments,1);return function(){var i=e.concat(W(arguments)),n=d();return i.push(n.makeNodeResolver()),c(t).fapply(i).fail(n.reject),n.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var t=W(arguments);return t.unshift(this),c.denodeify.apply(void 0,t)},c.nbind=function(t,e){var i=W(arguments,2);return function(){function n(){return t.apply(e,arguments)}var o=i.concat(W(arguments)),s=d();return o.push(s.makeNodeResolver()),c(n).fapply(o).fail(s.reject),s.promise}},h.prototype.nbind=function(){var t=W(arguments,0);return t.unshift(this),c.nbind.apply(void 0,t)},c.nmapply=c.npost=function(t,e,i){return c(t).npost(e,i)},h.prototype.nmapply=h.prototype.npost=function(t,e){var i=W(e||[]),n=d();return i.push(n.makeNodeResolver()),this.dispatch("post",[t,i]).fail(n.reject),n.promise},c.nsend=c.nmcall=c.ninvoke=function(t,e){var i=W(arguments,2),n=d();return i.push(n.makeNodeResolver()),c(t).dispatch("post",[e,i]).fail(n.reject),n.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(t){var e=W(arguments,1),i=d();return e.push(i.makeNodeResolver()),this.dispatch("post",[t,e]).fail(i.reject),i.promise},c.nodeify=N,h.prototype.nodeify=function(t){if(!t)return this;this.then(function(e){H(function(){t(null,e)})},function(e){H(function(){t(e)})})};var ot=l();return c}),define("common/view/entity/base",["lodash"],function(t){function e(e){t.extend(this,e),this.init(e)}return t.extend(e.prototype,{init:function(t){},get:function(e,i){return t.has(this,e)&&!t.isNull(this[e])?this[e]:!t.isUndefined(i)&&i},set:function(t,e){return this[t]=e,this.get(t)},delete:function(e){t.has(this,e)&&delete this[e]},map:function(e,i){t.has(this,e)&&this.set(i,this.get(e)),this.delete(e)}}),e}),define("common/view/entity/config",["lodash","common/util/extends","common/view/entity/base"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{init:function(){},getDefaults:function(){return this.get("defaults",{})}}),n}),define("common/view/model/base",["lodash","signals","common/view/entity/base","common/view/entity/config"],function(t,e,i,n){var o=function(i){this.setConfig(i,!1),t.extend(this,this.config.getDefaults()),this.signals={updated:new e.Signal}};return t.extend(o.prototype,{rawData:{},setConfig:function(e,i){t.isUndefined(i)&&(i=!0),this.config=new n(e),!0===i&&this.updateViewData()},updateViewData:function(){this.setViewData(),this.signals.updated.dispatch(this.getViewData())},setViewData:function(){this.viewData=t.clone(this.getEntity())},getViewData:function(){return this.viewData},setEntity:function(t){this.entity=new i(t)},getEntity:function(){return this.entity},setRawData:function(t){this.rawData=t},getRawData:function(){return this.rawData},setSourceData:function(t){return this.setRawData(t),this.setEntity(t),this.updateViewData(),this.getViewData()},subscribe:function(t,e){switch(t){case"update":this.signals.updated.add(e)}}}),o}),define("common/service/MVM-component",["q","lib/ecmaScript5","lodash","common/view/model/base"],function(t,e,i,n){function o(t,e){this.model=t,i.isUndefined(e)&&(e=new n),this.viewModel=e}return i.extend(o.prototype,{getModel:function(){return this.model},getViewModel:function(){return this.viewModel},init:function(){var e=t.defer(),i=this;return this.getModel().init().then(function(){i.setViewModelSourceData(),e.resolve()}).fail(function(t){e.reject(t)}),e.promise},setViewModelSourceData:function(){this.getViewModel().setSourceData(this.getModel().getData())},getViewData:function(){return this.getViewModel().getViewData()},getData:function(){return this.getModel().getData()}}),o}),define("module/MVVM-component",["lib/ecmaScript5","lodash","common/service/MVM-component","jquery","signals"],function(t,e,i,n,o){function s(t,n,s,a){this.shouldUpdate=!0,this.MVMcomponent=new i(t,n),this.model=t,this.viewModel=n,this.template=s,this.signals={updated:new o.Signal},e.extend(this,a)}return e.extend(s.prototype,{load:function(){return this.MVMcomponent.init().then(this.componentReady.bind(this))},getModel:function(){return this.model},getViewModel:function(){return this.viewModel},getEntity:function(){return this.getViewModel().getEntity()},getViewData:function(){
return this.getViewModel().getViewData()},componentReady:function(t){this.shouldUpdate&&this.getModel().subscribe("update",this.modelUpdated.bind(this)),this.update()},modelUpdated:function(t){this.viewModel.setSourceData(t.getData()),this.update()},updateViewConfig:function(t){this.viewModel.setConfig(t),this.update()},updateModelConfig:function(t){this.getModel().update(t)},update:function(){this.signals.updated.dispatch(this.render())},render:function(){return this.template(this.MVMcomponent.getViewData())},subscribe:function(t,e){switch(t){case"update":this.signals.updated.add(e)}}}),s}),define("common/view/model-v2/link/link-box",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/link","templates","common/view/model-v2/analytics/factory"],function(t,e,i,n,o,s){function a(){i.apply(this,arguments)}return e(a,i,{entityInterface:n,setViewData:function(){var e={class:this.getConfig().get("class",""),title:this.getEntity().getTitle(),id:this.getEntity().getId(),icon:this.getConfig().get("icon",""),url:this.getEntity().getURL()},i=this.getConfig().get("analyticsConfig",!1);t.has(this.getEntity(),"selected")&&(e.selected=this.getEntity().selected),!1!==i&&(e["analytics-element-metadata"]=s.getElementMetadata(i.elementId,i.elementName)),this.viewData=e}}),a}),define("common/helper/domain-brand-mapper",["lodash"],function(t){var e={"bbc.co.uk/news/":"news","/culture/":"culture","/earth/":"earth","/travel/":"travel","/capital/":"capital","/autos/":"autos","/future/":"future"};return{getBrand:function(t){if("string"==typeof t&&t.length>0)for(var i in e)if(e.hasOwnProperty(i)&&-1!=t.search(i))return e[i];return!1}}}),define("common/helper/context-data/item",["lodash"],function(t){function e(t,e,i){this.context=t,this["context-url"]=e,this["context-class"]=i}return e}),define("common/view/model-v2/promo/context-heading-types",[],function(){return{DOMAIN:"domain",NONE:"none"}}),define("common/view/model-v2/promo/context-heading",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/interface/entity/promo","common/helper/domain-brand-mapper","common/helper/context-data/item","./context-heading-types"],function(t,e,i,n,o,s,a,r){function l(){n.apply(this,arguments)}return e(l,n,{entityInterface:o,setViewData:function(){var e,i=!1;switch(this.getConfig().get("type")){case r.NONE:e=[];break;case r.DOMAIN:e=this.getBrandContext();break;default:e=this.getEntity().getContext(this.getConfig())}t.isArray(e)&&e.length>0&&(i=!0),this.viewData={contextItems:e,hasContext:i}},getBrandContext:function(){var t=s.getBrand(this.getEntity().getURL());return!1===t?[]:[new a("BBC "+t.ucfirst(),"/"+t,"brand-"+t+" context-heading")]}}),l}),define("common/helper/page-type",[],function(){function t(t){return!!(_.isString(t)&&t.length>0&&"story"===e(t))}function e(t){var e={index:"index",column:"index",section:"index",tag:"index","calendar-index":"index","video-index":"index",story:"story",image:"story",audio:"story",video:"story",slideshow:"story",infographic:"story",event:"event","slideshow-gallery":"slideshow"};return void 0!==e[t]&&e[t]}return{isStoryType:t,getPageType:e}}),define("common/view/model-v2/promo/promo-unit",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/view/model-v2/image/html-element","common/view/model-v2/link/link-box","common/view/model-v2/promo/context-heading","common/view/model-v2/analytics/interaction-element-meta-data","common/entity/vanilla/analytics/interaction-element-meta-data","common/helper/domain-brand-mapper","common/interface/entity/promo","common/helper/page-type"],function(t,e,i,n,o,s,a,r,l,c,d,u){function p(){n.apply(this,arguments)}return e(p,n,{entityInterface:d,setViewData:function(){var t=c.getBrand(this.getEntity().getURL()),e=this.getAnalytics(),i={title:this.getEntity().getTitle(),url:this.getEntity().getURL(),summary:this.getEntity().getSummary(),"icon-type":this.getEntity().getIconType(),brand:t,class:this.getConfig().get("class",""),context:this.getContext(),image:this.getImage(),tags:this.getRelatedLinks(),useStandardLayout:function(){return!this.useAlternativeLayout()},useAlternativeLayout:function(){return"alternative"===this.class.substring(0,11)},"analytics-element-metadata":e};this.getConfig().get("use-long-summary")&&(i.summary=this.getEntity().getSummaryLong()),this.getConfig().get("include-branded-class")&&(i.class+=" "+this.getBrandedClass(t)),this.viewData=i},getBrandedClass:function(e){return t.isString(e)?"brand-"+e:""},getImage:function(){var e=this.getEntity().getImage(),i=this.getConfig().get("displayImage",!0),n={class:"responsive landscape",includeCaption:!1,imageAnalyticsConfig:this.getImageAnalyticsConfig()},s=t.merge(n,this.getConfig().get("image",{}));return!!i&&(e?(e.setIconType(this.getEntity().getIconType()),e.setReplaceURL(this.getEntity().getURL()),new o(e,s).setSourceData(!1,{})):{})},getRelatedLinks:function(){var e={items:[]};return this.getEntity().getRelatedLinks()&&t.each(this.getEntity().getRelatedLinks().getListItems(),function(t){e.items.push(new s(t,this.getConfig().get("link",{})).setSourceData({},!1))},this),e},getContext:function(){return new a(this.getEntity(),{type:this.getConfig().get("context","any")}).setSourceData({},!1)},getImageAnalyticsConfig:function(){var e=this.getConfig(),i=e.get("image",!1),n=u.getPageType(this.getEntity().getType()),o=!1!==n?n+"-promo-image":"promo-image",s={elementId:o,elementType:o,elementName:this.getEntity().getTitle()},a=e.get("analyticsConfig",{});return t.has(i,"imageAnalyticsConfig")&&t.extend(s,i.imageAnalyticsConfig),t.has(a,"elementId")&&(s.elementId=a.elementId+"-"+s.elementId),s},getLinkAnalyticsConfig:function(){var e=this.getConfig(),i=u.getPageType(this.getEntity().getType()),n={elementType:!1!==i?i+"-promo-link":"promo-link",elementName:this.getEntity().getTitle()},o=e.get("analyticsConfig",{}),s={};return t.merge(s,n,o),t.has(o,"elementId")&&(s.elementId=o.elementId+"-"+n.elementType),s},getAnalytics:function(){this.getEntity(),this.getConfig();return new r(new l(this.getLinkAnalyticsConfig()),this.getLinkAnalyticsConfig()).setSourceData({},!1)}}),p}),define("common/interface/entity/event-promo",["lodash","common/util/interface","common/interface/entity/promo"],function(t,e,i){return new e("EventPromoEntity",i.methods.concat(["getEventType","getLocation","getStartDate","getEndDate"]))}),define("common/helper/date-formatter",["lodash"],function(t){var e=new Array("January","February","March","April","May","June","July","August","September","October","November","December");return{getFormattedDate:function(t){var i=new Date(t),n=i.getUTCDate(),o=i.getUTCMonth(),s=i.getUTCFullYear();return n+" "+e[o]+" "+s},getShortMonthFromDate:function(i){if(t.isDate(i)){return e[i.getUTCMonth()].substring(0,3)}},getDayWithLeadingZeroFromDate:function(e){if(t.isDate(e))return String("00"+e.getUTCDate()).slice(-2)},timeSince:function(e,i){var n,o;return!(!t.isDate(e)||!t.isDate(i))&&(n=Math.floor((e-i)/1e3),(o=Math.floor(n/31536e3))>1?o+" years":(o=Math.floor(n/2592e3))>1?o+" months":(o=Math.floor(n/86400))>1?o+" days":(o=Math.floor(n/3600))>1?o+" hours":(o=Math.floor(n/60),o>1?o+" minutes":Math.floor(n)+" seconds"))},secondsToMinutesAndSeconds:function(e){if(t.isNumber(e)){return{minutes:Math.floor(e/60),seconds:e%60}}return!1},padZero:function(t){return t<10?"0"+t:t}}}),define("common/view/model-v2/promo/event/dates",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/interface/entity/event-promo","common/helper/date-formatter"],function(t,e,i,n,o,s){function a(){n.apply(this,arguments)}return e(a,n,{entityInterface:o,setViewData:function(){this.viewData={"start-date":this.getDate(this.getEntity().getStartDate(),"start-date"),"end-date":this.getDate(this.getEntity().getEndDate(),"end-date")}},getDate:function(e,i){if(t.isDate(e))return{date:s.getDayWithLeadingZeroFromDate(e),month:s.getShortMonthFromDate(e),class:i}}}),a}),define("common/entity/vanilla/link/base",["lodash","common/util/extends","common/entity/base"],function(t,e,i){function n(e){var n={URL:"",title:"",id:!1,image:!1,entityType:""};i.call(this,t.extend(n,e))}return e(n,i,{getId:function(){return this.id},getURL:function(){return this.URL},getTitle:function(){return this.title},getImage:function(){return this.image},getEntityType:function(){return this.entityType}}),n}),define("common/interface/entity/location",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,i){return new e("Location",i.methods.concat(["getVenue","getCity","getCountry","getRegion"]))}),define("common/helper/location-formatter",["lodash","common/util/interface","common/interface/entity/location"],function(t,e,i){return{asString:function(t,n){e.ensureImplements(t,i);var o=[];return t.getVenue()&&o.push(t.getVenue()),t.getCity()&&o.push(t.getCity()),t.getCountry()&&o.push(t.getCountry()),t.getRegion()&&o.push(t.getRegion()),o.join(n)}}}),define("common/view/model-v2/promo/event/promo-unit",["lodash","common/util/extends","common/util/logger","common/view/model-v2/promo/promo-unit","common/view/model-v2/promo/event/dates","common/interface/entity/event-promo","common/view/model-v2/link/link-box","common/entity/vanilla/link/base","common/helper/location-formatter","common/view/entity-URL-router"],function(t,e,i,n,o,s,a,r,l,c){function d(){n.apply(this,arguments)}return e(d,n,{entityInterface:s,setViewData:function(){n.prototype.setViewData.apply(this,arguments),this.viewData.title=this.getEntity().getShortName(),this.viewData.dates=this.getDates(),t.isString(this.getEntity().getEventType())&&(this.viewData["event-type-URL"]=c.getURLWithIndex("event-index")+"?type="+this.getEntity().getEventType().toLowerCase(),this.viewData["event-type"]=this.getEntity().getEventType()),this.getEntity().getLocation()&&this.getConfig().get("showLocation",!0)&&(this.viewData.location=l.asString(this.getEntity().getLocation(),"<br />")),this.viewData.useStandardLayout=function(){return!1},this.viewData.useEventLayout=function(){return!0}},getDates:function(){return new o(this.getEntity(),{}).setSourceData({},!1)}}),d}),define("common/interface/entity/list/base",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,i){return new e("ListEntity",i.methods.concat(["getId","getTitle","getListItems"]))}),define("common/helper/advertising",["lodash","common/config"],function(t,e){var i={column:"column",video:"series",tag:"tags",destination:"dest"};return t.has(e.get(),"tags")&&(i.tag=e.get().tags.adPrefix),t.has(e.get(),"columns")&&(i.column=e.get().columns.adPrefix),{isAsyncAdsEnabled:function(){return t.has(e.get(),["advertising","async"])&&!0===e.get().advertising.async},generateIndexZoneForHabitatEntity:function(t,e){return this.generateZoneForHabitatEntity(t,e,"index")},generateZoneForHabitatEntity:function(t,e,i){return this.generateZone(t,e.getId(!0),i)},generateIndexZone:function(t){return this.generateZone(t,void 0,"index")},generateContentZone:function(t){return this.generateZone(t,void 0,"content")},generateZone:function(e,i,n){var o=[this.mapEntityPrefix(e)];return t.isUndefined(i)||o.push(i),t.isUndefined(n)||o.push(n),o.join("-")},mapEntityPrefix:function(e){return t.has(i,e)?i[e]:e},replaceMappedEntityInString:function(e){return t.isString(e)&&t.each(i,function(t,i){-1!=e.search(i)&&(e=e.replace(i,t))}),e},getAdSlot:function(e,i,n){return t.has(i,"id")&&(e=i.id),t.has(i,"groups")||(i.groups=[1,2,3,4]),t.has(i,"groups")&&t.isArray(i.groups)&&(i.jsonGroups=JSON.stringify(i.groups),i.groups=i.groups.join("_")),i.id=e,this.isAsyncAdsEnabled()&&(i.async=!0),!0===n&&(i.deferred=!0),i},getNativeAdSlots:function(e){var i=this.getDefaultAdSlots(e);return t.has(i,"sponsor-section-content")&&(i["sponsor-section-content"].text="Partnered Content Presented By"),t.has(i,"sponsor-section-hero")&&(i["sponsor-section-hero"].text="Partnered Content Presented By"),t.has(i,"adsense_mpu")&&delete i.adsense_mpu,t.has(i,"native_side")&&delete i.native_side,t.has(i,"native_responsive")&&delete i.native_responsive,i},getDefaultAdSlots:function(i){var n,o=e.get(),s={parallax:{},leaderboard:{},"leaderboard-1_2_3":{id:"leaderboard",groups:[1,2,3]},"leaderboard-4":{id:"leaderboard",groups:[4]},"mpu-1_2_3":{id:"mpu",groups:[1,2,3]},"mpu-4":{id:"mpu",groups:[4]},"mpu-1_2":{id:"mpu",groups:[1,2]},"mpu-3_4":{id:"mpu",groups:[3,4]},mpu_bottom:{},native_side:{},native_responsive:{},promo_feature_responsive:{},promo_feature_2:{},promo_feature_3:{},adsense_mpu:{},responsive_box_1:{},responsive_box_2:{},verticalnavbar:{},infeed:{}};return!0===i?s["sponsor-section-content"]={id:"sponsor_section",groups:[1,2,3,4],text:"IN ASSOCIATION WITH"}:(s["sponsor-section-content"]={id:"sponsor_section",groups:[1,2,3],text:"IN ASSOCIATION WITH"},s["sponsor-section-hero"]={id:"sponsor_section",groups:[4],text:"IN ASSOCIATION WITH"},s["sponsor-section-storyworks"]={id:"sponsor_storyworks",groups:[1,2,3,4],text:"Paid and presented by"}),t.has(o,"advertising")&&t.has(o.advertising,"excluded-ad-slots")&&(n=o.advertising["excluded-ad-slots"],t.isArray(n)&&t.each(n,function(e){t.has(s,e)&&delete s[e]},this)),s}}}),define("common/view/model-v2/list/promo-group/base",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/view/model-v2/promo/promo-unit","common/view/model-v2/promo/event/promo-unit","common/interface/entity/list/base","common/helper/advertising","common/view/model-v2/analytics/module-meta-data","common/entity/vanilla/analytics/module-meta-data"],function(t,e,i,n,o,s,a,r,l,c){function d(){n.apply(this,arguments)}return e(d,n,{entityInterface:a,setViewData:function(){var e=this.getEntity(),i=this.getConfig().get("title"),n=this.getConfig().get("analyticsConfig"),o=this.getPromoUnits(e.getListItems()),s={id:this.getConfig().get("id",""),class:this.getConfig().get("class",""),title:e.getTitle(),"promo-group":{"has-children":!1,items:o}};t.isArray(o)&&o.length>0&&(s["promo-group"]["has-children"]=!0),!1!==i&&(s.title=i),!1!==n&&t.has(n,"module")&&(s["analytics-module-metadata"]=new l(new c({module:n.module},this.getConfig().get("analyticsConfig",{}))).setSourceData({},!1)),s["promo-group"].items=this.insertAdSlotsIntoList(this.getConfig().get("adSlots",[]),s["promo-group"].items),this.viewData=s},getPromoUnits:function(e){var i,n,o=[],s=this.getConfig().get("excludedId"),a=this.getConfig().get("groupStart",0),r=this.getConfig().get("groupEnd",e.length);return n=s?e.slice(a,r+1):e.slice(a,r),t.each(n,function(t,e){if((!1===s||t.getId()!=s)&&(i=this.getPromoUnit(t,e+1,n.length),o.push(i),o.length>=r-a))return!1},this),o},getPromoUnit:function(e,i,n,a){var r,l;switch(a=a||{},e.getType()){case"event":r=s;break;default:r=o}var c=this.getPromoAnalyticsConfig(e,i,n);return l=new r(e,t.merge({analyticsConfig:c},this.getConfig().get("promoUnit",{}),a)),l.setSourceData({},!1)},getPromoAnalyticsConfig:function(e,i,n){var o=this.getConfig().get("analyticsConfig",{}),s={};return t.has(o,"module")?s.elementId=o.module+"-"+i:s.elementId=i,!0===o.paginated&&(s.additionalData=this.getCurrentPage()),t.has(o,"totalLinkCount")?s.totalElementCount=o.totalElementCount:s.totalElementCount=n,s},getCurrentPage:function(){var e=this.getEntity(),i=e.get("paging");return!1!==i&&t.has(i,"page")?"page-"+i.page:""},insertAdSlotsIntoList:function(e,i){var n=t.cloneDeep(i);return t.each(e,function(t,e){n.splice(t.index,0,this.getAdSlot(t.slotId,t))},this),n},getAdSlot:function(t,e){return{"ad-slot":r.getAdSlot(t,e)}}}),d}),define("component/promo-group/base",["lodash","module/MVVM-component","common/view/model-v2/list/promo-group/base","templates"],function(t,e,i,n){return function(o,s,a,r){t.isUndefined(r)&&(r="promo-group-without-container");var l=new i(s,a);return new e(o,l,n[r])}}),define("requestLoader",["q","jquery"],function(t,e){var i=function(){};return i.prototype.load=function(i){var n=t.defer();return e.ajax({url:i.url,dataType:"json",headers:i.additionalHeaders}).then(function(t){n.resolve({data:t})}).fail(function(){n.reject(new Error("Cannot load "+i.url))}),n.promise},i}),define("common/model/filter/default",["lodash","common/util/extends"],function(t,e){function i(t){}return e(i,Object,{filter:function(t,e){return t}}),i}),define("common/interface/filter",["lodash","common/util/interface"],function(t,e){return new e("Filter",["filter"])}),define("common/model/base",["q","lodash","signals","common/model/filter/default","common/util/interface","common/interface/filter"],function(t,e,i,n,o,s){function a(t){e.has(t,"defaults")&&e.extend(this,t.defaults),this.setConfig(t),this.signals={updated:new i.Signal},this.setFilter(new n)}return e.extend(a.prototype,{type:"default",arrRequiredConfig:[],setConfig:function(t){e.isObject(t)||(t={}),e.each(this.arrRequiredConfig,function(i,n,o){if(!e.has(t,i))throw Error("Model requires config field "+i)}),this.config=t},update:function(t){var e=this;return this.updateConfig(t),this.init().then(function(){e.signals.updated.dispatch(e)})},updateConfig:function(t){var i=e.cloneDeep(this.config);e.extend(i,t),this.setConfig(i)},init:function(){return this.defered=t.defer(),this.defered.resolve(this.getData()),this.defered.promise},getData:function(){return this.getFilter().filter(this.data,this.config)},setData:function(t){this.data=t},getFilter:function(){return this.filter},setFilter:function(t){o.ensureImplements(t,s),this.filter=t},getJSONString:function(){return JSON.stringify(this.getData())},subscribe:function(t,e){switch(t){case"update":this.signals.updated.add(e)}}}),a}),define("common/service/request-builder/base",["lodash","common/util/logger"],function(t,e){function i(){}return t.extend(i.prototype,{getRequestData:function(t,e,i){return this.checkArguments(t,e,i),{url:this.getRequestURL(t,i),dataType:e,additionalHeaders:this.getAdditionalHeaders(i)}},getRequestURL:function(t,e){return this.buildURLScheme(t,e)},getAdditionalHeaders:function(t){return{}},buildURLScheme:function(e,i){var n,o=e.match(/{.*?}/g);return t.each(o,function(o,s,a){n=o.substring(1,o.length-1),t.has(i,n)&&(e=e.replace(o,i[n]))}),e},checkArguments:function(t,e,i){if(arguments.length<3)throw Error("All arguments must be provided to request builder")}}),i}),define("common/model/remote",["lib/ecmaScript5","lodash","requestLoader","q","common/util/extends","common/model/base","common/service/request-builder/base","common/util/logger"],function(t,e,i,n,o,s,a,r){function l(t){s.call(this,t),this.resetLoadState()}return o(l,s,{URLScheme:"/{url}",dataType:"json",type:"remote",isLoaded:!1,customApiVersion:null,requestBuilder:new a,getRequestData:function(){return this.requestData},setRequestData:function(t){this.requestData=t},resetLoadState:function(){this.defered=n.defer(),this.isLoaded=!1,this.prepareInput();var t=e.cloneDeep(this.config);null!==this.customApiVersion&&(t.api.version=this.customApiVersion.toLowerCase()),this.setRequestData(this.requestBuilder.getRequestData(this.URLScheme,this.dataType,t))},setApiVersion:function(t){if("string"!=typeof t||0===t.trim().length)throw new Error("API version has to be a non empty string");this.customApiVersion=t,this.resetLoadState()},prepareInput:function(){},init:function(){return this.load()},update:function(t){return this.updateConfig(t),this.resetLoadState(),s.prototype.update.call(this,t)},load:function(){if(this.isLoaded)this.defered.resolve(this.getData());else{new i({requestTimeout:this.config.requestTimeout}).load(this.getRequestData()).then(this.dataLoaded.bind(this)).fail(this.loadError.bind(this))}return this.defered.promise},dataLoaded:function(t){var e;try{e=this.parseData(t.data,this.config)}catch(i){this.defered.reject(i),r.get().warn("RemoteDataModel:dataLoaded: error parsing data ",this.requestData)}if(e)this.isLoaded=!0,this.setData(e),this.defered.resolve(this.getData());else{var i=new Error("Not found");i.status=404,this.defered.reject(i),r.get().warn("RemoteDataModel:dataLoaded: data cannot be parsed ",this.requestData)}},parseData:function(t,e){return t},loadError:function(t){this.defered.reject(t),r.get().warn("RemoteDataModel:loadError:"+t.message)},populate:function(t){this.isLoaded=!0,this.setData(t)}}),l}),define("common/service/request-builder/habitat",["lodash","common/util/extends","common/service/request-builder/base"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{getRequestURL:function(t,e){return e.api.url+"/"+e.api.version+this.buildURLScheme(t,e)},getAdditionalHeaders:function(e){return t.has(e,"api")&&t.has(e.api,"request-key")?{"X-HabitatRequestKey":e.api["request-key"]}:{}},checkArguments:function(e,i,n){if(arguments.length<3)throw Error("All arguments must be provided to request builder");if(!t.has(n,"api")||!t.has(n.api,"url")||!t.has(n.api,"version"))throw Error("API data must be set in config")}}),n}),define("common/model/habitat",["lodash","common/util/extends","common/model/remote","common/service/request-builder/habitat"],function(t,e,i,n){function o(t){i.call(this,t)}return e(o,i,{requestBuilder:new n}),o}),define("common/entity/external/around-bbc/promo",["lodash","common/util/extends","common/util/logger","common/entity/base","common/entity/vanilla/image","common/helper/context-data/item"],function(t,e,i,n,o,s){function a(e,i){var o={id:!1,PromoUrl:"",Headline:"",image:!1,description:"",iconType:"",context:!1,type:""};n.call(this,t.extend(o,e),i)}return e(a,n,{init:function(e,i){n.prototype.init.apply(this,arguments),t.has(e,"ImageUrl")&&this.set("image",new o({URL:e.ImageUrl,replaceURL:e.PromoUrl})),t.has(e,"ContextName")&&this.set("context",[new s(e.ContextName,e.ContextUrl)])},getId:function(){return this.id},getURL:function(){return this.PromoUrl},getTitle:function(){return this.Headline},getImage:function(){return this.image},getShortName:function(){return this.Headline},getClientName:function(){return this.clientName},setSummary:function(t){this.description=t},getSummary:function(){return this.description},getSummaryLong:function(){return this.getSummary()},getContext:function(){return this.context},getIconType:function(){return this.iconType},getType:function(){return this.type},getRelatedLinks:function(){return!1}}),a}),define("common/data/uk-blacklist",[],function(){return["autos","travel"]}),define("common/helper/geo-location",["lodash","common/util/request","common/data/uk-blacklist","common/helper/domain-brand-mapper"],function(t,e,i,n){return{isURLPermitted:function(e){var o=n.getBrand(e);return!this.isUK()||!t.contains(i,o)},isUK:function(){return e.get("data").isUK}}}),define("common/model/external/around-the-bbc",["lodash","common/util/extends","common/model/habitat","common/entity/external/around-bbc/promo","common/helper/geo-location"],function(t,e,i,n,o){function s(t){i.call(this,t)}return e(s,i,{URLScheme:"/external/around-the-bbc/{moduleId}",parseData:function(e){var i,s=[];return!!t.isArray(e)&&(t.each(e,function(t){i=new n(t),o.isURLPermitted(i.getURL())&&s.push(t)}),{items:s})}}),s}),define("common/entity/list/base",["lodash","common/util/extends","common/entity/base"],function(t,e,i){function n(e,n){var o={id:!1,title:"",listItems:[]};i.call(this,t.extend(o,e),n)}return e(n,i,{getId:function(){return this.id},getTitle:function(){return this.title},getListItems:function(){return this.listItems}}),n}),define("common/entity/list/entity",["lodash","common/util/extends","common/util/logger","common/entity/list/base"],function(t,e,i,n){function o(e,i){var o={id:!1,title:"",listItems:[]};n.call(this,t.extend(o,e),i)}return e(o,n,{init:function(t){n.prototype.init.apply(this,arguments),this.initListItems()},entityFactoryDependencies:["listItem"],initListItems:function(){var e,i=this.getListItems();this.flushListItems(),t.each(i,function(t){!1!==(e=this.createEntity(t))&&this.addListItem(e)},this)},createEntity:function(t){return this.getEntityFactory().create("listItem",t)},addListItem:function(t){this.getListItems().push(t)},flushListItems:function(){this.listItems=[]},getListItems:function(){return this.listItems}}),o}),define("common/entity/external/around-bbc/list",["lodash","common/util/extends","common/util/logger","common/entity/list/entity","common/entity/external/around-bbc/promo"],function(t,e,i,n,o){function s(t,e){n.apply(this,arguments)}return e(s,n,{entityFactoryDependencies:[],flushListItems:function(){this.items=[]},getListItems:function(){return this.items},createEntity:function(t){return new o(t)}}),s}),define("component/promo-group/around-the-bbc",["lodash","common/config","component/promo-group/base","common/model/external/around-the-bbc","common/entity/external/around-bbc/list","templates"],function(t,e,i,n,o,s){return function(s,a){return i(new n(e.get()),new o,t.extend({title:"Around the BBC"},a),"promo-group")}}),define("layouts/page",["lodash","lib/ecmaScript5","jquery","lib/domReady","model/mediaQuery","module/navigation/primary","module/navigation/toggle","module/responsiveImages/main","module/responsiveImages/formats/wwfeaturesHero","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures83x120","module/responsiveImages/formats/wwfeaturesBanner","module/imageReplacer","module/search","module/responsiveFrameManager","module/component-loader","component/promo-group/around-the-bbc","common/config"],function(t,e,i,n,o,s,a,r,l,c,d,u,p,h,m,g,f,b){var y=function(t,e,i){this.imageRatio=i,this.setSelector(t),this.hiddenClass="hidden",this._isNative=this.getSelector().hasClass("native"),this.aroundTheBBCSelector="#around-bbc"};return t.extend(y.prototype,{init:function(){var t=new p;new h("#orb-search-form");this.navigation=new s("#nav-top"),this.toggle=new a("#sections-nav-button"),this.toggle.subscribe("toggle",this.navigation.toggleOverlay.bind(this.navigation)),t.replace("a[data-replace-image='true'][data-is-portrait='false']","responsive landscape"),t.replace("div[data-replace-image='true'][data-is-portrait='false']","responsive landscape"),t.replace("a[data-replace-image='true'][data-is-portrait='true']","responsive portrait"),t.replace("div[data-replace-image='true'][data-is-portrait='true']","responsive portrait"),this.setupResponsiveImages(),m.init(),this.setupAroundTheBBCComponent()},layout:function(){this.responsiveImages.respond(),o.isTablet(!0)&&(this.navigation.disableOverlay(),this.toggle.deactivate())},setupResponsiveImages:function(){this.responsiveImages=new r,this.responsiveImages.add(i("img.responsive-hero"),l),this.responsiveImages.add(i("img.responsive.landscape"),c,this.imageRatio),this.responsiveImages.add(i("img.responsive.portrait"),d),this.responsiveImages.add(i("img.responsive-banner"),u)},setupAroundTheBBCComponent:function(){if(t.has(b.get(),"module")&&t.has(b.get().module,"backendModuleId")&&i(this.aroundTheBBCSelector).length>0){var e=new f(b.get().module.backendModuleId,{groupEnd:6,class:"single-column-primary",promoUnit:{class:"around-the-bbc",image:{useImageTag:!0,format:{landscape:{x:"464",y:"261"}}}},analyticsConfig:{module:"around-the-bbc",totalElementCount:6}});new g(i(this.aroundTheBBCSelector),e,{}).load()}},isNative:function(){return this._isNative},show:function(){this.getSelector().hasClass(this.hiddenClass)&&this.toggleHide()},toggleHide:function(){this.getSelector().toggleClass(this.hiddenClass)},setSelector:function(t){this.selector=i(t)},getSelector:function(){return this.selector}}),y});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define("mresize",["jquery"],t):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t:t(jQuery)}(function(t){t.event.special.mresize={add:function(){var e=t(this);e.data("mresize")||("static"===e.css("position")&&e.css("position","relative"),e.append("<div class='resize' style='position:absolute; width:auto; height:auto; top:0; right:0; bottom:0; left:0; margin:0; padding:0; overflow:hidden; visibility:hidden; z-index:-1'><iframe style='width:100%; height:0; border:0; visibility:visible; margin:0' /><iframe style='width:0; height:100%; border:0; visibility:visible; margin:0' /></div>").data("mresize",{w:e.width(),h:e.height(),t:null,throttle:100}).find(".resize iframe").each(function(){t(this.contentWindow||this).on("resize",function(){var t=e.data("mresize");(t.w!==e.width()||t.h!==e.height())&&(t.t&&clearTimeout(t.t),t.t=setTimeout(function(){e.triggerHandler("mresize"),t.w=e.width(),t.h=e.height()},t.throttle))})}))},remove:function(){t(this).removeData("mresize").find(".resize").remove()}}}),define("module/scroller",["jquery","lodash"],function(t,e){function i(){this.speed=0}return i.prototype.scrollTo=function(e){if(e.$target&&1===e.$target.length){var i=e.$target.offset().top,n=e.speed||this.speed;t("html,body").animate({scrollTop:i},n)}},i.prototype.scrollToTop=function(e){var i=e||this.speed;t("html,body").animate({scrollTop:0},i)},i.prototype.jumpToTop=function(){t("body")[0].scrollIntoView()},i}),define("module/slideshow-gallery/start-overlay",["jquery"],function(t){function e(){this.selector="[data-sg-start-overlay]",this.init()}return e.prototype.init=function(){var t=this.getSelector();this.setSelector(t)},e.prototype.hide=function(t){this.$selector.fadeOut("fast",function(){"function"==typeof t&&t()})},e.prototype.setSelector=function(e){this.$selector=t(e)},e.prototype.getSelector=function(){return this.selector},e}),define("module/slideshow-gallery/transition-overlay",["jquery"],function(t){function e(){this.selector="[data-sg-transition-overlay]",this.animationDuration=100,this.init()}return e.prototype.init=function(){var t=this.getSelector();this.setSelector(t)},e.prototype.hide=function(){this.getSelector().fadeOut(this.animationDuration)},e.prototype.show=function(){this.getSelector().fadeIn(this.animationDuration)},e.prototype.setSelector=function(e){this.selector=t(e)},e.prototype.getSelector=function(){return this.selector},e}),define("module/slideshow-gallery/layout",["jquery","lodash","lib/ecmaScript5","lib/domReady","model/mediaQuery"],function(t,e,i,n,o){var s=function(){this.cachedLayout="",this.verticalScrollLayoutName="vertical-scroll",this.slideshowLayoutName="slideshow",this.cachedLayoutChanged=!1,this.init()};return s.prototype.init=function(){var t=this.getCurrentLayout();this.setCachedLayout(t),this.bindWindowEvents()},s.prototype.isVerticalScroll=function(){return!!o.isFixedWidthLayout()||o.getGroup()<4},s.prototype.isSlideshow=function(){return!o.isFixedWidthLayout()&&!this.isVerticalScroll()},s.prototype.hasChanged=function(){return this.getCachedLayoutChanged()},s.prototype.hasChangedToSlideshow=function(){return!(!this.getCachedLayoutChanged()||!this.isSlideshow())},s.prototype.hasChangedToVerticalScroll=function(){return!(!this.getCachedLayoutChanged()||!this.isVerticalScroll())},s.prototype.getCurrentLayout=function(){return this.isVerticalScroll()?this.verticalScrollLayoutName:this.slideshowLayoutName},s.prototype.getCachedLayout=function(){return this.cachedLayout},s.prototype.setCachedLayout=function(t){this.cachedLayout=t},s.prototype.getCachedLayoutChanged=function(){return this.cachedLayoutChanged},s.prototype.setCachedLayoutChanged=function(t){e.isBoolean(t)&&(this.cachedLayoutChanged=t)},s.prototype.updateCachedLayoutChanged=function(){var t=this.getCachedLayout();return this.getCurrentLayout()===t?this.setCachedLayoutChanged(!1):this.setCachedLayoutChanged(!0)},s.prototype.updateCachedLayout=function(){if(this.cachedLayoutChanged){var t=this.getCurrentLayout();this.setCachedLayout(t)}},s.prototype.handleWindowResize=function(){this.updateCachedLayoutChanged(),this.updateCachedLayout()},s.prototype.bindWindowEvents=function(){t(window).on("resize",this.handleWindowResize.bind(this))},s}),
define("module/slideshow-gallery/navigation",["jquery","lib/domReady","lib/ecmaScript5","module/slideshow-gallery/layout"],function(t,e,i,n){function o(t,e){return this.selector=e,this.slideshow=t,this.layout=new n,this.init(),this}return o.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.slideshow&&this.getSelector().length&&(this.setupSelectors(),this.bindNavigationEvents(),this.bindKeyboardEvents())},o.prototype.setupSelectors=function(){this.startSelector="[data-sg-start]",this.prevSelector="[data-sg-prev]",this.nextSelector="[data-sg-next]",this.activeClass="is-active",this.inactiveClass="is-inactive",this.$nextButton=this.getSelector().find(this.nextSelector),this.$prevButton=this.getSelector().find(this.prevSelector),this.$startButton=this.getSelector().find(this.startSelector)},o.prototype.focusElement=function(t){t.length>0&&t.focus()},o.prototype.updateNavigation=function(t,e){switch(!0){case t:this.updateButton(this.$nextButton,"hide"),this.updateButton(this.$prevButton,"hide"),this.focusElement(this.$startButton);break;case e:this.updateButton(this.$nextButton,"hide"),this.updateButton(this.$prevButton,"show"),this.focusElement(this.$prevButton);break;default:this.updateButton(this.$nextButton,"show"),this.updateButton(this.$prevButton,"show"),"forwards"===this.getDirection()?this.focusElement(this.$nextButton):"backwards"===this.getDirection()&&this.focusElement(this.$prevButton)}},o.prototype.updateButton=function(t,e){if(t.length>0){var i,n,o;switch(e){case"show":i=this.inactiveClass,n=this.activeClass,o=!1;break;case"hide":i=this.activeClass,n=this.inactiveClass,o=!0;break;default:i=this.activeClass,n=this.inactiveClass,o=!0}t.removeClass(i).addClass(n).attr("aria-hidden",o)}},o.prototype.handleStart=function(t){t.preventDefault(),this.getSlideshow().handleStart(),this.setDirection("forwards")},o.prototype.handlePrev=function(t){t.preventDefault(),this.setDirection("backwards"),this.getSlideshow().handleSlideChange("backwards")},o.prototype.handleNext=function(t){t.preventDefault(),this.setDirection("forwards"),this.getSlideshow().handleSlideChange("forwards")},o.prototype.handleKeyup=function(t){if(this.layout.isSlideshow())switch(t.which){case 37:this.handlePrev(t);break;case 39:this.handleNext(t)}},o.prototype.setDirection=function(t){["forwards","backwards"].indexOf(t)>-1&&(this.direction=t)},o.prototype.getDirection=function(){return this.direction},o.prototype.setSelector=function(e){this.selector=t(e)},o.prototype.getSelector=function(){return this.selector},o.prototype.getSlideshow=function(){return this.slideshow},o.prototype.bindNavigationEvents=function(){this.$prevButton.on("click",this.handlePrev.bind(this)),this.$nextButton.on("click",this.handleNext.bind(this)),this.$startButton.on("click",this.handleStart.bind(this))},o.prototype.bindKeyboardEvents=function(){t(window).on("keyup",this.handleKeyup.bind(this))},o}),define("module/responsiveImages/formats/wwfeatures4x5",["jquery","module/responsiveImages/formats/wwfeatures16x9","common/util/inherits"],function(t,e,i){function n(t){this.image=t,this.imageNamespace="wwfeatures",this.heightToWidthRatio=5/4,this.heights=[300,500,600,700,800,900,1e3,1280],this.arrFormats=[];for(var e=0;e<this.heights.length;e++){var i=this.heights[e],n=i/this.heightToWidthRatio;this.arrFormats.push({name:"wwfeatures-"+n+"-"+i,dimensions:{width:n,height:i}})}}return i(n,e),n}),define("module/responsiveImages/formats/wwfeaturesSGSplash",["jquery","module/responsiveImages/formats/wwfeatures16x9","common/util/inherits"],function(t,e,i){function n(t){this.image=t,this.imageNamespace="wwfeatures",this.arrFormats=[{name:"wwfeatures-130-73",dimensions:{width:130,height:73}},{name:"wwfeatures-240-300",dimensions:{width:240,height:300}},{name:"wwfeatures-400-500",dimensions:{width:400,height:500}},{name:"wwfeatures-480-600",dimensions:{width:480,height:600}},{name:"wwfeatures-560-700",dimensions:{width:560,height:700}},{name:"wwfeatures-624-351",dimensions:{width:624,height:351}},{name:"wwfeatures-976-549",dimensions:{width:976,height:549}},{name:"wwfeatures-1280-720",dimensions:{width:1280,height:720}},{name:"wwfeatures-1600-900",dimensions:{width:1600,height:900}}]}return i(n,e),n}),define("module/slideshow-gallery/background-manager",["lodash","jquery","module/slideshow-gallery/layout","module/responsiveImages/main","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures4x5","module/responsiveImages/formats/wwfeaturesSGSplash"],function(t,e,i,n,o,s,a){function r(){this.backgroundSelector="[data-background]",this.backgroundPortraitSelector="[data-portrait]"+this.backgroundSelector,this.backgroundLandscapeSelector="[data-landscape]"+this.backgroundSelector,this.splashBackgroundSelector="[data-background-splash]",this.layout=new i,this.responsiveImages=new n,this.initialised=!1}return r.prototype.init=function(){this.setupImages(),this.bindWindowEvents()},r.prototype.setupImages=function(){this.responsiveImages.add(e(this.backgroundPortraitSelector),s),this.responsiveImages.add(e(this.backgroundLandscapeSelector),o),this.responsiveImages.add(e(this.splashBackgroundSelector),a)},r.prototype.respondAll=function(){this.responsiveImages.respond()},r.prototype.load=function(i,n){var o=this.responsiveImages.getImages();t.each(o,function(t){e(t.el).is(i)&&(t.respond(),t.loadLazyImage(function(){"function"==typeof n&&n()}))})},r.prototype.handleWindowResize=function(){},r.prototype.bindWindowEvents=function(){e(window).on("resize",this.handleWindowResize.bind(this))},r}),define("module/slideshow-gallery/slideshow-gallery",["jquery","lodash","signals","mresize","lib/ecmaScript5","lib/domReady","actual","module/scroller","module/slideshow-gallery/start-overlay","module/slideshow-gallery/transition-overlay","module/slideshow-gallery/layout","module/slideshow-gallery/navigation","module/slideshow-gallery/background-manager"],function(t,e,i,n,o,s,a,r,l,c,d,u,p){var h=function(t){this.selector=t,this.backgroundSelector="[data-background]",this.slideSelector="[data-sg-slide]",this.slideContentsSelector="[data-sg-slide-contents]",this.slideTextSelector="[data-sg-slide-text]",this.paidContentSelector="[data-sg-slide-paid-content]",this.textInvisibleClass="is-invisible",this.contentSlideSelector="[data-sg-content-slide]",this.endSlateSelector="[data-sg-end-slate]",this.slideTypeDataAttr="data-sg-slide-type",this.slideTextColorDataAttr="data-sg-slide-text-color",this.slideHasAmbientVideoDataAttr="[data-sg-slide-has-ambient-video]",this.fullHeightElementSelector="[data-sg-full-height]",this.currentClass="is-current",this.firstContentSlideClass="is-first-content-slide",this.setupSignals(),this.startOverlay=new l,this.transitionOverlay=new c,this.scroller=new r,this.layout=new d,this.navigation=new u(this,t),this.isSlideTransitioning=!1,this.backgroundManager=new p};return h.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.selector.length>0&&(this.backgroundManager.init(),this.setFirstContentSlideClass(),this.bindWindowEvents(),this.startGallery(0),this.bindBodyEvents(),this.dispatchSignal("gallery-initialised"),this.setupAccessibility())},h.prototype.setFirstContentSlideClass=function(){this.getFirstContentSlide().addClass(this.firstContentSlideClass)},h.prototype.setupSignals=function(){this.slideChangeInitialiasedSignal=new i.Signal,this.slideChangeBackgroundLoadedSignal=new i.Signal,this.slideChangeTransitionEndSignal=new i.Signal,this.galleryStartedSignal=new i.Signal,this.galleryInitialisedSignal=new i.Signal,this.galleryStartOverlayHiddenSignal=new i.Signal},h.prototype.subscribe=function(t,e){switch(t){case"slide-change-initialised":this.slideChangeInitialiasedSignal.add(e);break;case"slide-change-background-loaded":this.slideChangeBackgroundLoadedSignal.add(e);break;case"slide-change-transition-end":this.slideChangeTransitionEndSignal.add(e);break;case"gallery-started":this.galleryStartedSignal.add(e);break;case"gallery-initialised":this.galleryInitialisedSignal.add(e);break;case"gallery-start-overlay-hidden":this.galleryStartOverlayHiddenSignal.add(e)}},h.prototype.startGallery=function(t){if(!this.isValidSlideIndex(t))return!1;var e=this,i=this.getSlideByIndex(t);this.backgroundManager.respondAll(),this.setCurrentSlide(i),this.setTextInvisible(),this.setIsSlideTransitioning(!0);var n=i.find(e.backgroundSelector);n&&n.length?this.loadBackground(n,e.handleGalleryStarted.bind(e)):this.handleGalleryStarted.bind(e)},h.prototype.handleGalleryStarted=function(){this.setLayout(),this.setTextVisible(),this.setIsSlideTransitioning(!1),this.startOverlay.hide(this.dispatchSignal("gallery-start-overlay-hidden"))},h.prototype.getViewportHeight=function(){return t(window).height()},h.prototype.getViewportWidth=function(){return t(window).width()},h.prototype.getSlideHeight=function(){return this.getViewportHeight()-this.getContainerOffset()},h.prototype.getSlides=function(){return this.getSelector().find(this.slideSelector)},h.prototype.getSlideContentHeight=function(e){var i=0;return e.find(this.slideContentsSelector).each(function(){i+=t(this).actual("outerHeight",{includeMargin:!0})}),i},h.prototype.getContainerOffset=function(){return this.getSelector().offset().top},h.prototype.getIsSlideTransitioning=function(){return this.isSlideTransitioning},h.prototype.setIsSlideTransitioning=function(t){e.isBoolean(t)&&(this.isSlideTransitioning=t)},h.prototype.getSlideMinHeight=function(t){var i=[this.getSlideHeight(),this.getSlideContentHeight(t)];return e.max(i)},h.prototype.setHeights=function(){e.each(this.getSlides(),function(e){this.setElementHeight(t(e))},this),this.setContainerHeight()},h.prototype.unsetHeights=function(){e.each(this.getSlides(),function(e){this.setElementHeight(t(e),"auto")},this),this.unsetContainerHeight()},h.prototype.setContainerHeight=function(t){var e=t||this.getCurrentSlide(),i=this.getSlideMinHeight(e);this.getSelector().css({height:i})},h.prototype.unsetContainerHeight=function(){this.getSelector().css({height:"auto"})},h.prototype.setElementHeight=function(e,i){var n=i||this.getSlideMinHeight(e);e.css({"min-height":n}).find(t(this.fullHeightElementSelector)).css({height:n})},h.prototype.getSlideIndex=function(t){return this.getSlides().index(t)},h.prototype.getCurrentSlideIndex=function(){var t=this.getCurrentSlide();return this.getSlideIndex(t)},h.prototype.getSlideByIndex=function(t){var e=this.getSlides();return!!e.eq(t)&&e.eq(t)},h.prototype.isValidSlideIndex=function(t){var e=this.getTotalSlides(),i=e-1;return t>=0&&t<=i},h.prototype.unsetCurrentSlide=function(t){return t.removeClass(this.currentClass)},h.prototype.setCurrentSlide=function(t){return 0!==t.find(".sg-slide-storyworks-read-all-wrapper").length&&(t.find(".sg-slide-storyworks-inner").addClass("sg-slide-storyworks-inner--read-more"),t.find(".sg-slide-storyworks-inner--container").addClass("sg-slide-storyworks-inner--read-more")),t.addClass(this.currentClass)},h.prototype.isCurrentSlide=function(t){return t.hasClass(this.currentClass)},h.prototype.getCurrentSlide=function(){var i=this,n=this.getSlides(),o=e.filter(n,function(e){return i.isCurrentSlide(t(e))});return t(o[0])},h.prototype.getTotalSlides=function(){return this.getSlides().length},h.prototype.isProgressSlide=function(t){return this.isContentSlide(t)||this.isEndSlate(t)},h.prototype.getProgressSlides=function(){var i=this,n=this.getSlides(),o=e.filter(n,function(e){return i.isProgressSlide(t(e))});return t(o)},h.prototype.isValidProgressIndex=function(t){return t&&e.isNumber(t)},h.prototype.isValidProgressTotal=function(t){return t&&e.isNumber(t)},h.prototype.getProgress=function(t){var e=this.getProgressIndex(t),i=this.getProgressTotal();return!(!this.isValidProgressIndex(e)||!this.isValidProgressTotal(i))&&{index:e,total:i}},h.prototype.getProgressTotal=function(){return this.getProgressSlides().length},h.prototype.getProgressDisplayIndex=function(t){return t+1},h.prototype.getProgressIndex=function(t){var e=this.getProgressSlides();return-1!==e.index(t)&&this.getProgressDisplayIndex(e.index(t))},h.prototype.getSplash=function(){var e=this.getSlides();return t(e[0])},h.prototype.getFirstContentSlide=function(){var e=this.getSlides();return t(e[1])},h.prototype.getLastSlide=function(){var e=this.getSlides(),i=this.getTotalSlides();return t(e[i-1])},h.prototype.getNextSlide=function(){var t=this.getCurrentSlide(),e=this.getSlideIndex(t),i=this.getSlideByIndex(e+1);return i.length?i:this.getSplash()},h.prototype.getPrevSlide=function(){var t=this.getCurrentSlide(),e=this.getSlideIndex(t),i=this.getSlideByIndex(e-1);return i.length?i:this.getLastSlide()},h.prototype.handleStart=function(){var t=this.layout.isVerticalScroll();return this.dispatchSignal("gallery-started"),t?this.handleStartVerticalScroll():this.changeSlide(this.getCurrentSlide(),this.getNextSlide())},h.prototype.handleSlideChange=function(t){if(e.isString(t)){switch(t){case"backwards":this.changeSlide(this.getCurrentSlide(),this.getPrevSlide());break;case"forwards":this.changeSlide(this.getCurrentSlide(),this.getNextSlide())}this.dispatchSignal("slide-change-initialised"),this.setIsSlideTransitioning(!0)}},h.prototype.dispatchSignal=function(t,i){var n=this.getCurrentSlide(),o={contentSlideType:this.getContentSlideType(n),textColor:this.getSlideTextColor(n),currentSlideIndex:this.getSlideIndex(n),firstContentSlideTextColor:this.getSlideTextColor(this.getFirstContentSlide()),totalSlides:this.getTotalSlides(),isSplash:this.isSplash(n),isFirstContentSlide:this.isFirstContentSlide(n),isContentSlide:this.isContentSlide(n),isImageOnlySlide:this.isImageOnlySlide(n),isVideoOnlySlide:this.isVideoOnlySlide(n),isSidebarSlide:this.isSidebarSlide(n),isEndSlate:this.isEndSlate(n),hasAmbientVideo:this.hasAmbientVideo(n),progress:this.getProgress(n),slideSelector:this.slideSelector,slideType:this.getSlideType(n),currentSlideElement:n[0]};switch(i=e.extend(o,i||{}),t){case"slide-change-initialised":this.slideChangeInitialiasedSignal.dispatch(i);break;case"slide-change-background-loaded":this.slideChangeBackgroundLoadedSignal.dispatch(i);break;case"slide-change-transition-end":this.slideChangeTransitionEndSignal.dispatch(i);break;case"gallery-started":this.galleryStartedSignal.dispatch(i);break;case"gallery-initialised":this.galleryInitialisedSignal.dispatch(i);break;case"gallery-start-overlay-hidden":this.galleryStartOverlayHiddenSignal.dispatch(i)}},h.prototype.handleStartVerticalScroll=function(){var t=this.getSplash(),e=this.getFirstContentSlide();$slides=this.getSlides(),this.unsetHeights(),this.unsetCurrentSlide(t),this.setCurrentSlide(e),$slides.show(),this.scroller.scrollTo({$target:e,speed:500})},h.prototype.setTextVisible=function(){t(this.slideTextSelector).removeClass(this.textInvisibleClass)},h.prototype.setTextInvisible=function(){t(this.slideTextSelector).addClass(this.textInvisibleClass)},h.prototype.handleSlideShown=function(t,e){var i=this;this.scroller.scrollToTop(200),this.unsetCurrentSlide(t),this.setCurrentSlide(e),this.setHeights(),this.navigation.updateNavigation(i.isSplash(e),i.isEndSlate(e)),t.hide(),e.show(),this.updateARIAHiddenState(t,!0),this.updateARIAHiddenState(e,!1),this.transitionOverlay.hide(),this.dispatchSignal("slide-change-transition-end"),this.setTextVisible(),this.setLayout(),this.setIsSlideTransitioning(!1)},h.prototype.updateARIAHiddenState=function(t,i){e.isBoolean(i)&&t.length>0&&t.attr("aria-hidden",i)},h.prototype.setupAccessibility=function(){this.updateARIAHiddenState(this.getSlides(),!0),this.updateARIAHiddenState(this.getSplash(),!1)},h.prototype.transitionSlideHeights=function(t,e){var i=this.getSlideMinHeight(t),n=this.getSlideMinHeight(e);i<n?(this.setElementHeight(t,n),this.setElementHeight(e,n),this.setContainerHeight(e)):this.layout.isSlideshow()&&this.setHeights()},h.prototype.changeSlide=function(t,e){if(this.isValidNavigationStep(t,e)){var i=this;if(this.transitionOverlay.show(),this.layout.isSlideshow()){e.find(i.backgroundSelector).length?this.loadBackground(e.find(i.backgroundSelector),i.handleBackgroundLoaded.bind(i,t,e)):this.handleBackgroundLoaded(t,e)}}},h.prototype.handleBackgroundLoaded=function(t,e){var i=this;this.scroller.scrollToTop(200),this.dispatchSignal("slide-change-background-loaded"),this.setTextInvisible(),this.transitionSlideHeights(t,e),e.hide(),e.fadeIn(200,function(){i.handleSlideShown(t,e)})},h.prototype.isValidNavigationStep=function(t,e){return!(this.isSplash(t)&&this.isEndSlate(e)||this.isSplash(e)&&this.isEndSlate(t))},h.prototype.loadBackground=function(t,e){this.backgroundManager.load(t,e)},h.prototype.setLayout=function(){this.layout.isVerticalScroll()?this.setVerticalScrollLayout():this.setSlideshowLayout()},h.prototype.isSplash=function(t){return 0===this.getSlideIndex(t)},h.prototype.isFirstContentSlide=function(t){return 1===this.getSlideIndex(t)},h.prototype.isContentSlide=function(t){return!t.is(this.paidContentSelector)&&t.is(this.contentSlideSelector)},h.prototype.isImageOnlySlide=function(t){return"image-only"===this.getContentSlideType(t)},h.prototype.isVideoOnlySlide=function(t){return"video-only"===this.getContentSlideType(t)},h.prototype.isSidebarSlide=function(t){return/^text-/.test(this.getContentSlideType(t))},h.prototype.getSlideType=function(t){return this.isSplash(t)?"splash":this.isContentSlide(t)?"content-slide":!!this.isEndSlate(t)&&"end-slate"},h.prototype.isEndSlate=function(t){return t.is(this.endSlateSelector)},h.prototype.setVerticalScrollLayout=function(){this.unsetHeights(),this.getSplash().show(),this.getSlides().show()},h.prototype.setSlideshowLayout=function(){var t=this.getCurrentSlide(),e=this.getSlides().not(t);this.setHeights(),e.hide(),this.loadBackground(t.find(this.backgroundSelector)),t.show()},h.prototype.isGalleryElement=function(t){return this.getSelector().find(t).length>0},h.prototype.handleWindowResize=function(){this.setLayout()},h.prototype.handleWindowClick=function(t){this.isGalleryElement(t.target)||this.setLayout()},h.prototype.bindWindowEvents=function(){t(window).on("click",this.handleWindowClick.bind(this)).on("resize",this.handleWindowResize.bind(this))},h.prototype.bindBodyEvents=function(){this.layout.isSlideshow()&&(t("body").on("mresize",this.handleBodyResize.bind(this)),t("body").data("mresize").throttle=20)},h.prototype.handleBodyResize=function(){this.getIsSlideTransitioning()||this.setLayout()},h.prototype.setSelector=function(e){this.selector=t(e)},h.prototype.getSelector=function(){return this.selector},h.prototype.getContentSlideType=function(t){return t.attr(this.slideTypeDataAttr)},h.prototype.getSlideTextColor=function(t){return t.attr(this.slideTextColorDataAttr)},h.prototype.hasAmbientVideo=function(t){return t.is(this.slideHasAmbientVideoDataAttr)},h}),define("util/transition-event-prefixer",[],function(){return function(){var t,e=document.createElement("div"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(void 0!==e.style[t])return i[t]}}),define("module/share-tools/base",["jquery","lodash","lib/ecmaScript5","lib/domReady","util/transition-event-prefixer","model/mediaQuery"],function(t,e,i,n,o,s){var a=function(t){return this.defaults={viewportModeGroups:{docked:[1,2,3],floating:[4]},class:""},this.settings=e.merge(this.defaults,t),this.viewportModeGroups=this.settings.viewportModeGroups,this.selector=this.settings.selector,this.transitionEvent=o(),this};return a.prototype.init=function(){var t=this.getSelector();this.setSelector(t)&&(this.setupListeners(),this.setupSelectors(),this.setupUIEvents(),this.setShouldBeShown(!0),this.toggleVisibility(),this.bindKeyboardEvents(),this.bindElementTransitionEvents(),this.updateTabIndexes(!1),this.setViewportMode(s.getGroup()))},a.prototype.setupListeners=function(){s.subscribe("groupChanged",this.handleMediaGroupChange.bind(this))},a.prototype.handleMediaGroupChange=function(t){this.setViewportModeChanged(this.hasViewportModeChanged(t)),this.setViewportMode(t)},a.prototype.getGroupNameByGroupNumber=function(t){var i;return e.each(this.viewportModeGroups,function(n,o){e.contains(n,t)&&(i=o)},this),i},a.prototype.setViewportModeChanged=function(t){e.isBoolean(t)&&(this.viewportModeChanged=t)},a.prototype.getViewportModeChanged=function(t){return this.viewportModeChanged},a.prototype.hasViewportModeChanged=function(t){return this.getViewportMode()!==this.getGroupNameByGroupNumber(t)},a.prototype.setViewportMode=function(t){if(e.isNumber(t)){var i=this.getGroupNameByGroupNumber(t);e.isString(i)&&(this.viewportMode=i)}},a.prototype.getViewportMode=function(){return this.viewportMode},a.prototype.setupSelectors=function(){this.toggleSelector="[data-share-toggle]",this.closeSelector="[data-share-close]",this.controlsSelector="[data-share-controls]",this.contentSelector="[data-share-content]",this.shareButton=".share-button",this.$toggle=this.getSelector().find(this.toggleSelector),this.$close=this.getSelector().find(this.closeSelector),this.$content=this.getSelector().find(this.contentSelector),this.$controls=this.getSelector().find(this.controlsSelector),this.openedClass="is-opened",this.readyClass="is-ready",this.getSelector().addClass(this.settings.class)},a.prototype.setupUIEvents=function(){this.handleToggleClick=this.handleToggleClick.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this),this.handleWindowResize=this.handleWindowResize.bind(this),this.bindElementEvents(),this.bindWindowEvents()},a.prototype.bindElementEvents=function(){t("body").on("click",this.handleWindowClick.bind(this)),this.$toggle.on("click",this.handleToggleClick),this.$close.on("click",this.handleCloseClick)},a.prototype.bindWindowEvents=function(){t(window).on("resize",this.handleWindowResize)},a.prototype.handleToggleClick=function(){this.toggle()},a.prototype.handleCloseClick=function(){this.close()},a.prototype.handleWindowClick=function(t){var e=this.getTargetElementFromEvent(t);this.isOpen()&&!this.isWithinParent(e)&&(this.canDock()&&t.preventDefault(),this.close())},a.prototype.handleWindowResize=function(){this.handleViewportChange()},a.prototype.handleViewportChange=function(){this.getViewportModeChanged()&&(this.isOpen()&&this.canDock()?this.close():this.canFloat()&&this.updateTabIndexes(!1)),this.toggleVisibility()},a.prototype.toggleVisibility=function(){this.toggleDockedVisibility(),this.toggleFloatingVisibility()},a.prototype.toggleDockedVisibility=function(){this.canDock()&&this.show()},a.prototype.toggleFloatingVisibility=function(){this.canFloat()&&(this.getShouldBeShown()?this.show():this.hide())},a.prototype.getShouldBeShown=function(){return this.shouldBeShown},a.prototype.setShouldBeShown=function(t){e.isBoolean(t)&&(this.shouldBeShown=t)},a.prototype.toggle=function(){this.isOpen()?this.close():this.open()},a.prototype.close=function(){this.setOpened(!1),this.getSelector().removeClass(this.openedClass).attr("aria-expanded",!1)},a.prototype.open=function(){this.setOpened(!0),this.getSelector().addClass(this.openedClass).attr("aria-expanded",!0)},a.prototype.show=function(){this.getSelector().addClass(this.readyClass)},a.prototype.hide=function(){this.getSelector().removeClass(this.readyClass)},a.prototype.getTargetElementFromEvent=function(e){return!(!e||!e.target)&&t(e.target)},a.prototype.getSelector=function(){return this.selector},a.prototype.isWithinParent=function(t){return this.getSelector().find(t).length>0},a.prototype.isOpen=function(){return this.opened},a.prototype.setOpened=function(t){e.isBoolean(t)&&(this.opened=t)},a.prototype.setSelector=function(e){return this.selector=t(e),this.selector.length>0},a.prototype.handleKeyup=function(t){switch(t.which){case 27:this.isOpen()&&this.close()}},a.prototype.updateFocusState=function(t){t.length>0&&e.each([this.$controls,this.$content],function(e){t.is(e)&&(this.isOpen()?(this.focusElement(this.$close),this.updateTabIndexes(!0)):(this.focusElement(this.$toggle),this.updateTabIndexes(!1)))},this)},a.prototype.handleControlsTransitionEnd=function(t){this.handleTransition(t)},a.prototype.handleContentTransitionEnd=function(t){this.handleTransition(t)},a.prototype.handleTransition=function(e){this.updateFocusState(t(e.target))},a.prototype.focusElement=function(t){t.length>0&&t.focus()},a.prototype.updateTabIndexes=function(t){var e=this.getSelector().find(this.shareButton);s.getGroup();this.canFloat()?!0===t?(e.add(this.$close).removeAttr("tabindex"),this.$toggle.attr("tabindex",-1)):(e.add(this.$close).attr("tabindex",-1),this.$toggle.removeAttr("tabindex")):this.canDock()&&e.add(this.$close).add(this.$toggle).removeAttr("tabindex")},a.prototype.canFloat=function(){return s.isCurrentGroupInPermittedGroupString(this.viewportModeGroups.floating.join("_"))},a.prototype.canDock=function(){return s.isCurrentGroupInPermittedGroupString(this.viewportModeGroups.docked.join("_"))},a.prototype.bindKeyboardEvents=function(){t(window).on("keyup",this.handleKeyup.bind(this))},a.prototype.bindElementTransitionEvents=function(){this.$controls.on(this.transitionEvent,this.handleControlsTransitionEnd.bind(this)),this.$content.on(this.transitionEvent,this.handleContentTransitionEnd.bind(this))},a}),define("module/share-tools/slideshow-gallery",["common/util/extends","jquery","lodash","lib/ecmaScript5","lib/domReady","module/share-tools/base","util/transition-event-prefixer","module/slideshow-gallery/layout","model/mediaQuery"],function(t,e,i,n,o,s,a,r,l){function c(t){return s.apply(this,arguments),this.defaults={slideshowMediator:null},this.settings=i.merge(this.settings,this.defaults,t),this.slideshowMediator=this.settings.slideshowMediator,this.layout=new r,this}return t(c,s,{init:function(){s.prototype.init.apply(this,arguments);var t=this.getSelector();this.setSelector(t)&&(this.setShouldBeShown(!1),this.toggleVisibility(),this.setupSpacer())},setupListeners:function(){s.prototype.setupListeners.apply(this,arguments);var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-started",this.handleGalleryStarted.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},getSlideshowMediator:function(){return this.slideshowMediator},setupSelectors:function(){s.prototype.setupSelectors.apply(this,arguments),this.spacerAttr="data-sg-spacer",this.spacer="["+this.spacerAttr+"]"},toggleVisibility:function(){s.prototype.toggleVisibility.apply(this,arguments),this.toggleSpacer()},handleGalleryStarted:function(t){this.setDisplayState(t),this.toggleVisibility()},handleSlideChangeTransitionEnd:function(t){this.setDisplayState(t),this.toggleVisibility()},setDisplayState:function(t){t&&i.has(t,"isContentSlide")&&t.isContentSlide?this.setShouldBeShown(!0):this.setShouldBeShown(!1)},setupSpacer:function(){if(e(this.spacer).length<1){var t=e("<div "+this.spacerAttr+"></div>").hide();e("body").append(t)}},toggleSpacer:function(){var t=e(this.spacer);if(this.layout.isVerticalScroll()){var i=this.getToggleHeight();t.css({height:i}),t.show()}else t.hide()},getToggleHeight:function(){return this.$toggle.height()}}),c}),define("waypoints",["jquery"],function(t){!function(){"use strict";function t(n){if(!n)throw new Error("No options passed to Waypoint constructor");if(!n.element)throw new Error("No element option passed to Waypoint constructor");if(!n.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,n),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=n.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var n in i)e.push(i[n]);for(var o=0,s=e.length;o<s;o++)e[o][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=o.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,n[t.waypointContextKey]=this,i+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,n={},o=window.Waypoint,s=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete n[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,o.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){e.didScroll&&!o.isTouch||(e.didScroll=!0,o.requestAnimationFrame(t))})},e.prototype.handleResize=function(){o.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var n=e[i],o=n.newScroll>n.oldScroll,s=o?n.forward:n.backward;for(var a in this.waypoints[i]){var r=this.waypoints[i][a],l=n.oldScroll<r.triggerPoint,c=n.newScroll>=r.triggerPoint,d=l&&c,u=!l&&!c;(d||u)&&(r.queueTrigger(s),t[r.group.id]=r.group)}}for(var p in t)t[p].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?o.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?o.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var n=0,o=t.length;n<o;n++)t[n].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),n={};this.handleScroll(),t={horizontal:{
contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var s in t){var a=t[s];for(var r in this.waypoints[s]){var l,c,d,u,p,h=this.waypoints[s][r],m=h.options.offset,g=h.triggerPoint,f=0,b=null==g;h.element!==h.element.window&&(f=h.adapter.offset()[a.offsetProp]),"function"==typeof m?m=m.apply(h):"string"==typeof m&&(m=parseFloat(m),h.options.offset.indexOf("%")>-1&&(m=Math.ceil(a.contextDimension*m/100))),l=a.contextScroll-a.contextOffset,h.triggerPoint=f+l-m,c=g<a.oldScroll,d=h.triggerPoint>=a.oldScroll,u=c&&d,p=!c&&!d,!b&&u?(h.queueTrigger(a.backward),n[h.group.id]=h.group):!b&&p?(h.queueTrigger(a.forward),n[h.group.id]=h.group):b&&a.oldScroll>=h.triggerPoint&&(h.queueTrigger(a.forward),n[h.group.id]=h.group)}}return o.requestAnimationFrame(function(){for(var t in n)n[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in n)n[t].refresh()},e.findByElement=function(t){return n[t.waypointContextKey]},window.onload=function(){s&&s(),e.refreshAll()},o.requestAnimationFrame=function(e){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t).call(window,e)},o.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),n[this.axis][this.name]=this}var n={vertical:{},horizontal:{}},o=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var n=this.triggerQueues[i],o="up"===i||"left"===i;n.sort(o?e:t);for(var s=0,a=n.length;s<a;s+=1){var r=n[s];(r.options.continuous||s===n.length-1)&&r.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=o.Adapter.inArray(e,this.waypoints);return i===this.waypoints.length-1?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=o.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=o.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return n[t.axis][t.name]||new i(t)},o.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(i,n){t[n]=e[n]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],n=arguments[0];return t.isFunction(arguments[0])&&(n=t.extend({},arguments[1]),n.handler=arguments[0]),this.each(function(){var o=t.extend({},n,{element:this});"string"==typeof o.context&&(o.context=t(this).closest(o.context)[0]),i.push(new e(o))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}()}),define("module/slideshow-gallery/inline-image-manager",["lodash","jquery","module/slideshow-gallery/layout","module/responsiveImages/main","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures4x5","waypoints"],function(t,e,i,n,o,s,a){function r(t,e){this.selector=t,this.slideshowMediator=e,this.layout=new i,this.responsiveImages=new n,this.initialised=!1}return r.prototype.init=function(){var t=this.getSelector();this.setSelector(t)&&(this.setupSelectors(),this.setupSettings(),this.setupListeners(),this.setupResponsiveImages(),this.bindWindowEvents())},r.prototype.setupSelectors=function(){this.lazyLoadSelector="img[data-lazy-load=true]",this.$lazyLoadSelector=this.getSelector().find(this.lazyLoadSelector),this.landscapeSelector="[data-landscape]"+this.lazyLoadSelector,this.portraitSelector="[data-portrait]"+this.lazyLoadSelector},r.prototype.setupSettings=function(){this.lazyLoadOffset="100%",this.lazyLoadedClass="is-lazy-loaded",this.enableDelay=200,this.lazyLoadAddClassDelay=200},r.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-start-overlay-hidden",this.handleGalleryStartOverlayHidden.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},r.prototype.getSlideshowMediator=function(){return this.slideshowMediator},r.prototype.setupResponsiveImages=function(){this.responsiveImages.add(this.getSelector().find(this.portraitSelector),s),this.responsiveImages.add(this.getSelector().find(this.landscapeSelector),o)},r.prototype.initWaypoints=function(){var t=this,e={handler:function(e){t.lazyLoad(this.element)},offset:t.lazyLoadOffset};this.setInitialised(!0),this.$lazyLoadSelector.waypoint(e)},r.prototype.lazyLoad=function(i){var n=this.responsiveImages.getImages(),o=this,s=e(i);t.each(n,function(t){e(t.el).is(s)&&(t.respond(),t.loadLazyImage(function(){setTimeout(function(){s.addClass(o.lazyLoadedClass)},this.lazyLoadAddClassDelay)}))})},r.prototype.disableWaypoints=function(){Waypoint.disableAll()},r.prototype.enableWaypoints=function(){Waypoint.enableAll()},r.prototype.handleGalleryStartOverlayHidden=function(t){this.layout.isVerticalScroll()&&this.initWaypoints()},r.prototype.handleSlideChangeTransitionEnd=function(i){t.each(this.$lazyLoadSelector,function(t){e(t).is(":visible")&&this.lazyLoad(t)},this)},r.prototype.isInitialised=function(){return this.initialised},r.prototype.setInitialised=function(e){t.isBoolean(e)&&(this.initialised=e)},r.prototype.handleChangeToVerticalScroll=function(){var t=this;this.isInitialised()?setTimeout(function(){t.enableWaypoints()},this.enableDelay):setTimeout(function(){t.initWaypoints()},this.enableDelay)},r.prototype.handleWindowResize=function(){this.layout.isSlideshow()?this.disableWaypoints():this.layout.hasChangedToVerticalScroll()&&this.handleChangeToVerticalScroll()},r.prototype.bindWindowEvents=function(){e(window).on("resize",this.handleWindowResize.bind(this))},r.prototype.getSelector=function(){return this.selector},r.prototype.setSelector=function(t){return this.selector=e(t),this.selector.length>0},r}),define("lib/jquery-cookie",["jquery"],function(t){return t.cookie=function(e,i,n){if(arguments.length>1&&"[object Object]"!==String(i)){if(n=t.extend({},n),null!==i&&void 0!==i||(n.expires=-1),"number"==typeof n.expires){var o=n.expires,s=n.expires=new Date;s.setDate(s.getDate()+o)}return i=String(i),document.cookie=[encodeURIComponent(e),"=",n.raw?i:encodeURIComponent(i),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=i||{};var a,r=n.raw?function(t){return t}:decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?r(a[1]):null},t}),define("model/geolocation",[],function(){var t=!1;return"undefined"!=typeof orb&&void 0!==orb.fig&&1==orb.fig("uk")&&(t=!0),{isUK:function(){return t}}}),define("module/video/adPolicyMonitor",["lodash","lib/jquery-cookie","util/logger","common/config","model/geolocation"],function(t,e,i,n,o){function s(){if(null!==a)throw new Error("Cannot instantiate more than one AdPolicyMonitor, use AdPolicyMonitor.getInstance()");this.initialize()}var a=null;return s.prototype={initialize:function(){this.isAdpolicyFrequencySet()||this.setupAdPolicyDisplayFrequency()},shouldShowAds:function(){return!this.isAdvertisingDisabled()&&!o.isUK()},isAdvertisingDisabled:function(){return void 0!==window.advertising&&void 0!==window.advertising.adsDisabled&&!0===window.advertising.adsDisabled},isAdpolicyFrequencySet:function(){return null!==e.cookie("adpolicyAdDisplayFrequency")},setupAdPolicyDisplayFrequency:function(){t.has(n.get(),"adpolicy")&&t.has(n.get().adpolicy,"ad-display-frequency")&&self.setAdDisplayFrequency(n.get().adpolicy["ad-display-frequency"])},setAdDisplayFrequency:function(t){var i=new Date;i.setSeconds(i.getSeconds()+t),e.cookie("adpolicyAdDisplayFrequency",t,{expires:i,path:n.get().domain})}},s.getInstance=function(){return null===a&&(a=new s),a},s.getInstance()}),define("module/bbcdotcomMediator",["bbcdotcom/av/emp/adverts","util/logger","config"],function(t,e,i){return new function(){this.init=function(){this.enableCompanions()},this.addVideo=function(i,n){try{t.addSmpPlugin(i,n)}catch(t){e.warn(t)}},this.layoutAds=function(){try{bbcdotcom.adverts.layout.reset()}catch(t){e.warn(t)}},this.enableCompanions=function(){try{t.enableCompanions()}catch(t){e.warn(t)}}}}),define("module/analytics/HTML5VideoMediator",["lodash","lib/ecmaScript5"],function(t,e){"use strict";function i(t,e){this.analytics=t,this.logger=e,this.playEvent=null,this.playerAndData={player:{},data:{videoPlaysAutomatically:!0,mediaId:"",mediaPlayerAdsEnabled:""},flags:{playlistStarted:!1,programStarted:!1,isPaused:!1,isSeeking:!1,adRequestOrPlaybackInProgress:!1,ended:!1,playlistEnded:!1,trackProgramStartOnNextTimeupdate:!1}},this.handlePlaylistLoading=this.handlePlaylistLoading.bind(this),this.handlePlaylistLoaded=this.handlePlaylistLoaded.bind(this),this.handleMetaDataLoaded=this.handleMetaDataLoaded.bind(this),this.handleUserPlay=this.handleUserPlay.bind(this),this.handlePlaying=this.handlePlaying.bind(this),this.handlePause=this.handlePause.bind(this),this.handleTimeUpdate=this.handleTimeUpdate.bind(this),this.handleSeeking=this.handleSeeking.bind(this),this.handleEnded=this.handleEnded.bind(this),this.handlePlaylistEnded=this.handlePlaylistEnded.bind(this),this.handleAdsPlugin=this.handleAdsPlugin.bind(this)}return t.extend(i.prototype,{reset:function(t){t.flags.playlistStarted=!1,t.flags.programStarted=!1,t.flags.metadataLoaded=!1,t.flags.isPaused=!1,t.flags.isSeeking=!1,t.flags.adRequestOrPlaybackInProgress=!1,t.flags.ended=!1,t.flags.playlistEnded=!1,t.flags.trackProgramStartOnNextTimeupdate=!1},updateMetadata:function(e){e.data.mediaType=e.player.kind(),e.data.mediaPlayerName=e.player.name(),e.data.mediaPlayerVolume=(100*e.player.volume()).toString(),e.data.adId=null,t.has(e.player,"bumpVersion")&&(e.data.mediaPlayerVersion=e.player.bumpVersion);var i=e.player.width(),n=e.player.height();t.isString(i)&&t.isString(n)?e.data.mediaPlayerSize=i+"x"+n:e.data.mediaPlayerSize=null},track:function(t,e,i){var n=this.analytics;if(void 0===n)return!1;this.updateMetadata(e),!0===i&&(e.data.mediaOffset=0),this.logger.debug("HTML5VideoMediator:track: "+t,e.data),n.trackAVEvent(t,e.data)},checkIfPlaylistHasStarted:function(t){t.flags.playlistStarted||(t.flags.playlistStarted=!0,this.track("startPlaylist",t))},addEventListeners:function(e,i){var n=this.playerAndData;n.player=e,t.isObject(i)&&(t.has(i,"mediaId")&&(n.data.mediaId=i.mediaId),t.has(i,"isAutoplay")&&(n.data.videoPlaysAutomatically=i.isAutoplay),t.has(i,"hasAdverts")&&(n.data.mediaPlayerAdsEnabled=i.hasAdverts)),n.player.bind("playlistLoading",this.handlePlaylistLoading),n.player.bind("playlistLoaded",this.handlePlaylistLoaded),n.player.bind("loadedmetadata",this.handleMetaDataLoaded),n.player.bind("userPlay",this.handleUserPlay),n.player.bind("playing",this.handlePlaying),n.player.bind("pause",this.handlePause),n.player.bind("timeupdate",this.handleTimeUpdate),n.player.bind("seeking",this.handleSeeking),n.player.bind("ended",this.handleEnded),n.player.bind("playlistEnded",this.handlePlaylistEnded),n.player.bind("adsPlugin",this.handleAdsPlugin)},handlePlaylistLoading:function(t){this.logger.debug("HTML5VideoMediator:playlistLoading:event",t)},handlePlaylistLoaded:function(t){var e=this.playerAndData;this.logger.debug("HTML5VideoMediator:playlistLoaded:event",t),this.reset(e),e.data.mediaName=t.playlist.title;var i=t.playlist.items;e.data.isLive=i[i.length-1].live},setMetadataLoaded:function(t){var e=this.playerAndData;e.flags.metadataLoaded||(e.flags.metadataLoaded=!0)},handleMetaDataLoaded:function(t){this.logger.debug("HTML5VideoMediator:loaded metadata:event",t),this.setMetadataLoaded(t)},handleUserPlay:function(t){this.logger.debug("HTML5VideoMediator:userPlay:event",t),this.playerAndData.data.videoPlaysAutomatically=!1},trackPlaying:function(e){var i=this.playerAndData,n=this.logger;this.checkIfPlaylistHasStarted(i),n.debug("HTML5VideoMediator:TrackPlaying statuses",{"playerAndData.flags.programStarted":i.flags.programStarted,"playerAndData.flags.adRequestOrPlaybackInProgress":i.flags.adRequestOrPlaybackInProgress,"playerAndData.flags.metadataLoaded":i.flags.metadataLoaded,"playerAndData.flags.isPaused":i.flags.isPaused}),n.debug("HTML5VideoMediator:TrackPlaying event",e),t.has(e,"type")&&"playing"==t.trim(e.type).toLowerCase()&&t.has(e,"identifier")&&t.has(e,"kind")&&"programme"==t.trim(e.kind).toLowerCase()&&(n.debug("HTML5VideoMediator:TrackPlaying START CLIP"),i.data.mediaId=t.trim(e.identifier).toLowerCase(),i.flags.isSeeking?(i.flags.isSeeking=!1,this.track("endSeek",i,!1)):i.flags.isPaused?(i.flags.isPaused=!1,this.track("endPause",i,!1)):i.flags.programStarted||(i.flags.programStarted=!0,this.track("startClip",i,!0)))},handlePlaying:function(t){this.logger.debug("HTML5VideoMediator:playing:event",t),this.playEvent=t},handlePause:function(t){var e=this.playerAndData;this.logger.debug("HTML5VideoMediator:pause:event",t),this.updateMetadata(e),(0===e.data.mediaLength||e.data.mediaOffset+1<e.data.mediaLength)&&(e.flags.isPaused=!0,this.track("startPause",e))},handleTimeUpdate:function(t){var e=this.playerAndData,i=this.playEvent;this.logger.debug("HTML5VideoMediator:timeupdate:event",t),e.data.mediaLength=t.duration,e.data.mediaOffset=t.currentTime,null!==i&&(i.duration=e.data.mediaLength,i.currentTime=e.data.mediaOffset,this.trackPlaying(i),i=null),e.flags.isSeeking&&(e.flags.isSeeking=!1,this.track("endSeek",e))},handleSeeking:function(t){var e=this.playerAndData;this.logger.debug("HTML5VideoMediator:seeking:event",t),e.flags.isSeeking=!0,this.track("startSeek",e)},handleEnded:function(t){var e=this.playerAndData;this.logger.debug("HTML5VideoMediator:ended:event",t),e.flags.ended=!0,this.track("endClip",e),e.flags.playlistEnded&&this.track("endPlaylist",e)},handlePlaylistEnded:function(t){var e=this.playerAndData;this.logger.debug("HTML5VideoMediator:playlistEnded:event",t),e.flags.playlistEnded=!0,e.flags.ended&&this.track("endPlaylist",e)},handleAdsPlugin:function(t){var e=this.playerAndData;switch(this.logger.debug("HTML5VideoMediator:adsPlugin:event",t),!0===e.flags.playlistEnded&&(delete e.data.mediaLength,delete e.data.mediaOffset),t.id){case"adRequest":e.flags.adRequestOrPlaybackInProgress=!0,this.checkIfPlaylistHasStarted(e);break;case"adEnded":e.flags.adRequestOrPlaybackInProgress=!1,this.setMetadataLoaded(t),this.track("endAdvert",e);break;case"adStarted":this.checkIfPlaylistHasStarted(e),this.track("startAdvert",e);break;case"adError":e.flags.adRequestOrPlaybackInProgress=!1}}}),i}),define("model/isBBCVerticalURL",[],function(){var t=["autos","capital","culture","future","travel","earth","earth"];return function(e){var i=/\.rss|\.atom/,n=!1,o=e||"";for(var s in t)if(verticaPattern="/"+t[s],-1!=window.document.referrer.indexOf(verticaPattern)){n=!0;break}return n&&!i.test(o)}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("module/video/SMPPlayer",["util/logger","lib/ecmaScript5","lib/domReady","orb/api","bump-3","module/video/adPolicyMonitor","module/bbcdotcomMediator","module/analytics/main","module/analytics/HTML5VideoMediator","model/isBBCVerticalURL","model/geolocation","module/responsiveImages/responsiveImage","module/responsiveImages/formats/wwfeatures16x9","signals"],function(t,e,i,n,o,s,a,r,l,c,d,u,p,h){var m=function(t,e){return this.mp={},this.strSelector=t,this.config=e,this.playlistLoadedSignal=new h.Signal,this.playlistEndedSignal=new h.Signal,this.videoPlayingSignal=new h.Signal,this.errorSignal=new h.Signal,this};return m.prototype.init=function(){this.setConfig(this.config),this.setSelector(this.strSelector)&&this.setupPlayer()},m.prototype.setConfig=function(t){var e=["canAutoplay","canAutoplayInUK","defaultMediaProfile"];void 0===t&&(t={});for(var i in e)void 0===t[e[i]]&&(t[e[i]]=!1);!1===t.defaultMediaProfile&&(t.defaultMediaProfile="mc"),this.config=t},m.prototype.getConfig=function(){return this.config},m.prototype.subscribe=function(t,e){switch(t){case"playlistLoaded":this.playlistLoadedSignal.add(e);break;case"playlistEnded":this.playlistEndedSignal.add(e);break;case"videoPlaying":this.videoPlayingSignal.add(e);break;case"error":this.errorSignal.add(e)}},m.prototype.playlistLoaded=function(){this.playlistLoadedSignal.dispatch(this.getPlayer())},m.prototype.playlistEnded=function(){this.playlistEndedSignal.dispatch(this.getPlayer())},m.prototype.videoPlaying=function(){this.videoPlayingSignal.dispatch(this.getPlayer())},m.prototype.error=function(e){t.error(e),this.errorSignal.dispatch(this.getPlayer(),e)},m.prototype.setupPlayer=function(){var e,i={product:"news",ui:{colour:this.getSelector().data("brandColor")},autoplay:this.isAutoplay(),playerProfile:"smp",mediaProfile:this.getConfig().defaultMediaProfile,mediator:{host:"open.live.bbc.co.uk"},responsive:!0};e=this.getSelector().player(i),this.setPlayer(e),this.resize(),a.addVideo(this.getSelector().attr("id"),e),this.addEventListeners(),e.load(),new l(r,t).addEventListeners(this.getPlayer(),{isAutoplay:this.isAutoplay(),hasAdverts:this.showAdverts()})},m.prototype.showAdverts=function(){return s.shouldShowAds()},m.prototype.addEventListeners=function(){this.getPlayer().bind("playlistLoaded",this.playlistLoaded.bind(this)),this.getPlayer().bind("playlistEnded",this.playlistEnded.bind(this)),this.getPlayer().bind("playing",this.videoPlaying.bind(this)),this.getPlayer().bind("error",this.error.bind(this)),n.layout(this.resize.bind(this))},m.prototype.isAutoplay=function(){return!!(this.getConfig().canAutoplayInUK||this.getConfig().canAutoplay&&!d.isUK())},m.prototype.getHoldingImage=function(t){if(void 0!==t){var e,i,n=new Image,o=this.getVideoPlayerDimensions(),s=new p(n);if(n.src=t,e=new u(n,s.getFormatsForImage()),void 0!==(i=e.getFormatForWidth(o.width)))return i.src}return t},m.prototype.loadVideo=function(t){try{if("object"!==(void 0===t?"undefined":_typeof(t))||"string"!=typeof t.title||"string"!=typeof t.vpid)throw new Error("Invalid parameters provided for loading video",t);var e={title:t.title,holdingImageURL:this.getHoldingImage(t.imageURL),items:[{vpid:t.vpid}]};this.showAdverts()&&!0===t.showAds&&e.items.unshift({kind:"advert"}),"string"==typeof t.mediaProfile&&t.mediaProfile!==this.getCurrentMediaProfile()&&this.updateSettings({mediaProfile:t.mediaProfile}),this.loadPlaylist(e)}catch(t){this.error(t)}},m.prototype.updateSettings=function(t){this.getPlayer().settings(t)},m.prototype.getCurrentMediaProfile=function(){return this.getPlayer().settings().mediaProfile},m.prototype.loadPlaylist=function(t){this.getPlayer().loadPlaylist(t,{autoplay:this.isAutoplay()})},m.prototype.setPlayer=function(t){this.mp=t},m.prototype.getPlayer=function(){return this.mp},m.prototype.play=function(){this.getPlayer().play()},m.prototype.pause=function(){this.getPlayer().pause()},m.prototype.next=function(){this.getPlayer().next()},m.prototype.resize=function(){var t=this.getVideoPlayerDimensions();this.getSelector().width(t.width),this.getSelector().height(t.height)},m.prototype.getVideoPlayerDimensions=function(){var t=o(this.strSelector).parent(),e=Math.round(t.width()),i=Math.round(e/16*9);return{width:e.toString(),height:i.toString()}},m.prototype.setSelector=function(t){return this.selector=o(t),this.selector.length>0},m.prototype.getSelector=function(){return this.selector},m}),define("module/video/StandAloneVideoPlayer",["lib/ecmaScript5","lib/domReady","jquery","module/video/SMPPlayer"],function(t,e,i,n){var o=function(t,e){return this.selector=t,this.config=void 0!==e?e:{},this.initialised=!1,this};return o.prototype.init=function(){if(!this.isInitialised()&&this.setSelector(this.selector)){var t=new n(this.getSelector(),this.config);t.init(),this.setPlayer(t),this.loadVideo(),this.setInitialised(!0)}},o.prototype.setSelector=function(t){return this.selector=i(t),this.selector.length>0},o.prototype.getSelector=function(){return this.selector},o.prototype.subscribe=function(t,e){this.getPlayer().subscribe(t,e)},o.prototype.setPlayer=function(t){this.mp=t},o.prototype.getPlayer=function(){return this.mp},o.prototype.play=function(){this.getPlayer().play()},o.prototype.pause=function(){this.getPlayer().pause()},o.prototype.loadVideo=function(){var t=this.getVideoMetadata();this.getPlayer().loadVideo(t)},o.prototype.loadPlaylist=function(t){this.getPlayer().loadPlaylist(t)},o.prototype.getVideoMetadata=function(){var t=this.getSelector();return{vpid:t.data("videoPlayerVpid"),title:t.data("videoTitle"),imageURL:t.data("videoPlayerImageUrl"),mediaProfile:t.data("videoPlayerMediator"),showAds:t.data("showAds")}},o.prototype.next=function(){this.getPlayer().next()},o.prototype.resize=function(){this.getPlayer().resize()},o.prototype.isAutoplay=function(){return this.getPlayer().isAutoplay()},o.prototype.isInitialised=function(){return this.initialised},o.prototype.setInitialised=function(t){"boolean"==typeof t&&(this.initialised=t)},o}),define("module/slideshow-gallery/stand-alone-video-player-manager",["lodash","jquery","module/slideshow-gallery/layout","module/video/StandAloneVideoPlayer","waypoints"],function(t,e,i,n,o){function s(t,e){this.selector=t,this.layout=new i,this.slideshowMediator=e,this.videoPlayers=[],this.initialised=!1}return s.prototype.init=function(){var t=this.getSelector();this.setSelector(t)&&(this.setupSelectors(),this.setupVideoPlayerList(),this.setupSettings(),this.setupListeners(),this.bindWindowEvents())},s.prototype.setupSelectors=function(){this.videoPlayerSelector="[data-video-player]",this.sgVideoSelector="[data-sg-video] "+this.videoPlayerSelector,this.$inlineVideoSelector=this.getSelector().find(this.sgVideoSelector)},s.prototype.setupVideoPlayerList=function(){t.each(this.$inlineVideoSelector,function(t){this.videoPlayers.push(new n(t,{}))},this)},s.prototype.setupSettings=function(){this.lazyLoadOffset="100%",this.enableDelay=200},s.prototype.initWaypoints=function(){var t=this,e={handler:function(e){t.lazyLoad(this.element)},offset:t.lazyLoadOffset};this.setInitialised(!0),this.$inlineVideoSelector.waypoint(e)},s.prototype.lazyLoad=function(i){t.each(this.videoPlayers,function(t){e(t.getSelector()).is(i)&&this.initialiseVideoPlayer(t)},this)},s.prototype.disableWaypoints=function(){Waypoint.disableAll()},s.prototype.enableWaypoints=function(){Waypoint.enableAll()},s.prototype.isInitialised=function(){return this.initialised},s.prototype.setInitialised=function(e){t.isBoolean(e)&&(this.initialised=e)},s.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-start-overlay-hidden",this.handleGalleryStartOverlayHidden.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},s.prototype.getSlideshowMediator=function(){return this.slideshowMediator},s.prototype.handleGalleryStartOverlayHidden=function(t){this.layout.isVerticalScroll()&&this.initWaypoints()},s.prototype.handleSlideChangeTransitionEnd=function(i){i&&t.has(i,"isVideoOnlySlide")&&i.isVideoOnlySlide&&t.each(this.videoPlayers,function(t){e(t.getSelector()).is(":visible")&&this.initialiseVideoPlayer(t)},this)},s.prototype.initialiseVideoPlayer=function(t){t.isInitialised()?t.resize():t.init()},s.prototype.handleChangeToVerticalScroll=function(){var t=this;this.isInitialised()?setTimeout(function(){t.enableWaypoints()},this.enableDelay):setTimeout(function(){t.initWaypoints()},this.enableDelay)},s.prototype.handleWindowResize=function(){this.layout.isSlideshow()?this.disableWaypoints():this.layout.hasChangedToVerticalScroll()&&this.handleChangeToVerticalScroll()},s.prototype.bindWindowEvents=function(){e(window).on("resize",this.handleWindowResize.bind(this))},s.prototype.setSelector=function(t){return this.selector=e(t),this.selector.length>0},s.prototype.getSelector=function(){return this.selector},s}),define("module/slideshow-gallery/ambient-video-manager",["lodash","jquery","module/slideshow-gallery/layout","model/mediaQuery"],function(t,e,i,n){function o(t,e){this.selector=t,this.layout=new i,this.slideshowMediator=e}return o.prototype.init=function(){var t=this.getSelector();this.setSelector(t)&&this.shouldDisplayAmbientVideo()&&(this.setupSelectors(),this.showAmbientVideos(),this.setupListeners(),this.bindWindowEvents())},o.prototype.shouldDisplayAmbientVideo=function(){return hasTheMustard()&&!n.isFixedWidthLayout()&&!n.isMobileDevice()},o.prototype.showAmbientVideos=function(){t.each(this.$ambientVideosSelector,function(t){e(t).toggleClass("hidden")},this)},o.prototype.setupSelectors=function(){this.ambientVideosSelector="[data-ambient-video]",this.$ambientVideosSelector=this.getSelector().find(this.ambientVideosSelector)},o.prototype.setupSettings=function(){},o.prototype.isInitialised=function(){return this.initialised},o.prototype.setInitialised=function(e){t.isBoolean(e)&&(this.initialised=e)},o.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)),t.subscribe("slide-change-initialised",this.handleSlideChangeInitialised.bind(this)))},o.prototype.getSlideshowMediator=function(){return this.slideshowMediator},o.prototype.playVisiblePlayer=function(){t.each(this.$ambientVideosSelector,function(t){e(t).is(":visible")&&t.play()},this)},o.prototype.pauseVisiblePlayer=function(){t.each(this.$ambientVideosSelector,function(t){e(t).is(":visible")&&t.pause()},this)},o.prototype.pauseAllPlayers=function(){t.each(this.$ambientVideosSelector,function(t){t.pause()},this)},o.prototype.handleSlideChangeInitialised=function(e){e&&t.has(e,"hasAmbientVideo")&&e.hasAmbientVideo&&this.pauseVisiblePlayer()},o.prototype.handleSlideChangeTransitionEnd=function(e){e&&t.has(e,"hasAmbientVideo")&&e.hasAmbientVideo&&this.playVisiblePlayer()},o.prototype.handleChangeToSlideshow=function(){this.playVisiblePlayer()},o.prototype.handleChangeToVerticalScroll=function(){this.pauseAllPlayers()},o.prototype.handleWindowResize=function(){this.layout.isSlideshow()?this.handleChangeToSlideshow():this.layout.hasChangedToVerticalScroll()&&this.handleChangeToVerticalScroll()},o.prototype.bindWindowEvents=function(){e(window).on("resize",this.handleWindowResize.bind(this))},o.prototype.setSelector=function(t){return this.selector=e(t),this.selector.length>0},o.prototype.getSelector=function(){return this.selector},o}),define("module/slideshow-gallery/progress",["jquery","lib/domReady","lib/ecmaScript5"],function(t,e,i){function n(t,e){return this.selector=t,this.slideshowMediator=e,this.min=1,this}return n.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.getSelector().length&&(this.setupListeners(),this.setupSelectors(),this.toggleVisibility())},n.prototype.setupSelectors=function(){this.indexSelector="[data-sg-progress-index]",this.totalSelector="[data-sg-progress-total]",this.$indexSelector=this.getSelector().find(this.indexSelector),this.$totalSelector=this.getSelector().find(this.totalSelector),this.visibleClass="is-active"},n.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-started",this.handleGalleryStarted.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},n.prototype.getSlideshowMediator=function(){return this.slideshowMediator},n.prototype.toggleVisibility=function(t){t&&_.has(t,"isContentSlide")&&t.isContentSlide?this.setVisible():this.setInvisible()},n.prototype.setVisible=function(){this.getSelector().addClass(this.visibleClass)},n.prototype.setInvisible=function(){this.getSelector().removeClass(this.visibleClass)},n.prototype.renderProgress=function(){this.renderIndex(this.currentIndex),this.renderTotal(this.total)},n.prototype.renderIndex=function(t){this.$indexSelector.html(t)},n.prototype.renderTotal=function(t){this.$totalSelector.html(t)},n.prototype.handleGalleryStarted=function(t){this.setProgressData(t),this.setInvisible(),this.renderProgress(),this.toggleVisibility(t),this.setDefaultARIAAttributes(this.currentIndex,this.min,this.total)},n.prototype.setProgressData=function(t){t&&_.has(t,"progress")&&!1!==t.progress&&(this.min=1,this.total=t.progress.total,this.currentIndex=t.progress.index)},n.prototype.handleSlideChangeTransitionEnd=function(t){this.setProgressData(t),this.setInvisible(),this.renderProgress(),this.toggleVisibility(t),this.updateARIAAttributes(this.currentIndex,this.total)},n.prototype.setSelector=function(e){this.selector=t(e)},n.prototype.getSelector=function(){return this.selector},n.prototype.updateARIAAttributes=function(t,e){this.getSelector().attr("aria-valuenow",t).attr("aria-valuemax",e)},n.prototype.setDefaultARIAAttributes=function(t,e,i){this.getSelector().attr("aria-valuenow",t).attr("aria-valuemin",e).attr("aria-valuemax",i)},n}),define("module/slideshow-gallery/sg-mediator",["lodash","lib/ecmaScript5","signals"],function(t,e,i){function n(){this.libs=[],this.slideChangeInitialisedSignal=new i.Signal,this.slideChangeBackgroundLoadedSignal=new i.Signal,this.slideChangeTransitionEndSignal=new i.Signal,this.galleryStartedSignal=new i.Signal,this.galleryInitialisedSignal=new i.Signal,this.galleryStartOverlayHiddenSignal=new i.Signal}return n.prototype.addEventListeners=function(t){this.libs.push(t),t.subscribe("gallery-started",this.handleGalleryStarted.bind(this)),t.subscribe("gallery-start-overlay-hidden",this.handleGalleryStartOverlayHidden.bind(this)),t.subscribe("gallery-initialised",this.handleGalleryInitialised.bind(this)),t.subscribe("slide-change-initialised",this.handleSlideChangeInitialised.bind(this)),t.subscribe("slide-change-background-loaded",this.handleSlideChangeBackgroundLoaded.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this))},n.prototype.handleSlideChangeInitialised=function(t){this.slideChangeInitialisedSignal.dispatch(t)},n.prototype.handleSlideChangeBackgroundLoaded=function(t){this.slideChangeBackgroundLoadedSignal.dispatch(t)},n.prototype.handleSlideChangeTransitionEnd=function(t){this.slideChangeTransitionEndSignal.dispatch(t)},n.prototype.handleGalleryStarted=function(t){this.galleryStartedSignal.dispatch(t)},n.prototype.handleGalleryInitialised=function(t){this.galleryInitialisedSignal.dispatch(t)},n.prototype.handleGalleryStartOverlayHidden=function(t){this.galleryStartOverlayHiddenSignal.dispatch(t)},n.prototype.subscribe=function(t,e){switch(t){case"slide-change-initialised":this.slideChangeInitialisedSignal.add(e);break;case"slide-change-background-loaded":this.slideChangeBackgroundLoadedSignal.add(e);break;case"slide-change-transition-end":this.slideChangeTransitionEndSignal.add(e);break;case"gallery-started":
this.galleryStartedSignal.add(e);break;case"gallery-initialised":this.galleryInitialisedSignal.add(e);break;case"gallery-start-overlay-hidden":this.galleryStartOverlayHiddenSignal.add(e)}},new n}),define("module/slideshow-gallery/style-manager",["lodash","lib/ecmaScript5","signals"],function(t,e,i){function n(t,e){this.slideshowMediator=e,this.setSelector(t),this.themeDarkClass="sg-theme--dark",this.themeLightClass="sg-theme--light",this.themeClasses=[this.themeDarkClass,this.themeLightClass],this.sidebarLeftClass="sg-slide-layout--sidebar-left",this.sidebarRightClass="sg-slide-layout--sidebar-right",this.sidebarClasses=[this.sidebarLeftClass,this.sidebarRightClass],this.setupListeners()}return n.prototype.setSelector=function(t){return t=$(t),t.length>0&&(this.selector=t,!0)},n.prototype.getSelector=function(){return this.selector},n.prototype.getSlideshowMediator=function(){return this.slideshowMediator},n.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-initialised",this.handleGalleryInitialised.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},n.prototype.handleGalleryInitialised=function(t){this.initialUIState(t)},n.prototype.handleSlideChangeTransitionEnd=function(t){this.updateUIState(t)},n.prototype.setTheme=function(t){var e;switch(t){case"white":e=this.themeLightClass;break;case"black":e=this.themeDarkClass;break;default:e=this.themeLightClass}e&&this.getSelector().removeClass(this.themeClasses.join(" ")).addClass(e)},n.prototype.setContentSlideType=function(t){var e;switch(this.getSelector().removeClass(this.sidebarClasses.join(" ")),t){case"text-left":e=this.sidebarLeftClass;break;case"text-right":e=this.sidebarRightClass}e&&this.getSelector().addClass(e)},n.prototype.initialUIState=function(e){t.has(e,"textColor")&&this.setTheme(e.firstContentSlideTextColor)},n.prototype.updateUIState=function(e){t.has(e,"textColor")&&(t.has(e,"isSplash")&&e.isSplash?this.setTheme(e.firstContentSlideTextColor):this.setTheme(e.textColor)),t.has(e,"contentSlideType")&&this.setContentSlideType(e.contentSlideType)},n}),define("module/slideshow-gallery/info-manager",["jquery","lib/domReady","lib/ecmaScript5"],function(t,e,i){function n(t,e){return this.selector=t,this.slideshowMediator=e,this}return n.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.getSelector().length&&(this.setupListeners(),this.setupSelectors(),this.setupEvents(),this.setControlShouldBeVisible(!1),this.open(),this.toggleControlVisibility())},n.prototype.setupSelectors=function(){this.controlVisibleClass="is-visible",this.isAnimationAllowedClass="is-sg-info-animation-allowed",this.closedClass="is-sg-info-closed",this.controlSelector="[data-sg-info-button]",this.$controlSelector=this.getSelector().find(this.controlSelector)},n.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-started",this.handleGalleryStarted.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},n.prototype.getSlideshowMediator=function(){return this.slideshowMediator},n.prototype.toggleControlVisibility=function(){this.getControlShouldBeVisible()?this.setControlVisible():this.setControlInvisible()},n.prototype.toggle=function(){this.getIsOpen()?this.close():this.open()},n.prototype.open=function(){this.setIsOpen(!0),this.setOpened()},n.prototype.close=function(){this.setIsOpen(!1),this.setClosed()},n.prototype.updateARIAHiddenState=function(t){_.isBoolean(t)&&this.$controlSelector.attr("aria-hidden",t)},n.prototype.setControlVisible=function(){this.$controlSelector.addClass(this.controlVisibleClass),this.updateARIAHiddenState(!1)},n.prototype.setControlInvisible=function(){this.$controlSelector.removeClass(this.controlVisibleClass),this.updateARIAHiddenState(!0)},n.prototype.setOpened=function(){this.getSelector().removeClass(this.closedClass)},n.prototype.setClosed=function(){this.getSelector().addClass(this.closedClass)},n.prototype.setControlDisplayState=function(t){t&&_.has(t,"isContentSlide")&&t.isContentSlide&&_.has(t,"isSidebarSlide")&&!0===t.isSidebarSlide?this.setControlShouldBeVisible(!0):this.setControlShouldBeVisible(!1)},n.prototype.getControlShouldBeVisible=function(){return this.shouldControlBeVisible},n.prototype.setControlShouldBeVisible=function(t){_.isBoolean(t)&&(this.shouldControlBeVisible=t)},n.prototype.getIsOpen=function(){return this.isOpen},n.prototype.setIsOpen=function(t){_.isBoolean(t)&&(this.isOpen=t)},n.prototype.enableAnimations=function(){this.getSelector().addClass(this.isAnimationAllowedClass)},n.prototype.disableAnimations=function(){this.getSelector().removeClass(this.isAnimationAllowedClass)},n.prototype.handleGalleryStarted=function(t){this.setControlDisplayState(t),this.toggleControlVisibility(),this.disableAnimations(),this.getControlShouldBeVisible()&&this.open()},n.prototype.handleSlideChangeTransitionEnd=function(t){this.setControlDisplayState(t),this.toggleControlVisibility(),this.disableAnimations(),this.getControlShouldBeVisible()&&this.open()},n.prototype.setupEvents=function(){this.handleToggleClick=this.handleToggleClick.bind(this),this.bindElementEvents()},n.prototype.bindElementEvents=function(){this.$controlSelector.on("click",this.handleToggleClick)},n.prototype.handleToggleClick=function(){this.enableAnimations(),this.toggle()},n.prototype.setSelector=function(e){this.selector=t(e)},n.prototype.getSelector=function(){return this.selector},n}),define("module/slideshow-gallery/controls-manager",["jquery","lib/domReady","lib/ecmaScript5"],function(t,e,i){function n(t,e){return this.selector=t,this.slideshowMediator=e,this}return n.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.getSelector().length&&(this.setupListeners(),this.setupSelectors())},n.prototype.setupSelectors=function(){this.invisibleClass="is-invisible"},n.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("slide-change-background-loaded",this.handleSlideChangeBackgroundLoaded.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},n.prototype.setVisible=function(){this.getSelector().removeClass(this.invisibleClass)},n.prototype.setInvisible=function(){this.getSelector().addClass(this.invisibleClass)},n.prototype.handleSlideChangeTransitionEnd=function(t){this.setVisible()},n.prototype.handleSlideChangeBackgroundLoaded=function(t){this.setInvisible()},n.prototype.getSlideshowMediator=function(){return this.slideshowMediator},n.prototype.setSelector=function(e){this.selector=t(e)},n.prototype.getSelector=function(){return this.selector},n}),define("module/slideshow-gallery/analytics/slide-view",["lodash","jquery","module/analytics/main","module/slideshow-gallery/layout"],function(t,e,i,n){var o=function(t,e,i){this.selector=t,this.channelName=i,this.slidesModuleName="sg-main",this.slideshowMediator=e,this.layout=new n};return o.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.getSelector().length&&this.layout.isSlideshow()&&(this.initSlidesModule(),this.setupListeners())},o.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-initialised",this.handleGalleryInitialised.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},o.prototype.trackSlideView=function(t){var e=this.$slides.eq(t.currentSlideIndex);i.addTrackingForSelector(e.getSelector(!0),this.getTrackingData(t)),e.trigger("track")},o.prototype.getTrackingData=function(t){var e=t.currentSlideIndex+1;return{channelName:this.channelName,interactionType:"custom",event:"track",elementPosition:e,elementType:t.slideType,elementName:"slide "+e+" "+t.totalSlides,totalElementCount:t.totalSlides}},o.prototype.setSlides=function(t){this.$slides=e(t.slideSelector)},o.prototype.initSlidesModule=function(){i.addTrackingForModule(this.selector,{module:this.slidesModuleName})},o.prototype.handleGalleryInitialised=function(t){this.setSlides(t),this.trackSlideView(t)},o.prototype.handleSlideChangeTransitionEnd=function(t){this.trackSlideView(t)},o.prototype.getSlideshowMediator=function(){return this.slideshowMediator},o.prototype.setSelector=function(t){this.selector=e(t)},o.prototype.getSelector=function(){return this.selector},o}),define("model/shareTrackingData",[],function(){return function(t){return{facebook:{id:"facebook-share",elementType:"facebook-share",elementName:t},twitter:{id:"twitter-share",elementType:"twitter-share",elementName:t},google:{id:"google-share",elementType:"google-share",elementName:t},email:{id:"email-share",elementType:"email-share",elementName:t},linkedin:{id:"linkedin-share",elementType:"linkedin-share",elementName:t},reddit:{id:"reddit-share",elementType:"reddit-share",elementName:t},stumbleupon:{id:"stumbleupon-share",elementType:"stumbleupon-share",elementName:t},whatsapp:{id:"whatsapp-share",elementType:"whatsapp-share",elementName:t},pinterest:{id:"pinterest-share",elementType:"pinterest-share",elementName:t}}}}),define("module/responsiveShareTools",["jquery","lib/ecmaScript5","model/digitalData","model/shareTrackingData","module/analytics/main"],function(t,e,i,n,o){function s(t,e,i){this.setModuleSelectors(t),this.setItemListSelector(e),this.setItemSelector(i),this.setupAnalytics()}return s.prototype.setupAnalytics=function(){var e=this.getItemSelector(),i=t(e),n=this.getTrackingData(),s=this,a=1;this.getModuleSelectors().forEach(function(t){o.addTrackingForModule(t,{module:t})}),i.each(function(i,r){var l,c=t(r).attr("data-tracking-id"),d=t(r),u=s.getTotalLinkCount(d);if(a>u&&(a=1),l=a,c.length>0){var p=s.getItemListSelector()+" "+e+"[data-tracking-id="+c+"]";o.addTrackingForSelector(p,_.extend(n[c],{totalElementCount:u,elementPosition:l}))}a++})},s.prototype.getTotalLinkCount=function(t){return t.closest(this.getItemListSelector()).find(this.getItemSelector()).length},s.prototype.getTrackingData=function(){return n(i.page.pageInfo.pageID)},s.prototype.getModuleSelectors=function(){return this.moduleSelectors},s.prototype.setModuleSelectors=function(t){this.moduleSelectors=t},s.prototype.getItemListSelector=function(){return this.itemListSelector},s.prototype.setItemListSelector=function(t){this.itemListSelector=t},s.prototype.getItemSelector=function(){return this.itemSelector},s.prototype.setItemSelector=function(t){this.itemSelector=t},s}),define("module/slideshow-gallery/analytics/share-tools",["lodash","jquery","module/analytics/main","module/responsiveShareTools"],function(t,e,i,n){var o=function(t,e){this.selector=t,this.slideshowMediator=e,this.shareToolsSelectors=["#slideshow-gallery-share-tools"],this.shareToolsItemListSelector=".share",this.shareToolsItemSelector=".share-item .share-button"};return o.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.getSelector().length&&this.setupAnalytics()},o.prototype.setupAnalytics=function(){this.responsiveShareTools=new n(this.shareToolsSelectors,this.shareToolsItemListSelector,this.shareToolsItemSelector)},o.prototype.setSelector=function(t){this.selector=e(t)},o.prototype.getSelector=function(){return this.selector},o}),define("module/slideshow-gallery/analytics/main",["lodash","jquery","module/slideshow-gallery/analytics/slide-view","module/slideshow-gallery/analytics/share-tools"],function(t,e,i,n){var o=function(t,e){this.selector=t,this.channelName="slideshow-gallery",this.slideshowMediator=e};return o.prototype.init=function(){this.initSlideViewAnalytics(),this.initShareToolsAnalytics()},o.prototype.initSlideViewAnalytics=function(){this.slideViewAnalytics=new i(this.selector,this.slideshowMediator,this.channelName).init()},o.prototype.initShareToolsAnalytics=function(){this.shareToolsAnalytics=new n(this.selector,this.slideshowMediator).init()},o}),define("module/adverts/deferredAdSlotRenderer",["jquery","lodash"],function(t,e){return new function(){this.renderSlot=function(i){t(i).length>0&&t("[data-bbccom-advert-deferred]").each(function(){var i=t(this),n=i.data("bbccomAdvertId"),o=i.data("bbccomAdvertGroups")+"";e.isString(n)&&e.isString(o)&&(o=o.split("_"),o.length>0&&void 0!==bbcdotcom.slotInfinite&&(bbcdotcom.slotInfinite(n,o,i[0],!0),i.context.dataset.adHasRendered="true"))})}}}),define("model/capabilities",["jquery"],function(t){return new function(){var e=!0;this.testCapabilities=function(){this.testDataURI()},this.isBrowser=function(e){switch(e){case"ie8":return t("body").hasClass("browser-ver-ie8")}return!1},this.hasDataURI=function(){return!this.isBrowser("ie8")&&e},this.isIE8=function(){return hasFixedWidthLayout()},this.isIE9=function(){var t=document.createElement("div");return t.innerHTML="\x3c!--[if IE 9]><i></i><![endif]--\x3e",1==t.getElementsByTagName("i").length},this.testDataURI=function(){var t=new Image;t.onload=t.onerror=function(){1==this.width&&1==this.height||(e=!1)},t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="},this.testCapabilities()}}),define("module/adverts/multiAdSlotRenderer",["templates","model/mediaQuery","model/capabilities"],function(t,e,i){function n(){return 4!==e.getGroup()&&!e.isFixedWidthLayout()}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;if("string"==typeof t&&e.hasOwnProperty(t))return e[t]}function s(t){return"string"==typeof t&&p.hasOwnProperty(t)?p[t]:0}function a(t){if("string"==typeof t){var e=s(t);return p[t]=e+=1}}function r(t){return t.querySelectorAll(".bbccom_visible").length>0&&t.querySelectorAll(".bbccom_advert[id]").length>0}function l(t,e,i){if("string"==typeof e&&"string"==typeof i){var n=t.querySelector("#bbccom_"+e+"_"+i);n&&n.nodeType&&n.parentNode.removeChild(n)}}function c(t){return Array.prototype.slice.call(t)}var d={mpu:{mobile:[1,2,3,4],desktop:[1,2,3,4]},leaderboard:{mobile:[1,2,3,4],desktop:[1,2,3,4]},sponsor_section:{mobile:[1,2,3,4],desktop:[1,2,3,4]}},u='[data-bbccom-infinite-advert]:not([data-bbccom-infinite-advert=""])',p={};return{render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body",p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;if(!i.isBrowser("ie8")){var h=void 0;h=1===e.nodeType||9===e.nodeType?e.querySelectorAll(u):document.querySelectorAll(e+" "+u),c(h).forEach(function(e){if(!r(e)){var i=e.getAttribute("data-bbccom-infinite-advert"),c=e.getAttribute("data-bbccom-infinite-advert-text"),d=s(i),u={},h={},m=i+"_"+d,g=n()?"mobile":"desktop",f=o(i,p)[g],b=document.createElement("div");if(u.id=m,u.groups=f.join("_"),h[m]=void 0!==c?{groups:f,advertText:c}:f,b.innerHTML=t["ad-slot-infinite"](u),e.appendChild(b.firstChild),l(e,i,u.groups),void 0!==window.bbcdotcom&void 0!==bbcdotcom.registerAd)try{bbcdotcom.registerAd(h)}catch(t){throw t}e.dataset.adHasRendered="true",a(i)}})}}}}),define("module/slideshow-gallery/ad-render-manager",["jquery","lib/domReady","lib/ecmaScript5","module/adverts/deferredAdSlotRenderer","module/slideshow-gallery/layout","module/adverts/multiAdSlotRenderer"],function(t,e,i,n,o,s){function a(t,e){return this.selector=t,this.slideshowMediator=e,this.layout=new o,this.rendered=!1,this}return a.prototype.init=function(){this.getSelector().length&&(this.setupListeners(),this.setupEvents())},a.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-initialised",this.handleGalleryInitialised.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},a.prototype.isRendered=function(){return this.rendered},a.prototype.setRendered=function(t){_.isBoolean(t)&&(this.rendered=t)},a.prototype.getSlideshowMediator=function(){return this.slideshowMediator},a.prototype.handleGalleryInitialised=function(t){this.layout.isVerticalScroll()&&this.renderIfNotRendered()},a.prototype.handleSlideChangeTransitionEnd=function(t){this.checkForRenderedAds(t)},a.prototype.getArrayFromNodeList=function(t){return Array.prototype.slice.call(t)},a.prototype.checkForRenderedAds=function(t){var e=this;if(_.has(t,"currentSlideElement")){var i=t.currentSlideElement,n=i.querySelectorAll("[data-bbccom-infinite-advert], [data-bbccom-advert-deferred]");this.getArrayFromNodeList(n).forEach(function(t){t.querySelectorAll("[data-ad-has-rendered]").length<=0&&t.querySelectorAll(".bbccom_visible").length<=0&&e.renderAds(i)})}},a.prototype.renderAds=function(t){t&&(s.render(t),t.querySelectorAll("[data-bbccom-advert-deferred]").length>0&&n.renderSlot(t))},a.prototype.setupEvents=function(){t(window).on("resize",this.handleWindowResize.bind(this))},a.prototype.handleWindowResize=function(){this.layout.hasChangedToVerticalScroll()&&this.renderIfNotRendered()},a.prototype.getSelector=function(){return this.selector},a.prototype.renderIfNotRendered=function(){this.isRendered()||this.render()},a.prototype.render=function(){this.setRendered(!0),n.renderSlot(this.selector),s.render()},a}),define("layouts/slideshow-gallery",["lodash","lib/ecmaScript5","jquery","lib/domReady","util/logger","common/util/extends","layouts/base","module/slideshow-gallery/slideshow-gallery","module/share-tools/slideshow-gallery","module/slideshow-gallery/inline-image-manager","module/slideshow-gallery/stand-alone-video-player-manager","module/slideshow-gallery/ambient-video-manager","module/slideshow-gallery/progress","module/slideshow-gallery/sg-mediator","module/slideshow-gallery/style-manager","module/slideshow-gallery/info-manager","module/slideshow-gallery/controls-manager","module/slideshow-gallery/analytics/main","module/slideshow-gallery/ad-render-manager"],function(t,e,i,n,o,s,a,r,l,c,d,u,p,h,m,g,f,b,y){function v(t,e){a.call(this,t),this.selector=t}return s(v,a,{init:function(){o.debug("SlideshowGalleryLayout:init"),this.selector&&(this.setupMediator(),this.setupInlineImageManager(),this.setupStandAloneMediaPlayerManager(),this.setupAmbientVideoManager(),this.setupStyleManager(),this.setupAdRenderManager(),this.setupAnalytics(),this.setupSlideshowGallery(),this.setupShareTools(),this.setupProgress(),this.setupInfoManager(),this.setupControlsManager())},setupMediator:function(){this.sgMediator=h},setupStyleManager:function(){this.styleManager=new m('[data-sg="main"]',this.sgMediator)},setupSlideshowGallery:function(){var t=new r(this.selector);this.sgMediator.addEventListeners(t),t.init()},setupShareTools:function(){var t=this.selector+" [data-share]";new l({selector:t,slideshowMediator:this.sgMediator,class:"share-tools--slideshow-gallery"}).init()},setupProgress:function(){var t=this.selector+" [data-sg-progress]";new p(t,this.sgMediator).init()},setupInlineImageManager:function(){new c('[data-sg="main"]',this.sgMediator).init()},setupStandAloneMediaPlayerManager:function(){new d('[data-sg="main"]',this.sgMediator).init()},setupAmbientVideoManager:function(){new u('[data-sg="main"]',this.sgMediator).init()},setupInfoManager:function(){new g('[data-sg="main"]',this.sgMediator).init()},setupControlsManager:function(){var t=this.selector+' [data-sg="controls"]';new f(t,this.sgMediator).init()},setupAdRenderManager:function(){new y(this.selector,this.sgMediator).init()},setupAnalytics:function(){new b(this.selector,this.sgMediator).init()}}),v}),define("layouts/third-party-content",["lodash","lib/ecmaScript5","jquery","lib/domReady","util/logger","common/util/extends","layouts/base","module/responsiveFrame"],function(t,e,i,n,o,s,a,r){function l(t){a.call(this,t),this.selector=t}return s(l,a,{init:function(){o.debug("ThirdPartyContentLayout:init"),this.setSelector(this.getSelector()),this.selector.length>0&&(this.responsiveIframe=new r(this.getSelector()),this.responsiveIframe.init())},setSelector:function(t){this.selector=i(t)},getSelector:function(){return this.selector}}),l}),define("model/exposed-data",["lodash"],function(t){_exposedData;return t.isUndefined(_entityMapping)||(_exposedData.entityMapping=_entityMapping),_exposedData}),define("common/entity/habitat/paging",["lodash","common/util/extends","common/util/logger","common/entity/base"],function(t,e,i,n){function o(e,i){var o={page:1,totalPages:1,itemsPerPage:1,totalItems:0};n.call(this,t.extend(o,e),i)}return e(o,n,{getPage:function(){return this.page},setPage:function(t){this.page=t},getTotalPages:function(){return this.totalPages},getTotalItems:function(){return this.totalItems},getItemsPerPage:function(){return this.itemsPerPage}}),o}),define("common/entity/habitat/paged-list",["lodash","common/util/extends","common/util/logger","common/entity/list/entity","common/entity/habitat/paging"],function(t,e,i,n,o){function s(e,i){var o={id:!1,title:"",results:[]};n.call(this,t.extend(o,e),i)}return e(s,n,{init:function(t){n.prototype.init.apply(this,arguments),this.setPaging(t.paging)},getId:function(){return this.id},getTitle:function(){return this.title},getListItems:function(){return this.results},flushListItems:function(){this.results=[]},setPaging:function(t){this.paging=new o(t)},getPaging:function(){return this.paging},getPage:function(){return this.getPaging().getPage()},getTotalPages:function(){return this.getPaging().getTotalPages()},getTotalItems:function(){return this.getPaging().getTotalItems()},getItemsPerPage:function(){return this.getPaging().getItemsPerPage()}}),s}),define("common/interface/entity/list/paged",["lodash","common/util/interface","common/interface/entity/list/base"],function(t,e,i){return new e("PagedListEntity",i.methods.concat(["getPage","getTotalPages","getItemsPerPage","getTotalItems"]))}),define("common/view/model-v2/list/load-more",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/interface/entity/list/paged"],function(t,e,i,n,o){function s(){n.apply(this,arguments)}return e(s,n,{entityInterface:o,setViewData:function(){var e=t.extend({id:this.getConfig().get("id",""),title:this.getConfig().get("title","Load more items")},this.getPagingData());this.viewData=e},getPagingData:function(){var t,e={url:"",class:"load-more-button disabled"},i=this.getEntity().getPage();return i<this.getEntity().getTotalPages()&&(t=i+1,e["next-page"]=t,e.class="load-more-button",e.url=this.getPageURL(t)),e},getPageURL:function(t){var e,i=this.getConfig().get("baseUrl"),n="";return i&&(e=i.indexOf("?"),e>0?(n=i.substr(0,e),n+="/"+t+i.substr(e)):n=i+"/"+t),n}}),s}),define("component/load-more",["lodash","module/MVVM-component","common/view/model-v2/list/load-more","templates"],function(t,e,i,n){return function(t,o,s){var a=new i(o,s);return new e(t,a,n["load-more"])}}),define("common/interface/model/paginated",["lodash","common/util/interface"],function(t,e){return new e("PaginatedModel",["setPage","setItemsPerPage","getPage","getItemsPerPage"])}),define("interaction-controller/pagination/base",["jquery","lodash","common/util/extends","common/util/interface","common/interface/entity/list/paged","common/interface/model/paginated","interaction-controller/base","module/analytics/main"],function(t,e,i,n,o,s,a,r){var l=function(){a.apply(this,arguments)};return i(l,a,{init:function(t,e){n.ensureImplements(e.getEntity(),o),n.ensureImplements(e.getModel(),s),a.prototype.init.apply(this,arguments)},refresh:function(){a.prototype.refresh.call(this);var t=this.el.find("a");t.click(this.paginate.bind(this)),this.setupAnalytics(t)},showLoading:function(){this.el.find("#loading-spinner").addClass("gelicon--rotate-anticlockwise")},setupAnalytics:function(){r.addTrackingForSelector(this.el.find("a"),{id:"load-more-button",elementName:"Load More",interactionType:"custom"})},trackPagination:function(t){r.trackInteraction(t)}}),l}),define("interaction-controller/pagination/paged",["jquery","lodash","common/util/extends","common/util/interface","common/interface/entity/list/paged","interaction-controller/pagination/base"],function(t,e,i,n,o,s){var a=function(){s.apply(this,arguments)};return i(a,s,{init:function(t,e){s.prototype.init.apply(this,arguments)},paginate:function(t){t.preventDefault(),t.stopPropagation();var e=this.component.getEntity().getPage()+1;this.showLoading(),this.component.getModel().setPage(e),this.component.updateModelConfig(),this.trackPagination(t)}}),a}),define("module/paginated-entity-list",["lodash","lib/ecmaScript5","component/load-more","component/promo-group/base","module/component-loader","interaction-controller/pagination/paged"],function(t,e,i,n,o,s){function a(t,e,n,a,r,l,c){var d=this.getListComponent(t,e,r,l,c),u=i(t,e),p=new o(n,d,{mode:"append",isContentRendered:!0});new o(a,u,{mode:"replace",interactionController:new s});this.listComponentLoader=p,this.loadMoreComponentLoader=u}return t.extend(a.prototype,{getListComponent:function(e,i,o,s,a){return t.isFunction(s)?s(e,i,o,a):n(e,i,o)},load:function(){var t=this;this.listComponentLoader.load().then(function(){t.loadMoreComponentLoader.load()})}}),a}),define("common/entity/vanilla/promo",["lodash","common/util/extends","common/entity/vanilla/link/base"],function(t,e,i){function n(e){var n={relatedItems:!1,name:"",summary:"",summaryLong:"",iconType:"",context:!1,type:"",clientName:"",locations:[],longitude:!1,latitude:!1};i.call(this,t.extend(n,e))}return e(n,i,{getShortName:function(){return this.name},getSummary:function(){return this.summary},setSummary:function(t){this.summary=t},getSummaryLong:function(){return this.summaryLong},getContext:function(){return this.context},getIconType:function(){return this.iconType},getType:function(){return this.type},getRelatedLinks:function(){return this.relatedItems},getClientName:function(){return this.clientName},getLongitude:function(){return this.longitude},getLatitude:function(){return this.latitude}}),n}),define("layouts/index/base",["jquery","lodash","common/util/extends","layouts/base","common/config","common/model/base","model/exposed-data","common/entity/habitat/paging","common/entity/factory","common/entity/habitat/paged-list","module/paginated-entity-list","common/entity/vanilla/promo","component/promo-group/base"],function(t,e,i,n,o,s,a,r,l,c,d,u,p){function h(t,i){n.call(this,t);var s=this.getPagingData(),a=e.extend({page:s.getPage()+1,items:s.getItemsPerPage()},o.get());this.setModel(a),this.setupPagination()}return i(h,n,{listConfig:{},listItemEntity:u,loadMoreWrapperSelector:"#load-more-wrapper",promoGroupComponent:p,setModel:function(t){},getModel:function(){return this.model},getPagingData:function(){var t;if(e.has(a,"promos")&&e.has(a.promos,"paging"))return t=new r(a.promos.paging),t.setPage(t.getPage()-1),t},getListConfig:function(){return this.listConfig},getListItemEntity:function(){return this.listItemEntity},getPaginatedList:function(e){var i=new l({listItem:this.getListItemEntity()}),n=new c({},i);return new d(this.getModel(),n,t(this.moreResultsSelector),t(this.loadMoreWrapperSelector),this.getListConfig(),this.getPromoGroupComponent(),this.getPromoGroupTemplate())},getPromoGroupComponent:function(){return this.promoGroupComponent},getPromoGroupTemplate:function(){return this.promoGroupTemplate},setupPagination:function(){this.getPaginatedList().load()}}),h}),define("common/entity/proxy/base",["lodash","common/util/extends","common/util/logger","common/entity/base"],function(t,e,i,n){function o(t){n.apply(this,arguments)}return e(o,n,{init:function(t){n.prototype.init.apply(this,arguments),this.initProxy(t)},initProxy:function(t){this.setProxy(new n(t))},getProxy:function(){return this.proxy},setProxy:function(t){this.proxy=t}}),o}),define("common/entity/proxy/link",["lodash","common/util/extends","common/util/logger","common/entity/proxy/base","common/entity/vanilla/link/base"],function(t,e,i,n,o){function s(t){n.apply(this,arguments)}return e(s,n,{initProxy:function(t){this.setProxy(new o(t))},getId:function(t){return this.getProxy().getId(t)},getURL:function(){return this.getProxy().getURL()},getTitle:function(){return this.getProxy().getTitle()},getImage:function(){return this.getProxy().getImage()}}),s}),define("common/entity/proxy/promo",["lodash","common/util/extends","common/util/logger","common/entity/proxy/link","common/entity/vanilla/promo"],function(t,e,i,n,o){function s(t){n.apply(this,arguments)}return e(s,n,{initProxy:function(t){this.setProxy(new o(t))},getShortName:function(){return this.getProxy().getShortName()},getClientName:function(){return this.getProxy().getClientName()},getSummary:function(){return this.getProxy().getSummary()},setSummary:function(t){return this.getProxy().setSummary(t)},getSummaryLong:function(){return this.getProxy().getSummaryLong()},getContext:function(t){return this.getProxy().getContext(t)},getIconType:function(){return this.getProxy().getIconType()},getType:function(){return this.getProxy().getType()},getRelatedLinks:function(){return this.getProxy().getRelatedLinks()}}),s}),define("common/entity/habitat/collection/base",["lodash","common/util/extends","common/util/logger","common/entity/habitat/promo"],function(t,e,i,n){function o(e){var i={};n.call(this,t.extend(i,e))}return e(o,n,{init:function(t){n.prototype.init.call(this,t),this.map("collectionType","type"),this.map("description","summary"),this.initImage("image",this.getArrayNestedAsset("assetImage"),this.get("type"))}}),o}),define("common/entity/habitat/collection/promo",["lodash","common/util/extends","common/entity/habitat/collection/base"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{}),n}),define("common/entity/habitat/tag/promo",["lodash","common/util/extends","common/util/logger","common/entity/habitat/promo"],function(t,e,i,n){function o(e){var i={URL:"",name:"",description:""};n.call(this,t.extend(i,e))}return e(o,n,{init:function(t){n.prototype.init.call(this,t),this.map("name","title"),this.initImage("image",this.getArrayNestedAsset("assetImage"),"tag")}}),o}),define("common/entity/habitat/destination/link",["lodash","common/util/extends","common/util/logger","common/entity/habitat/promo","common/view/entity-URL-router"],function(t,e,i,n,o){function s(e){var i={name:"",description:""};n.call(this,t.extend(i,e))}return e(s,n,{init:function(t){n.prototype.init.call(this,t),this.map("name","title"),this.map("description","summary"),this.initImage("image",this.getArrayNestedAsset("assetImage"),"destination"),this.set("id",this.getPathId()),this.initURL()},getPathId:function(){var e,i=this.getId(),n=this.get("path");return t.isString(i)&&n?(e=this.get("id","").split("/"),e.pop(),e.join("/")+"/"+n):i}}),s}),define("common/entity/habitat/document",["lodash","common/util/extends","common/entity/habitat/promo","common/entity/habitat/image/base","common/view/entity-URL-router"],function(t,e,i,n,o){function s(e,n){var o={keywords:[],author:!1,adZoneId:"",adSlots:!1,partner:!1,searchTerms:!1,error:!1,advertsDisabled:!1};i.call(this,t.extend(o,e),n)}return e(s,i,{init:function(){i.prototype.init.apply(this,arguments)},getKeywords:function(){return this.keywords},getAuthor:function(){return this.author},getPartner:function(){return this.partner},getAdZoneId:function(){return this.adZoneId},getAdSlots:function(){return this.adSlots},getSearchTerms:function(){return this.searchTerms},getError:function(){return this.error},areAdvertsDisabled:function(){return this.advertsDisabled}}),s}),define("common/entity/habitat/story/link",["lodash","common/util/extends","common/util/logger","common/entity/habitat/document"],function(t,e,i,n){function o(e,i){var o={};n.call(this,t.extend(o,e),i)}return e(o,n,{init:function(t,e){n.prototype.init.apply(this,arguments),this.map("headlineShort","title"),this.initImage("image",this.getLeadImage(),"story")},getLeadImage:function(){var t=this.getArrayNestedAsset("assetImagePromo"),e=this.getArrayNestedAsset("promoImageOverride");return t||(e||this.getArrayNestedAsset("assetImage"))}}),o}),
define("common/entity/habitat/external-promotion/promo",["lodash","common/util/extends","common/util/logger","common/entity/habitat/promo","common/helper/context-data/item"],function(t,e,i,n,o){function s(e,i){var o={linkUrl:""};n.call(this,t.extend(o,e),i)}return e(s,n,{init:function(t,e){n.prototype.init.apply(this,arguments),this.map("name","title"),this.map("name","title"),this.set("iconType","external"),this.map("summaryLong","summary"),this.initImage("image",this.getArrayNestedAsset("assetImage"),this.getPlaceholderName(this.getURL()))},getURL:function(){return this.linkUrl},getPlaceholderName:function(e){if(t.isString(e)){var i=e.split("/");if(i.length>=4)return i[3]+"-external-promotion"}return"story"}}),s}),define("common/entity/habitat/slideshow-gallery/link",["lodash","common/util/extends","common/util/logger","common/entity/habitat/document"],function(t,e,i,n){function o(e,i){var o={};n.call(this,t.extend(o,e),i)}return e(o,n,{init:function(t,e){n.prototype.init.apply(this,arguments)}}),o}),define("common/_modules/third-party-content/entities/link",["lodash","common/util/extends","common/entity/habitat/link"],function(t,e,i){function n(e){var n={};i.call(this,t.extend(n,e))}return e(n,i,{init:function(t){i.prototype.init.call(this,t),this.map("headlineShort","title"),this.initURL(),this.initPromoImage()},initPromoImage:function(){var t=this.getArrayNestedAsset("assetImagePromo");!1!==t&&this.initImage("image",t,"third-party-content-splash")}}),n}),define("common/entity/habitat/mixed/link",["lodash","common/util/extends","common/util/logger","common/entity/proxy/promo","common/entity/habitat/base","common/entity/habitat/collection/promo","common/entity/habitat/tag/promo","common/entity/habitat/destination/link","common/entity/habitat/story/link","common/entity/habitat/external-promotion/promo","common/entity/vanilla/link/base","common/entity/habitat/slideshow-gallery/link","common/_modules/third-party-content/entities/link"],function(t,e,i,n,o,s,a,r,l,c,d,u,p){function h(t){n.apply(this,arguments)}return e(h,n,{initProxy:function(t){var e,i=new o(t);switch(i.getEntityType()){case"collection":e=this.getCollectionEntity(t);break;case"tag":e=this.getTagEntity(t);break;case"destination":e=this.getDestinationEntity(t);break;case"story":case"native-story":e=this.getStoryEntity(t);break;case"slideshow-gallery":e=this.getSlideshowGalleryEntity(t);break;case"thirdpartycontent":e=this.getThirdPartyContentEntity(t);break;case"external":e=this.getExternalPromotionEntity(t);break;default:e=this.getDefaultEntity(t)}this.setProxy(e)},getCollectionEntity:function(t){return new s(t)},getExternalPromotionEntity:function(t){return new c(t)},getTagEntity:function(t){return new a(t)},getStoryEntity:function(t){return new l(t)},getSlideshowGalleryEntity:function(t){return new u(t)},getThirdPartyContentEntity:function(t){return new p(t)},getDestinationEntity:function(t){return new r(t)},getDefaultEntity:function(t){return new d(t)}}),h}),define("common/helper/entity/list",["lodash","common/entity/factory","common/entity/list/entity"],function(t,e,i){return{getList:function(n,o){var s;return!!(t.isArray(n)&&n.length>0)&&(s=new e({listItem:o}),new i({listItems:n},s))}}}),define("common/entity/vanilla/list",["lodash","common/util/extends","common/entity/list/base"],function(t,e,i){function n(e,n){var o={URL:"",image:!1,page:1,totalPages:1,itemsPerPage:1,totalItems:0};i.call(this,t.extend(o,e),n)}return e(n,i,{getURL:function(){return this.URL},getImage:function(){return this.image},getPage:function(){return this.page},getTotalPages:function(){return this.totalPages},getTotalItems:function(){return this.totalItems},getItemsPerPage:function(){return this.itemsPerPage}}),n}),require([],function(){return String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.insert=function(t,e){return t>0?this.substring(0,t)+e+this.substring(t,this.length):e+this},String}),define("common/util/string-extension",function(){}),define("common/helper/context-data/promo",["lodash","common/util/extends","common/entity/base","common/helper/context-data/item","common/helper/domain-brand-mapper","common/util/string-extension","common/util/logger","common/helper/date-formatter","common/config"],function(t,e,i,n,o,s,a,r,l){function c(t){var e=["destination","tag","collection"];if(!t.canProvide(e))throw new Error("PromoContextHelper.constructor called factory must support methods ("+e.join(",")+")");this.entityFactory=t}return t.extend(c.prototype,{getEntityFactory:function(){return this.entityFactory},getContext:function(e,n){var o,s,a=new i(n),r=a.get("type",!1);switch(!1===r&&(r=l.get()["default-context"]),r){case"destination":o=this.getDestinationContext(e,a);break;case"collection":s=this.createCollectionContextItem(e,a);break;case"tag":s=this.createTagContextItem(e,a);break;case"tags":o=this.getTagsContext(e,a),o=o.slice(0,3);break;case"destination-and-tag":o=this.createDestinationAndTagContext(e,a);break;case"collection-and-tags":o=this.createCollectionAndTagContext(e,a);break;case"collection-and-tag":o=this.createCollectionAndTagContext(e,a,1);break;case"date":s=this.getDateContext(e,a);break;case"any":default:s=this.getAnyContext(e,a)}return t.isUndefined(s)||!1===s||(o=[s]),o},getAnyContext:function(t,e){var i;return(i=this.createCollectionContextItem(t,e))?i:(i=this.createTagContextItem(t,e))||void 0},getDateContext:function(t,e){return this.createContextItem(r.getFormattedDate(t.get("displayDate")))},createDestinationAndTagContext:function(t,e){var i=this.createDestinationContext(t,e),n=this.createTagContextItem(t,e),o=[];if(!1!==i){var s=function(){return!0},a={isItemCollection:s,class:"destination",subItems:i};o.push(a)}return!1!==n&&o.push(n),o},createCollectionAndTagContext:function(e,i,n){var o=this.createCollectionContextItem(e,i),s=this.getTagsContext(e,i),a=[],r=3;if(void 0===n&&(n=10),t.isObject(o)&&(a.push(o),r--),t.isArray(s))for(var l=0;l<r&&l<n&&l<s.length;l++)a.push(s[l]);return a},getDestinationContext:function(t,e){var i;switch(t.getEntityType()){case"destination":i=this.getDestinationContextItems(t,e.get("maxDepth",4),e.get("excludeRootDestination",!1));break;case"story":i=this.createDestinationContext(t,e);break;default:i=!1}return i},createDestinationContext:function(t,e){var i=t.get("location",!1),n=!1;if(null!==i&&!1!==i&&i.length>0){var o=i[0],s=e.get("maxDepth",4),a=e.get("excludeRootDestination",!1);n=this.getDestinationContextItems(o,s,a)}return n},getDestinationContextItems:function(t,e,i){var n=[],o=this.getEntityFactory().create("destination",t);return this.getDestinationContextItem(o.getId(),n,t,1,e,i),n},getDestinationContextItem:function(t,e,i,n,o,s){var a=this.getEntityFactory().create("destination",i),r=a.get("parent",!1);null!==r&&!1!==r&&r.length>0&&r[0]instanceof Object&&n<o&&this.getDestinationContextItem(t,e,r[0],n+1,o,s),s&&a.getId()===t||e.push(this.createContextItem(a.getTitle(),a.getURL(),""))},createTagContextItem:function(e,i){var n=this.getTagsContext(e,i);return!(!t.isArray(n)||!t.isObject(t.first(n)))&&n[0]},getTagsContext:function(e,i){var n,o,s,a=e.get("tags",!1),r=[];return!!(t.isArray(a)&&a.length>0)&&(t.each(a,function(t){s=this.getEntityFactory().create("tag",t),n=s.getTitle(),o=s.getURL(),r.push(this.createContextItem(n,o,""))},this),r)},createCollectionContextItem:function(e,i){var n,o,s,a=e.get("collection");return!!t.isObject(a)&&(n=this.getEntityFactory().create("collection",a),o=n.getTitle(),s=n.getURL(),this.createContextItem(o,s,""))},createContextItem:function(t,e,i){return new n(t,e,i)}}),c}),define("common/helper/icon-type-helper",[],function(){return{getIconType:function(t){switch(t){case"play":case"video":return"play";case"audio":return"listen";case"slideshow":case"slideshow-gallery":return"image";case"infographic":case"thirdpartycontent":return"info";case"event":return"calendar";case"external":return"external"}return""}}}),define("common/entity/habitat/story/promo",["lodash","common/util/extends","common/entity/habitat/story/link","common/helper/entity/list","common/entity/habitat/mixed/link","common/entity/habitat/tag/promo","common/entity/habitat/destination/link","common/entity/habitat/collection/base","common/entity/list/entity","common/entity/vanilla/list","common/entity/factory","common/helper/context-data/promo","common/helper/icon-type-helper"],function(t,e,i,n,o,s,a,r,l,c,d,u,p){function h(e){var n={summary:"",type:"",iconType:"",collection:!1,longitude:!1,latitude:!1};i.call(this,t.extend(n,e))}return e(h,i,{init:function(t){i.prototype.init.apply(this,arguments),this.setContextHelper(new u(new d({destination:a,tag:s,collection:r}))),this.map("storyType","type"),this.map("tag","tags"),this.set("collection",this.getArrayNestedAsset("collection")),this.map("summaryShort","summary"),this.initIconType(),this.initRelatedLinks()},initIconType:function(){"story"===this.get("entityType")?this.set("iconType",p.getIconType(this.get("type"))):this.set("iconType",p.getIconType(this.get("entityType")))},initRelatedLinks:function(){var e=this.get("location",[]).concat(this.get("tags",[])),i=n.getList(e,o),s=[],a=[];i&&(t.each(i.getListItems(),function(e,i,n){t.contains(s,e.getId())||a.push(e),s.push(e.getId())}),this.setRelatedLinks(new c({listItems:a})))},setContextHelper:function(t){this.contextHelper=t},getContextHelper:function(){return this.contextHelper},getContext:function(t){return this.getContextHelper().getContext(this,t)},getSummaryLong:function(){return this.summaryLong},getLatitude:function(){return this.latitude},getLongitude:function(){return this.longitude}}),h}),define("common/entity/habitat/slideshow-gallery/promo",["lodash","common/util/extends","common/entity/habitat/slideshow-gallery/link","common/helper/entity/list","common/entity/habitat/mixed/link","common/entity/habitat/tag/promo","common/entity/habitat/destination/link","common/entity/habitat/collection/base","common/entity/list/entity","common/entity/vanilla/list","common/entity/factory","common/helper/context-data/promo","common/helper/icon-type-helper"],function(t,e,i,n,o,s,a,r,l,c,d,u,p){function h(e){var n={image:!1,title:"",summary:""};i.call(this,t.extend(n,e))}return e(h,i,{init:function(t){i.prototype.init.call(this,t),this.map("tag","tags"),this.set("collection",this.getArrayNestedAsset("collection")),this.map("headlineShort","title"),this.map("summaryShort","summary"),this.set("iconType",p.getIconType("slideshow")),this.initImage(),this.initContextHelper(),this.initRelatedLinks()},initRelatedLinks:function(){var e=this.get("location",[]).concat(this.get("tags",[])),i=n.getList(e,o),s=[],a=[];i&&(t.each(i.getListItems(),function(e,i,n){t.contains(s,e.getId())||a.push(e),s.push(e.getId())}),this.setRelatedLinks(new c({listItems:a})))},initContextHelper:function(){this.setContextHelper(new u(new d({destination:a,tag:s,collection:r})))},setContextHelper:function(t){this.contextHelper=t},getContextHelper:function(){return this.contextHelper},getContext:function(t){return this.getContextHelper().getContext(this,t)},getSummaryLong:function(){return this.summaryLong},initImage:function(){var e=this.get("slides",!1);t.has(this,"promoImageOverride")&&t.isArray(this.promoImageOverride)?this.set("image",this.get("promoImageOverride")):t.isArray(e)&&e.length>0&&t.isObject(e[0],"ImagePid")&&this.set("image",e[0].ImagePid),i.prototype.initImage.call(this,"image",this.getArrayNestedAsset("image"),"slideshow-gallery-promo")}}),h}),define("common/_modules/third-party-content/entities/promo",["lodash","common/util/extends","common/_modules/third-party-content/entities/link","common/helper/context-data/promo","common/helper/icon-type-helper","common/entity/factory","common/entity/habitat/collection/base","common/entity/habitat/tag/promo","common/entity/habitat/destination/link","common/entity/list/entity","common/entity/vanilla/list","common/helper/entity/list","common/entity/habitat/mixed/link"],function(t,e,i,n,o,s,a,r,l,c,d,u,p){function h(e){var n={summary:!1,iconType:!1,relatedLinks:!1,collection:!1,tags:!1,clientName:!1};i.call(this,t.extend(n,e))}return e(h,i,{init:function(t){i.prototype.init.call(this,t),this.map("summaryShort","summary"),this.map("tag","tags"),this.set("iconType",o.getIconType("infographic")),this.set("collection",this.getArrayNestedAsset("collection")),this.initContextHelper(),this.initRelatedLinks()},getShortName:function(){return this.getTitle()},getSummary:function(){return this.summary},getSummaryLong:function(){return this.getSummary()},setSummary:function(t){this.summary=t},initContextHelper:function(){this.setContextHelper(new n(new s({destination:l,tag:r,collection:a})))},setContextHelper:function(t){this.contextHelper=t},getContextHelper:function(){return this.contextHelper},getContext:function(t){return this.getContextHelper().getContext(this,t)},initRelatedLinks:function(){var e=this.get("location",[]).concat(this.get("tags",[])),i=u.getList(e,p),n=[],o=[];i&&(t.each(i.getListItems(),function(e,i,s){t.contains(n,e.getId())||o.push(e),n.push(e.getId())}),this.setRelatedLinks(new d({listItems:o})))},setRelatedLinks:function(t){this.relatedLinks=t},getRelatedLinks:function(){return this.relatedLinks},getClientName:function(){return this.clientName},getIconType:function(){return this.iconType},getType:function(){return this.type}}),h}),define("common/entity/habitat/mixed/promo",["lodash","common/util/extends","common/util/logger","common/entity/habitat/mixed/link","common/entity/habitat/story/promo","common/entity/habitat/slideshow-gallery/promo","common/_modules/third-party-content/entities/promo","common/entity/vanilla/promo"],function(t,e,i,n,o,s,a,r){function l(t){n.apply(this,arguments)}return e(l,n,{getSlideshowGalleryEntity:function(t){return new s(t)},getThirdPartyContentEntity:function(t){return new a(t)},getStoryEntity:function(t){return new o(t)},getDefaultEntity:function(t){return new r(t)}}),l}),define("module/responsiveLists/list",["lib/ecmaScript5","lib/domReady","jquery"],function(t,e,i){return function(t,e){var n=e,o=i(t);this.getRequest=function(){return n},this.getSelector=function(){return o}}}),define("module/responsiveLists/request",[],function(){return function(t,e,i,n){var o=t,s=n,a=e,r=i,l=!1;this.getType=function(){return o},this.getGroups=function(){return s},this.getStartIndex=function(){return a},this.getLength=function(){return r},this.setCompleted=function(t){l=t},this.isCompleted=function(){return l}}}),define("lib/jquery.insertAt",["jquery"],function(t){t.fn.insertAt=function(t,e){return this.each(function(){0===t?e.prepend(this):e.children().eq(t-1).after(this)})}}),define("module/responsiveLists/transaction",[],function(){return function(t,e){var i=t,n=e;this.getSource=function(){return i},this.getDestination=function(){return n}}}),define("module/responsiveLists/exchange",["lib/ecmaScript5","lib/domReady","jquery","lib/jquery.insertAt","model/breakpoints","model/mediaQuery","module/responsiveLists/transaction","util/logger"],function(t,e,i,n,o,s,a,r){return new function(){var t={source:[],destination:[]},n=[];this.init=function(){s.subscribe("groupChanged",this.respond.bind(this))},this.addList=function(e){t[e.getRequest().getType()].push(e)},this.getLists=function(){return t},this.updateList=function(e,i,n){"undefined"!=t[e][i]&&(t[e][i]=n)},this.removeList=function(e,i){"undefined"!=t[e]&&t[e].splice(i,1)},this.respond=function(t){try{this.replaceCompletedTransactionsForMediaGroup(t),this.updateListsForMediaGroup(t)}catch(t){r.error(t)}},this.updateListsForMediaGroup=function(t){for(var e,n,o=0;o<this.getLists().source.length;o++)if(e=this.getLists().source[o],e.getRequest().getGroups(),-1!=i.inArray(t,e.getRequest().getGroups())&&!e.getRequest().isCompleted()){if(!(n=this.getDestinationListForSource(e,t)))throw new Error("You must provide a source and destination list");this.performExchange(e.getSelector(),e.getRequest().getStartIndex(),e.getRequest().getLength(),n.list.getSelector(),n.list.getRequest().getStartIndex()),n.list.getRequest().setCompleted(!0),e.getRequest().setCompleted(!0),this.updateList("destination",n.index,n.list),this.updateList("source",o,e),this.createTransaction(e,n.list)}this.removeCompletedLists()},this.getDestinationListForSource=function(t,e){for(var n,o=0;o<this.getLists().destination.length;o++)if(n=this.getLists().destination[o],-1!=i.inArray(e,n.getRequest().getGroups())&&!n.getRequest().isCompleted()&&n.getRequest().getLength()==t.getRequest().getLength())return{list:n,index:o};return!1},this.replaceCompletedTransactionsForMediaGroup=function(t){for(var e,o,s=[],a=n.length-1;a>=0;a--)e=n[a].getSource(),o=n[a].getDestination(),-1==i.inArray(t,e.getRequest().getGroups())&&-1==i.inArray(t,o.getRequest().getGroups())&&(this.performExchange(o.getSelector(),o.getRequest().getStartIndex(),o.getRequest().getLength(),e.getSelector(),e.getRequest().getStartIndex()),e.getRequest().setCompleted(!1),o.getRequest().setCompleted(!1),this.addList(e),this.addList(o),s.push(a));for(var r in s)n.splice(s[r],1)},this.performExchange=function(t,e,i,n,o){t.children().slice(e,e+i).insertAt(o,n)},this.createTransaction=function(t,e){var i=new a(t,e);n.push(i)},this.removeCompletedLists=function(){var t,e,i={},n=this.getLists();for(t in n){i[t]=[];for(e in n[t])n[t][e].getRequest().isCompleted()&&i[t].push(e);for(e in i[t])this.removeList(t,i[t][e])}},e(this.init.bind(this))}}),define("common/view/model-v2/list/promo-group/set",["lodash","common/util/extends","common/view/model-v2/base","common/view/model-v2/list/promo-group/base","common/interface/entity/list/base","common/entity/vanilla/list"],function(t,e,i,n,o,s){function a(){i.apply(this,arguments)}return e(a,i,{entityInterface:o,setViewData:function(){var e={},i=this.getEntity().getListItems();t.each(this.getConfig().get("groups"),function(t){i.length>t.start&&(e[t.name]=this.getPromoGroup(i,t.start,t.end,t.title,t.class,t.adSlots))},this),this.viewData={groups:e}},getPromoGroup:function(t,e,i,o,a,r){return new n(new s,{analyticsConfig:this.getConfig().get("analyticsConfig"),promoUnit:this.getConfig(),title:o,class:a,adSlots:r,groupStart:e,groupEnd:i}).setSourceData({listItems:t})}}),a}),define("component/promo-group/set",["lodash","module/MVVM-component","common/view/model-v2/list/promo-group/set","templates"],function(t,e,i,n){return function(o,s,a,r){t.isUndefined(r)&&(r="promo-group");var l=new i(s,a);return new e(o,l,n[r])}}),define("layouts/index/story/base",["jquery","lodash","common/util/extends","layouts/index/base","common/config","common/entity/factory","common/entity/habitat/paged-list","common/entity/habitat/mixed/promo","module/paginated-entity-list","module/responsiveLists/list","module/responsiveLists/request","module/responsiveLists/exchange","model/mediaQuery","component/promo-group/set"],function(t,e,i,n,o,s,a,r,l,c,d,u,p,h){function m(e,i){n.call(this,e),"homepage-three-column"==t(e).attr("id")&&this.setupListExchange()}return i(m,n,{setupListExchange:function(){var e,i,n,o,s,a;e=new c(".article-list-group-1",new d("source",2,1,[3])),i=new c(".article-list-group-3",new d("destination",0,1,[3])),u.addList(e),u.addList(i);var r=t(".article-list-group-2").children().length,l=t(".article-list-group-3").children().length,h=t(".article-list-group-4").children().length;n=new c(".article-list-group-4",new d("source",0,h/2,[3])),o=new c(".article-list-group-2",new d("destination",r,h/2,[3])),u.addList(n),u.addList(o),s=new c(".article-list-group-4",new d("source",0,h/2,[3])),a=new c(".article-list-group-3",new d("destination",l,h/2,[3])),u.addList(s),u.addList(a),u.respond(p.getGroup())},moreResultsSelector:"#more-stories-wrapper",listItemEntity:r,listConfig:{promoUnit:{context:"any"},analyticsConfig:{module:"story-index",paginated:!0}}}),m}),define("common/service/request-builder/habitat-paging",["lodash","common/util/extends","common/service/request-builder/habitat"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{getRequestURL:function(e,n){var o={page:1,items:10};return n=t.extend(o,n),-1===e.indexOf("?")?e+="?":e+="&",e+="page={page}&itemsPerPage={items}",i.prototype.getRequestURL(e,n)}}),n}),define("common/parser/habitat",["lodash"],function(t){return function(e){if(t.has(e,"meta")&&t.has(e.meta,"results")&&t.has(e,"results"))return{results:e.results,paging:e.meta.results};throw new Error("Habitat parser cannot parse data, unexpected format")}}),define("common/model/habitat-result-set",["lodash","common/util/extends","common/model/habitat","common/service/request-builder/habitat-paging","common/parser/habitat"],function(t,e,i,n,o){function s(t){i.call(this,t)}return e(s,i,{requestBuilder:new n,parseData:function(t,e){return this.parseHabitatData(o(t))},parseHabitatData:function(t){return t},getPage:function(t){return this.config.page},getItemsPerPage:function(){return this.config.items},setPage:function(t){this.config.page=t},setItemsPerPage:function(t){this.config.items=t}}),s}),define("common/model/front-page/front-page-stories",["lodash","common/util/extends","common/model/habitat-result-set"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{URLScheme:"/search/frontpage/{moduleId}"}),n}),define("module/bestOf",["jquery","lib/ecmaScript5","module/analytics/main","util/logger"],function(t,e,i,n){function o(t,e){this.setModuleSelector(t),this.setItemSelector(e),this.setupAnalytics()}return o.prototype.setupAnalytics=function(){var e=this.getItemSelector(),n=t(e);i.addTrackingForModule(this.getModuleSelector(),{module:"best-of"}),n.each(function(e,n){var o=t(n),s=o.find(".promo-unit-image a.responsive-image-wrapper"),a=o.find(".promo-unit-copy .promo-unit-header > a"),r=a.find(".promo-unit-title");i.addTrackingForSelector(s,{id:"best-of-"+e,elementType:"image",elementName:r.text()}),i.addTrackingForSelector(a,{id:"best-of-"+e,elementType:"headline",elementName:r.text()})})},o.prototype.getModuleSelector=function(){return this.moduleSelector},o.prototype.setModuleSelector=function(t){this.moduleSelector=t},o.prototype.getItemSelector=function(){return this.itemSelector},o.prototype.setItemSelector=function(t){this.itemSelector=t},o}),define("module/calendar/filter/selectors",["lodash","jquery"],function(t,e){var i=function(t){this.setSelector(t)};return t.extend(i.prototype,{setSelector:function(t){this.selector=e(t)},getSelector:function(){return this.selector},getRegion:function(){return this.getSelector().find(".event-filter-region")},getType:function(){return this.getSelector().find(".event-filter-type")},getDate:function(){return this.getSelector().find(".event-filter-date")}}),i}),define("module/calendar/filter/ui",["lodash","jquery","module/calendar/filter/selectors"],function(t,e,i){return function(t){var n=new i(t);e(t).show(),n.getRegion().find("select").selectivity({placeholder:"All regions"}),n.getType().find("select").selectivity({placeholder:"All types"}),n.getDate().find("select").selectivity({showSearchInputInDropdown:!1,placeholder:"All dates"})}}),define("module/calendar/analytics",["lodash","jquery","module/analytics/main"],function(t,e,i){var n=function(){};return t.extend(n.prototype,{trackFilter:function(t,e){var n="calendar-filter-"+i.formatArrayVariable(e.type)+"_"+i.formatArrayVariable(e.region)+"_"+i.formatArrayVariable(e.date);i.addTrackingForSelector(t,{id:n,channelName:"calendar",elementType:"search",interactionType:"link",event:"track"}),t.trigger("track")},addTrackingToAddToCalendarToggle:function(t,n,o){i.addTrackingForSelector(e(t).getSelector(!0),{id:n,channelName:"calendar",elementName:o,elementType:"add-to-calendar",interactionType:"custom"})},addTrackingToAddToCalendarItem:function(t,n,o){i.addTrackingForSelector(e(t).getSelector(!0),{id:n,channelName:"calendar",elementType:"add-to-calendar",additionalData:o,interactionType:"custom"})},addTrackingToEventPromo:function(t,e){i.addTrackingForSelector(t,{id:e,channelName:"calendar",elementType:"event",trackingMethod:"ajax",pageName:"bbc | culture | cultural calendar |"+e})},addModuleTrackingForGroup:function(t,e){i.addTrackingForModule(e,{module:t})},trackInteraction:function(t){i.trackInteraction(t)}}),new n}),define("module/calendar/filter/main",["lodash","jquery","module/calendar/filter/ui","module/calendar/filter/selectors","module/calendar/analytics","signals"],function(t,e,i,n,o,s){var a=function(t,e){this.preventFormSubmit=e,this.filterSelectors=new n(t),this.filterUI=new i(t),this.submitSignal=new s.Signal,this.setSelector(t),this.setupAnalytics(),this.addEventListeners()};return t.extend(a.prototype,{addEventListeners:function(){this.getSelector().find("#event-filter-submit").click(this.submitForm.bind(this))},setupAnalytics:function(){var t=this.getSelector();this.subscribe("submit",function(e){o.trackFilter(t,e)})},subscribe:function(t,e){switch(t){case"submit":this.submitSignal.add(e)}},submitForm:function(t){!0===this.preventFormSubmit&&(t.preventDefault(),t.stopPropagation());var e=this.getFormValues();this.submitSignal.dispatch(e)},getFormValues:function(){return{region:this.filterSelectors.getRegion().find(".selectivity-input").selectivity("value"),type:this.filterSelectors.getType().find(".selectivity-input").selectivity("value"),date:[this.filterSelectors.getDate().find(".selectivity-input").selectivity("value")]}},setSelector:function(t){this.selector=e(t)},getSelector:function(){return this.selector}}),a}),define("layouts/index/story/front-page",["lodash","common/util/extends","layouts/index/story/base","model/exposed-data","common/config","common/model/front-page/front-page-stories","module/bestOf","module/calendar/filter/main","module/adverts/deferredAdSlotRenderer"],function(t,e,i,n,o,s,a,r,l){function c(t,e){i.call(this,t),this.calendarPromoSelector=".event-filter",this.bestOfModuleSelector="div.best-of-list",this.bestOfItemSelector=".best-of-list li.promo-unit-wrapper div.promo-unit",this.setupModules()}return e(c,i,{setModel:function(t){this.model=new s(t)},setupModules:function(){this.bestOfModule=new a(this.bestOfModuleSelector,this.bestOfItemSelector),$(this.calendarPromoSelector).length>0&&(this.calendarFilter=new r(this.calendarPromoSelector),l.renderSlot("#calendar-deferred-slot"))}}),c}),define("common/model/story/story-by",["lodash","common/util/extends","common/model/habitat-result-set"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{}),n}),define("common/model/story/story-by-collection",["lodash","common/util/extends","common/model/story/story-by"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{arrRequiredConfig:["id","type"],URLScheme:"/search/story-by-{type}/{moduleId}/{id}"}),n}),define("layouts/index/story/collection",["lodash","common/util/extends","layouts/index/story/base","model/exposed-data","common/config","common/model/story/story-by-collection"],function(t,e,i,n,o,s){function a(t,e,n){this.collectionId=n,this.collectionType=e,i.call(this,t)}return e(a,i,{setModel:function(e){this.model=new s(t.extend({type:this.collectionType,id:this.collectionId},e))}}),a}),define("layouts/index/entity/base",["lodash","common/util/extends","layouts/index/base"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{moreResultsSelector:"#entity-index-more-results",listConfig:{promoUnit:{class:"alternative",image:{showBrandedBorder:!0,format:{landscape:{x:"464",y:"261"}}}}}}),n}),define("common/model/collection/collection-by-type",["lodash","common/util/extends","common/model/habitat-result-set"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{arrRequiredConfig:["type"],URLScheme:"/search/collection-by-type/{moduleId}/{type}"}),n}),define("layouts/index/entity/collection",["lodash","common/util/extends","layouts/index/entity/base","model/exposed-data","common/config","common/model/collection/collection-by-type","common/entity/habitat/collection/promo"],function(t,e,i,n,o,s,a){function r(t,e){this.collectionType=e,i.call(this,t)}return e(r,i,{listItemEntity:a,setModel:function(e){this.model=new s(t.extend({type:this.collectionType},e))}}),r}),define("common/model/story/story-by-tag",["lodash","common/util/extends","common/model/story/story-by"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{arrRequiredConfig:["id"],URLScheme:"/search/story-by-tag/{moduleId}/{id}"}),n}),define("layouts/index/story/tag",["lodash","common/util/extends","layouts/index/story/base","model/exposed-data","common/config","common/model/story/story-by-tag"],function(t,e,i,n,o,s){function a(t,e){this.tagId=e,i.call(this,t)}return e(a,i,{setModel:function(e){this.model=new s(t.extend({id:this.tagId},e))}}),a}),define("common/model/tag/tag-index",["lodash","common/util/extends","common/model/habitat-result-set"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{URLScheme:"/search/tags/{moduleId}"}),n}),define("layouts/index/entity/tag",["lodash","common/util/extends","layouts/index/entity/base","model/exposed-data","common/config","common/model/tag/tag-index","common/entity/habitat/tag/promo"],function(t,e,i,n,o,s,a){function r(t){i.call(this,t)}return e(r,i,{listItemEntity:a,setModel:function(t){this.model=new s(t)}}),r}),define("common/model/search/story-search-by-keyword",["lodash","common/util/extends","common/model/habitat-result-set","common/util/logger"],function(t,e,i,n){function o(e){i.call(this,e);var n=this.config.searchKeywords;(n&&t.isString(n)&&n.length<=2||!n)&&this.populate({results:[]})}return e(o,i,{URLScheme:"/search/keyword/{moduleId}?query={searchKeywords}",prepareInput:function(){if(t.has(this.config,"searchKeywords")&&!t.isUndefined(this.config.searchKeywords)&&this.config.searchKeywords.length>2){var e=this.config.searchKeywords;e=e.replace(/(\%22|'|\%27|!|;|\.|:|-|_|,|\{|\}|\%7B|\%7D|\[|\%5B|\%5D|\]|\(|\)|\%3C|\%3E|\%7C)/gi,""),this.config.searchKeywords=e}}}),o}),define("layouts/index/story/search-results",["lodash","common/util/extends","layouts/index/story/base","model/exposed-data","common/config","common/model/search/story-search-by-keyword"],function(t,e,i,n,o,s){function a(t,e){this.keywords=e,i.call(this,t)}return e(a,i,{setModel:function(e){this.model=new s(t.extend({searchKeywords:this.keywords},e))}}),a}),function(){function t(t){var e,i,n,o=t.currentTarget||t.srcElement;if("load"===t.type||s.test(o.readyState)){for(i=o.getAttribute("data-requiremodule"),r[i]=!0,e=0;(n=a[e])&&r[n.name];e++)n.req([n.name],n.onLoad);e>0&&a.splice(0,e),setTimeout(function(){o.parentNode.removeChild(o)},15)}}function e(t){var e,i,n;for(t.setAttribute("data-orderloaded","loaded"),e=0;(n=c[e])&&((i=l[n])&&"loaded"===i.getAttribute("data-orderloaded"));e++)delete l[n],require.addScriptToDom(i);e>0&&c.splice(0,e)}var i="undefined"!=typeof document&&"undefined"!=typeof window&&document.createElement("script"),n=i&&(i.async||window.opera&&"[object Opera]"===Object.prototype.toString.call(window.opera)||"MozAppearance"in document.documentElement.style),o=i&&"uninitialized"===i.readyState,s=/^(complete|loaded)$/,a=[],r={},l={},c=[];i=null,define("lib/order",{version:"1.0.5",load:function(i,s,r,d){var u,p,h,m=!!s.nameToUrl;if(!m)return void s([i],r);u=s.nameToUrl(i,null),require.s.skipAsync[u]=!0,n||d.isBuild?s([i],r):o?(h=require.s.contexts._,h.urlFetched[u]||h.loaded[i]||(h.urlFetched[u]=!0,require.resourcesReady(!1),h.scriptCount+=1,p=require.attach(u,h,i,null,null,e),l[i]=p,c.push(i)),s([i],r)):s.specified(i)?s([i],r):(a.push({name:i,req:s,onLoad:r}),require.attach(u,null,i,t,"script/cache"))}})}(),define("module/brightcove",["lib/ecmaScript5","lib/domReady","orb/api","jquery","lib/order!http://admin.brightcove.com/js/BrightcoveExperiences.js"],function(t,e,i,n){return function(t){var o,s,a,r={forceHTML:"true",includeAPI:"true",templateReadyHandler:"onBrightcoveReady"};this.init=function(){this.setSelector(t),this.addParams()},this.addParams=function(){for(var t in r)this.getSelector().append('<param name="'+t+'" value="'+r[t]+'" />')},this.setupPlayer=function(){
var t=brightcove.api.getExperience(this.getSelector().attr("id")),e=brightcove.api.modules.APIModules;t.getModule(e.VIDEO_PLAYER);s=t.getModule(e.EXPERIENCE),this.addEventListeners()},this.getParent=function(){return a},this.setPlayer=function(t){s=t},this.getPlayer=function(){return s},this.addEventListeners=function(){i.layout(this.resize.bind(this))},this.resize=function(){var t=this.getVideoPlayerDimensions();s.setSize(t.width,t.height)},this.getVideoPlayerDimensions=function(){var t=Math.round(this.getParent().width()),e=Math.round(t/16*9);return{width:t.toString(),height:e.toString()}},this.setSelector=function(t){o=n(t),a=o.parent()},this.getSelector=function(){return o},e(this.init.bind(this)),window.onBrightcoveReady=this.setupPlayer.bind(this)}}),define("module/customEmbed",["jquery","lib/ecmaScript5","lib/domReady","module/brightcove","module/responsiveFrame"],function(t,e,i,n,o){return function(e){var s;this.init=function(){if(this.setSelector(e),this.isMediaPlayer()&&(this.addMediaPlayerClass(),this.isMagnify()&&this.loadAppropriateMagnifyVideo(),this.isBrightcove())){this.getBrightCoveElement(),new n(".BrightcoveExperience")}new o(this.getFrame()).init()},this.loadAppropriateMagnifyVideo=function(){var t,e=this.getFrame(),i=this.getVideoPlayerDimensions();this.getSelector().width()<e.attr("width")&&(t=e.clone(),t.attr("width",i.width+"px"),t.attr("height",i.height+"px"),e.remove(),this.getSelector().append(t))},this.getVideoPlayerDimensions=function(){var t=Math.round(this.getSelector().width()),e=Math.round(.5625*t);return{width:t.toString(),height:e.toString()}},this.isMediaPlayer=function(){return!!(this.isMagnify()||this.isYoutube()||this.isBrightcove())},this.isMagnify=function(){return this.frameHrefContainString("magnify.net")},this.isYoutube=function(){return this.frameHrefContainString("youtube.com")},this.isBrightcove=function(){return 0!==this.getBrightCoveElement().length},this.getBrightCoveElement=function(){return this.getSelector().find(".BrightcoveExperience")},this.getFrame=function(){var t=this.getSelector().find("iframe");return t||!1},this.frameHrefContainString=function(t){var e,i=this.getFrame();return!(!i||!(e=i.attr("src"))||-1==e.search(t))},this.addMediaPlayerClass=function(){this.getSelector().addClass("iframe-video-player")},this.setSelector=function(e){s=t(e)},this.getSelector=function(){return s},i(this.init.bind(this))}}),define("module/responsiveInfographic",["jquery","lib/ecmaScript5","model/mediaQuery","module/loader","templates"],function(t,e,i,n,o){var s=function(){this.loaderHeight=300};return s.prototype.init=function(t,e){this.setSelector(t),this.storyModel=e,this.storyModel.subscribe("update",this.setupInfographic.bind(this)),this.getSelector().empty(),this.showLoader()},s.prototype.showLoader=function(){this.getSelector().css({position:"relative"}),this.spinner=new n(this.getSelector().get(0),"#333")},s.prototype.setupInfographic=function(t){var e;void 0!==t.getData().infographic&&(this.formats=t.getData().infographic.formats,e=this.getFormat(),this.format=e,this.render())},s.prototype.render=function(){var t,e;void 0!==this.format&&(this.getSelector().width(),e=this.getDimensions(),t=o.infographic({url:this.format.url,width:e.width,height:e.height,scrolling:"no",seamless:"seamless"}),void 0!==this.iframe&&this.iframe.remove(),this.getSelector().append(t),this.iframe=this.getSelector().find("iframe"),this.spinner.spin(this.getSelector().get(0)),this.iframe.load(this.iframeLoaded.bind(this)))},s.prototype.iframeLoaded=function(){this.spinner.stop();var t=this.iframe.get(0),e=t.contentDocument.body;e.style.padding=0,e.style.margin=0},s.prototype.getDimensions=function(){var t=this.getSelector().width();return{width:t,height:t*this.getRatio(this.format)}},s.prototype.getRatio=function(t){return this.format.dimensions.height/this.format.dimensions.width},s.prototype.getFormat=function(){var t=this.formats[this.formats.length-1],e=this.getSelector().width();return this.formats.every(function(i){return!(i.dimensions.width>=e)||(t=i,!1)}),t},s.prototype.resize=function(){var t=this.getDimensions(),e=this.getFormat();this.format.url!=e.url?(this.format=e,this.render()):void 0!==this.iframe&&this.iframe.attr({width:t.width,height:t.height})},s.prototype.setSelector=function(e){_selector=t(e)},s.prototype.getSelector=function(){return _selector},s}),define("model/shareData",[],function(){return function(t,e){return[{text:"facebook","icon-class":"gelicon--facebook",class:"facebook",url:"https://www.facebook.com/sharer/sharer.php?u="+encodeURI(e)+"&title="+t},{text:"Twitter","icon-class":"gelicon--twitter",class:"twitter",url:"https://twitter.com/intent/tweet?text="+t+"&url="+encodeURI(e)},{text:"Google +","icon-class":"gelicon--google-plus",class:"google",url:"https://plus.google.com/share?url="+encodeURI(e)},{text:"Email","icon-class":"gelicon--mail",class:"email",url:"mailto:?subject=Shared from BBC:"+t+"&body="+encodeURI(e)}]}}),define("lib/jquery.slideshow",["jquery","templates","model/shareData","model/digitalData","model/mediaQuery"],function(t,e,i,n,o){(function(){var s,a,r,l,c,d,u,p,h,m,g,f,b,y,v,w,S,x,I,C,T,_,k,E,A,L,P,D,R,M,V,U,B,N,O;s=t,u="#jquery-fullsizable",g="#fullsized_image_holder",L="fullsized_spinner",a=s('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>'),f=[],p=0,I=null,P=null,k=function(){var t;return t=f[p],null==t.ratio&&(t.ratio=(t.naturalHeight/t.naturalWidth).toFixed(2)),s(window).height()/t.ratio>s(window).width()?(s(t).width(s(window).width()),s(t).height(s(window).width()*t.ratio),s(t).css("margin-top",(s(window).height()-s(t).height())/2)):(s(t).height(s(window).height()),s(t).width(s(window).height()/t.ratio),s(t).css("margin-top",0))},b=function(t){if(27===t.keyCode&&d(),37===t.keyCode&&_(!1),39===t.keyCode)return S(!1)},_=function(t){if(null==t&&(t=!1),p>0)return A(f[p-1],-1,t)},S=function(t){if(null==t&&(t=!1),p<f.length-1)return A(f[p+1],1,t)},A=function(t,a,r){if(null==a&&(a=1),null==r&&(r=!1),B.html(t.captionTitle),N.html(t.caption),O.empty(),o.isCurrentGroupInPermittedGroupString("3_4")&&void 0!==n.pageInstanceID&&void 0!==n.page.pageInfo.pageName){var l=n.page.pageInfo.pageName;""!=t.captionTitle&&t.captionTitle,O.append(e["share-tools"]({shareItems:i(l,"http://"+n.pageInstanceID+"#"+t.id)}))}return p=t.index,s(g).hide(),s(g).html(t),I.navigation&&(!0===r?m():E()),null!=t.loaded?(s(u).removeClass(L),k(),s(g).fadeIn("fast"),C(a)):(s(u).addClass(L),t.onload=function(){return k(),s(g).fadeIn("slow",function(){return s(u).removeClass(L)}),this.loaded=!0,C(a)},t.src=t.buffer_src)},C=function(t){var e;if(1===t&&p<f.length-1)e=f[p+1];else{if(-1!==t&&p!==f.length-1||!(p>0))return;e=f[p-1]}if(e.onload=function(){return this.loaded=!0},""===e.src)return e.src=e.buffer_src},x=function(t,e){return s("body").append(a),s(window).bind("resize",k),A(t),s(u).hide().fadeIn(function(){return null!=I.detach_id&&(P=s(window).scrollTop(),s("#"+I.detach_id).css("display","none"),k()),r(),s(document).trigger("fullsizable:opened",e)})},d=function(){return null!=I.detach_id&&(s("#"+I.detach_id).css("display","block"),s(window).scrollTop(P)),s(u).fadeOut(function(){return a.remove()}),c(),s(u).removeClass(L),R(),s(window).unbind("resize",k)},y=function(){return f.length=0,s(I.selector).each(function(){var t;if(t=new Image,t.buffer_src=s(this).attr("href"),t.caption=s(this).data("caption"),t.id=s(this).attr("id"),t.captionTitle=s(this).data("captionTitle"),t.index=f.length,f.push(t),I.openOnClick&&!0===s(this).data("is-clickable"))return s(this).click(function(e){return e.preventDefault(),I.reloadOnOpen&&y(),x(t,this)})})},T=function(){switch(a.append(e["slideshow-footer"]({})),M=a.find("#fullsized_footer"),V=a.find("#fullsized_footer #fullsized_footer_toggle_wrapper"),U=a.find("#fullsized_footer #fullsized_footer_toggle_wrapper #fullsize_footer_toggle_text"),B=a.find("#fullsized_caption_wrapper .fullsized_caption_title"),N=a.find("#fullsized_caption_wrapper .fullsized_caption"),O=a.find("#fullsized_share_tools"),I.navigation&&(a.append('<a id="fullsized_go_prev" class="icon-wrapper" href="#prev"><div class="slideshow-icon gelicon--previous"></div></a><a  id="fullsized_go_next" class="icon-wrapper" href="#next"><div class="slideshow-icon gelicon--next"></div></a>'),s(document).on("click","#fullsized_go_prev",function(t){return t.preventDefault(),t.stopPropagation(),_()}),s(document).on("click","#fullsized_go_next",function(t){return t.preventDefault(),t.stopPropagation(),S()})),I.closeButton&&(a.append('<a id="fullsized_close" class=" slideshow-icon gelicon--no" href="#close"></a>'),s(document).on("click","#fullsized_close",function(t){return t.preventDefault(),t.stopPropagation(),d()})),I.fullscreenButton&&h()&&(a.append('<a id="fullsized_fullscreen" class="slideshow-icon gelicon--fullscreen"href="#fullscreen"></a>'),s(document).on("click","#fullsized_fullscreen",function(t){return t.preventDefault(),t.stopPropagation(),D()})),I.overlayToggle&&(V.show(),s(document).on("click","#fullsized_footer #fullsized_footer_toggle_wrapper",function(t){return t.preventDefault(),t.stopPropagation(),l()})),I.clickBehaviour){case"close":return s(document).on("click",u,d);case"next":return s(document).on("click",u,function(){return S(!0)})}},r=function(){return R(),s(document).bind("keydown",b),s(document).bind("fullsizable:next",function(){return S(!0)}),s(document).bind("fullsizable:prev",function(){return _(!0)}),s(document).bind("fullsizable:close",d)},R=function(){return s(document).unbind("keydown",b),s(document).unbind("fullsizable:next"),s(document).unbind("fullsizable:prev"),s(document).unbind("fullsizable:close")},m=function(){var t;if(t=a.find("a"),!0===t.is(":visible"))return t.toggle(!1),a.bind("mousemove",v)},w=null,v=function(t){if(null===w&&(w=[t.clientX,t.clientY]),Math.round(Math.sqrt(Math.pow(w[1]-t.clientY,2)+Math.pow(w[0]-t.clientX,2)))>=10)return a.unbind("mousemove",v),w=null,E()},E=function(){return s("#fullsized_close, #fullsized_fullscreen").toggle(!0),s("#fullsized_go_prev").toggle(0!==p),s("#fullsized_go_next").toggle(p!==f.length-1)},s.fn.fullsizable=function(t){return I=s.extend({selector:this.selector,detach_id:null,navigation:!0,closeButton:!0,fullscreenButton:!0,openOnClick:!0,clickBehaviour:"close",preload:!0,reloadOnOpen:!1,overlayToggle:!0},t||{}),T(),I.preload&&y(),s(document).bind("fullsizable:reload",y),s(document).bind("fullsizable:open",function(t,e){var i,n,o,a;for(I.reloadOnOpen&&y(),a=[],n=0,o=f.length;n<o;n++)i=f[n],i.buffer_src===s(e).attr("href")?a.push(x(i,e)):a.push(void 0);return a}),this},h=function(){var t;return t=a.get(0),!!(t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen)},c=function(){return D(!0)},l=function(){M.hasClass("open")?(M.removeClass("open"),U.text("Show image caption")):(M.addClass("open"),U.text("Hide image caption"))},D=function(t){var e;return e=a.get(0),e.requestFullScreen?document.fullScreen||t?document.exitFullScreen():e.requestFullScreen():e.webkitRequestFullScreen?document.webkitIsFullScreen||t?document.webkitCancelFullScreen():e.webkitRequestFullScreen():e.mozRequestFullScreen?document.mozFullScreen||t?document.mozCancelFullScreen():e.mozRequestFullScreen():void 0}}).call(this)}),define("module/gallery",["lib/ecmaScript5","jquery","lib/jquery.slideshow","module/responsiveImages/responsiveImage","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures83x120","templates"],function(t,e,i,n,o,s,a){function r(t){this.images=t,this.init()}return r.prototype.getImages=function(){return this.images},r.prototype.init=function(){this.getImages().forEach(this.addImageToGallery.bind(this)),e(".fullsizeable ").fullsizable({clickBehaviour:"close",navigation:!0}),this.navigateToImage()},r.prototype.navigateToImage=function(t){var i=window.location.hash,n=e(i).offset();n&&window.scrollTo(n.left,n.top)},r.prototype.getPidFromUrl=function(t){var e=t.split("/");return e[e.length-1].split(".")[0]},r.prototype.addImageToGallery=function(t){image=e(t.image);var i,n,o;o=image.hasClass("portrait")?"portrait":"landscape",i=this.getFullsizeImage(image.attr("src"),o),n=!0===t.isClickable?a["fullsizeable-anchor"]({id:this.getPidFromUrl(i),url:i,caption:image.data("caption"),"caption-title":image.data("caption-title"),"is-clickable":!0}):a["fullsizeable-anchor"]({id:this.getPidFromUrl(i),url:i,caption:image.data("caption"),"caption-title":image.data("caption-title"),"is-clickable":!1}),this.getOverlay().insertAfter(image),image.wrap(n)},r.prototype.getOverlay=function(){return e(a.icon({"icon-type":"fullscreen"}))},r.prototype.getFullsizeImage=function(t,i){if(void 0!==t){var a,r,l,c=new Image;if(l="portrait"===i?new s(c):new o(c),c.src=t,a=new n(c,l.getFormatsForImage()),void 0!==(r=a.getFormatForWidth(e(window).width())))return r.src}return t},r}),define("module/listResizer",["lib/ecmaScript5","jquery","model/mediaQuery"],function(t,e,i){function n(t,i){this.module=t,this.resized=!1,this.primaryContent=e(i.primaryContentSelector),this.secondaryContent=e(i.secondaryContentSelector),this.averageHeight=280,this.currentItemsCount=0,this.defaultItemsCount=this.module.model.maxItems,this.offset=88,this.renderDelayed=!1}return n.prototype.init=function(){setTimeout(this.delayedRender.bind(this),2e3)},n.prototype.delayedRender=function(){this.renderDelayed=!0,this.layout()},n.prototype.resize=function(){this.updateModel()&&(this.module.prepareRender(),this.module.load())},n.prototype.updateModel=function(){var t=this.getRequiredItems();return t!=this.currentItemsCount&&(this.module.model.maxItems=t>0?t:0,this.currentItemsCount=this.module.model.maxItems,!0)},n.prototype.getRequiredItems=function(){return 4==i.getGroup()?(this.module.prepareRender(),Math.ceil(this.getRequiredHeight()/this.averageHeight)):this.defaultItemsCount},n.prototype.getRequiredHeight=function(){return this.primaryContent.height()-(this.secondaryContent.height()+this.offset)},n.prototype.layout=function(){this.renderDelayed&&this.resize()},n}),define("lib/jquery.elastislide",["lodash","jquery"],function(t,e){!function(e){var i,n,o=e.event;i=o.special.debouncedresize={setup:function(){e(this).on("resize",i.handler)},teardown:function(){e(this).off("resize",i.handler)},handler:function(t,e){var s=this,a=arguments,r=function(){t.type="debouncedresize",o.dispatch.apply(s,a)};n&&clearTimeout(n),e?r():n=setTimeout(r,i.threshold)},threshold:150};var s="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(t){function i(){var i=e(d),n=e(u);a&&(u.length?a.reject(l,i,n):a.resolve(l)),e.isFunction(t)&&t.call(o,l,i,n)}function n(t,n){t.src!==s&&-1===e.inArray(t,c)&&(c.push(t),n?u.push(t):d.push(t),e.data(t,"imagesLoaded",{isBroken:n,src:t.src}),r&&a.notifyWith(e(t),[n,l,e(d),e(u)]),l.length===c.length&&(setTimeout(i),l.unbind(".imagesLoaded")))}var o=this,a=e.isFunction(e.Deferred)?e.Deferred():0,r=e.isFunction(a.notify),l=o.find("img").add(o.filter("img")),c=[],d=[],u=[];return e.isPlainObject(t)&&e.each(t,function(e,i){"callback"===e?t=i:a&&a[e](i)}),l.length?l.bind("load.imagesLoaded error.imagesLoaded",function(t){n(t.target,"error"===t.type)}).each(function(t,i){var o=i.src,a=e.data(i,"imagesLoaded");return a&&a.src===o?void n(i,a.isBroken):i.complete&&void 0!==i.naturalWidth?void n(i,0===i.naturalWidth||0===i.naturalHeight):void((i.readyState||i.complete)&&(i.src=s,i.src=o))}):i(),a?a.promise(o):o};var a=e(window);e.Elastislide=function(t,i){this.$el=e(i),this._init(t)},e.Elastislide.defaults={orientation:"horizontal",speed:500,easing:"ease-in-out",minItems:3,start:0,onClick:function(t,e,i){return!1},onReady:function(){return!1},onBeforeSlide:function(){return!1},onAfterSlide:function(){return!1}},e.Elastislide.prototype={_init:function(t){this.options=e.extend(!0,{},e.Elastislide.defaults,t);var i=this;if(this.transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},this.support=hasTheMustard(),this.current=this.options.start,this.isSliding=!1,this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,0===this.itemsCount)return!1;this._validate(),this.$items.detach(),this.$el.empty(),this.$el.append(this.$items),this.$el.wrap('<div class="elastislide-wrapper elastislide-loading elastislide-'+this.options.orientation+'"></div>'),this.hasTransition=!1,this.hasTransitionTimeout=setTimeout(function(){i._addTransition()},100),this.$el.imagesLoaded(function(){i.$el.show(),i._layout(),i._configure(),i.hasTransition?(i._removeTransition(),i._slideToItem(i.current),i.$el.on(i.transEndEventName,function(){i.$el.off(i.transEndEventName),i._setWrapperSize(),i._addTransition(),i._initEvents()})):(clearTimeout(i.hasTransitionTimeout),i._setWrapperSize(),i._initEvents(),i._slideToItem(i.current),setTimeout(function(){i._addTransition()},25)),i.options.onReady()})},_validate:function(){this.options.speed<0&&(this.options.speed=500),this.options.minItems<1&&(this.options.minItems=1),(this.options.start<0||this.options.start>this.itemsCount-1)&&(this.options.start=0),"horizontal"!=this.options.orientation&&"vertical"!=this.options.orientation&&(this.options.orientation="horizontal")},_layout:function(){this.$el.wrap('<div class="elastislide-carousel"></div>'),this.$carousel=this.$el.parent(),this.$wrapper=this.$carousel.parent().removeClass("elastislide-loading");var t=this.$items.find("img:first");this.imgSize={width:t.outerWidth(!0),height:t.outerHeight(!0)},this._setItemsSize(),"horizontal"===this.options.orientation?this.$el.css("max-height",this.imgSize.height):this.$el.css("height",this.options.minItems*this.imgSize.height),this._addControls()},_addTransition:function(){this.support&&this.$el.css("transition","all "+this.options.speed+"ms "+this.options.easing),this.hasTransition=!0},_removeTransition:function(){this.support&&this.$el.css("transition","all 0s"),this.hasTransition=!1},_addControls:function(){var t=this;this.$navigation=e('<nav><span id="elastislide-prev" class="icon-wrapper gel-icon-wrapper icon-wrapper-previous"><div class="gelicon gelicon--previous"></div></span><span id="elastislide-next" class="icon-wrapper gel-icon-wrapper icon-wrapper-next"><div class="gelicon gelicon--next"></div></span></nav>').appendTo(this.$wrapper),this.$navPrev=this.$navigation.find("span#elastislide-prev").on("mousedown.elastislide",function(i){return e(i.target).closest("span.icon-wrapper").hasClass("disabled")||t._slide("prev"),!1}),this.$navNext=this.$navigation.find("span#elastislide-next").on("mousedown.elastislide",function(i){return e(i.target).closest("span.icon-wrapper").hasClass("disabled")||t._slide("next"),!1})},_setItemsSize:function(){var t="horizontal"===this.options.orientation?100*Math.floor(this.$carousel.width()/this.options.minItems)/this.$carousel.width():100;this.$items.css({width:t+"%","max-width":this.imgSize.width,"max-height":this.imgSize.height}),"vertical"===this.options.orientation&&this.$wrapper.css("max-width",this.imgSize.width+parseInt(this.$wrapper.css("padding-left"))+parseInt(this.$wrapper.css("padding-right")))},_setWrapperSize:function(){"vertical"===this.options.orientation&&this.$wrapper.css({height:this.options.minItems*this.imgSize.height+parseInt(this.$wrapper.css("padding-top"))+parseInt(this.$wrapper.css("padding-bottom"))})},_configure:function(){this.fitCount="horizontal"===this.options.orientation?this.$carousel.width()<this.options.minItems*this.imgSize.width?this.options.minItems:Math.floor(this.$carousel.width()/this.imgSize.width):this.$carousel.height()<this.options.minItems*this.imgSize.height?this.options.minItems:Math.floor(this.$carousel.height()/this.imgSize.height)},_initEvents:function(){var i=this;a.on("debouncedresize.elastislide",function(){i._setItemsSize(),i._configure(),i._slideToItem(i.current)}),t.forEach(this.transEndEventNames,function(t){this.$el.on(t,function(){i._onEndTransition()})},this),"horizontal"===this.options.orientation?this.$el.on({swipeleft:function(){i._slide("next")},swiperight:function(){i._slide("prev")}}):this.$el.on({swipeup:function(){i._slide("next")},swipedown:function(){i._slide("prev")}}),this.$el.on("click.elastislide","li",function(t){var n=e(this);i.options.onClick(n,n.index(),t)})},_destroy:function(e){t.forEach(this.transEndEventNames,function(t){this.$el.off(t).off("swipeleft swiperight swipeup swipedown .elastislide")},this),a.off(".elastislide"),this.$el.css({"max-height":"none",transition:"none"}).unwrap(this.$carousel).unwrap(this.$wrapper),this.$items.css({width:"auto","max-width":"none","max-height":"none"}),this.$navigation.remove(),this.$wrapper.remove(),e&&e.call()},_toggleControls:function(t,e){e?"next"===t?this.$navNext.removeClass("disabled"):this.$navPrev.removeClass("disabled"):"next"===t?this.$navNext.addClass("disabled"):this.$navPrev.addClass("disabled")},_slide:function(t,i){if(this.isSliding)return!1;this.options.onBeforeSlide(),this.isSliding=!0;var n=this,o=this.translation||0,s="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),a=this.itemsCount*s,r="horizontal"===this.options.orientation?this.$carousel.width():this.$carousel.height();if(void 0===i){var l=this.fitCount*s;if(l<0)return!1;if("next"===t&&a-(Math.abs(o)+l)<r)l=a-(Math.abs(o)+r),this._toggleControls("next",!1),this._toggleControls("prev",!0);else if("prev"===t&&Math.abs(o)-l<0)l=Math.abs(o),this._toggleControls("next",!0),this._toggleControls("prev",!1);else{var c="next"===t?Math.abs(o)+Math.abs(l):Math.abs(o)-Math.abs(l);c>0?this._toggleControls("prev",!0):this._toggleControls("prev",!1),c<a-r?this._toggleControls("next",!0):this._toggleControls("next",!1)}i="next"===t?o-l:o+l}else{var l=Math.abs(i);Math.max(a,r)-l<r&&(i=-(Math.max(a,r)-r)),l>0?this._toggleControls("prev",!0):this._toggleControls("prev",!1),Math.max(a,r)-r>l?this._toggleControls("next",!0):this._toggleControls("next",!1)}if(this.translation=i,o===i)return this._onEndTransition(),!1;if(this.support)"horizontal"===this.options.orientation?this.$el.css("transform","translateX("+i+"px)"):this.$el.css("transform","translateY("+i+"px)");else{e.fn.applyStyle=this.hasTransition?e.fn.animate:e.fn.css;var d="horizontal"===this.options.orientation?{left:i}:{top:i};this.$el.stop().applyStyle(d,e.extend(!0,[],{duration:this.options.speed,complete:function(){n._onEndTransition()}}))}this.hasTransition||this._onEndTransition()},_onEndTransition:function(){this.isSliding=!1,this.options.onAfterSlide()},_slideTo:function(t){var t=t||this.current,e=Math.abs(this.translation)||0,i="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),n=e+this.$carousel.width(),o=Math.abs(t*i);(o+i>n||o<e)&&this._slideToItem(t)},_slideToItem:function(t){var e="horizontal"===this.options.orientation?t*this.$items.outerWidth(!0):t*this.$items.outerHeight(!0);this._slide("",-e)},add:function(t){var e=this,i=this.current,n=this.$items.eq(this.current);this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,this.current=n.index(),this._setItemsSize(),this._configure(),this._removeTransition(),i<this.current?this._slideToItem(this.current):this._slide("next",this.translation),setTimeout(function(){e._addTransition()},25),t&&t.call()},setCurrent:function(t,e){this.current=t,this._slideTo(),e&&e.call()},next:function(){self._slide("next")},previous:function(){self._slide("prev")},slideStart:function(){this._slideTo(0)},slideEnd:function(){this._slideTo(this.itemsCount-1)},destroy:function(t){this._destroy(t)}};var r=function(t){window.console&&window.console.error(t)};e.fn.elastislide=function(t){var i=e.data(this,"elastislide");if("string"==typeof t){var n=Array.prototype.slice.call(arguments,1);this.each(function(){return i?e.isFunction(i[t])&&"_"!==t.charAt(0)?void i[t].apply(i,n):void r("no such method '"+t+"' for elastislide self"):void r("cannot call methods on elastislide prior to initialization; attempted to call method '"+t+"'")})}else this.each(function(){i?i._init():i=e.data(this,"elastislide",new e.Elastislide(t,this))});return i}}(e)}),define("common/view/entity/habitat",["lodash","common/util/extends","common/view/entity/base"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{init:function(){var e=this.get("Content");t.extend(e,this.get("Metadata",{})),t.each(e,function(e,i){t.isString(i)&&(i=i.substr(0,1).toLowerCase()+i.substr(1),this.set(i,e))},this),this.map("Urn","urn"),this.map("entity","entityType"),this.get("id")&&this.set("shortId",this.getShortId(this.get("id"))),this.parseHabitatData()},getShortId:function(e){var i=e.split("/");return t.last(i)},parseHabitatData:function(){},getArrayNestedAsset:function(e){var i=this.get(e,!1);if(t.isArray(i)&&i.length>0){var n=i[0];return(!t.isString(n)||"urn:"!==n.substr(0,4))&&i[0]}return!1}}),n}),define("common/view/entity/image",["lodash","common/util/extends","common/view/entity/habitat"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{parseHabitatData:function(){this.map("templateUrl","url")}}),n}),define("common/view/entity/ibroadcast-gallery",["lodash","common/util/extends","common/view/entity/habitat"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{parseHabitatData:function(){var e=t.last(this.get("urn","").split(":"));this.set("id",e),this.map("Image","images")}}),n}),define("common/helper/video-provider",[],function(){return{getMediator:function(t){switch(t){case"ibroadcast":return"mc";case"mps":return"journalism-flash-mobile"}return""}}}),define("common/view/entity/video",["lodash","common/util/extends","common/view/entity/habitat","common/helper/video-provider"],function(t,e,i,n){function o(t){i.call(this,t)}return e(o,i,{parseHabitatData:function(){this.map("Vpid","vpid"),this.map("Provider","provider"),this.set("mediator",n.getMediator(this.get("provider")))}}),o}),define("common/view/entity/story",["lodash","common/util/extends","common/view/entity/habitat","common/view/entity/image","common/view/entity/ibroadcast-gallery","common/view/entity/video","common/helper/icon-type-helper","common/helper/placeholder-images"],function(t,e,i,n,o,s,a,r){function l(t){i.call(this,t)}return e(l,i,{parseHabitatData:function(){this.map("bodyHtml","bodyMarkdown"),this.map("assetInfographic","infographic"),this.map("relatedStory","relatedStories"),this.map("relatedTag","relatedTags"),this.map("storyType","type"),this.map("tag","tags"),this.set("assetCustom",this.getAssetCustom()),this.set("mainIBroadcastImageGallery",this.getMainIBroadcastImageGallery()),this.set("inlineImageLibrary",this.getInlineImageLibrary()),this.set("inlineVideoLibrary",this.getInlineVideoLibrary()),this.set("leadImage",this.getArrayNestedAsset("assetImage")),this.set("collection",this.getArrayNestedAsset("collection")),this.set("author",this.getArrayNestedAsset("author")),!1===this.get("leadImage")&&this.set("leadImage",r.get("story")),this.set("indexImageOverride",this.getIndexImage());var e=this.get("assetVideoIb2"),i=this.get("assetVideoMps"),n=!1;e instanceof Array&&e.length>0?(n=e[0],n=t.extend({Provider:"ibroadcast"},n)):i instanceof Array&&i.length>0&&(n=i[0],n=t.extend({Provider:"mps"},n)),!1!==n&&this.set("leadVideo",n),this.set("iconType",a.getIconType(this.get("type")))},getIndexImage:function(){var t=this.getArrayNestedAsset("assetImagePromo");return!1!==t?t:this.get("leadImage")},getAssetCustom:function(){var t=this.get("assetCustom","");if(""!==t)return{embedCode:t}},getMainIBroadcastImageGallery:function(){var e=this.get("assetIbroadcast",!1);return!!(t.isArray(e)&&e.length>0&&t.has(e[0],"Image"))&&e[0]},getInlineImageLibrary:function(){var e=this.get("assetInline",!1);return!!(t.isArray(e)&&e.length>0)&&e},getInlineVideoLibrary:function(){var e=this.get("assetInline",!1);return!!(t.isArray(e)&&e.length>0&&t.has(e[1],"Video"))&&e[1].Video},getInlineImageData:function(t){var e,i=this.get("inlineImageLibrary");if(i)for(var o=0;o<i.length;o++)if(e=new n(i[o]),e.id===t)return i[o];return!1},getInlineGalleryData:function(t){var e,i=this.get("inlineImageLibrary");if(i)for(var n=0;n<i.length;n++)if(e=new o(i[n]),e.id===t)return i[n];return!1},getInlineVideoData:function(t){var e,i=this.get("inlineVideoLibrary");if(i)for(var n=0;n<i.length;n++)if(e=new s(i[n]),e.vpid===t)return i[n];return!1}}),l}),define("common/view/entity/collection",["lodash","common/util/extends","common/view/entity/habitat","common/helper/placeholder-images"],function(t,e,i,n){function o(t){i.call(this,t)}return e(o,i,{parseHabitatData:function(){this.map("collectionType","type"),this.set("image",this.getArrayNestedAsset("assetImage")),!1===this.get("image")&&this.set("image",n.get(this.get("type")))}}),o}),define("common/view/entity/destination",["lodash","common/util/extends","common/view/entity/habitat","common/helper/placeholder-images"],function(t,e,i,n){function o(t){i.call(this,t)}return e(o,i,{parseHabitatData:function(){this.set("image",this.getArrayNestedAsset("assetImage")),this.set("id",this.getPathId()),!1===this.get("image")&&this.set("image",n.get("destination"))},getPathId:function(){var e,i=this.get("id",""),n=this.get("path");return t.isString(i)&&n?(e=this.get("id","").split("/"),e.pop(),e.join("/")+"/"+n):i},getDestinationRelationshipArray:function(t){var e=[];return void 0===t&&(t=10),this.getDestinationContextItem(e,this,1,t),e},getDestinationContextItem:function(t,e,i,n){var s=new o(e),a=s.get("parent",!1);null!==a&&!1!==a&&a.length>0&&a[0]instanceof Object&&i<n&&this.getDestinationContextItem(t,a[0],i+1,n),t.push(s)}}),o}),define("common/view/entity/tag",["lodash","common/util/extends","common/view/entity/habitat","common/helper/placeholder-images"],function(t,e,i,n){function o(t){i.call(this,t)}return e(o,i,{parseHabitatData:function(){this.set("image",this.getArrayNestedAsset("assetImage")),!1===this.get("image")&&this.set("image",n.get("tag"))}}),o}),define("common/view/entity/author",["lodash","common/util/extends","common/view/entity/habitat"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{parseHabitatData:function(){this.set("image",this.getArrayNestedAsset("image"))}}),n}),define("common/view/entity/meta-data",["lodash","common/util/extends","common/util/logger","common/view/entity/base","common/view/entity/author","common/view/entity-URL-router"],function(t,e,i,n,o,s){function a(t){n.call(this,t)}return e(a,n,{init:function(){var t=new o(this.get("author")),e=new n(this.get("config"));this.set("module",e.get("module")),this.set("domain",e.get("domain")),this.set("author",t.get("name")),this.set("uri",s.getURL(this.get("id"))),this.set("url","http://"+this.get("domain")+this.get("uri"))}}),a}),define("common/view/model/image",["lodash","common/util/extends","common/view/model/base","common/view/entity/image","templates","common/util/logger"],function(t,e,i,n,o,s){function a(t){i.call(this,t)}return e(a,i,{setEntity:function(t){this.entity=new n(t)},setViewData:function(){var e=this.getEntity(),i=t.clone(e),n="",o="{x}_{y}",s=this.getImageFormat();this.getEntity().get("url")&&t.has(s,"x")&&t.has(s,"y")&&(n=e.get("url"),o=o.replace("{x}",s.x),o=o.replace("{y}",s.y),n=n.replace("$recipe",o),i.url=n,i.width=s.x,i.height=s.y,i["is-portrait"]=s.isPortrait),i["use-image-tag"]=this.config.get("useImageTag",!1);var a=this.config.get("captionStyle","short");if(this.config.get("includeCaption",!0))switch(a){case"long":i.caption=this.replaceLongSynopsisLinks(),i["caption-title"]=e.get("title","");break;default:i.caption=e.get("synopsisMedium","")}i["anchor-title"]=e.get("synopsisShort",""),!0===this.config.get("showBrandedBorder",!1)&&(i["additional-wrapper-class"]="branded-border"),i.alt=this.getAltTag(),i["icon-type"]=e.get("iconType",""),i["replace-url"]=e.get("replaceUrl",""),this.viewData=i},getImageFormat:function(){
var e=this.getEntity(),i=e.get("sourceWidth",2),n=e.get("sourceHeight",1),o=this.config.get("format"),s={x:"130",y:"73"},a={x:"90",y:"130"},r=!1;return t.has(o,"landscape")&&(s=o.landscape),t.has(o,"portrait")&&(a=o.portrait),t.has(o,"portraitPermitted")&&(r=o.portraitPermitted),i<n&&r?(a.isPortrait=!0,a):(s.isPortrait=!1,s)},replaceLongSynopsisLinks:function(){var e=this.getEntity(),i=e.get("synopsisLong",""),n=/\*?\*?\[.[^\(\)]+\]\(.[^\(\)]+\)\*?\*?/g,s=i.match(n);return t.each(s,function(t){var e=/\[.+\]/,n=/\(.+\)/,s=t.match(e),a=t.match(n);if(null!==s&&s.length>0&&null!==a&&a.length>0){s=s[0],a=a[0];var r=s.substr(1,s.length-2),l=a.substr(1,a.length-2),c=o["anchor-tag"]({link:l,text:r});i=i.replace(t,c)}},this),i},getAltTag:function(){var t=this.getEntity(),e=this.getImageCredit();return t.get("synopsisShort","")+" "+e},getImageCredit:function(){var t,e=this.getEntity(),i=e.get("synopsisLong",""),n=/\([^\(\)]+\)/g;if(null!==(t=i.match(n))&&t.length>0){var o=t[t.length-1];return o=o.slice(0,1)+"Credit: "+o.slice(1,o.length)}return""}}),a}),define("common/view/model/meta-data/meta-tags",["lodash","common/util/extends","common/view/model/base","common/view/model/image"],function(t,e,i,n){function o(t){i.call(this,t)}return e(o,i,{imageConfig:{format:{landscape:{x:"624",y:"351"}}},setViewData:function(){var e=this.getEntity(),i=t.clone(e),o=e.get("type"),s=e.get("image"),a=e.get("video");i.title=this.getTitle(e),this.config.get("shortOGTitle",!1)?i["og-title"]=e.get("title"):i["og-title"]=i.title,i.keywords=this.getKeywords(e.get("keywords")),o||(i.type="website"),s&&(i.image=new n(this.imageConfig).setSourceData(s)),a&&(i.type="video"),this.viewData=i},getTitle:function(e){var i=["BBC"];return t.has(this.config,"module")&&t.has(this.config.module,"name")&&i.push(this.config.module.name),e.get("title")&&i.push(e.get("title")),i.join(" - ")},getKeywords:function(e){var i=[];return t.each(e,function(t,e){"1"==t?i.push(e):i.push(t)}),i.join(", ")}}),o}),define("common/view/model/meta-data/digital-data-layer",["lodash","common/util/extends","common/util/logger","common/view/model/base","common/view/entity/base","common/view/entity/meta-data","common/view/entity-URL-router"],function(t,e,i,n,o,s,a){function r(t){n.call(this,t)}return e(r,n,{setViewData:function(){var t=this.getEntity(),e={environment:this.config.get("environment",""),pageInstanceID:this.getPageInstanceID(t),module:this.entity.get("module",{}),page:this.getPageData(t)};this.viewData=e},getPageInstanceID:function(e){var i=e.get("url");return t.isString(i)?i.replace("http://",""):""},getPageData:function(t){return{attributes:{country:"GB",language:"en-GB"},pageInfo:this.getPageInfo(t),keywords:t.get("keywords",{}),tags:this.getTags(t.get("keywords",{})),category:this.getCategories()}},getTags:function(e){var i=[];return t.each(e,function(t,e){"1"==t?i.push(e):i.push(t)}),i},getCategories:function(){var e=this.getEntity(),i=new o(e.get("keywords"),{}),n=t.clone(i);return n.column=i.get("column"),n.pageType=i.get("pageType",""),n.primaryCategory="",n.section=i.get("section"),t.has(this.config,"module")&&t.has(this.config.module,"domain")&&(n.primaryCategory=this.config.module.domain),n},getPageInfo:function(t){return{affiliate:t.get("affiliate"),author:t.get("author"),pageID:t.get("id",""),shortPageID:this.getShortPageID(t.get("id")),pageName:t.get("title",""),description:t.get("description",""),partner:t.get("partner"),publicationDate:t.get("publicationDate"),"business-unit":t.get("business-unit","BBC.com"),destinationURL:t.get("uri","")}},getShortPageID:function(t){if(!1!==t){var e,i=t.split("/");return 3==i.length?(e=i[2].split("-"),e.length>1?e.splice(1).join("-"):i[2]):t}return""}}),r}),define("common/view/model/meta-data/advertising",["lodash","common/util/extends","common/view/model/base","common/helper/advertising"],function(t,e,i,n){function o(t){i.call(this,t)}function s(e,i){var n=i.get("advertising",""),o=e.get("zoneId"),s="";return t.has(n,"topLevelZone")&&(s=n.topLevelZone),!o&&t.has(n,"defaultZoneId")&&(o=n.defaultZoneId),t.has(n,"prefix")&&(o=n.prefix+"_"+o),o&&(s+="/"+c(o)),s}function a(e){var i=[];return t.each(e,function(e,n){t.has(e,"id")&&!t.contains(i,e.id)&&i.push(e.id)}),i}function r(e){var i={};return t.has(e,"page")&&(e.page=n.replaceMappedEntityInString(e.page)),e=l(e),t.each(e,function(e,n){t.isString(e)&&(i[c(n)]=c(e)),t.isArray(e)&&(t.each(e,function(t,i){e[i]=c(t)}),i[c(n)]=e.join(","))}),i}function l(e){var i={column:"sectn",section:"subsect"};return t.each(e,function(n,o){t.has(i,o)&&(e[i[o]]=n)}),e}function c(e){return t.isString(e)&&(e=e.replace(/[\W_]+/g," "),e=e.replace(/[ ]+/g,"_")),e}return e(o,i,{setViewData:function(){var t=this.getEntity(),e=r(t.get("keywords",{})),i=this.getAdSlots(t.get("adSlots",this.getDefaultAdSlots()));data={keywords:e,adUnit:s(t,this.config),adSlots:i,adsToDisplay:a(i)},data.JSONString=JSON.stringify(data),this.viewData=data},getAdSlots:function(e){return t.each(e,function(t,i){e[i]=n.getAdSlot(i,t)},this),e},getDefaultAdSlots:function(){return{parallax:{},leaderboard:{},"mpu-1_2_3":{id:"mpu",groups:[1,2,3]},"mpu-4":{id:"mpu",groups:[4]},mpu_bottom:{},native_side:{},promo_feature_2:{},promo_feature_3:{},adsense_mpu:{},"sponsor-section-content":{id:"sponsor_section",groups:[1,2,3]},"sponsor-section-hero":{id:"sponsor_section",groups:[4]}}}}),o}),define("common/view/model/meta-data/bespoke-data",["lodash","common/util/extends","common/view/model/base"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{setViewData:function(){var t={url:this.getBespokeDataUrl()};this.viewData=t},getBespokeDataUrl:function(){var e,i=this.getEntity(),n=i.get("uri"),o=!1;if(t.has(this.config,"bbc")&&t.has(this.config.bbc,"bespoke")&&t.has(this.config.bbc.bespoke,"url")&&(o=this.config.bbc.bespoke.url),!1!==n&&!1!==o){switch(this.config.get("environment","")){case"live":case"staging":e="live";break;default:e="test"}var s=n.split("/");return s.splice(2,0,"config",e),o+s.join("/")+"/config.json"}return""}}),n}),define("common/view/model/meta-data/chartbeat",["lodash","common/util/logger","common/util/extends","common/view/model/base"],function(t,e,i,n){function o(t){n.call(this,t)}return i(o,n,{setViewData:function(){var e=this.getEntity(),i={author:e.get("author"),sections:this.getSections(e.get("keywords",{}))};t.has(this.config,"chartbeat")&&t.has(this.config.chartbeat,"uid")&&t.has(this.config.chartbeat,"domain")&&(i.uid=this.config.chartbeat.uid,i.domain=this.config.chartbeat.domain),this.viewData=i},getSections:function(e){var i=[];return t.has(e,"column")&&i.push(e.column),t.isArray(e.destination)&&(i=i.concat(e.destination)),t.isArray(e.tags)&&(i=i.concat(e.tags)),i.join(",")}}),o}),define("common/view/model/meta-data/document",["lodash","common/util/extends","common/view/model/base","common/view/entity/meta-data","common/view/model/meta-data/meta-tags","common/view/model/meta-data/digital-data-layer","common/view/model/meta-data/advertising","common/view/model/meta-data/bespoke-data","common/view/model/meta-data/chartbeat","common/view/entity-URL-router"],function(t,e,i,n,o,s,a,r,l,c){function d(t){i.call(this,t)}return e(d,i,{setEntity:function(e){var i=t.clone(e,!0);i.config=this.config,this.entity=new n(i)},setViewData:function(){var t={};t["meta-tags"]=new o(this.config).setSourceData(this.entity),t["digital-data-layer"]=JSON.stringify(new s(this.config).setSourceData(this.entity)),t.chartbeat=new l(this.config).setSourceData(this.entity);var e=this.entity.get("advertising",{});e.keywords=this.entity.get("keywords"),t.advertising=new a(this.config).setSourceData(e),t["bespoke-data"]=new r(this.config).setSourceData(this.entity),this.viewData=t}}),d}),define("common/view/model/meta-data/story",["lodash","common/util/extends","common/util/logger","common/view/model/base","common/view/entity/story","common/view/entity/collection","common/view/entity/destination","common/view/entity/tag","common/view/model/meta-data/document","common/helper/advertising"],function(t,e,i,n,o,s,a,r,l,c){function d(t){n.call(this,t)}return e(d,n,{setEntity:function(t){this.entity=new o(t)},setViewData:function(){var e=this.getEntity(),i={title:e.get("headlineShort"),id:e.get("id"),image:e.get("leadImage"),author:e.get("author"),publicationDate:e.get("creationDateTime"),description:e.get("summaryShort"),keywords:this.getKeywords(e),advertising:{zoneId:this.getZoneId(e.get("collection"),e.get("location"),e.get("tags"))}},n=new l(t.extend({shortOGTitle:!0},this.config));this.viewData=n.setSourceData(i)},getZoneId:function(e,i,n){var o,l="";return e&&(o=new s(e),l+=c.generateZoneForHabitatEntity(o.get("type"),o)),t.isArray(i)&&i.length>0?(e&&(l+="-"),t.each(i,function(t,e){o=new a(t),l+=0===e?c.generateZoneForHabitatEntity("destination",o):c.generateZoneForHabitatEntity(void 0,o)})):t.isArray(n)&&n.length>0&&(e&&(l+="-"),o=new r(t.first(n)),l+=c.generateZoneForHabitatEntity("tag",o)),l=c.generateContentZone(l)},getMetaType:function(){},getKeywords:function(e){var i,n,o={pageType:"story",STORY:"1",asset_type:e.get("type",""),media:e.get("type",""),tags:[],destination:[]},l=new s(e.get("collection")),c=l.get("type"),d=l.get("shortId");return!1!==c&&!1!==d&&(o[c]=d),t.each(e.get("tags",[]),function(t){i=new r(t),n=i.get("shortId"),o[n]="1",o.tags.push(n)}),t.each(e.get("location",[]),function(t){i=new a(t),n=i.get("shortId"),o[n]="1",o.destination.push(n)}),o}}),d}),define("module/ibroadcast-image-gallery/ibroadcast-image-gallery",["lodash","lib/ecmaScript5","jquery","lib/jquery.elastislide","util/logger","templates","module/loader","module/responsiveImages/main","module/responsiveImages/responsiveImage","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures83x120","module/gallery","model/exposed-data","common/config","common/view/model/meta-data/story","model/mediaQuery"],function(t,e,i,n,o,s,a,r,l,c,d,u,p,h,m,g){var f=function(t,e){this.setSelectors(t),this.setupConfig(e),this.setupModuleState(),this.setupThumbnails(),this.setupNavListeners(),this.setupAds(),this.setupResponsiveImages()};return t.extend(f.prototype,{setSelectors:function(t){this.ibGallerySelector=i(t),this.thumbnailsContainerSelector=this.ibGallerySelector.find("#ib-gallery-thumbnail-carousel"),this.selectedImageContainerSelector=this.ibGallerySelector.find("#slide-wrapper"),this.selectedImageCaptionContainerSelector=this.ibGallerySelector.find("#selected-image-caption-wrapper"),this.adOverlaySelector=this.ibGallerySelector.find("div.ad-slot-overlay"),this.items=this.thumbnailsContainerSelector.find("li")},setupModuleState:function(){this.current=0,this.itemsCount=this.items.length,this.isAnimating=!0,this.isLoaded=!1,this.showAds=!1,this.isAdvertising=!1},setupConfig:function(e){window.innerWidth>=600?t.has(e,"minItems")&&t.isNumber(e.minItems)?this.minItems=e.minItems:this.minItems=6:this.minItems=3,t.has(e,"adFrequency")&&t.isNumber(e.adFrequency)?this.adFrequency=e.adFrequency:this.adFrequency=3,t.has(e,"onLoadCallback")&&t.isFunction(e.onLoadCallback)&&(this.onLoadCallback=e.onLoadCallback),t.has(e,"onUpdateCallback")&&t.isFunction(e.onUpdateCallback)&&(this.onUpdateCallback=e.onUpdateCallback)},setupThumbnails:function(){var e=this;this.thumbnailsContainerSelector.length>0&&this.itemsCount>1&&(this.carousel=this.thumbnailsContainerSelector.show().elastislide({minItems:this.minItems,current:e.current,onClick:function(t,i,n){return n.preventDefault(),e.isAdvertising?void e.updateAdvertisingState():!e.isAnimating&&(e.isAnimating=!0,e.current=t.index(),e.showImage(t),void e.updateAdvertisingState())},onReady:function(){e.showImage(e.items.eq(e.current)),e.isLoaded=!0,t.isFunction(e.onLoadCallback)&&e.onLoadCallback()}}))},setupNavListeners:function(){var t=this,e=this.selectedImageContainerSelector.find("#selected-image-nav-prev"),n=this.selectedImageContainerSelector.find("#selected-image-nav-next");this.itemsCount>1&&(e.show(),n.show(),e.click(function(e){e.preventDefault(),t.navigate("prev")}),n.click(function(e){e.preventDefault(),t.navigate("next")}),i(document).keydown(function(e){switch(e.which){case 37:t.navigate("prev");break;case 39:t.navigate("next");break;default:return}e.preventDefault()}))},setupResponsiveImages:function(){this.responsiveImages=new r},navigate:function(t){return this.isAdvertising?void this.updateAdvertisingState():!this.isAnimating&&(this.isAnimating=!0,"prev"===t?this.current-1<0?this.current=this.itemsCount-1:this.current--:"next"===t&&(this.current+1>=this.itemsCount?this.current=0:this.current++),this.showImage(this.items.eq(this.current)),void this.updateAdvertisingState())},showImage:function(t){o.get().debug("FeaturedImageGalleryModule:showImage:item",t),this.items.removeClass("selected"),t.addClass("selected"),this.carousel.setCurrent(this.current);var e=this,n=t.find("img"),r=n.data("src-recipe"),l=n.data("caption-title"),c=n.data("is-portrait"),d=c?"portrait":"landscape",u=n.data("caption"),p=new a(e.selectedImageContainerSelector.get(0),"#000");i("<img/>").load(function(){var t=e.getFullsizeImage(r,d),a=i(s["ibroadcast-image-gallery-selected-image"]({id:e.getPidFromUrl(t),"fullsize-url":t,caption:u,"caption-title":l,"is-clickable":!0})),c=i(s["ibroadcast-image-gallery-selected-image-tag"]({"image-src":r,"alt-text":n.attr("alt"),"additional-class":d,"is-watermarked":!0})),h=s["ibroadcast-image-gallery-selected-image-caption"]({"caption-title":l,caption:u}),m=e.selectedImageContainerSelector.find("div.selected-image-wrapper"),f=i(s.icon({"icon-type":"fullscreen",id:"selected-image-fullscreen"}));m.empty(),g.isMobileDevice()?m.append(c):(a.appendTo(m).append(c).click(function(t){t.preventDefault(),i(document).trigger("fullsizable:open",this)}),f.insertAfter(a)),e.selectedImageCaptionContainerSelector.show().empty().append(h),o.get().debug("Wrapper:",a),p.stop(),e.respondSelectedImage(),e.triggerUpdate(),e.isAnimating=!1}).attr("src",r)},respondSelectedImage:function(){this.responsiveImages.add(this.selectedImageContainerSelector.find("img.responsive.portrait"),d),this.responsiveImages.add(this.selectedImageContainerSelector.find("img.responsive.landscape"),c),this.responsiveImages.respond()},triggerUpdate:function(){!0===this.isLoaded&&t.isFunction(this.onUpdateCallback)&&this.onUpdateCallback()},setupAds:function(){var t=this;t.adOverlaySelector.length>0&&(this.showAds=!0,this.actionsUntilAd=0,this.adOverlaySelector.click(function(){t.updateAdvertisingState()}),this.adOverlaySelector.show(),this.isAdvertising=!0)},updateAdvertisingState:function(){!0===this.showAds&&(!0===this.isAdvertising?(this.removeAd(),this.actionsUntilAd=this.adFrequency+1,this.isAdvertising=!1):--this.actionsUntilAd<=0&&(this.displayAd(),this.isAdvertising=!0))},displayAd:function(){this.adOverlaySelector.show(),window.bbcdotcom&&bbcdotcom.refreshAd&&bbcdotcom.refreshAd("mpu","300x250")},removeAd:function(){o.get().debug("IBroadcastImageGallery:removeAd"),this.adOverlaySelector.hide()},getPidFromUrl:function(t){var e=t.split("/");return e[e.length-1].split(".")[0]},getFullsizeImage:function(t,e){if(void 0!==t){var n,o,s,a=new Image;if(s="portrait"===e?new d(a):new c(a),a.src=t,n=new l(a,s.getFormatsForImage()),void 0!==(o=n.getFormatForWidth(i(window).width())))return o.src}return t}}),f}),define("module/ibroadcast-image-gallery/main",["lodash","lib/ecmaScript5","jquery","module/ibroadcast-image-gallery/ibroadcast-image-gallery"],function(t,e,i,n){return new function(){this._arrGalleries=[],this.add=function(t,e){i(t).each(this.addGallery.bind(this,e))},this.addGallery=function(t,e,o){if(!this.isAdded(o)){var s=new n(o,t);this.addToGalleryArray(s),i(o).data("galleryIsAdded",!0)}},this.addToGalleryArray=function(t){this._arrGalleries.push(t)},this.isAdded=function(t){return!!i(t).data("galleryIsAdded")},this.getGalleries=function(){return this._arrGalleries},this.triggerUpdate=function(){t.each(this._arrGalleries,function(t,e){t.triggerUpdate()})}}}),define("common/model/story/story-by-destination",["lodash","common/util/extends","common/model/story/story-by"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{arrRequiredConfig:["id"],URLScheme:"/search/story-by-destination/{moduleId}/{id}"}),n}),define("common/entity/habitat/mixed/list/promo",["lodash","common/util/extends","common/util/logger","common/entity/habitat/paged-list","common/entity/habitat/mixed/promo"],function(t,e,i,n,o){function s(t,e){n.apply(this,arguments)}return e(s,n,{entityFactoryDependencies:[],createEntity:function(t){return new o(t)}}),s}),define("common/entity/habitat/destination/promo",["lodash","common/util/extends","common/entity/habitat/destination/link"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{init:function(t){i.prototype.init.apply(this,arguments),this.set("destinationRelationships",this.generateDestinationRelationshipArray())},getDestinationRelationships:function(){return this.destinationRelationships},generateDestinationRelationshipArray:function(t){var e=[];return void 0===t&&(t=10),this.getDestinationContextItem(e,this,1,t),e},getDestinationContextItem:function(t,e,n,o){var s=new i(e),a=s.get("parent",!1);null!==a&&!1!==a&&a.length>0&&a[0]instanceof Object&&n<o&&this.getDestinationContextItem(t,a[0],n+1,o),t.push(s)}}),n}),define("common/entity/habitat/author",["lodash","common/util/extends","common/entity/habitat/image/base","common/entity/habitat/base"],function(t,e,i,n){function o(e){var i={id:0,name:"",bio:"",avatar:!1};n.call(this,t.extend(i,e))}return e(o,n,{init:function(t){n.prototype.init.call(this,t),this.map("description","bio"),this.initImage()},initImage:function(){var t=this.getArrayNestedAsset("assetImage");t&&this.set("avatar",new i(t))},getId:function(){return this.id},getName:function(){return this.name},getBio:function(){return this.bio},getAvatar:function(){return this.avatar}}),o}),define("common/entity/habitat/video",["lodash","common/util/extends","common/entity/base","common/entity/habitat/image/base","common/helper/video-provider"],function(t,e,i,n,o){function s(e,n){var o={id:!1,Title:"",Vpid:!1,image:!1,Thumbnail:!1,Provider:!1,mediator:!1};i.call(this,t.extend(o,e),n)}return e(s,i,{init:function(){i.prototype.init.apply(this,arguments),this.setId(),this.set("mediator",o.getMediator(this.getProvider())),this.initImage(this.getArrayNestedAsset("Thumbnail"))},setId:function(){if(t.has(this,"Metadata")&&t.has(this.Metadata,"Id")&&this.Metadata.Id.length>0)this.id=this.Metadata.Id;else if(t.has(this,"Urn")){var e=this.Urn.split(":");e.length>0&&(this.id=e[e.length-1])}},initImage:function(t){if(t){var e=new n(t);this.setImage(e)}else this.setImage(!1)},getId:function(){return this.id},getTitle:function(){return this.Title},getVpid:function(){return this.Vpid},getImage:function(){return this.image},setImage:function(t){this.image=t},getThumbnail:function(){return this.Thumbnail},setProvider:function(t){this.Provider=t,this.set("mediator",o.getMediator(t))},getProvider:function(){return this.Provider},getMediator:function(){return this.mediator},getArrayNestedAsset:function(e){var i=this.get(e,!1);if(t.isArray(i)&&i.length>0){var n=i[0];return(!t.isString(n)||"urn:"!==n.substr(0,4))&&i[0]}return!1}}),s}),define("common/entity/habitat/ib-gallery",["lodash","common/util/extends","common/util/logger","common/entity/habitat/base","common/entity/habitat/image/base"],function(t,e,i,n,o){function s(e){var i={id:0,images:[]};n.call(this,t.extend(i,e))}return e(s,n,{init:function(e){n.prototype.init.apply(this,arguments);var i=t.last(this.get("urn","").split(":"));this.set("id",i),this.initListItems()},initListItems:function(){var e,n=this.get("Image",[]);this.listItems=[],i.get().debug("IBGalleryEntity::initListItems::Image",this),t.each(n,function(t){e=new o(t),this.listItems.push(e)},this)},getId:function(){return this.id},getTitle:function(){return!1},getListItems:function(){return this.listItems}}),s}),define("common/helper/habitat/entity-type-resolver",["lodash"],function(t){return function(e){var i;return!!(t.has(e,"Urn")&&(i=e.Urn.split(":"),i.length>4))&&i[3]}}),define("common/entity/habitat/callout-box",["lodash","common/util/extends","common/util/logger","common/entity/base"],function(t,e,i,n){function o(e){var i={title:"",subtitle:"",body:"",position:""};n.call(this,t.extend(i,e))}return e(o,n,{init:function(t,e){n.prototype.init.call(this,t),this.map("CalloutTitle","title"),this.map("CalloutSubtitle","subtitle"),this.map("CalloutBody","body"),this.map("CalloutPosition","position"),this.body=this.body.replace(/<p><\/p>|<p>&nbsp;<\/p>/gi,"")},getTitle:function(){return this.title},getSubtitle:function(){return this.subtitle},getBody:function(){return this.body},getPosition:function(){return this.position}}),o}),define("common/entity/habitat/horizontal/banner",["lodash","common/util/extends","common/entity/habitat/base"],function(t,e,i){function n(e){var n={title:"",URL:!1,image:!1,brandId:!1};i.call(this,t.extend(n,e))}return e(n,i,{init:function(t){i.prototype.init.call(this,t),this.map("headline","title"),this.map("horizontalUrl","URL"),this.getId()&&this.set("brandId",this.getId())},getURL:function(){return this.URL},getTitle:function(){return this.title},getImage:function(){return this.image},getBrandId:function(){return this.brandId}}),n}),define("common/entity/habitat/horizontal/partner",["lodash","common/util/extends","common/entity/habitat/link","common/entity/habitat/image/base","common/entity/habitat/video","common/util/logger"],function(t,e,i,n,o,s){function a(e){var n={partnerLogo:!1,description:"",video:!1,type:!1,partnerEnabled:!1};i.call(this,t.extend(n,e))}return e(a,i,{init:function(t){i.prototype.init.call(this,t),this.map("partnerHeadline","title"),this.map("partnerUrl","URL"),this.map("partnerBody","description"),this.map("partnerAssetSelect","type"),this.initImages(),this.initVideo()},initImages:function(){var t=this.getArrayNestedAsset("partnerBackground"),e=this.getArrayNestedAsset("partnerImage");!1!==t&&this.initImage("image",t),!1!==e&&this.initImage("partnerLogo",e)},initVideo:function(){var t=this.getArrayNestedAsset("partnerVideo"),e=this.getArrayNestedAsset("partnerVideoImage");!1!==t&&(0===t.Thumbnail.length&&!1!==e&&t.Thumbnail.push(e),this.set("video",new o(t)))},getPartnerLogo:function(){return this.partnerLogo},getDescription:function(){return this.description},getVideo:function(){return this.video},getType:function(){return this.type},isEnabled:function(){return this.partnerEnabled}}),a}),define("common/entity/habitat/horizontal/horizontal",["lodash","common/util/extends","common/entity/habitat/base","common/entity/habitat/horizontal/banner","common/entity/habitat/horizontal/partner"],function(t,e,i,n,o){function s(e){var n={enabled:!1,URL:!1,name:"",headline:"",banner:!1,partner:!1};i.call(this,t.extend(n,e))}return e(s,i,{init:function(t){i.prototype.init.call(this,t),this.map("horizontalUrl","URL"),this.map("horizontalEnabled","enabled"),this.setupBanner(this),this.setupPartner(this)},setupBanner:function(t){var e=new n(t);e&&this.setBanner(e)},setupPartner:function(t){var e=new o(t);e&&this.setPartner(e)},setBanner:function(t){this.banner=t},setPartner:function(t){this.partner=t},isEnabled:function(){return this.enabled},getURL:function(){return this.URL},getName:function(){return this.name},getHeadline:function(){return this.headline},getBanner:function(){return this.banner},getPartner:function(){return this.partner}}),s}),define("common/_modules/super-section-index/entities/banner",["lodash","common/util/extends","common/entity/habitat/base","common/view/entity-URL-router"],function(t,e,i,n){function o(e){var n={id:!1,title:!1,URL:!1,image:!1,brandId:!1,adZoneId:!1,theme:!1,primaryVertical:!1};i.call(this,t.extend(n,e))}return e(o,i,{init:function(e){i.prototype.init.call(this,e),t.has(this,"general.Name")&&(this.title=this.general.Name),!1!==this.id&&(this.brandId=this.id,this.URL=n.getURL(this.id)),t.has(this,"general.AdTargetingId")&&(this.adZoneId=this.general.AdTargetingId),t.has(this,"general.Theme")&&(this.theme=this.general.Theme),t.has(this,"general.PrimaryVertical")&&(this.primaryVertical=this.general.PrimaryVertical)},getTitle:function(){return this.title},getURL:function(){return this.URL},getImage:function(){return this.image},getBrandId:function(){return this.brandId},getAdZoneId:function(){return this.adZoneId},getTheme:function(){return this.theme},getPrimaryVertical:function(){return this.primaryVertical}}),o}),define("common/entity/habitat/story/article",["lodash","common/util/extends","common/util/logger","common/entity/factory","common/helper/entity/list","common/entity/habitat/base","common/entity/habitat/story/promo","common/entity/habitat/collection/promo","common/entity/habitat/tag/promo","common/entity/habitat/destination/promo","common/entity/habitat/author","common/entity/habitat/partner","common/entity/list/entity","common/entity/habitat/mixed/promo","common/entity/habitat/image/base","common/entity/vanilla/image","common/entity/habitat/video","common/entity/habitat/ib-gallery","common/helper/icon-type-helper","common/helper/habitat/entity-type-resolver","common/helper/advertising","common/entity/habitat/callout-box","common/entity/habitat/horizontal/horizontal","common/_modules/super-section-index/entities/banner","common/helper/geo-location"],function(t,e,i,n,o,s,a,r,l,c,d,u,p,h,m,g,f,b,y,v,w,S,x,I,C){function T(e){var i={intro:"",body:"",leadVideo:!1,displayDate:!1,publicationDate:!1,relatedArticles:!1,galleryImages:!1,customEmbed:!1,infographic:!1,promoModule:!1,hasLeadAsset:!1,relatedTags:!1,calloutBox:!1,calloutTitle:!1,horizontal:!1,superSection:!1,advertsDisabled:!1,theme:!1};a.call(this,t.extend(i,e))}return e(T,a,{init:function(t){a.prototype.init.call(this,t),this.map("bodyHtml","body"),this.map("assetInfographic","infographic"),this.map("relatedStory","relatedStories"),this.map("relatedTag","relatedTags"),this.map("creationDateTime","publicationDate"),this.map("summaryLong","summary"),this.map("headlineLong","title"),this.map("disableAdverts","advertsDisabled"),this.formatIntro(this.get("intro","")),this.initCustomEmbed(),this.indexInlineEntities(),this.initGalleryImages(),this.initRelatedArticles(),this.initAuthor(this.getArrayNestedAsset("author")),this.initPartner(this.getArrayNestedAsset("partner")),this.initVideo(),this.initSuperSectionEntity(this.getArrayNestedAsset("superSection")),this.initHorizontalEntity(this.getArrayNestedAsset("horizontal")),this.initKeywords(this.get("collection"),this.get("location"),this.get("tags")),this.initAdZoneId(this.get("collection"),this.get("location"),this.get("tags")),this.initFullURL(),this.initHasLeadAssetModule(),this.initAdSLots(),this.initTheme(),this.initCalloutBox({CalloutTitle:this.calloutTitle,CalloutSubtitle:this.calloutSubtitle,CalloutBody:this.calloutBody,CalloutPosition:this.calloutPosition})},initCalloutBox:function(e){t.isUndefined(this.calloutTitle)||!1===this.calloutTitle||0===this.calloutTitle.length||this.set("calloutBox",new S(e))},initAdSLots:function(){var t;this.areAdvertsDisabled()?t=[]:(t=w.getDefaultAdSlots(this.hasLeadAssetModule()),this.isSuperSectionLayout()&&(t["sponsor-section-hero"].groups=[1,2,3,4])),this.set("adSlots",t)},initTheme:function(){this.isSuperSectionLayout()&&(this.theme=this.getSupersection().getTheme())},getTheme:function(){return this.theme},initHasLeadAssetModule:function(){var t=!1;this.getVideo()?t=!0:"image"==this.getType()&&this.getGalleryImages()&&(t=!0),this.set("hasLeadAsset",t)},getLeadImage:function(){return this.getArrayNestedAsset("assetImage")},initCustomEmbed:function(){var t=this.get("assetCustom");t&&this.set("customEmbed",{embedCode:t})},initKeywords:function(e,i,n){var o,s,a,d={pageType:this.getEntityType(),STORY:"1",asset_type:this.getEntityType(),media:this.getType(),tags:[],destination:[]},u=this.getSuperSectionAdZoneId();return e&&(o=new r(e),d[o.getType()]=o.getId(!0)),t.each(i,function(t,e){a=new c(t),d.destination.push(a.getId(!0))}),t.each(n,function(t,e){s=new l(t),d.tags.push(s.getId(!0))}),u&&(d.column="super_"+u,d.wwsupersection=u),this.set("keywords",d)},initAdZoneId:function(e,i,n){var o,s="";return e&&(o=new r(e),s+=w.generateZoneForHabitatEntity(o.get("type"),o)),t.isArray(i)&&i.length>0?(e&&(s+="-"),t.each(i,function(t,e){o=new c(t),s+=0===e?w.generateZoneForHabitatEntity("destination",o):w.generateZoneForHabitatEntity(void 0,o)})):t.isArray(n)&&n.length>0&&(e&&(s+="-"),o=new l(t.first(n)),s+=w.generateZoneForHabitatEntity("tag",o)),s=w.generateContentZone(s),this.set("adZoneId",s)},initGalleryImages:function(){var e=[],i=this.get("assetIbroadcast",[]),n=this.get("assetImage",[]),o=!1;i instanceof Array&&i.length>0&&t.has(i[0],"Image")?(e=e.concat(i[0].Image),o=new b(i[0])):n instanceof Array&&n.length>1&&(e=e.concat(n),o=new b({Image:n})),o&&this.set("galleryImages",o)},initRelatedArticles:function(){this.set("relatedArticles",o.getList(this.get("relatedStories"),h))},initVideo:function(){var e=this.get("assetVideoIb2"),i=this.get("assetVideoMps"),n=!1;e instanceof Array&&e.length>0?(n=e[0],n=t.extend({Provider:"ibroadcast"},n)):i instanceof Array&&i.length>0&&(n=i[0],n=t.extend({Provider:"mps"},n)),!1!==n&&this.set("leadVideo",new f(n))},initAuthor:function(t){if(t){var e=new d(t);this.set("author",e)}else this.set("author",!1)},initPartner:function(t){if(t){var e=new u(t);this.set("partner",e)}else this.set("partner",!1)},initSuperSectionEntity:function(t){if(t){var e=new I(t);this.set("superSection",e)}else this.set("superSection",!1)},initHorizontalEntity:function(t){if(t){var e=new x(t);this.set("horizontal",e)}else this.set("horizontal",!1)},isHorizontalBannerAvailable:function(){var t=this.getHorizontal();return!C.isUK()&&!1!==t&&!0===t.isEnabled()},isSuperSectionBannerAvailable:function(){return!1!==this.getSupersection()},getSuperSectionAdZoneId:function(){return!(this.isHorizontalBannerAvailable()||!this.isSuperSectionBannerAvailable())&&this.getSupersection().getAdZoneId()},formatIntro:function(t){this.intro=t.replace(/\r?\n/g,"<br />")},getSupersection:function(){return this.superSection},getHorizontal:function(){return this.horizontal},getVideo:function(e){return t.isUndefined(e)?this.leadVideo:this.getIndexedAsset("Video",e)},getImage:function(e){return t.isUndefined(e)?this.image:this.getIndexedAsset("Image",e)},getIndexedAssets:function(t){return this["indexed"+t]},getIndexedAsset:function(e,i){return!!t.has(this.getIndexedAssets(e),i)&&this.getIndexedAssets(e)[i]},indexInlineEntities:function(){var e,i={},n={},o={},s=this.get("assetInline",!1);t.isArray(s)&&s.length>0&&(t.each(s,function(t){switch(v(t)){case"videopid":e=new f(t),n[e.getId()]=e;break;case"gallery":e=new b(t),o[e.getId()]=e;break;default:e=new m(t),i[e.getId()]=e}},this),this.set("indexedVideo",n),this.set("indexedImage",i),this.set("indexedGallery",o))},getPublicationDate:function(){return this.publicationDate},getRelatedArticles:function(){return this.relatedArticles},getRelatedTags:function(){return this.relatedTags},getLocation:function(){return this.location},getGalleryImages:function(e){return t.isUndefined(e)?this.galleryImages:this.getIndexedAsset("Gallery",e)},getDisplayDate:function(){return this.displayDate},getIntro:function(){return this.intro},getBody:function(){return this.body},getSummary:function(){return this.summary},getCustomEmbed:function(){return this.customEmbed},getInfographic:function(){return this.infographic},getPromoModule:function(){return this.promoModule},hasLeadAssetModule:function(){return this.hasLeadAsset},getCalloutBox:function(){return this.calloutBox},areAdvertsDisabled:function(){return this.advertsDisabled},isSuperSectionLayout:function(){var t=["story","image","audio"];return this.isSuperSectionStory()&&-1!==t.indexOf(this.getType())&&!this.hasLeadAssetModule()&&!this.hasEmbeddedContent()},isBroadcastGallery:function(){return!!this.galleryImages},isSuperSectionStory:function(){return!!this.getSuperSection()},
getSuperSection:function(){return this.superSection},hasEmbeddedContent:function(){return!1!==this.getInfographic()||!1!==this.getCustomEmbed()}}),T}),define("component/related-stories",["lodash","module/MVVM-component","common/config","common/model/remote","common/model/story/story-by-destination","common/model/story/story-by-tag","common/view/model-v2/list/promo-group/base","common/entity/habitat/mixed/list/promo","common/entity/habitat/story/article","common/entity/habitat/tag/promo","common/entity/habitat/destination/promo","templates"],function(t,e,i,n,o,s,a,r,l,c,d,u){function p(e){var a=!1,r=e.getRelatedArticles(),l=e.getRelatedTags(),u=e.getLocation();if(r&&e.get("relatedStories")instanceof Array&&e.get("relatedStories").length>0)a=new n,a.populate({results:e.get("relatedStories",[])});else if(l instanceof Array&&l.length>0){var p=new c(l[0]);a=new s(t.extend({id:p.get("shortId",""),items:4},i.get()))}else if(u instanceof Array&&u.length>0){var h=new d(u[0]);a=new o(t.extend({id:h.get("shortId",""),items:4},i.get()))}return a}return function(i,n,o){if(void 0!==n){var s=p(n);if(!1!==s){var l="promo-group";"number"==typeof o&&o>0&&(l="related-stories");var c=new a(new r,t.extend({groupEnd:6,excludedId:n.id},i));return new e(s,c,u[l])}throw new Error("Required story data not found")}throw new Error("ExposedData.story not found")}}),define("module/related-stories-mvt",["lib/ecmaScript5","jquery","common/config","model/exposed-data","module/component-loader","component/related-stories"],function(t,e,i,n,o,s){function a(t,n,a){if(_.has(i.get(),"moduleId")&&e(t).length>0)try{var r=new s({class:a,analyticsConfig:{module:"related-stories"}},n,a);new o(e(t),r).load()}catch(t){console.log(t.message)}}return function(t,e){var i,n=document.querySelector(t);n&&n.getAttribute("data-variation-number")&&(i=parseFloat(n.getAttribute("data-variation-number")),a(t,e,i))}}),define("common/parser/first-item-from-results-set",["lodash"],function(t){return function(e,i){if(t.isArray(e))return t.first(e);throw new Error("Data   in unexpected format")}}),define("common/model/habitat-object",["lodash","common/util/extends","common/model/habitat","common/parser/habitat","common/parser/first-item-from-results-set"],function(t,e,i,n,o){function s(t){i.call(this,t)}return e(s,i,{parseData:function(t,e){var i=o(n(t).results);return this.parseHabitatData(i)},parseHabitatData:function(t){return t}}),s}),define("common/model/story/story",["lodash","common/util/logger","common/util/extends","common/model/habitat-object"],function(t,e,i,n,o){function s(t){n.call(this,t)}return i(s,n,{arrRequiredConfig:["id"],URLScheme:"/{moduleId}/story/{id}",parseHabitatData:function(t){return this.sanitiseStoryData(t)},sanitiseStoryData:function(e){return t.has(e,"Content")&&t.has(e.Content,"BodyHtml")&&(e.Content.BodyHtml=e.Content.BodyHtml.replace(/<script type=("|')text\/javascript("|')>([\s\S]*?)<\/script>/gi,"")),e}}),s}),define("common/service/request-builder/weather",["lodash","common/util/extends","common/service/request-builder/base"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{getRequestURL:function(t,e){return"/"+e.module.domain+this.buildURLScheme(t,e)},checkArguments:function(e,i,n){if(arguments.length<3)throw Error("All arguments must be provided to request builder");if(!t.has(n,"weather_api")||!t.has(n.weather_api,"url"))throw Error("API data must be set in config")}}),n}),define("common/model/weather/weather",["lodash","common/util/extends","common/model/remote","common/service/request-builder/weather"],function(t,e,i,n){function o(t){i.call(this,t)}return e(o,i,{requestBuilder:new n}),o}),define("common/model/weather/five-day-forecast",["lodash","common/util/extends","common/model/weather/weather"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{arrRequiredConfig:["weatherId"],URLScheme:"/en/forecast/5day/{weatherId}",parseData:function(e){return!(!t.isObject(e)||!t.has(e,"forecastContent"))&&e}}),n}),define("common/interface/entity/weather/forecast-collection",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,i){return new e("WeatherForecastCollectionEntity",i.methods.concat(["getId","getURL","getLocation","getCountry","getForecasts"]))}),define("common/interface/entity/weather/forecast",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,i){return new e("WeatherForecastEntity",i.methods.concat(["getDay","getNight","getDayText"]))}),define("common/interface/entity/weather/forecast-period",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,i){return new e("WeatherForecastPeriodEntity",i.methods.concat(["getMinTemps","getMaxTemps","getCode","getCaption"]))}),define("common/view/model-v2/weather/widget",["lodash","common/util/extends","common/util/interface","common/view/model-v2/base","common/interface/entity/weather/forecast-collection","common/interface/entity/weather/forecast","common/interface/entity/weather/forecast-period"],function(t,e,i,n,o,s,a){function r(){n.apply(this,arguments)}return e(r,n,{entityInterface:o,setViewData:function(){this.viewData={countryName:this.getEntity().getCountry(),locationName:this.getEntity().getLocation(),todayForecast:this.getForecastByDay(0),tomorrowForecast:this.getForecastByDay(1),forecast:this.getForecast(),weatherURL:this.getEntity().getURL()}},getForecastByDay:function(e){var n,o=this.getEntity().getForecasts(),r=!1;return!!(t.isNumber(e)&&e<o.length)&&(o.length>0&&(n=o[e],i.ensureImplements(n,s),r={dayNameAbbreviation:n.getDayText()},n.getDay()?(i.ensureImplements(n.getDay(),a),r.temperature=n.getDay().getMaxTemps(),r.weatherCode=n.getDay().getCode().toString(),r.weatherCaption=n.getDay().getCaption()):(i.ensureImplements(n.getNight(),a),r.temperature=n.getNight().getMinTemps(),r.weatherCode=n.getNight().getCode().toString(),r.weatherCaption=n.getNight().getCaption())),r)},getForecast:function(e){var n=this.getEntity().getForecasts(),o=[],r=this.getConfig().get("forecastRange",!1);return n=t.isObject(r)&&t.has(r,"start")&&t.has(r,"end")?n.slice(r.start,r.end+1):n.slice(1,n.length),t.each(n,function(t){i.ensureImplements(t,s),i.ensureImplements(t.getDay(),a),i.ensureImplements(t.getNight(),a),o.push({dayNameAbbreviation:t.getDayText(),maxTemperature:t.getDay().getMaxTemps(),minTemperature:t.getNight().getMinTemps(),weatherCode:t.getDay().getCode().toString(),weatherCaption:t.getDay().getCaption()})},this),o}}),r}),define("common/entity/external/weather/forecast-period",["lodash","common/util/extends","common/entity/base"],function(t,e,i){function n(e,n){var o={isProvided:!1,maxTemps:{centigrade:0,fahrenheit:0},minTemps:{centigrade:0,fahrenheit:0},code:0,caption:""};i.call(this,t.extend(o,e),n)}return e(n,i,{init:function(e,n){i.prototype.init.call(this,e),t.has(e,"maxTemperature")&&!t.isNull(e.maxTemperature)&&(this.isProvided=!0,this.maxTemps=e.maxTemperature),t.has(e,"minTemperature")&&!t.isNull(e.minTemperature)&&(this.minTemps=e.minTemperature),t.has(e,"weatherCode")&&!t.isNull(e.weatherCode)&&(this.code=e.weatherCode),t.has(e,"weatherType")&&!t.isNull(e.weatherType)&&(this.caption=e.weatherType)},getMinTemps:function(){return this.minTemps},getMaxTemps:function(){return this.maxTemps},getCode:function(){return this.code},getCaption:function(){return this.caption},isProvided:function(){return this.isProvided}}),n}),define("common/entity/external/weather/forecast",["lodash","common/util/extends","common/entity/base","common/entity/external/weather/forecast-period"],function(t,e,i,n){function o(e,n){var o={night:!1,day:!1,dayText:""};i.call(this,t.extend(o,e),n)}function s(e,i){return!(!t.has(e,i)||!t.has(e[i],"weatherCode")||t.isNull(e[i].weatherCode))&&e[i]}return e(o,i,{init:function(e,o){i.prototype.init.call(this,e);var a=s(e,"day"),r=s(e,"night");this.day=!1,this.night=!1,a&&(this.day=new n(a)),r&&(this.night=new n(r)),t.has(e,"dayNameAbbreviation")&&(this.dayText=e.dayNameAbbreviation)},getNight:function(){return this.night},getDay:function(){return this.day},getDayText:function(){return this.dayText}}),o}),define("common/entity/external/weather/forecast-collection",["lodash","common/util/extends","common/entity/base","common/entity/external/weather/forecast"],function(t,e,i,n){function o(e,n){var o={id:"",URL:"",location:"",country:"",forecasts:[]};i.call(this,t.extend(o,e),n)}return e(o,i,{init:function(e,n){i.prototype.init.call(this,e),t.has(e,"forecastContent")&&(t.has(e.forecastContent,"forecasts")&&this.setForecasts(e.forecastContent.forecasts),t.has(e.forecastContent,"location")&&t.has(e.forecastContent.location,"locationName")&&t.has(e.forecastContent.location,"country"),t.has(e.forecastContent.location,"id")&&(this.set("location",e.forecastContent.location.locationName),this.set("country",e.forecastContent.location.country),this.set("id",e.forecastContent.location.id),t.has(n,"full_forecast_url")&&this.set("URL",n.full_forecast_url+this.getId())))},getId:function(){return this.id},getURL:function(){return this.URL},getLocation:function(){return this.location},getCountry:function(){return this.country},setForecasts:function(e){var i=[];t.each(e,function(t){i.push(new n(t))}),this.set("forecasts",i)},getForecasts:function(){return this.forecasts}}),o}),define("component/weather-forecast",["lodash","module/MVVM-component","common/config","common/model/weather/five-day-forecast","common/view/model-v2/weather/widget","common/entity/external/weather/forecast-collection","templates","util/logger"],function(t,e,i,n,o,s,a,r){return function(r,l,c){t.isUndefined(c)&&(c=a["weather-forecast"]);var d=new n(t.extend({weatherId:r},i.get())),u=new o(new s,l);return new e(d,u,c)}}),define("interaction-controller/weather-module",["jquery","lodash","common/util/extends","interaction-controller/base","module/weather"],function(t,e,i,n,o){var s=function(){n.call(this)};return i(s,n,{init:function(t,e){n.prototype.init.call(this,t,e),this.weatherPersonalisationCookieName="ckps_travel_weather"},refresh:function(){n.prototype.refresh.call(this),this.initUIState()},initUIState:function(){var e;this.simpleFahrenheitUnit="f",this.simpleCentigradeUnit="c",this.unitMap={fahrenheit:this.simpleFahrenheitUnit,centigrade:this.simpleCentigradeUnit},this.weatherIconFahrenheit="wi-toggle-fahrenheit",this.weatherIconCentigrade="wi-toggle-centigrade",this.activeClass="is-active",this.hiddenClass="is-hidden",this.settingsButtonToggleIcon=this.el.find('[data-weather-settings-button="toggle"]'),this.centigradeElement=this.el.find('[data-weather-icon="centigrade"]'),this.centigradeSettingsButton=this.el.find('[data-weather-settings-button="centigrade"]'),this.fahrenheitElement=this.el.find('[data-weather-icon="fahrenheit"]'),this.fahrenheitSettingsButton=this.el.find('[data-weather-settings-button="fahrenheit"]'),t.cookie(this.weatherPersonalisationCookieName)?(e=JSON.parse(t.cookie(this.weatherPersonalisationCookieName)),this.setUnit(e.temperature),this.updateUI(e.temperature)):(this.setUnit(this.simpleFahrenheitUnit),this.updateUI(this.simpleFahrenheitUnit)),this.setupUIEventListeners()},setupUIEventListeners:function(){var e=this;t(this.settingsButtonToggleIcon).on("click",function(t){e.handleSettingsToggle(t)}),t(this.centigradeSettingsButton).add(this.fahrenheitSettingsButton).on("click",function(t){e.handleSettingsSelection(t)})},toggleUnitSetting:function(){this.getUnit()===this.simpleFahrenheitUnit?this.changeUnitSetting(this.simpleCentigradeUnit):this.changeUnitSetting(this.simpleFahrenheitUnit)},changeUnitSetting:function(t){this.isValidUnit(t)&&(this.updateUI(t),this.setCookie(t),this.setUnit(t))},handleSettingsToggle:function(t){t.preventDefault(),this.toggleUnitSetting()},handleSettingsSelection:function(i){if(i.preventDefault(),e.has(i,"currentTarget")){var n=t(i.currentTarget),o=this.getConvertedUnitString(n.attr("data-weather-settings-button"));this.changeUnitSetting(o)}},getConvertedUnitString:function(t){return!!e.isString(t)&&(this.unitMap[t]||!1)},updateUI:function(t){t===this.simpleCentigradeUnit?(this.settingsButtonToggleIcon.removeClass(this.weatherIconCentigrade).addClass(this.weatherIconFahrenheit).attr("aria-label","Celsius - Switch to Fahrenheit"),this.centigradeSettingsButton.addClass(this.activeClass),this.centigradeElement.removeClass(this.hiddenClass),this.fahrenheitSettingsButton.removeClass(this.activeClass),this.fahrenheitElement.addClass(this.hiddenClass)):t===this.simpleFahrenheitUnit&&(this.settingsButtonToggleIcon.removeClass(this.weatherIconFahrenheit).addClass(this.weatherIconCentigrade).attr("aria-label","Fahrenheit - Switch to Celsius"),this.fahrenheitSettingsButton.addClass(this.activeClass),this.fahrenheitElement.removeClass(this.hiddenClass),this.centigradeSettingsButton.removeClass(this.activeClass),this.centigradeElement.addClass(this.hiddenClass))},isValidUnit:function(t){return e.isString(t)&&e.contains([this.simpleFahrenheitUnit,this.simpleCentigradeUnit],t)},setUnit:function(t){return this.isValidUnit(t)&&(this.unit=t),!1},getUnit:function(){return this.unit},setCookie:function(e){t.cookie(this.weatherPersonalisationCookieName,null);var i={};e&&(i.temperature=e),t.cookie(this.weatherPersonalisationCookieName,JSON.stringify(i),{expires:360,path:"/"})}}),s}),define("module/weather",["lodash","lib/jquery-cookie","util/logger","lib/domReady","component/weather-forecast","module/component-loader","interaction-controller/weather-module"],function(t,e,i,n,o,s,a){var r=function(t,e,i,n){this.setSelector(t),this.setupComponents(e,i,n)};return t.extend(r.prototype,{setupComponents:function(t,e,i){var n=new o(t,e,i),r=new s(this.selector,n,{mode:"replace",interactionController:new a});this.weatherModuleComponentLoader=r},load:function(){var t=this;this.weatherModuleComponentLoader.load().then(function(){t.initUIState()})},setSelector:function(t){this.selector=e(t)},getSelector:function(){return this.selector}}),r}),define("common/view/model-v2/list/promo-group/irregular-images",["lodash","common/util/extends","common/util/logger","common/view/model-v2/list/promo-group/base","common/interface/entity/list/base"],function(t,e,i,n,o){function s(){n.apply(this,arguments)}return e(s,n,{entityInterface:o,setViewData:function(){n.prototype.setViewData.apply(this,arguments);var e={"item-one":this.getPromoUnitByIndex(0),"item-two":this.getPromoUnitByIndex(1),"item-three":this.getPromoUnitByIndex(2),"item-four":this.getPromoUnitByIndex(3)};e=t.merge(this.getViewData()["promo-group"],e)},getPromoUnitByIndex:function(e){var i=this.viewData["promo-group"].items;return!!(t.isNumber(e)&&e<i.length)&&i[e]}}),s}),define("component/promo-group/irregular-images",["lodash","module/MVVM-component","common/view/model-v2/list/promo-group/irregular-images","templates"],function(t,e,i,n){return function(o,s,a,r){t.isUndefined(r)&&(r="promo-group-without-container");var l=new i(s,a);return new e(o,l,n[r])}}),define("common/model/module-collection-facade",["lodash","common/util/extends","common/model/habitat-object"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{arrRequiredConfig:["id"],URLScheme:"/{moduleId}/module/{id}",parseHabitatData:function(e){return t.has(e,"Content")&&t.has(e.Content,"Stories")&&(e.Content.CollectionOverrides=e.Content.Stories),e}}),n}),define("common/model/best-of/best-of",["lodash","common/util/extends","common/model/module-collection-facade"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{arrRequiredConfig:[],URLScheme:"/{moduleId}/module/best-of"}),n}),define("common/entity/habitat/collection/story-list",["lodash","common/util/extends","common/util/logger","common/entity/habitat/link","common/entity/habitat/mixed/promo"],function(t,e,i,n,o){function s(t,e){n.apply(this,arguments)}return e(s,n,{init:function(t){n.prototype.init.apply(this,arguments),this.initListItems()},initListItems:function(){var e,i=this.get("collectionOverrides",[]);this.listItems=[],t.each(i,function(t){e=new o(t),this.listItems.push(e)},this)},getListItems:function(){return this.listItems}}),s}),define("component/promo-group/best-of",["lodash","common/config","component/promo-group/base","component/promo-group/irregular-images","common/model/best-of/best-of","common/entity/habitat/collection/story-list"],function(t,e,i,n,o,s){return function(a,r,l){r=t.extend(r,{groupEnd:4});var c=e.get();return t.has(c,"moduleId")&&"wwfuture"===c.moduleId?n(new o(c),new s,r,"irregular-images"):i(new o(c),new s,r,"promo-group")}}),define("component/more-amazing-stories",["lodash","module/MVVM-component","common/config","common/model/front-page/front-page-stories","common/view/model-v2/list/promo-group/base","common/entity/habitat/mixed/list/promo","common/entity/habitat/story/promo","templates","model/exposed-data"],function(t,e,i,n,o,s,a,r,l){return function(c){if(t.has(l,"story")&&t.has(c,"moduleId")){var d=new a(l.story),u=new n(t.extend({moduleId:c.moduleId},i.get()));if(!1!==u){var p=new o(new s,t.extend({groupEnd:6,excludedId:d.getId()},c));return new e(u,p,r["promo-group"])}throw new Error("Story doesnt contain tags")}throw new Error("ExposedData.story not found")}}),define("common/view/model-v2/list/promo-group/news-feed",["lodash","common/util/extends","common/util/logger","common/view/model-v2/list/promo-group/base","common/interface/entity/list/base"],function(t,e,i,n,o){function s(){n.apply(this,arguments)}return e(s,n,{entityInterface:o,setViewData:function(){n.prototype.setViewData.apply(this,arguments);var e={},i=this.getConfig(),o=i.get("feedPromoImage",!1);!1!==o&&(e["feed-promo-image"]={"image-URL":o.imageURL,"feed-URL":o.feedURL}),this.viewData=t.extend(this.getViewData(),e)}}),s}),define("component/promo-group/news-feed",["lodash","module/MVVM-component","common/view/model-v2/list/promo-group/news-feed","templates"],function(t,e,i,n){return function(o,s,a,r){t.isUndefined(r)&&(r="news-feed-promo-group");var l=new i(s,a);return new e(o,l,n[r])}}),define("common/model/external/news/davos",["lodash","common/util/extends","common/model/habitat"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{URLScheme:"/external/bbc-news-davos",parseData:function(e){return!!t.isArray(e)&&{items:e}}}),n}),define("common/entity/external/news/davos/promo",["lodash","common/util/extends","common/util/logger","common/entity/base","common/entity/vanilla/image","common/helper/context-data/item"],function(t,e,i,n,o,s){function a(e,i){var o={id:!1,PromoUrl:"",Headline:"",image:!1,description:"",iconType:"",context:!1,type:""};n.call(this,t.extend(o,e),i)}return e(a,n,{init:function(e,i){n.prototype.init.apply(this,arguments),t.has(e,"ImageUrl")&&this.set("image",new o({URL:e.ImageUrl,replaceURL:e.PromoUrl})),t.has(e,"ContextName")&&this.set("context",[new s(e.ContextName,e.ContextUrl)])},getId:function(){return this.id},getURL:function(){return this.PromoUrl},getTitle:function(){return this.Headline},getImage:function(){return this.image},getShortName:function(){return this.Headline},getClientName:function(){return this.clientName},setSummary:function(t){this.description=t},getSummary:function(){return this.description},getSummaryLong:function(){return this.getSummary()},getContext:function(){return this.context},getIconType:function(){return this.iconType},getType:function(){return this.type},getRelatedLinks:function(){return!1}}),a}),define("common/entity/external/news/davos/list",["lodash","common/util/extends","common/util/logger","common/entity/list/entity","common/entity/external/news/davos/promo"],function(t,e,i,n,o){function s(t,e){n.apply(this,arguments)}return e(s,n,{entityFactoryDependencies:[],flushListItems:function(){this.items=[]},getListItems:function(){return this.items},createEntity:function(t){return new o(t)}}),s}),define("component/promo-group/davos-news-feed",["lodash","common/config","component/promo-group/news-feed","common/model/external/news/davos","common/entity/external/news/davos/list","templates"],function(t,e,i,n,o,s){return function(s){return i(new n(e.get()),new o,t.extend({title:"More on Davos",groupEnd:6,class:"news-feed",feedPromoImage:{imageURL:"http://news.bbcimg.co.uk/nol/shared/img/bbc_news_120x60.gif",feedURL:"http://www.bbc.co.uk/news/business-35233481"},promoGroup:{id:"extra-footer",class:"single-column-primary"},promoUnit:{class:"news-feed"}},s),"news-feed-promo-group")}}),define("common/view/model-v2/link/share-tools",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/link","common/config","common/util/logger","common/view/model-v2/image/html-element"],function(t,e,i,n,o,s,a){function r(){i.apply(this,arguments)}return e(r,i,{entityInterface:n,setViewData:function(){var t=this.getMetaData();if(""===t.title||""===t.url)return void(this.viewData={});this.viewData={title:t.title,class:this.getConfig().get("class",""),shareItemsDesktop:this.getShareItems("desktop"),shareItemsMobile:this.getShareItems("mobile")}},getMetaData:function(){var t=this.getEntity();return{title:this.getConfig().get("title"),url:t.getURL(),encodedTitle:encodeURIComponent(t.getTitle()),twitterUsername:this.getTwitterUserName()}},getSocialIconsConfig:function(){var e=o.get(),i=t.get(e,"socialIcons",!1),n=this.getConfig().get("socialIconsListType",!1);return t.has(i,n)?i[n]:!!t.has(i,"default")&&i.default},encodeUrlWithShareSource:function(t,e){var i="ocid=ww.social.link."+e,n=t+(t.indexOf("?")>-1?"&":"?");return n+=i,encodeURIComponent(n)},getShareItems:function(e){var i=this.getSocialIconsConfig();if(e&&t.has(i,e)){var n=this.getBaseShareItems(),o=[];return t.each(i[e],function(e){var i=t.find(n,function(t){return t.id===e});this.setShareItemText(e,i),t.isUndefined(i)?s.get().debug('"'+e+'" icon content not found in base share items'):o.push(this.getShareItem(i))},this),o}return!1},getTwitterUserName:function(){var e=o.get();return!!t.has(e,"socialLinks.twitter.username")&&e.socialLinks.twitter.username},getShareItem:function(e){return!!t.isObject(e)&&{text:e.text,url:e.url,"icon-class":e.iconClass,class:e.class,trackingId:e.trackingId}},getImage:function(){var t=this.getEntity().getImage();return!!t&&new a(t,this.getImageConfig()).setSourceData({},!1)},getImageConfig:function(){var e=this.getConfig().get("image",{});return t.extend({},{format:{landscape:{x:"960",y:"540"}},isWatermarked:!0},e)},setShareItemText:function(e,i){if(t.has(i,"id")&&i.id===e){var n=t.get(this.getText(),e)||"";i.text=n}},getBaseShareItems:function(){var t=this.getMetaData(),e=(t.title,t.url),i=t.encodedTitle,n=t.twitterUsername,o=this.getImage(),s=encodeURIComponent(o.url);return[{id:"facebook",url:"https://www.facebook.com/sharer/sharer.php?u="+this.encodeUrlWithShareSource(e,"facebook")+"&t="+i,class:"facebook",iconClass:"gelicon--facebook",trackingId:"facebook"},{id:"twitter",url:"https://twitter.com/intent/tweet?text="+i+"&url="+this.encodeUrlWithShareSource(e,"twitter")+(!1!==n?"&via="+n:""),class:"twitter",iconClass:"gelicon--twitter",trackingId:"twitter"},{id:"google",url:"https://plus.google.com/share?url="+this.encodeUrlWithShareSource(e,"googleplus"),class:"google",iconClass:"gelicon--google-plus",trackingId:"google"},{id:"email",url:"mailto:?subject=Shared from BBC:"+i+"&body="+this.encodeUrlWithShareSource(e,"email"),class:"email",iconClass:"gelicon--mail",trackingId:"email"},{id:"linkedin",url:"https://www.linkedin.com/shareArticle?mini=true&url="+this.encodeUrlWithShareSource(e,"linkedin")+"&title="+i,class:"linkedin",iconClass:"gelicon--linkedin",trackingId:"linkedin"},{id:"reddit",url:"https://www.reddit.com/submit?url="+this.encodeUrlWithShareSource(e,"reddit")+"&title="+i,class:"reddit",iconClass:"gelicon--reddit",trackingId:"reddit"},{id:"stumbleupon",url:"http://www.stumbleupon.com/submit?url="+this.encodeUrlWithShareSource(e,"stumbleupon"),class:"stumbleupon",iconClass:"gelicon--stumbleupon",trackingId:"stumbleupon"},{id:"whatsapp",url:"whatsapp://send?text="+i+": "+this.encodeUrlWithShareSource(e,"whatsapp"),class:"whatsapp",iconClass:"gelicon--whatsapp",trackingId:"whatsapp"},{id:"pinterest",url:"http://pinterest.com/pin/create/button/?url="+this.encodeUrlWithShareSource(e,"pinterest")+"&description="+i+"&media="+s,class:"pinterest",iconClass:"gelicon--pinterest",trackingId:"pinterest"}]},getText:function(){return{email:"Share by Email",facebook:"Share on Facebook",google:"Share on Google+",linkedin:"Share on LinkedIn",pinterest:"Share on Pinterest",reddit:"Share on Reddit",stumbleupon:"Share on StumbleUpon",twitter:"Share on Twitter",whatsapp:"Share on WhatsApp"}}}),r}),define("common/view/model-v2/link/article-share-tools",["lodash","common/util/extends","common/view/model-v2/link/share-tools","common/interface/entity/link","common/config","common/util/logger","common/view/model-v2/image/html-element"],function(t,e,i,n,o,s,a){function r(){i.apply(this,arguments)}return e(r,i,{}),r}),define("component/share-tools",["lodash","common/config","module/MVVM-component","common/view/model-v2/link/article-share-tools","templates","model/exposed-data"],function(t,e,i,n,o,s){return function(t,e,s){var a=!0===s?{class:"share--mini",title:"Share:"}:{class:"share--article",title:"Share this article:"},r=new n(e,{class:"small "+a.class,title:a.title});return new i(t,r,o["share-tools"])}}),define("model/analytics",[],function(){return new function(){var t;this.setup=function(e){t=e},this.getAnalytics=function(){return t}}}),define("layouts/story",["lodash","lib/ecmaScript5","jquery","lib/domReady","orb/api","module/video/StandAloneVideoPlayer","module/customEmbed","module/heroUnit","module/responsiveInfographic","module/gallery","module/listResizer","module/responsiveShareTools","module/calendar/filter/main","module/ibroadcast-image-gallery/main","module/related-stories-mvt","model/mediaQuery","model/pageData","model/digitalData","common/config","model/exposed-data","templates","common/model/story/story","common/entity/habitat/story/article","common/entity/habitat/destination/promo","module/component-loader","module/MVVM-component","module/weather","component/promo-group/best-of","component/related-stories","component/more-amazing-stories","component/promo-group/davos-news-feed","component/share-tools","layouts/base","model/analytics","util/content-loader-event-handler"],function(t,e,i,n,o,s,a,r,l,c,d,u,p,h,m,g,f,b,y,v,w,S,x,I,C,T,_,k,E,A,L,P,D,R,M){var V=function(t,e){this.setSelector(t),this.setStoryData(e),this.setupContentSelectors(),this.videoSelector="#video-lead-asset",this.inlineVideoSelector=".inline-video .video-player",this.inlineMagnifySelector=".inline-magnify",this.inlineHorizontalPartnerVideoSelector=".horizontal-partner-module__body .body__video #partner-video",this.customEmbedSelector="#custom-embed-content",this.bodyContentSelector=".body-content",this.leadVideoSelector="#video-lead-asset",this.leadVideoWrapperSelector="#video-lead-wrapper",this.infographicSelector=".infographic",this.bestOfSecondarySelector="#best-of-secondary",this.bestOfPrimarySelector="#best-of-primary",this.shareToolsSelectors=["#share-tools-top"],this.shareToolsItemListSelector=".share",this.shareToolsItemSelector=".share-item .share-button",this.relatedStoriesSecondarySelector="#related-stories-secondary",this.relatedStoriesPrimarySelector="#related-stories-primary",this.moreAmazingStoriesSecondarySelector="#related-stories-secondary",this.moreAmazingStoriesPrimarySelector="#more-amazing-stories-primary",this.weatherForecastSecondarySelector="#weather-forecast-secondary",this.isVideoDisplayed=!1,this.leadIBroadcastImageGallerySelector="#lead-gallery-wrapper .ib-gallery",this.leadIBroadcastImageWrapperSelector="#lead-gallery-wrapper",this.inlineIBroadcastImageGallerySelector=".inline-gallery .ib-gallery",this.inlineDavosNewsFeedSelector="#news-feed-davos, #news-feed-davos2016",this.calendarFilterSelector=".event-filter",this.isLeadGalleryDisplayed=!1};return t.extend(V.prototype,{setupContentSelectors:function(){this.storyContentSelector="#story-content",this.storyContentElement=i(this.storyContentSelector),this.primaryContentSelector="#story-content .primary-content",this.secondaryContentSelector="#story-content .secondary-content"},init:function(){this.initStoryData(),this.model=new f,this.model.init({url:b.page.pageInfo.destinationURL}),this.setShortStory(),this.setSecondaryContent(),this.heroUnit=new r(this.model),this.heroUnit.showVideoLoader(),this.setupPageComponents(),this.model.load(),this.setupMedia(),this.setupCalendarComponent(),this.addEventListeners()},initStoryData:function(){void 0!==this.getStoryData()?(this.storyModel=new S(t.extend({id:!1},y.get())),this.storyModel.populate(this.getStoryData()),this.storyEntity=new x(this.storyModel.getData()),this.storyDataInitialised=!0):this.storyDataInitialised=!1},setStoryData:function(e){void 0!==e?this.storyData=e:t.has(v,"story")&&(this.storyData=v.storyData)},getStoryData:function(){return this.storyData},getStoryModel:function(){return this.storyModel},getStoryEntity:function(){return this.storyEntity},addEventListeners:function(){o.layout(this.layout.bind(this)),this.getVideoPlayer()&&(this.getVideoPlayer().subscribe("playlistLoaded",this.videoPlayerReady.bind(this)),this.getVideoPlayer().subscribe("videoPlaying",this.revealVideo.bind(this)),this.getVideoPlayer().subscribe("error",this.videoPlayerError.bind(this)),this.heroUnit.subscribe("playVideo",this.playVideo.bind(this)))},layout:function(){this.isVideoDisplayed&&this.revealVideo(),(this.isLeadGalleryDisplayed||this.isInlineGalleryDisplayed)&&h.triggerUpdate(),void 0!==this.bestofResizer&&this.bestofResizer.layout(),void 0!==this.infographic&&this.infographic.resize()},setupMedia:function(){this.setupVideo(),this.setupInlineVideo(),this.setupCustomEmbed()},setupInlineVideo:function(){this.getSelector().find(this.inlineVideoSelector).each(function(t,e){new s("#"+i(e).attr("id")).init()}),this.getSelector().find(this.inlineMagnifySelector).each(function(t,e){new a("#"+i(e).attr("id")).init()}),this.getSelector().find(this.inlineHorizontalPartnerVideoSelector).each(function(t,e){new s("#"+i(e).attr("id")).init()})},getVideoPlayer:function(){return this.videoPlayer},setVideoPlayer:function(t){this.videoPlayer=t},hasVideo:function(){return void 0!==this.getVideoPlayer()},setupVideo:function(){var t,e=this.getElement(this.videoSelector);e&&(t=new s(this.videoSelector,{canAutoplay:!0}),t.init(),this.setVideoPlayer(t))},videoPlayerReady:function(t){this.heroUnit.activateVideoUI(),this.revealVideo()},videoPlayerError:function(t,e){this.revealVideo()},playVideo:function(){this.revealVideo(),this.getVideoPlayer().play()},revealVideo:function(t){!1===this.isVideoDisplayed&&(this.storyContentElement.css({"margin-top":-this.heroUnit.getVerticalSpace()}),i(this.leadVideoWrapperSelector).removeClass("disabled"),i(this.leadVideoWrapperSelector).height(i(this.leadVideoSelector).height()),this.heroUnit.softenOverlay(),this.isVideoDisplayed=!0)},revealLeadGallery:function(){i(this.leadIBroadcastImageWrapperSelector).length>0&&(this.storyContentElement.css({"margin-top":-this.heroUnit.getVerticalSpace()}),i(this.leadIBroadcastImageWrapperSelector).height(i(this.leadIBroadcastImageGallerySelector).height()),this.heroUnit.softenOverlay(),this.isLeadGalleryDisplayed=!0)},setupCustomEmbed:function(){this.getElement(this.customEmbedSelector)&&new a(this.customEmbedSelector)},getElement:function(t){var e=this.getSelector().find(t);return e.length>0&&e},setSelector:function(t){this.selector=i(t)},getSelector:function(){return this.selector},setupPageComponents:function(){this.addBottomShareTools().then(this.setupShareTools.bind(this)),this.setupIBroadcastGalleries(),this.setupFullscreenGallery(),this.setupRelatedStoriesSecondary(),this.initBestOf(),this.setupRelatedStoriesPrimary(),this.setupMoreAmazingStoriesPrimary(),this.setupWeatherForecastSecondary(),this.setupDavosNewsFeedComponent()},setupShareTools:function(){this.responsiveShareTools=new u(this.shareToolsSelectors,this.shareToolsItemListSelector,this.shareToolsItemSelector)},
initBestOf:function(){var e=y.get();t.has(e,"moduleId")&&"wwfuture"===e.moduleId?this.setupBestOfPrimary():this.setupBestOfSecondary()},setupBestOf:function(e,n){if(t.has(y.get(),"moduleId")&&i(n).length>0){var o=new k(y.get().moduleId,{promoGroup:{id:"best-of",class:e},analyticsConfig:{module:"best-of"}},n);new C(i(n),o).load()}},setupBestOfSecondary:function(){this.setupBestOf("best-of",this.bestOfSecondarySelector)},setupBestOfPrimary:function(){this.setupBestOf("single-column-primary",this.bestOfPrimarySelector)},setupRelatedStories:function(e,n){if(t.has(y.get(),"moduleId")&&i(n).length>0)try{var o=new E({title:"Related Stories",id:"related-stories",class:e,analyticsConfig:{module:"related-stories"},promoUnit:{class:"secondary-branded"}},this.getStoryEntity());new C(i(n),o).load()}catch(t){console.log(t.message)}},setupRelatedStoriesSecondary:function(){i("body[data-optmzly-experiment-enabled=true]").length>0?m(this.relatedStoriesSecondarySelector,this.getStoryEntity()):this.setupRelatedStories("related-stories",this.relatedStoriesSecondarySelector)},setupRelatedStoriesPrimary:function(){this.setupRelatedStories("related-stories",this.relatedStoriesPrimarySelector)},setupMoreAmazingStories:function(e,n){if(t.has(y.get(),"moduleId")&&i(n).length>0)try{var o=y.get(),s="More amazing "+o.module.name+" stories",a=new A({title:s,id:"more-amazing-stories",class:e,promoUnit:{class:"secondary-unbranded"},moduleId:o.moduleId,analyticsConfig:{module:"more-amazing-stories"}});new C(i(n),a).load()}catch(t){console.log(t.message)}},setupMoreAmazingStoriesSecondary:function(){this.setupMoreAmazingStories("more-amazing-stories",this.moreAmazingStoriesSecondarySelector)},setupMoreAmazingStoriesPrimary:function(){this.setupMoreAmazingStories("more-amazing-stories",this.moreAmazingStoriesPrimarySelector)},setupWeatherForecastSecondary:function(){if(!0===this.storyDataInitialised){var e,i,n=this.getStoryEntity().get("location");if("wwtravel"===this.getStoryEntity().get("primaryVertical",!1)&&t.isArray(n)&&n.length>0&&(e=new I(n[0]),!1!==(i=e.get("weatherId"))&&i.length>0)){new _(this.weatherForecastSecondarySelector,i,{}).load()}}},raiseContentLoaded:function(t,e){M.trigger(M.ACTION_LAZY_LOADED_CONTENTS,t,e)},setupIBroadcastGalleries:function(){var t=this;i(this.leadIBroadcastImageGallerySelector).length>0&&h.add(this.leadIBroadcastImageGallerySelector,{onLoadCallback:function(){t.revealLeadGallery(),t.raiseContentLoaded(M.TYPE_LEAD_GALLERY)},onUpdateCallback:function(){t.isLeadGalleryDisplayed&&(t.revealLeadGallery(),t.raiseContentLoaded(M.TYPE_LEAD_GALLERY))}}),i(this.inlineIBroadcastImageGallerySelector).each(function(e,n){var o=function(){var e=i(n),o=e.closest(".inline-media.inline-gallery");o.length>0&&o.height(e.height()),t.raiseContentLoaded(M.TYPE_INLINE_GALLERY)};h.add(n,{minItems:4,onLoadCallback:o,onUpdateCallback:o}),t.isInlineGalleryDisplayed=!0})},setupFullscreenGallery:function(){if(!g.isMobileDevice()){var t=[];i(this.leadIBroadcastImageGallerySelector).find("img").each(function(e,i){t.push({image:i,isClickable:!1})}),i(this.inlineIBroadcastImageGallerySelector+" img").each(function(e,i){t.push({image:i,isClickable:!1})}),i(this.bodyContentSelector).find("img.responsive").each(function(e,i){t.push({image:i,isClickable:!0})}),this.fullscreenGallery=new c(t)}},setupDavosNewsFeedComponent:function(){if(this.getElement(this.inlineDavosNewsFeedSelector)){var t=new L;new C(i(this.inlineDavosNewsFeedSelector),t).load()}},setupShortStory:function(){},setupLongStory:function(){this.addBottomShareTools().then(this.setupShareTools.bind(this))},addBottomShareTools:function(){if(!0===this.storyDataInitialised){var t=new P(this.getStoryModel(),this.getStoryEntity());return t=new C(i("#share-tools-bottom"),t).load(),this.shareToolsSelectors.push("#share-tools-bottom"),t}},isShortStory:function(){return this._isShortStory},setShortStory:function(){i(this.primaryContentSelector).height()>i(this.secondaryContentSelector).height()?this._isShortStory=!1:this._isShortStory=!0},setSecondaryContent:function(){i(this.secondaryContentSelector).height()>16?this._hasSecondaryContent=!0:this._hasSecondaryContent=!1},setupInfographic:function(){this.getElement(this.infographicSelector)&&(this.infographic=new l,this.infographic.init(this.infographicSelector,this.model))},setupCalendarComponent:function(){i(".event-filter").length>0&&(this.calendarFilter=new p(".event-filter"))}}),V}),define("component/responsive-images-renderer",["lodash","jquery","module/responsiveImages/main","module/responsiveImages/formats/wwfeaturesHero","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures83x120","module/responsiveImages/formats/wwfeaturesBanner","module/imageReplacer"],function(t,e,i,n,o,s,a,r){var l=function(t,e,i){this.imageRatio=i,this.setSelector(t)};return t.extend(l.prototype,{init:function(){var t=new r;t.replace("a[data-replace-image='true'][data-is-portrait='false']","responsive landscape"),t.replace("div[data-replace-image='true'][data-is-portrait='false']","responsive landscape"),t.replace("a[data-replace-image='true'][data-is-portrait='true']","responsive portrait"),t.replace("div[data-replace-image='true'][data-is-portrait='true']","responsive portrait"),this.setupResponsiveImages(),this.responsiveImages.respond()},setupResponsiveImages:function(){this.responsiveImages=new i,this.responsiveImages.add(e(this.getSelector()+"img.responsive-hero"),n),this.responsiveImages.add(e(this.getSelector()+"img.responsive.landscape"),o,this.imageRatio),this.responsiveImages.add(e(this.getSelector()+"img.responsive.portrait"),s),this.responsiveImages.add(e(this.getSelector()+"img.responsive-banner"),a)},setSelector:function(t){this.selector=t},getSelector:function(){return this.selector+" "}}),l}),define("component/story-way-points",["lodash","jquery","model/mediaQuery","util/content-loader-event-handler","util/logger"],function(t,e,i,n,o){function s(t,e){this.selector=t,this.activateOnMobile=e,this.active=!1,this.docked=!1,this.eventNamespace=this.selector.replace(/\s\./,""),this.stickOffset=0,this.onScrollCallbacks=[],this.onResizeCallbacks=[],this.onActivateActions=[],this.elementDirection=[],this.orginalElementData={},this.cachedData={},this.stuckedClass="stucked",this.initCache(),this.catchElementData(t)}return t.extend(s.prototype,{init:function(){return this.registerWindowScroll(),this.registerWindowResize(),this.onWindowResize(),this},registerWindowScroll:function(){var i=this;e(window).on("scroll."+this.eventNamespace,t.throttle(function(){i.isActive()&&i.isAvailable()&&t.each(i.onScrollCallbacks,function(t){t()})},10))},unregisterWindowScroll:function(){e(window).off("scroll."+this.eventNamespace)},getOutsideViewPoint:function(t){var e=this.getScrollPosition(),i=this.getBottom(t),n=this.getTop(t),o=this.getHeight(t);return e>=i?0:e<n?100:100*(i-e)/o},registerWindowResize:function(){var i=this;this.addResizeCallback(this.onWindowResize.bind(this)),this.addResizeCallback(this.resetStuckedWidth.bind(this)),e(window).on("resize",t.debounce(function(){t.each(i.onResizeCallbacks,function(t){t()})},100))},addResizeCallback:function(t){this.onResizeCallbacks.push(t)},resetStuckedWidth:function(){t.each(e("."+this.stuckedClass),function(t){var i=e(t);i.width(i.parent().outerWidth(!0))})},onWindowResize:function(){this.reset(),this.clearCache(),this.isAvailable()?this.setActive(!0):this.isActive()&&this.setActive(!1)},onScroll:function(t,i,n){var o="DOWN",s=e(window).scrollTop(),a=this.getWrapper(t).offset();s+i<(a?a.top:0)&&(o="UP"),this.elementDirection[t]&&this.elementDirection[t]===o||(n(o,t),this.elementDirection[t]=o)},toggleStuck:function(t,e,i){var n=this.getElement(e),o=this.getWrapper(e),s="DOWN"===t,a=s?n.outerHeight(!0):"",r=s?n.outerWidth(!0):"",l=s?i:"";o.height(a),n.toggleClass(this.stuckedClass,s).width(r).css("top",l)},shrinkWithScroll:function(t,e){t=t||1.5;var i=null,n=this,o=n.getHeight(this.selector);n.onResizeCallbacks.push(function(){o=n.getHeight(n.selector)}),e&&(this.catchElementData(e),i=this.getElement(e)),this.onWindowScroll(function(){var e,s,a=n.getElement(n.selector),r=n.getElementScroll(n.selector);e=o-r/t,r<o&&(a.height(e),null!==i&&(s=r/n.getHeight(n.selector),i.css("opacity",s)))})},getElementScroll:function(t){var e=this.getScrollPosition(),i=this.getTop(t);return e<i?0:e-i},initCache:function(){this.cachedData={elements:{},top:{},bottom:{}}},clearCache:function(){this.initCache()},getElement:function(i){return t.has(this.cachedData.elements,i)||(this.cachedData.elements[i]=e(i)),this.cachedData.elements[i]},getWrapper:function(t){return this.getElement(t+"-wrapper")},getHeight:function(t){return this.getElement(t).outerHeight(!0)},getHeightFixed:t.memoize(function(t){return this.getHeight(t)}),getTop:function(t){var e=this.getElement(t).offset();return e?e.top:0},getBottom:function(e){return t.has(this.cachedData.bottom,e)||(this.cachedData.bottom[e]=this.getTop(e)+this.getHeight(e)),this.cachedData.bottom[e]},getCssValue:function(t,e){return parseFloat(this.getElement(t).css(e))},getPassedthrough:function(t,e){e=e||this.getHeight(t);var i=this.getScrollPosition(),n=this.getTop(t);return i>=n+e?100:i<=n?0:100*(i-n)/e},getScrollPosition:function(){return e(window).scrollTop()},onWindowScroll:function(t){this.onScrollCallbacks.push(t)},isAvailable:function(){return!!this.activateOnMobile||!this.isMobile()},isMobile:function(){return!(4===i.getGroup()&&!i.isFixedWidthLayout())},onStickySideScroll:function(t,i,n,o){o=o||0;var s="UP",a=this.getElement(t),r=o-this.stickOffset,l=o;if("before"===n?(r+=this.getTop(i),l+=this.getHeight(i)+this.getCssValue(i,"bottom")):r+=this.getBottom(i),this.getScrollPosition()+a.outerHeight(!0)>=r&&(s="DOWN"),a.hasClass(this.stuckedClass)&&"DOWN"===s){a.toggleClass(this.stuckedClass,!1).css({top:"",bottom:l,position:"absolute"});e(i).hasClass("find-me")||(this.dock(),this.unregisterWindowScroll())}else this.elementDirection[i]&&this.elementDirection[i]!==s&&a.toggleClass(this.stuckedClass,!0).css({top:this.stickOffset,bottom:"",position:""});this.elementDirection[i]=s},reset:function(){var e=this;t.each(this.orginalElementData,function(t,i){i.includes(".bottom-sticked-side-wrapper")||e.getElement(i).attr("class",t.class).attr("style",t.style)})},runActivateActions:function(){t.each(this.onActivateActions,function(t){t()})},onActivate:function(t){this.onActivateActions.push(t)},isActive:function(){return this.active},setActive:function(t){this.active=t,this.isActive()?this.runActivateActions():this.reset()},isDocked:function(){return this.docked},dock:function(){this.docked=!0},undock:function(){this.docked=!1},start:function(){this.active=!0},stop:function(){this.active=!1},catchElementData:function(t){var e=this.getElement(t);this.orginalElementData[t]={class:e.attr("class")?e.attr("class"):"",style:e.attr("style")?e.attr("style"):""}},slideUpDownWith:function(t,e){e=e||1;var i=this,n=this.selector;return this.onWindowScroll(function(){var o=i.getPassedthrough(t),s=Math.floor(i.getHeight(n)*o/-100*e);i.getElement(n).css("top",s)}),this},showOnSlideUp:function(t){var e=this,i=this.selector,n=this.getWrapper(this.selector).height(),o=e.getScrollPosition();return t=t||n,this.onWindowScroll(function(){if(e.getElement(i).hasClass(e.stuckedClass)){var s=e.getScrollPosition();s+10*t<o?(e.getElement(i).css("top",0),o=s):s>o&&(e.getElement(i).css("top",-2*n),o=s)}}),this},onPassedThrought:function(t,e){var i=this.selector,n=this;return this.onWindowScroll(function(){if(n.isActive()){var o="top"===t?n.getPassedthrough(i):n.getOutsideViewPoint(i);e(o)}}),this},stopBefore:function(t,e){var i=this,n=this.selector;return this.catchElementData(t),this.onActivate(function(){i.getElement(t).addClass("absolute-bottom")}),this.onWindowScroll(function(){i.onStickySideScroll(n,t,"before",e)}),this},stopAtBottomOf:function(t,e){var i=this,n=this.selector;return this.catchElementData(t),this.onWindowScroll(function(){i.onStickySideScroll(n,t,"bottom",e)}),this},stick:function(t){t=t||0,this.stickOffset=t;var e=this,i=this.selector;return this.catchElementData(i+"-wrapper"),this.onWindowScroll(function(){e.onScroll(i,t,function(i,n){e.toggleStuck(i,n,t)})}),this},matchHeightWith:function(t){this.catchElementData(t);var e=this.selector;this.isAvailable()&&this.getElement(e).height(this.getHeight(t))}}),s}),define("layouts/super-section-story",["lodash","jquery","orb/api","module/video/StandAloneVideoPlayer","module/customEmbed","module/responsiveShareTools","module/ibroadcast-image-gallery/main","model/mediaQuery","model/pageData","model/digitalData","common/config","model/exposed-data","templates","common/model/story/story","common/entity/habitat/story/article","common/entity/habitat/destination/promo","module/component-loader","module/MVVM-component","component/related-stories","component/more-amazing-stories","module/gallery","component/share-tools","model/analytics","util/content-loader-event-handler","layouts/page","module/bbcdotcomMediator","component/responsive-images-renderer","component/story-way-points"],function(t,e,i,n,o,s,a,r,l,c,d,u,p,h,m,g,f,b,y,v,w,S,x,I,C,T,_,k){var E=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";this.setStoryBlock(t),this.setStoryData(e),this.setVariation(i),this.setHideStory(n),this.setHideStoryID(o),this.setupContentSelectors(),this.stickySideSelector=this.getStoryBlock()+".sticky-side",this.inlineVideoSelector=this.getStoryBlock()+".inline-video .video-player",this.inlineMagnifySelector=this.getStoryBlock()+".inline-magnify",this.inlineHorizontalPartnerVideoSelector=this.getStoryBlock()+".horizontal-partner-module__body .body__video #partner-video",this.customEmbedSelector=this.getStoryBlock()+"#custom-embed-content",this.bodyContentSelector=this.getStoryBlock()+".body-content",this.shareToolsSelectors=[this.getStoryBlock()+"#share-tools-top"],this.hideStorySelectors=this.getStoryBlock()+".show-story",this.shareToolsItemListSelector=this.getStoryBlock()+".share",this.shareToolsItemSelector=this.getStoryBlock()+".share-item .share-button",this.shareToolsBottomSelector=this.getStoryBlock()+"#share-tools-bottom",this.relatedStoriesSecondarySelector=this.getStoryBlock()+"#related-stories-secondary",this.relatedStoriesPrimarySelector=this.getStoryBlock()+"#related-stories-primary",this.moreAmazingStoriesSecondarySelector=this.getStoryBlock()+"#related-stories-secondary",this.moreAmazingStoriesPrimarySelector=this.getStoryBlock()+"#more-amazing-stories-primary",this.inlineIBroadcastImageGallerySelector=this.getStoryBlock()+".inline-gallery .ib-gallery",this.hideSecondaryStories=this.getStoryBlock()+"#primary-content .body-content",this.variationSelectors={variation1:"t003-var-1",variation2:"t003-var-2",variation3:"t003-var-3",variation4:"t004-var-1",variation5:"t004-var-2",variation6:"t004-var-3"}};return t.extend(E.prototype,{setupContentSelectors:function(){this.storyContentSelector=this.getStoryBlock()+"#story-content",this.storyContentElement=e(this.storyContentSelector),this.primaryContentSelector=this.getStoryBlock()+"#story-content .primary-content",this.secondaryContentSelector=this.getStoryBlock()+"#story-content .secondary-content"},init:function(){this.initStoryData(),this.model=new l,this.model.init({url:c.page.pageInfo.destinationURL}),this.setShortStory(),this.setSecondaryContent(),this.setupPageComponents(),this.model.load(),this.setupMedia(),this.addEventListeners()},initStoryData:function(){void 0!==this.getStoryData()&&!1!==this.getStoryData()?(this.storyModel=new h(t.extend({id:!1},d.get())),this.storyModel.populate(this.getStoryData()),this.storyEntity=new m(this.storyModel.getData()),this.storyDataInitialised=!0):this.storyDataInitialised=!1},setStoryBlock:function(t){this.storyBlock=t},setVariation:function(t){this.variation=t},setHideStory:function(t){this.hideStory=t},setHideStoryID:function(t){this.hideStoryID=t},getStoryBlock:function(t){return this.storyBlock+" "},setStoryData:function(e){void 0!==e?this.storyData=e:t.has(u,"story")&&(this.storyData=u.storyData)},getStoryData:function(){return this.storyData},getStoryModel:function(){return this.storyModel},getStoryEntity:function(){return this.storyEntity},addEventListeners:function(){i.layout(this.layout.bind(this)),this.getVideoPlayer()&&this.getVideoPlayer().subscribe("error",this.videoPlayerError.bind(this))},layout:function(){this.isInlineGalleryDisplayed&&a.triggerUpdate()},setupMedia:function(){this.setupInlineVideo(),this.setupCustomEmbed(),this.setupRenderImages()},rgb2hex:t.memoize(function(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}),themePlayer:function(t){if(this.isSuperSectionStory()){var i=e(".super-section-theme .primary-content-top .introduction-wrapper");if(i.length>0){var n=i.css("background-color");n&&e(t).attr("data-brand-color",this.rgb2hex(n))}}},setupInlineVideo:function(){var t=this;e(this.inlineVideoSelector).each(function(i,o){t.themePlayer("#"+e(o).attr("id")),new n("#"+e(o).attr("id")).init()}),e(this.inlineMagnifySelector).each(function(t,i){new o("#"+e(i).attr("id")).init()}),e(this.inlineHorizontalPartnerVideoSelector).each(function(i,o){t.themePlayer("#"+e(o).attr("id")),new n("#"+e(o).attr("id")).init()})},setupRenderImages:function(){new _(this.getStoryBlock()).init()},getVideoPlayer:function(){return this.videoPlayer},setVideoPlayer:function(t){this.videoPlayer=t},setupCustomEmbed:function(){e(this.customEmbedSelector).length>0&&new o(this.customEmbedSelector)},setupPageComponents:function(){var t=this;setTimeout(function(){switch(variationState={moreAmazingStoriesLoaded:!0,shareToolsMini:!1,readMoreStories:!1,relatedStoriesSticky:!1},t.shareToolsMini=!1,t.variation){case t.variationSelectors.variation6:variationState.moreAmazingStoriesLoaded=!1,variationState.shareToolsMini=!0,t.shareToolsMini=!0,variationState.readMoreStories=!0;break;case t.variationSelectors.variation5:variationState.moreAmazingStoriesLoaded=!1,variationState.readMoreStories=!0;break;case t.variationSelectors.variation4:variationState.moreAmazingStoriesLoaded=!1;break;case t.variationSelectors.variation3:variationState.shareToolsMini=!0;case t.variationSelectors.variation2:variationState.relatedStoriesSticky=!0;case t.variationSelectors.variation1:variationState.moreAmazingStoriesLoaded=!1}t.hideStory||(t.setupIBroadcastGalleries(),t.setupFullscreenGallery(),t.addBottomShareTools(variationState.shareToolsMini).then(t.setupShareTools.bind(t))),t.setupRelatedStoriesSecondary(),variationState.moreAmazingStoriesLoaded&&t.setupMoreAmazingStoriesPrimary(),variationState.relatedStoriesSticky&&t.makeRelatedStoriesSticky(),variationState.readMoreStories&&t.setupReadMoreStoriesPrimary()},1e3)},makeRelatedStoriesSticky:function(){e(this.moreAmazingStoriesSecondarySelector).appendTo(this.stickySideSelector)},isSuperSectionStory:function(){return e(this.getStoryBlock()+".article-page-super-section-container").length>0},setupShareTools:function(){this.responsiveShareTools=new s(this.shareToolsSelectors,this.shareToolsItemListSelector,this.shareToolsItemSelector)},setupRelatedStories:function(i,n){if(t.has(d.get(),"moduleId")&&e(n).length>0&&!0===this.storyDataInitialised)try{var o=new y({title:"Related Stories",id:"related-stories",class:i,analyticConfig:{module:"related-stories"},promoUnit:{class:"secondary-branded"}},this.getStoryEntity());new f(e(n),o).load()}catch(t){console.log(t.message)}},setupRelatedStoriesSecondary:function(){this.setupRelatedStories("related-stories",this.relatedStoriesSecondarySelector)},setupMoreAmazingStories:function(i,n){if(t.has(d.get(),"moduleId")&&e(n).length>0)try{var o=d.get(),s="More amazing "+o.module.name+" stories",a=new v({title:s,id:"more-amazing-stories",class:i,promoUnit:{class:"secondary-unbranded"},moduleId:o.moduleId,analyticsConfig:{module:"more-amazing-stories"}});new f(e(n),a).load()}catch(t){console.log(t.message)}},setupMoreAmazingStoriesPrimary:function(){this.setupMoreAmazingStories("more-amazing-stories",this.moreAmazingStoriesPrimarySelector)},setupReadMoreStories:function(t,i){if(!0===this.storyDataInitialised&&!0===this.hideStory){var n=this.getStoryBlock(),o=this.hideSecondaryStories,s=n+".bottom-sticked-side",a=n+".secondary-content",r=n+"#primary-content",l=n+".bottom-sticked-side-wrapper",c=this;e(l).addClass("find-me"),e(s).addClass("hide-me"),e(s).css({height:"0 !important"}),e(o).addClass("hide-story"),e(a).addClass("hide-story"),window.matchMedia("(max-width: 1007px)").matches&&e(a).addClass("hide-me");var d=e("#"+this.hideStoryID)[0];d.addEventListener("click",function(){e(d).remove(),e(o).removeClass("hide-story"),e(a).removeClass("hide-story hide-me"),e(s).removeClass("hide-me"),window.matchMedia("(min-width: 1008px)").matches&&e(a).height(e(r).height()+100),c.setupIBroadcastGalleries(),c.setupFullscreenGallery(),c.addBottomShareTools(c.shareToolsMini).then(c.setupShareTools.bind(c)),e(l).removeClass("find-me")})}},setupReadMoreStoriesPrimary:function(){this.setupReadMoreStories("primary-content",this.hideSecondaryStories)},raiseContentLoaded:function(t,e){I.trigger(I.ACTION_LAZY_LOADED_CONTENTS,t,e)},setupIBroadcastGalleries:function(){var t=this;e(this.inlineIBroadcastImageGallerySelector).each(function(i,n){var o=function(){var i=e(n),o=i.closest(".inline-media.inline-gallery");o.length>0&&o.height(i.height()),t.raiseContentLoaded(I.TYPE_INLINE_GALLERY)};a.add(n,{minItems:4,onLoadCallback:o,onUpdateCallback:o}),t.isInlineGalleryDisplayed=!0})},setupFullscreenGallery:function(){if(!r.isMobileDevice()){var t=[];e(this.inlineIBroadcastImageGallerySelector+" img").each(function(e,i){t.push({image:i,isClickable:!1})}),e(this.bodyContentSelector).find("img.responsive").each(function(e,i){t.push({image:i,isClickable:!0})}),this.fullscreenGallery=new w(t)}},addBottomShareTools:function(t){if(!0===this.storyDataInitialised){var i=new S(this.getStoryModel(),this.getStoryEntity(),t);return i=new f(e(this.shareToolsBottomSelector),i).load(),this.shareToolsSelectors.push(this.shareToolsBottomSelector),i}},isShortStory:function(){return this._isShortStory},setShortStory:function(){e(this.primaryContentSelector).height()>e(this.secondaryContentSelector).height()?this._isShortStory=!1:this._isShortStory=!0},setSecondaryContent:function(){e(this.secondaryContentSelector).height()>16?this._hasSecondaryContent=!0:this._hasSecondaryContent=!1}}),E}),define("component/story-way-points-collection",["lodash","jquery"],function(t,e){function i(t){this.storyWayPoints=[],this.html="",this.id=t}return t.each(["init","reset","runActivateActions","clearCache"],function(t){i.prototype[t]=function(){return this.callStoryWayPointsMethod(t,arguments),this}}),t.extend(i.prototype,{callStoryWayPointsMethod:function(e,i){t.each(this.getStoryWayPoints(),function(t){t[e].apply(t,i)})},stop:function(){this.callStoryWayPointsMethod("stop",arguments)},start:function(){this.callStoryWayPointsMethod("start",arguments)},add:function(t){return this.storyWayPoints.push(t)},getStoryWayPoints:function(){return this.storyWayPoints}}),i}),define("component/story-detail-way-points-collection",["lodash","jquery","common/util/extends","component/story-way-points","component/story-way-points-collection","util/content-loader-event-handler","model/geolocation"],function(t,e,i,n,o,s,a){function r(){o.apply(this,arguments),this.setup(),this.init(),r.instances[this.id]=this}return t.extend(r,{instances:{},getBlockInstance:function(e){return!!t.has(r.instances,e)&&r.instances[e]},getAllInstances:function(){return r.instances}}),i(r,o,{setup:function(){this.initHeroBanner(),this.shouldShowAds()&&this.initStickyAds()},initStickyAds:function(){var t=this.id,i=!1,o=new n(t+" .sticky-side"),a=new n(t+" .top-leaderboard"),r=new n(t+" .secondary-content"),l=o.getHeight()+e(t+" .bottom-sticked-side-wrapper").height()+100,c=o.getHeight(".topbar")+16;a.stick().slideUpDownWith(t+" .hero-unit",1),r.matchHeightWith(t+" .primary-content"),this.add(a),this.add(r),e(t+" .primary-content").height()>l&&(o.stick(c).stopBefore(t+" .bottom-sticked-side-wrapper"),this.add(o),i=!0);var d=function(n,s,a){r.matchHeightWith(t+" .primary-content"),!i&&e(t+" .primary-content").height()>l&&(o.stick(c).stopBefore(t+".bottom-sticked-side-wrapper"),o.runActivateActions(),i=!0)};r.onActivate(d),s.on(s.ACTION_LAZY_LOADED_CONTENTS,d)},initHeroBanner:function(){var t=this.id,e=new n(t+" .hero-unit",!0);e.shrinkWithScroll(2,t+" .hero-unit-image-overlay-3"),this.add(e)},shouldShowAds:function(){return!this.isAdvertisingDisabled()},isAdvertisingDisabled:function(){return void 0!==window.advertising&&void 0!==window.advertising.adsDisabled&&!0===window.advertising.adsDisabled}}),r}),define("common/model/story/story-by-id",["lodash","common/util/extends","common/model/story/story"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{URLScheme:"/{id}"}),n}),define("common/view/entity/column",["lodash","common/util/extends","common/view/entity/habitat"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{parseHabitatData:function(){this.set("leadImage",this.getArrayNestedAsset("assetImage"))}}),n}),define("common/view/model/heading",["lodash","common/util/extends","common/view/model/base"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{setViewData:function(){var e=this.getEntity(),i=t.clone(e);i.heading=e.get("title",i.heading),this.viewData=i}}),n}),define("common/view/model/hero-unit/base",["lodash","common/util/extends","common/view/model/base","common/view/model/heading","common/view/model/image"],function(t,e,i,n,o){function s(t){i.call(this,t)}return e(s,i,{setViewData:function(){var e=this.getEntity(),i=t.clone(e),s=e.get("image"),a={format:{x:624,y:351}},r=this.config.get("showIntro",!1);if(e.get("heading")){var l={heading:e.get("heading",""),context:e.get("context",!1),intro:!1};!0===r&&(l.intro=e.get("intro","")),i.heading=new n(this.config).setSourceData(l)}a&&s&&(i.image=new o(a).setSourceData(t.extend({class:"responsive-hero","fixed-width-format":"wwfeatures-1280-640"},s))),i.class=e.get("class","")+" "+this.config.get("class",""),i.isVideo=function(){return"video"===e.get("class")},this.viewData=i}}),s}),define("common/view/model/context/story",["lodash","common/util/extends","common/view/model/base","common/view/entity/story","common/view/entity/collection","common/view/entity/destination","common/view/entity/tag","common/view/entity-URL-router","common/helper/domain-brand-mapper","common/util/string-extension","common/util/logger"],function(t,e,i,n,o,s,a,r,l,c,d){function u(t){i.call(this,t)}return e(u,i,{setEntity:function(t){this.entity=new n(t)},setViewData:function(){var e,i;switch(this.config.get("contextType",!1)){case"destination":e=this.createDestinationContext();break;case"collection":i=this.createCollectionContext();break;case"domain":i=this.createDomainContext();break;case"tags":i=this.createTagContext();break;case"destination-and-tag":e=this.createDestinationAndTagContext();break;case"any":i=this.getAnyContext();break;default:e=[]}t.isUndefined(i)||!1===i||(e=[i]),e&&(this.viewData={contextItems:e})},getAnyContext:function(){var t;return(t=this.createCollectionContext())?t:(t=this.createTagContext())||void 0},createDestinationAndTagContext:function(){var t=this.createDestinationContext(),e=this.createTagContext(),i=[];if(!1!==t){var n=function(){return!0},o={isItemCollection:n,class:"destination",subItems:t};i.push(o)}return!1!==e&&i.push(e),i},createDestinationContext:function(){var t=this.getEntity(),e=this.config,i=t.get("location",!1),n=!1;if(null!==i&&!1!==i&&i.length>0){var o=i[0],s=e.get("maxDepth",4);n=this.getDestinationContextItems(o,s)}return n},getDestinationContextItems:function(t,e){var i=[];return this.getDestinationContextItem(i,t,1,e),i},getDestinationContextItem:function(t,e,i,n){var o=new s(e),a=o.get("parent",!1);null!==a&&!1!==a&&a.length>0&&a[0]instanceof Object&&i<n&&this.getDestinationContextItem(t,a[0],i+1,n),t.push(this.createContextItem(o.get("name",""),r.getURL(o.get("id","")),""))},createTagContext:function(){var e,i,n,o=this.getEntity(),s=o.get("tags",!1);return!(!t.isArray(s)||!t.isObject(t.first(s)))&&(n=new a(s[0]),e=n.get("name",""),i=r.getURL(n.get("id","")),this.createContextItem(e,i,""))},createCollectionContext:function(){var e,i,n,s=this.getEntity(),a=s.get("collection");if(t.isObject(a))return e=new o(a),i=e.get("name",""),n=r.getURL(e.get("id","")),this.createContextItem(i,n,"")},createDomainContext:function(){var t=this.getEntity(),e=r.getURL(t.get("id","")),i=l.getBrand(e);if(!1===i)return!1;var n="BBC "+i.ucfirst(),o="/"+i,s="brand-"+i+" context-heading";return this.createContextItem(n,o,s)},createContextItem:function(t,e,i){return{context:t,"context-url":e,"context-class":i}}}),u}),define("common/view/model/hero-unit/link/base",["lodash","common/util/extends","common/view/model/base"],function(t,e,i){function n(t){i.call(this,t)}return e(n,i,{setViewData:function(){var e=this.getEntity(),i=t.clone(e);this.viewData=i}}),n}),define("common/view/model/hero-unit/link/destination",["lodash","common/util/extends","common/view/entity/destination","common/view/model/base","common/view/model/hero-unit/link/base","common/view/entity-URL-router"],function(t,e,i,n,o,s){function a(t){n.call(this,t)}return e(a,n,{setEntity:function(t){this.entity=new i(t)},setViewData:function(){for(var t=this.getEntity(),e=this.config,i=t.getDestinationRelationshipArray(e.get("maxDepth",2)),n={url:s.getURL(t.get("id","")),name:""},a=i.length-1;a>-1;a--){var r=i[a];n.name+=r.get("name",""),0!==a&&(n.name+=", ")}return""!==n.name&&(this.viewData=new o(this.config).setSourceData(n)),!1}}),a}),define("common/view/model/hero-unit/story",["lodash","common/util/extends","common/view/entity/story","common/view/model/base","common/view/model/hero-unit/base","common/view/model/context/story","common/view/model/hero-unit/link/destination","common/view/entity-URL-router"],function(t,e,i,n,o,s,a,r){function l(t){n.call(this,t)}return e(l,n,{setEntity:function(t){this.entity=new i(t)},setViewData:function(){this.viewData=this.getHeroUnit()},getHeroUnit:function(){var t=this.getEntity();return new o(this.config).setSourceData(this.getHeroUnitData(t))},getHeroUnitData:function(e){var i={heading:e.get("headlineLong"),image:e.get("leadImage"),"icon-type":e.get("iconType"),context:new s(this.config).setSourceData(this.getRawData())};if(this.config.get("use-image-override")&&(i.image=e.get("indexImageOverride")),this.config.get("is-anchor")&&(i.url=r.getURL(e.get("id"))),this.config.get("lead-element-possible",!1)&&("video"===e.get("type")||"image"===e.get("type")&&!1!==e.get("mainIBroadcastImageGallery",!1))&&t.extend(i,{class:"video"}),!0===this.config.get("include-location")){var n=e.get("location");null!==n&&!1!==n&&n.length>0&&t.extend(i,{"hero-unit-location":new a(this.config).setSourceData(n[0])})}return i}}),l}),define("common/view/model/source-attribution",["lodash","common/util/extends","common/view/model/base","common/view/entity/author"],function(t,e,i,n){function o(t){i.call(this,t)}return e(o,i,{setEntity:function(t){this.entity=new n(t)},setViewData:function(){var e=this.getEntity(),i=t.clone(e);i.name=e.get("name",""),this.viewData=i}}),o}),define("common/view/model/share-tools/base",["lodash","common/util/extends","common/view/model/base","common/config"],function(t,e,i,n){function o(t){i.call(this,t)}return e(o,i,{setViewData:function(){var e=this.getEntity(),i=t.clone(e),n=e.get("title",""),o=e.get("url","");if(""===n||""===o)return void(this.viewData={});i.title=e.get("heading","");var s=encodeURIComponent(n),a=this.getTwitterUserName();i.shareItems=[{text:"facebook",
url:"https://www.facebook.com/sharer/sharer.php?u="+o+"&t="+s,"icon-class":"gelicon--facebook",class:"facebook"},{text:"Twitter",url:"https://twitter.com/intent/tweet?text="+s+"&amp;url="+e.get("url","")+(!1!==a?"&via="+a:""),"icon-class":"gelicon--twitter",class:"twitter"},{text:"Google +",url:"https://plus.google.com/share?url="+o,"icon-class":"gelicon--google-plus",class:"google"},{text:"Email",url:"mailto:?subject=Shared from BBC:"+s+"&body="+o,"icon-class":"gelicon--mail",class:"email"}],this.viewData=i},getTwitterUserName:function(){var e=n.get();return!!t.has(e,"socialLinks.twitter.username")&&e.socialLinks.twitter.username}}),o}),define("common/view/model/share-tools/story",["lodash","common/util/extends","common/view/model/base","common/view/entity/story","common/view/model/share-tools/base","common/view/entity-URL-router"],function(t,e,i,n,o,s){function a(t){i.call(this,t)}return e(a,i,{setEntity:function(t){this.entity=new n(t)},setViewData:function(){var t=this.getEntity(),e=(new o).setSourceData({title:t.get("headlineShort"),heading:this.config.get("heading"),url:s.getFullURL(t.get("id"))});this.viewData=e}}),a}),define("common/view/model/promo-group/base",["lodash","common/util/extends","common/view/model/base","common/view/model/meta-data/advertising"],function(t,e,i,n){function o(t){i.call(this,t)}return e(o,i,{setViewData:function(){var t=this.getEntity(),e={id:this.config.get("id",""),class:this.config.get("class",""),title:t.get("title",""),"promo-group":{class:this.config.get("class",""),items:t.get("items",[])}};e["promo-group"].items=this.insertAdSlotsIntoList(this.config.get("adSlots",[]),e["promo-group"].items),this.viewData=e},insertAdSlotsIntoList:function(e,i){var n=t.cloneDeep(i);return t.each(e,function(t,e){n.splice(t.index,0,this.getAdSlot(t.slotId,t))},this),n},getAdSlot:function(t,e){return{"ad-slot":(new n).getAdSlot(t,e)}}}),o}),define("common/view/model/link-box/base",["lodash","common/util/extends","common/view/model/base","common/view/entity/base"],function(t,e,i,n){function o(t){i.call(this,t)}return e(o,i,{setViewData:function(){var e=this.getEntity(),i=t.clone(e);this.viewData=i}}),o}),define("common/view/model/link-box/tag",["lodash","common/util/extends","common/view/model/base","common/view/entity/tag","common/view/entity-URL-router","common/view/model/link-box/base"],function(t,e,i,n,o,s){function a(t){i.call(this,t)}return e(a,i,{setEntity:function(t){this.entity=new n(t)},setViewData:function(){var t=this.getEntity(),e=this.config,i={class:e.get("class",""),title:t.get("name",""),icon:e.get("icon",""),url:o.getURL(t.get("id",""))};this.viewData=new s(e).setSourceData(i)}}),a}),define("common/view/model/link-box/destination",["lodash","common/util/extends","common/view/model/base","common/view/entity/destination","common/view/entity-URL-router","common/view/model/link-box/base"],function(t,e,i,n,o,s){function a(t){i.call(this,t)}return e(a,i,{setEntity:function(t){this.entity=new n(t)},setViewData:function(){var t=this.getEntity(),e=this.config,i={class:e.get("class",""),title:t.get("name",""),icon:e.get("icon",""),url:o.getURL(t.get("id",""))};this.viewData=new s(e).setSourceData(i)}}),a}),define("common/view/model/promo-unit/base",["lodash","common/util/extends","common/view/model/base","common/view/model/image","common/view/model/link-box/tag","common/view/model/link-box/destination"],function(t,e,i,n,o,s){function a(t){i.call(this,t)}return e(a,i,{setViewData:function(){var e=this.getEntity(),i=t.clone(e),o=e.get("image"),s={class:"responsive",format:{x:"224",y:"126"}},a=this.config.get("image",{}),r=t.merge(s,a),l=e.get("tags"),c=e.get("destinations");i["icon-type"]=e.get("iconType"),r&&o&&(o=t.extend({iconType:e.get("iconType",""),replaceUrl:i.url,class:r.class},o),i.image=new n(t.extend({includeCaption:!1},r)).setSourceData(o));var d=[];!1!==c&&(d=d.concat(this.getDestinationLinkBoxes(c.slice(0,1)))),!1!==l&&(d=d.concat(this.getTagLinkBoxes(l))),i.tags={items:d},i.class=this.config.get("class",""),i.useAlternativeLayout=function(){return"alternative"===i.class.substring(0,11)},this.viewData=i},getDestinationLinkBoxes:function(e){var i=[];return t.each(e,function(t){i.push(new s(this.config.get("linkBox",{})).setSourceData(t))},this),i},getTagLinkBoxes:function(e){var i=[];return t.each(e,function(t){i.push(new o(this.config.get("linkBox",{})).setSourceData(t))},this),i}}),a}),define("common/view/model/promo-group/builder",["lodash","common/util/extends","common/view/model/base","common/view/model/promo-group/base","common/view/model/promo-unit/base"],function(t,e,i,n,o){function s(t){i.call(this,t)}return e(s,i,{setViewData:function(){var t=(this.getEntity(),{});t=this.getPromoGroup(),this.viewData=t},getPromoGroup:function(){return new n(this.config.get("promoGroup",this.config)).setSourceData({title:this.getTitle(),items:this.getPromoUnits(this.getDataItems())})},getTitle:function(){var t=this.getEntity(),e=this.config,i=t.get("title",""),n=e.get("titleOverride",!1);return!1!==n?n.replace("{title}",i):i},getDataItems:function(t){return this.getEntity().get("items",[])},getPromoUnits:function(e){var i=[],n=this.config.get("groupEnd",e.length);return t.each(e,function(t,e){var o=this.getPromoUnit(t);if(!1!==o&&i.push(o),i.length>=n)return!1},this),i},getPromoUnit:function(t){return new o(this.config.get("promoUnit",{})).setSourceData(t)}}),s}),define("common/view/model/promo-unit/story",["lodash","common/util/extends","common/view/model/base","common/view/entity/story","common/view/entity-URL-router","common/view/model/promo-unit/base","common/view/model/context/story","common/util/logger"],function(t,e,i,n,o,s,a,r){function l(t){i.call(this,t)}return e(l,i,{setEntity:function(t){this.entity=new n(t)},setViewData:function(){var e=this.getEntity(),i=this.config,n=i.get("contextType",!1),a=i.get("useLongHeadline",!0),r={image:e.get("indexImageOverride"),url:o.getURL(e.get("id","")),iconType:e.get("iconType"),tags:e.get("tags",[]),destinations:e.get("location",[]),summary:e.get("summaryLong","")};r.title=!0===a?e.get("headlineLong",""):e.get("headlineShort",""),!1!==n&&t.extend(r,{context:this.getContext(n)}),this.viewData=new s(i).setSourceData(r)},getContext:function(t){return new a(this.config).setSourceData(this.getRawData())}}),l}),define("common/view/entity/external-promotion",["lodash","common/util/extends","common/view/entity/habitat","common/helper/icon-type-helper"],function(t,e,i,n){function o(t){i.call(this,t)}return e(o,i,{parseHabitatData:function(){this.set("leadImage",this.getArrayNestedAsset("assetImage")),this.map("tag","tags"),this.map("linkUrl","url"),this.set("iconType",n.getIconType("external"))}}),o}),define("common/view/model/promo-unit/external-promotion",["lodash","common/util/extends","common/view/model/base","common/view/entity/external-promotion","common/view/entity-URL-router","common/view/model/promo-unit/base"],function(t,e,i,n,o,s){function a(t){i.call(this,t)}return e(a,i,{setEntity:function(t){this.entity=new n(t)},setViewData:function(){var t=this.getEntity(),e=this.config,i=(e.get("contextType",!1),e.get("useLongHeadline",!0)),n={image:t.get("leadImage"),url:t.get("url"),iconType:t.get("iconType"),tags:t.get("tags",[])};n.title=!0===i?t.get("summaryLong",""):t.get("summaryShort",""),this.viewData=new s(e).setSourceData(n)}}),a}),define("common/view/model/promo-group/story",["lodash","common/util/extends","common/view/model/promo-group/builder","common/view/model/promo-unit/story","common/view/model/promo-unit/external-promotion","common/view/entity/habitat"],function(t,e,i,n,o,s){function a(t){i.call(this,t)}return e(a,i,{getPromoUnit:function(t){var e=new s(t),i=!1;if(e.get("id")!==this.config.get("excludedStoryId"))switch(e.get("entityType")){case"external":i=new o(this.config.get("promoUnit",{})).setSourceData(t);break;default:i=new n(this.config.get("promoUnit",{})).setSourceData(t)}return i},getDataItems:function(){return this.getEntity().get("stories",[])}}),a}),define("common/view/model/ibroadcast-gallery",["lodash","common/util/extends","common/view/entity/ibroadcast-gallery","common/view/model/base","common/view/model/image","common/util/logger","common/util/request"],function(t,e,i,n,o,s,a){function r(t){n.call(this,t)}return e(r,n,{setEntity:function(t){this.entity=new i(t)},setViewData:function(){var e=this.getEntity(),i={},n=(e.get("urn",""),e.get("images",[]));i.id=e.get("id"),t.isArray(n)&&(i["gallery-images"]=[],t.each(n,function(t,e){i["gallery-images"][e]=this.createGalleryImage(t)},this)),i["show-ads"]=this.checkAdStatus(),this.viewData=i},createGalleryImage:function(e){var i=this.config.get("image",{captionStyle:"long",format:{portraitPermitted:!0,landscape:{x:"624",y:"351"}}});return i=t.merge({captionStyle:"long",format:{portraitPermitted:!0}},i),new o(i).setSourceData(e)},checkAdStatus:function(){var e=this.config.get("ibroadcast_gallery");return!(!1===e||!t.has(e,"showAds")||!0!==e.showAds||!0===a.get().isUK)}}),r}),define("common/view/model/video/video",["lodash","common/util/extends","common/view/model/base","common/view/entity/video","common/view/model/image"],function(t,e,i,n,o){function s(t){i.call(this,t)}return e(s,i,{setEntity:function(t){this.entity=new n(t)},setViewData:function(){var e=this.getEntity(),i=t.clone(e),n=this.config,s=n.get("image"),a=e.get("image");if(s&&a){var r=new o(s);r.setSourceData(a),i["image-url"]=r.getViewData().url}n.get("id")?i.id=n.get("id"):i.id=e.get("vpid"),i.class=n.get("class",""),i["brand-color"]=n.get("brandColor",""),i.vpid=e.get("vpid",""),this.viewData=i}}),s}),define("common/helper/strip-tags",[],function(){return{stripTags:function(t,e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,n=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return t.replace(n,"").replace(i,function(t,i){return e.indexOf("<"+i.toLowerCase()+">")>-1?t:""})}}}),define("common/helper/article-body-renderer",["lodash","common/view/entity/story","common/view/entity/ibroadcast-gallery","common/view/model/meta-data/story","common/view/model/image","common/view/model/ibroadcast-gallery","common/view/model/video/video","common/view/entity/config","common/helper/strip-tags","templates","common/util/logger"],function(t,e,i,n,o,s,a,r,l,c,d){var u=function(t,e){this.storyEntity=t,this.config=new r(e),this.setupPagingVars()};return t.extend(u.prototype,{setConfig:function(t){this.config=new r(t)},getConfig:function(){return this.config},setStoryEntity:function(t){t instanceof e&&(this.storyEntity=t)},getBody:function(){return this.body},setBody:function(t){this.body=t},render:function(){return this.setBody(this.storyEntity.get("bodyMarkdown","")),this.removeEmptyParagraphTags(),this.replaceInlineElements(),this.config.get("appendGallery",!1)&&this.appendGalleryImagesToStory(),this.dividePage(),this.getBody()},removeEmptyParagraphTags:function(){var t=this.getBody().replace(/<p><\/p>|<p>&nbsp;<\/p>/gi,"");this.setBody(t)},replaceInlineElements:function(){var t=this.getBody(),e=/{"image".*?}}/gi,i=/{"gallery".*?}}/gi,n=/{"video".*?}}/gi,o=/{"youtube".*?}}/gi,s=/{"magnify".*?}}/gi;t=t.replace(e,this.replaceInlineImage.bind(this)),t=t.replace(i,this.replaceInlineGallery.bind(this)),t=t.replace(n,this.replaceInlineVideo.bind(this)),t=t.replace(o,this.replaceInlineYoutube.bind(this)),t=t.replace(s,this.replaceInlineMagnify.bind(this)),this.setBody(t)},replaceInlineImage:function(e){var i,n,s=this.getElementProperties(e,"image");return t.has(s,"pid")?(i=this.storyEntity.getInlineImageData(s.pid),!1!==i?(n=new o(t.merge({format:{portraitPermitted:!0}},this.getConfig().get("image"))).setSourceData(t.extend(i,{iconType:"fullscreen"})),c["inline-image"](n)):""):""},replaceInlineGallery:function(e){var i,o,a,r=this.getElementProperties(e,"gallery");return t.has(r,"pid")?(i=this.storyEntity.getInlineGalleryData(r.pid),!1!==i?(o=new s(t.merge({format:{portraitPermitted:!0}},this.getConfig().get("image"))).setSourceData(i),a=(new n).setSourceData(this.storyEntity),c["inline-ibroadcast-image-gallery"](t.extend(o,{"meta-data":a}))):""):""},appendGalleryImagesToStory:function(){var t,e,n=this.storyEntity.get("mainIBroadcastImageGallery"),o=this.storyEntity.get("assetImage",[]);if(!1!==n&&(t=new i(n),(e=t.get("images"))instanceof Array&&e.length>0))return void this.appendImagesToBody(e);o instanceof Array&&o.length>1&&this.appendImagesToBody(o)},appendImagesToBody:function(e){var i=this.getBody();t.each(e,function(e,n){var s=new o(t.merge({captionStyle:"long",format:{portraitPermitted:!0}},this.getConfig().get("image"))).setSourceData(t.extend(e,{iconType:"fullscreen"}));i+=c["gallery-inline-image"](s)},this),this.setBody(i)},replaceInlineVideo:function(e){var i,n,o,s=this.getElementProperties(e,"video");return t.has(this.config,"module")&&t.has(this.config.module,"brandColor")&&(o=this.config.module.brandColor),t.has(s,"pid")?(i=this.storyEntity.getInlineVideoData(s.pid),!1!==i?(n=new a({class:"inline-video",brandColor:o}).setSourceData(i),c["inline-video"](n)):""):""},replaceInlineYoutube:function(e){var i,n=this.getElementProperties(e,"youtube");return t.has(n,"id")?(i={id:n.id},c["inline-youtube"](i)):""},replaceInlineMagnify:function(e){var i,n=this.getElementProperties(e,"magnify");return t.has(n,"id")?(i={id:n.id},c["inline-magnify"](i)):""},getElementProperties:function(t,e){var i=JSON.parse(t);return i instanceof Object&&this.getElementDataWithType(i,e)},getElementDataWithType:function(e,i){return!!t.has(e,i)&&e[i]},setupPagingVars:function(){this.pages=["",""],this.blockTags=["table","div","blockquote","pre","p","ul","ol","dl","iframe"],this.inlineTags=["br","br /","li","strong","a","em","tr","th","td","dd","dt","img"],this.divideOnBlock=6},setPages:function(t){this.pages=t},getFirstHalf:function(){return this.pages[0]},getSecondHalf:function(){return this.pages[1]},dividePage:function(){var e=this.getBody(),i=l.stripTags(e,"<"+this.blockTags.join("><")+"><"+this.inlineTags.join("><")+">"),n=0,o=0,s=["",""],a=this.parseToBlocks(i),r=a.length,c=0;r>this.divideOnBlock-1&&(r=this.divideOnBlock),t.each(a,function(t,e){var i=this.countBlock(t);s[n]=s[n]+t,o+=i,c===r&&0===n&&(n++,o=0),c++},this),this.setPages(s)},parseToBlocks:function(t){var e=new RegExp("<("+this.blockTags.join("|")+")>","gmi"),i=new RegExp("</("+this.blockTags.join("|")+")>","gmi");return t=t.replace(e,"<BLOCK>$&"),t=t.replace(i,"$&<BLOCK>"),t.split("<BLOCK>")},countBlock:function(t){return t=t.replace("</li>","</li>\n"),t.split(/\s+/).length}}),u}),define("common/view/model/story/image",["lodash","common/util/extends","common/view/model/base","common/view/entity/base","common/view/entity/column","common/view/entity/story","common/view/entity/collection","common/view/model/hero-unit/story","common/view/model/source-attribution","common/view/model/share-tools/story","common/view/model/promo-group/story","common/view/model/image","common/view/model/context/story","common/view/model/heading","common/view/model/ibroadcast-gallery","common/view/entity-URL-router","common/helper/article-body-renderer","common/util/logger"],function(t,e,i,n,o,s,a,r,l,c,d,u,p,h,m,g,f,b){function y(t){i.call(this,t)}return e(y,i,{setEntity:function(t){this.entity=new s(t)},setViewData:function(){this.viewData=this.getDefaultFields()},getDefaultFields:function(){var e=this.getEntity(),i=t.clone(e);return i.body=this.getArticleBody(),i["hero-unit"]=new r({"lead-element-possible":!0,contextType:"destination-and-tag"}).setSourceData(this.getRawData()),i.author=this.getAuthor(),i["publication-date"]=this.getFormattedDate(i.displayDate),i["related-stories"]=this.getRelatedStories(),i.shareTools=(new c).setSourceData(e),"image"===e.get("type")&&!1!==e.get("mainIBroadcastImageGallery")&&(i.heading=this.getHeading(),i.leadGallery=this.getFeaturedImagesGallery()),i},getArticleBody:function(){return new f(this.getEntity(),this.config).render()},getAuthor:function(){var t=this.getEntity(),e=t.get("author");return!!e&&new l(this.config).setSourceData(e)},getFormattedDate:function(t){var e=new Date(t),i=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),n=e.getDate(),o=e.getMonth(),s=e.getFullYear();return n+" "+i[o]+" "+s},getRelatedStories:function(){var t=this.getEntity(),e=t.get("relatedStories");return!!e&&new d(this.config.get("relatedStories",{})).setSourceData({title:"Related Stories",stories:e})},getHeading:function(){var t=this.getEntity();return new h(this.config).setSourceData({heading:t.get("headlineLong"),intro:!1,context:new p({contextType:"destination-and-tag"}).setSourceData(this.getRawData())})},getFeaturedImagesGallery:function(){var t=this.getEntity(),e=t.get("mainIBroadcastImageGallery");return new m(this.config).setSourceData(e)}}),y}),define("common/view/model/story/video",["lodash","common/util/extends","common/view/model/story/image","common/view/model/heading","common/view/entity/story","common/view/model/video/video","common/view/model/context/story"],function(t,e,i,n,o,s,a){function r(t){i.call(this,t)}return e(r,i,{setViewData:function(){var t=this.getDefaultFields();t.leadVideo=this.getLeadVideo(),t.heading=this.getHeading(),t.shareTools=(new n).setSourceData({class:"small",title:"Share this article:",shareItems:t.shareTools.shareItems}),this.viewData=t},getLeadVideo:function(){var e=this.getEntity(),i=this.config,n=i.get("module"),o=!1;return n&&t.has(n,"brandColor")&&(o=n.brandColor),new s(t.extend({id:"video-lead-asset",brandColor:o,image:{format:{landscape:{x:"224",y:"125"}}}},this.config)).setSourceData(t.extend({image:e.get("leadImage")},e.get("leadVideo")))}}),r}),define("common/view/model/story/slideshow",["lodash","common/util/extends","common/view/model/story/image","common/view/model/heading","common/helper/article-body-renderer"],function(t,e,i,n,o){function s(t){i.call(this,t)}return e(s,i,{setViewData:function(){var t=this.getEntity(),e=this.getDefaultFields();e.intro=t.get("summaryLong",""),e.shareTools=(new n).setSourceData({class:"small",title:"Share this article:",shareItems:e.shareTools.shareItems}),this.viewData=e},getArticleBody:function(){return new o(this.getEntity(),t.extend({appendGallery:!0},this.config)).render()}}),s}),define("common/view/model/story/base",["lodash","common/util/extends","common/view/model/base","common/view/model/story/video","common/view/model/story/slideshow","common/view/model/story/image","common/view/entity/story","common/view/model/hero-unit/base"],function(t,e,i,n,o,s,a,r){function l(t){i.call(this,t)}return e(l,i,{setEntity:function(t){this.entity=new a(t)},setViewData:function(){var e,i=this.getEntity(),a=t.clone(i);switch(i.get("type")){case"video":e=new n(this.config);break;case"slideshow":e=new o(this.config);break;default:e=new s(this.config)}a=e.setSourceData(i),this.viewData=a}}),l}),define("common/interface/entity/video/video",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,i){return new e("VideoEntity",i.methods.concat(["getImage","setImage","getId","getVpid","getTitle","setProvider","getProvider","getMediator"]))}),define("common/view/model-v2/video/stand-alone-html-element",["lodash","common/util/extends","common/view/model-v2/base","common/view/model-v2/image/html-element","common/entity/vanilla/image","common/interface/entity/video/video"],function(t,e,i,n,o,s){function a(){i.apply(this,arguments)}return e(a,i,{entityInterface:s,setViewData:function(){this.viewData={id:this.getId(),vpid:this.getEntity().getVpid(),mediator:this.getEntity().getMediator(),"image-url":this.getImageURL(),class:this.getConfig().get("class",""),"brand-color":this.getConfig().get("brandColor",""),"show-ads":this.getConfig().get("showAds",!0)}},getId:function(){var t=this.getEntity().getId();return this.getConfig().get("id")?this.getConfig().get("id"):this.getConfig().get("idPrefix")&&!1!==t?this.getConfig().get("idPrefix")+"-"+t:t},getImageURL:function(){var t=this.getConfig().get("image"),e=this.getConfig().get("placeholderImageOverride"),i=this.getEntity().getImage();if(!1===i&&e&&(i=new o({URL:e})),t&&i){var s=new n(i,t);return s.setSourceData({},!1),s.getViewData().url}return""}}),a});define("common/view/model-v2/list/gallery",["lodash","common/util/extends","common/util/interface","common/view/model-v2/base","common/view/model-v2/image/html-element","common/interface/entity/list/base","common/interface/entity/image","common/util/logger","common/util/request"],function(t,e,i,n,o,s,a,r,l){function c(){n.apply(this,arguments)}return e(c,n,{entityInterface:s,setViewData:function(){this.viewData={id:this.getEntity().getId(),"gallery-images":this.getGalleryImages(),"show-ads":this.checkAdStatus()}},getGalleryImages:function(){var e=[],n={captionStyle:"long",format:{landscape:{x:"624",y:"351"}},isWatermarked:!0},s=this.getConfig().get("image"),r=t.merge(n,s);return t.each(this.getEntity().getListItems(),function(t,n){i.ensureImplements(t,a),t.setIconType("fullscreen"),e.push(new o(t,r).setSourceData({},!1))},this),e},checkAdStatus:function(){var e=this.getConfig().get("ibroadcast_gallery");return r.get().debug("IBroadcastGallery:checkAdStatus:isUK",l.get().isUK),!(!1===e||!t.has(e,"showAds")||!0!==e.showAds||!0===l.get().isUK)}}),c}),define("common/interface/entity/partner-promo",["lodash","common/util/interface","common/interface/entity/link"],function(t,e,i){return new e("PartnerPromoEntity",i.methods.concat(["getPartnerLogo","getDescription"]))}),define("common/view/model-v2/promo/partner-promo",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/view/model-v2/image/html-element","common/interface/entity/partner-promo"],function(t,e,i,n,o,s){function a(){n.apply(this,arguments)}return e(a,n,{entityInterface:s,partnerLogoConfig:{format:{landscape:{x:88,y:31}},imageAnalyticsConfig:{elementId:"partner-logo",elementName:"Partner Logo"}},setViewData:function(){var t=this.getEntity(),e={title:t.getTitle(),description:t.getDescription(),URL:t.getURL(),partnerLogo:this.getImage(t.getPartnerLogo(),this.partnerLogoConfig),image:this.getImage(t.getImage(),{format:{landscape:{x:224,y:126}}})},i=this.getConfig().get("titleOverride",!1);i&&(e.title=i),this.viewData=e},getImage:function(e,i){var n=t.merge(this.getConfig().get("image",{}),i);return e?(e.setReplaceURL(this.getEntity().getURL()),new o(e,n).setSourceData(!1,{})):{}}}),a}),define("common/interface/entity/horizontal/partner-promo",["lodash","common/util/interface","common/interface/entity/partner-promo"],function(t,e,i){return new e("PartnerPromoEntity",i.methods.concat(["getVideo","getType","isEnabled"]))}),define("common/view/model-v2/promo/horizontal-partner-promo",["lodash","common/util/extends","common/util/logger","common/view/model-v2/promo/partner-promo","common/view/model-v2/video/stand-alone-html-element","common/interface/entity/horizontal/partner-promo","common/interface/entity/video/video","common/util/interface","common/view/model-v2/analytics/factory"],function(t,e,i,n,o,s,a,r,l){function c(){n.apply(this,arguments)}return e(c,n,{entityInterface:s,setViewData:function(){var t,e=this.getEntity();switch(this.partnerLogoConfig.format.useOriginal=!0,this.partnerLogoConfig.imageAnalyticsConfig.elementName=e.getTitle(),n.prototype.setViewData.apply(this,arguments),this.viewData.type=e.getType(),this.viewData["analytics-module-metadata"]=l.getModuleMetadata("horizontal-partner-promo"),!1!==e.getURL()&&e.getURL().length>0&&(t="Click here to find out more",this.viewData.moreInfoLink={URL:e.getURL(),text:t,"analytics-element-metadata":l.getElementMetadata("more-info",t)}),e.getType()){case"text":this.viewData.video=!1;break;case"video":this.viewData.video=this.configureVideo();break;default:i.get().warn("HorizontalPartnerPromoViewModel:setViewData:Unrecognised partner promo type",{id:e.getId(),type:e.getType()})}i.get().debug("Partner promo data",this.viewData)},configureVideo:function(){var e=this.getEntity(),i=e.getVideo();if(i)return r.ensureImplements(i,a),new o(i,t.extend({id:"partner-video",image:{format:{landscape:{x:"224",y:"125"}}},showAds:!1},this.getConfig().get("video",{}))).setSourceData({},!1)}}),c}),define("common/view/model-v2/document/article/body",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/view/model-v2/image/html-element","common/view/model-v2/video/stand-alone-html-element","common/view/model-v2/list/gallery","common/view/model-v2/promo/horizontal-partner-promo","common/interface/entity/document/article","common/helper/strip-tags","common/helper/advertising","common/helper/geo-location","templates"],function(t,e,i,n,o,s,a,r,l,c,d,u,p){function h(){n.apply(this,arguments),String.prototype.insertAt=function(t,e){return this.substr(0,t)+e+this.substr(t)}}return e(h,n,{entityInterface:l,setViewData:function(){this.setupPagingVars(),this.setBody(this.getEntity().getBody()),this.removeEmptyParagraphTags(),this.replaceInlineElements(),this.getConfig().get("appendGallery",!1)&&this.appendGalleryImagesToStory(),this.injectHorizontalPartnerModule(),this.injectNewsFeedModule(),this.injectCalloutBox(),this.dividePage(),this.viewData=this.getBody()},injectCalloutBox:function(){var e=this.getEntity().getCalloutBox(),i=this.getEntity().getType();if(!t.isUndefined(e)&&!1!==e&&"slideshow"!==i){for(var n=p["callout-box"](e),o=/<\/p>/gi,s=[];null!==(match=o.exec(this.getBody()));)s[s.length]=match.index+4;var a;switch(e.getPosition()){case"top":a=0;break;case"bottom":a=Math.max(0,s.length-4);break;default:a=Math.floor(s.length/2)}this.setBody(this.getBody().insertAt(s[a],n))}},injectNewsFeedModule:function(){var t,e=this.identifyStoryNewsFeedId(),i=this.getBody();!1!==e&&(t=p["news-feed-module-placeholder"]({"feed-id":e}),this.getConfig().get("appendGallery",!1)?i+=t:i=i.insert(this.getLocationInBodyText(8),t),this.setBody(i))},identifyStoryNewsFeedId:function(){var e,n,o=this.getEntity().getKeywords(),s=this.getConfig().get("news-feeds");if(t.has(o,"tags")&&t.isArray(o.tags)&&!1!==s){e=o.tags;for(var a=0;a<e.length;a++)if(i.get().debug("Tag",e[a]),n=e[a].toLowerCase(),t.contains(s,n))return n}return!1},getImageConfig:function(){var e={format:{portraitPermitted:!0},isWatermarked:!0};return t.merge(e,this.getConfig().get("image",{}))},getBody:function(){return this.body},setBody:function(t){this.body=t},removeEmptyParagraphTags:function(){var t=this.getBody().replace(/<p><\/p>|<p>&nbsp;<\/p>/gi,"");this.setBody(t)},injectHorizontalPartnerModule:function(){var e,i,n,o,s,a=this.getEntity().getHorizontal(),l=this.getConfig(),c=this.getBody(),d={brandColor:"#505050"};this.isHorizontalPartnerModuleRequired(a)&&(t.has(l,"horizontal-partner-module")&&(e=l["horizontal-partner-module"],t.has(e,"video-player-color")&&(d.brandColor=e["video-player-color"])),i=a.getPartner(),n=new r(i,{image:this.getImageConfig(),video:d}).setSourceData({},!1),o=p["inline-horizontal-partner-module"](n),this.getConfig().get("appendGallery",!1)?c+=o:(s=this.getLocationInBodyText(2),c=c.insert(s,o)),this.setBody(c))},getLocationInBodyText:function(t){for(var e,i,n=/<\/p>/gi,o=[];e=n.exec(this.getBody());)o.push(e.index);return i=o.length>=t+1?o[t]:o.length>0?o[o.length-1]:0,i+=4},isHorizontalPartnerModuleRequired:function(t){var e;return!(u.isUK()||!1===t||!t.isEnabled()||!1===(e=t.getPartner())||!e.isEnabled())},replaceInlineElements:function(){var t=this.getBody(),e=/{"image".*?}}/gi,i=/{"video".*?}}/gi,n=/{"gallery".*?}}/gi,o=/{"youtube".*?}}/gi,s=/{"magnify".*?}}/gi,a=this.getImageConfig();t=t.replace(e,this.replaceInlineImage.bind(this,a)),t=t.replace(n,this.replaceInlineGallery.bind(this,a)),t=t.replace(i,this.replaceInlineVideo.bind(this)),t=t.replace(o,this.replaceInlineYoutube.bind(this)),t=t.replace(s,this.replaceInlineMagnify.bind(this)),this.setBody(t)},replaceInlineImage:function(e,n){var s,a,r=this.getElementProperties(n,"image");return t.has(r,"pid")?(s=this.getEntity().getImage(r.pid),!1!==s?(s.setIconType("fullscreen"),a=new o(s,e).setSourceData({},!1),p["inline-image"](a)):""):(i.get().error("ArticleBodyRenderer:replaceInlineImage:Inline image missing expected properties",r),"")},replaceInlineGallery:function(e,n){var o,s,a=this.getElementProperties(n,"gallery");return t.has(a,"pid")?(o=this.getEntity().getGalleryImages(a.pid),!1!==o?(s=this.getGalleryViewData(o),s.adSlot=d.getAdSlot("mpu",{}),p["inline-ibroadcast-image-gallery"](s)):""):(i.get().error("ArticleBodyRenderer:replaceInlineGallery:Inline gallery missing expected properties",a),"")},appendGalleryImagesToStory:function(){var e,i,n=this.getEntity().getGalleryImages();n&&(e=this.getGalleryViewData(n),i=this.getBody(),t.each(e["gallery-images"],function(t){i+=p["gallery-inline-image"](t)},this),this.setBody(i))},getGalleryViewData:function(t){return new a(t,{image:this.getImageConfig()}).setSourceData({},!1)},replaceInlineVideo:function(e){var n,o,a,r=this.getElementProperties(e,"video");if(t.has(this.getConfig(),"module")&&t.has(this.getConfig().module,"brandColor")&&(a=this.getConfig().module.brandColor),t.has(r,"pid")&&t.has(r,"encoding")){if(!1!==(n=this.getEntity().getVideo(r.pid))){switch(r.encoding){case"ib2":n.setProvider("ibroadcast");break;case"mps":n.setProvider("mps")}return o=new s(n,{class:"inline-video",brandColor:a,image:this.getImageConfig()}).setSourceData({},!1),p["inline-video"](o)}return""}return i.get().error("ArticleBodyRenderer:replaceInlineVideo:Inline video missing expected properties",r),""},replaceInlineYoutube:function(e){var n,o=this.getElementProperties(e,"youtube");return t.has(o,"id")?(n={id:o.id},p["inline-youtube"](n)):(i.get().error("ArticleBodyRenderer:replaceInlineYoutube:Inline Youtube missing expected properties",o),"")},replaceInlineMagnify:function(e){var n,o=this.getElementProperties(e,"magnify");return t.has(o,"id")?(n={id:o.id},p["inline-magnify"](n)):(i.get().error("ArticleBodyRenderer:replaceInlineMagnify:Inline magnify missing expected properties",o),"")},getElementProperties:function(t,e){try{var n=JSON.parse(t);if(n instanceof Object)return this.getElementDataWithType(n,e)}catch(e){i.get().error("ArticleBodyRenderer:getElementProperties:Could not parse match "+t+", exception",e.message)}return!1},getElementDataWithType:function(e,i){return!!t.has(e,i)&&e[i]},setupPagingVars:function(){this.pages=["",""],this.blockTags=["table","div","blockquote","pre","p","ul","ol","dl","iframe"],this.inlineTags=["br","br /","li","strong","a","em","tr","th","td","dd","dt","img"],this.divideOnBlock=6},setPages:function(t){this.pages=t},getFirstHalf:function(){return this.pages[0]},getSecondHalf:function(){return this.pages[1]},dividePage:function(){var e=this.getBody(),i=c.stripTags(e,"<"+this.blockTags.join("><")+"><"+this.inlineTags.join("><")+">"),n=0,o=0,s=["",""],a=this.parseToBlocks(i),r=a.length,l=0;r>this.divideOnBlock-1&&(r=this.divideOnBlock),t.each(a,function(t,e){var i=this.countBlock(t);s[n]=s[n]+t,o+=i,l===r&&0===n&&(n++,o=0),l++},this),this.setPages(s)},parseToBlocks:function(t){var e=new RegExp("<("+this.blockTags.join("|")+")>","gmi"),i=new RegExp("</("+this.blockTags.join("|")+")>","gmi");return t=t.replace(e,"<BLOCK>$&"),t=t.replace(i,"$&<BLOCK>"),t.split("<BLOCK>")},countBlock:function(t){return t=t.replace("</li>","</li>\n"),t.split(/\s+/).length}}),h}),define("common/view/model-v2/promo/heading",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/promo","common/view/model-v2/promo/context-heading","common/util/logger"],function(t,e,i,n,o,s){function a(){i.apply(this,arguments)}return e(a,i,{entityInterface:n,setViewData:function(){var t=(this.getEntity(),{heading:this.getEntity().getTitle(),intro:this.getConfig().get("intro"),context:this.getContext()});this.getConfig().get("showIntro")&&(t.intro=this.getEntity().getSummary()),this.viewData=t},getContext:function(){return new o(this.getEntity(),{type:this.getConfig().get("context")}).setSourceData({},!1)}
}),a}),define("common/view/model-v2/promo/hero-unit",["lodash","common/util/extends","common/util/logger","common/interface/entity/promo","common/view/model-v2/base","common/view/model-v2/promo/heading","common/view/model-v2/image/html-element","common/view/model-v2/analytics/interaction-element-meta-data","common/entity/vanilla/analytics/interaction-element-meta-data","common/view/model-v2/analytics/module-meta-data","common/entity/vanilla/analytics/module-meta-data"],function(t,e,i,n,o,s,a,r,l,c,d){function u(){o.apply(this,arguments)}return e(u,o,{entityInterface:n,setViewData:function(){var t=this.getEntity(),e={"icon-type":this.getEntity().getIconType(),class:this.getConfig().get("class",""),image:this.getImage(),heading:this.getHeading(),isVideo:function(){return"video"===this.class}};!0===this.getConfig().get("hide-heading")&&(e.heading=!1),this.getConfig().get("is-anchor")&&(e.url=t.getURL(),e["analytics-module-metadata"]=new c(new d({module:"hero-unit"},this.getConfig().get("analyticsConfig",{}))).setSourceData({},!1),e["analytics-element-metadata"]=this.getLinkAnalytics()),this.viewData=e},getLinkAnalytics:function(){var e=this.getEntity(),i=this.getConfig();return new r(new l(t.merge({elementType:"hero",elementName:e.getTitle()},i.get("analyticsConfig",{}))),i.get("analyticsConfig",{})).setSourceData({},!1)},getImage:function(){if(this.getEntity().getImage()){var t,e=this.getEntity().getImage(),i={format:{x:624,y:351},isWatermarked:!0};return e.setClass("responsive-hero"),t=new a(e,i).setSourceData(t),t["fixed-width-format"]="wwfeatures-1280-640",t}},getHeading:function(){return new s(this.getEntity(),this.getConfig()).setSourceData({},!1)}}),u}),define("common/view/model-v2/promo/promo-module",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/view/model-v2/image/html-element","common/entity/vanilla/link/base","common/view/model-v2/link/link-box","common/view/model-v2/promo/context-heading","common/helper/domain-brand-mapper","common/interface/entity/promo"],function(t,e,i,n,o,s,a,r,l,c){function d(){n.apply(this,arguments)}return e(d,n,{entityInterface:c,setViewData:function(){var t={clientName:this.getEntity().getClientName(),title:this.getEntity().getTitle(),url:this.getEntity().getURL(),summary:this.getEntity().getSummary(),class:this.getConfig().get("class"),CTA:this.getCTA(),image:this.getImage(!1,{class:"responsive landscape",includeCaption:!1})};this.getConfig().get("include-logo")&&(t.logoImage=this.getImage(!0,{"use-image-tag":!0,format:{landscape:{x:88,y:31}}})),this.viewData=t},getCTA:function(){return new a(new s).setSourceData({title:"Click for more",URL:this.getEntity().getURL()})},getImage:function(t,e){var i=this.getEntity().getImage(t);return i.replaceUrl=this.getEntity().getURL(),!!i&&new o(i,e).setSourceData(!1,{})}}),d}),define("common/view/model-v2/document/article/hero-unit",["lodash","common/util/extends","common/util/logger","common/view/model-v2/promo/hero-unit","common/interface/entity/document/article","common/view/model-v2/promo/promo-module"],function(t,e,i,n,o,s){function a(){n.apply(this,arguments)}return e(a,n,{entityInterface:o,setViewData:function(){n.prototype.setViewData.apply(this),this.viewData.test=!0,this.viewData["promo-module"]=this.getPromoModule()},getPromoModule:function(){if(this.getEntity().getPromoModule())return new s(this.getEntity().getPromoModule(),this.getConfig().get("promo-module",{"include-logo":!0})).setSourceData({},!1)}}),a}),define("common/interface/entity/person",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,i){return new e("PersonEntity",i.methods.concat(["getId","getName","getBio","getAvatar"]))}),define("common/view/model-v2/person/source-attribution",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/person","common/view/model-v2/image/html-element"],function(t,e,i,n,o){function s(){i.apply(this,arguments)}return e(s,i,{entityInterface:n,setViewData:function(){var e=!1,i=this.getConfig().get("image");if(t.has(i,"show")&&i.show){var n=this.getEntity().getAvatar();n&&(e=new o(n,i).setSourceData())}this.viewData={title:this.getEntity().getName(),name:this.getEntity().getName(),class:this.getConfig().get("class",""),avatar:e,bio:this.getEntity().getBio()}}}),s}),define("common/interface/entity/banner",["lodash","common/util/interface","common/interface/entity/link"],function(t,e,i){return new e("Link",i.methods.concat(["getBrandId"]))}),define("common/helper/brand-image",["lodash","common/config","common/util/logger"],function(t,e,i){var n=function(){var i=e.get();return!!(t.has(i,"static")&&t.has(i.static,"url")&&t.has(i.static,"brand-img-dir"))&&i.static.url+i.static["brand-img-dir"]},o=function(e,i,n){var o={desktop:"-desktop.jpg",tablet:"-tablet.jpg",mobile:"-mobile.jpg"},s={};return t.each(o,function(o,a){!function(){if(t.isUndefined(n)||"full"===n||!t.has(n,a))s[a]={},s[a]["banner-full"]=e+i+"-full"+o;else{var r,l=1;r=n[a],!t.isUndefined(r)&&t.isNumber(r)&&(l=r),s[a]={},t.times(l,function(t){var n=t+1;s[a]["banner-"+n]=e+i+"-"+n+o})}}()},this),s};return{getResponsiveBannerImagesForBrand:function(t,e){return this.getResponsiveImagesForBrand(t,"banner",e)},getResponsiveImagesForBrand:function(e,i,s){var a,r=n(),l=e.replace(/\//g,".");return!(!1===r||!t.isString(l)||void 0===i)&&(a=r+l+"/",o(a,i,s))}}}),define("common/view/model-v2/link/banner",["lodash","common/util/extends","common/util/interface","common/view/model-v2/base","common/view/model-v2/image/html-element","common/interface/entity/banner","common/util/logger","common/helper/brand-image","common/entity/vanilla/image","common/interface/entity/image"],function(t,e,i,n,o,s,a,r,l,c){function d(){n.apply(this,arguments)}return e(d,n,{entityInterface:s,setViewData:function(){var e,i=this.getImageURLs(),n=this.generateElementId();e={class:this.getConfig().get("class",n),title:this.getEntity().getTitle(),id:n,url:this.getEntity().getURL()},i&&t.has(i,"mobile")&&(e.imageMobile=this.getImages(i.mobile)),i&&t.has(i,"desktop")&&(e.imageDesktop=this.getImages(i.desktop)),i&&t.has(i,"tablet")&&(e.imageTablet=this.getImages(i.tablet)),this.viewData=e},generateElementId:function(){var e,i=this.getEntity().getId();return!t.isUndefined(i)&&!1!==i&&(e=i.split("/"),e.shift(),e.join("-"))},getImages:function(e){var i=this.getEntity();if(t.isObject(e)){var n={};return t.each(e,function(t,e){var o=new l({URL:t,replaceURL:i.getURL(),title:i.getTitle(),synopsisShort:i.getTitle()});n[e]=this.configureImage(o)},this),n}return!1},getImageURLs:function(){var e=this.getConfig(),i=this.getEntity().getBrandId();return!1!==i&&!t.isUndefined(i)&&r.getResponsiveBannerImagesForBrand(i,e.get("imageLengths","full"))},configureImage:function(e){var n={class:"responsive landscape",includeCaption:!1},s=t.merge(n,this.getConfig().get("image",{}));return!!e&&(i.ensureImplements(e,c),e.setReplaceURL(this.getEntity().getURL()),new o(e,s).setSourceData({},!1))}}),d}),define("common/_modules/components/story-series/view-models/series",["lodash","common/util/extends","common/view/model-v2/base"],function(t,e,i){function n(){i.apply(this,arguments)}return e(n,i,{setViewData:function(){var t=this.getEntity();this.viewData={class:this.config.get("class",""),title:this.config.get("title",""),items:t.get("listItems",[])}}}),n}),define("common/_modules/components/story-series/entities/series",["lodash","common/util/extends","common/util/logger","common/entity/habitat/story/promo"],function(t,e,i,n){function o(t){n.call(this,t)}return e(o,n,{init:function(t){n.prototype.init.call(this,t),this.map("name","title")}}),o}),define("common/_modules/components/story-series/entities/series-list",["lodash","common/util/extends","common/entity/list/entity","common/_modules/components/story-series/entities/series"],function(t,e,i,n){function o(e,n){var o={title:"Series"};i.call(this,t.extend(o,e),n)}return e(o,i,{entityFactoryDependencies:[],createEntity:function(t){return new n(t)}}),o}),define("common/view/model-v2/document/article/image",["lodash","common/util/extends","common/view/model-v2/base","common/view/model-v2/document/article/body","common/view/model-v2/document/article/hero-unit","common/view/model-v2/promo/promo-module","common/view/model-v2/person/source-attribution","common/view/model-v2/promo/partner-promo","common/view/model-v2/link/article-share-tools","common/view/model-v2/list/promo-group/base","common/view/model-v2/list/gallery","common/view/model-v2/promo/heading","common/view/model-v2/link/banner","common/entity/vanilla/list","common/helper/date-formatter","common/helper/geo-location","common/interface/entity/document/article","common/_modules/components/story-series/view-models/series","common/_modules/components/story-series/entities/series-list","common/util/logger"],function(t,e,i,n,o,s,a,r,l,c,d,u,p,h,m,g,f,b,y,v){function w(){i.apply(this,arguments)}return e(w,i,{entityInterface:f,setViewData:function(){this.viewData=this.getArticleData()},getArticleData:function(){var e=this.getEntity(),i={type:this.getEntity().getType(),body:this.getArticleBody(),isNative:this.getConfig().get("isNative"),assetCustom:this.getEntity().getCustomEmbed(),intro:this.getIntro(),title:this.getEntity().getTitle(),"promo-module":this.getPromoModule(),author:this.getSourceAttribution(),partner:this.getPartner(),"publication-date":m.getFormattedDate(e.getDisplayDate()),"related-articles":this.getRelatedArticles(),shareTools:this.getShareTools("share--article"),"brand-banner":this.getBrandBanner({})};return!0===this.getConfig().get("includeSeries",!1)&&(i.series=this.getSeries()),this.getEntity().hasLeadAssetModule()?(i.heading=this.getHeading(),i["hero-unit"]=this.getHeroUnit(!0)):i["hero-unit"]=this.getHeroUnit(),t.extend(i,this.getAdditionalData()),i},getIntro:function(){return this.getConfig().get("use-summary-for-intro")?this.getEntity().getSummary():this.getEntity().getIntro()},getBrandBannerEntity:function(){var t=this.getEntity().getHorizontal();return g.isUK()||!1===t||!0!==t.isEnabled()?this.getEntity().getSupersection():t.getBanner()},getBrandBanner:function(t){var e=this.getBrandBannerEntity(),i=this.getConfig().get("brand-banner",t);return!1!==e&&new p(e,i).setSourceData({},!1)},getPromoModule:function(){if(this.getEntity().getPromoModule())return new s(this.getEntity().getPromoModule(),this.getConfig().get("promo-module",{"include-logo":!0})).setSourceData({},!1)},getAdditionalData:function(){var t={};return this.getEntity().hasLeadAssetModule()&&this.getEntity().getGalleryImages()&&(t.leadGallery=this.getGalleryImages()),t},getHeroUnit:function(e){var i="",n=!1;return e&&(i="video",n=!0),new o(this.getEntity(),t.merge({"promo-module":this.getPromoModule(),class:i,"hide-heading":n},this.getConfig().get("heroUnit",{}))).setSourceData({},!1)},getShareTools:function(t){return new l(this.getEntity(),{class:t,title:!1}).setSourceData({},!1)},getHeading:function(){return new u(this.getEntity(),{}).setSourceData({},!1)},getSeries:function(){var e=this.getEntity().getRelatedTags();return!!t.isArray(e)&&new b(new y({listItems:e}),this.getConfig().get("series",{class:"series-list"})).setSourceData({},!1)},getArticleBody:function(){return new n(this.getEntity(),this.getConfig()).setSourceData({},!1)},getSourceAttribution:function(){var t=this.getEntity().getAuthor();return!!t&&new a(t,this.getConfig().get("source-attribution",{})).setSourceData({},!1)},getPartner:function(){var t=this.getEntity().getPartner();return!!t&&new r(t,this.getConfig().get("image",{})).setSourceData({},!1)},getRelatedArticles:function(){var t=this.getEntity(),e=t.getRelatedArticles(),i=this.getConfig().get("relatedArticles",{title:"Related Stories",class:"related-stories",analyticsConfig:{module:"related-stories"}});return!!e&&new c(e,i).setSourceData({},!1)},getGalleryImages:function(){return new d(this.getEntity().getGalleryImages(),this.getConfig()).setSourceData({},!1)}}),w}),define("common/view/model-v2/document/article/video",["lodash","common/util/extends","common/util/logger","common/util/interface","common/interface/entity/video/video","common/view/model-v2/document/article/image","common/view/model-v2/link/article-share-tools","common/view/model-v2/promo/heading","common/view/model-v2/video/stand-alone-html-element","common/entity/vanilla/list"],function(t,e,i,n,o,s,a,r,l,c){function d(){s.apply(this,arguments)}return e(d,s,{getAdditionalData:function(){var t={};return t.leadVideo=this.getLeadVideo(),t.shareTools=this.getShareTools("small share--article"),t},getLeadVideo:function(){var e=this.getEntity(),i=this.getConfig().get("module"),s=!1,a=e.getVideo();if(i&&t.has(i,"brandColor")&&(s=i.brandColor),a)return n.ensureImplements(a,o),a.setImage(e.getImage()),new l(a,{id:"video-lead-asset",brandColor:s,image:{format:{landscape:{x:"224",y:"125"}}}}).setSourceData({},!1)}}),d}),define("common/view/model-v2/document/article/slideshow",["lodash","common/util/extends","common/util/logger","common/view/model-v2/document/article/image","common/view/model-v2/document/article/body","common/view/model-v2/link/article-share-tools","common/view/model-v2/promo/heading","common/entity/vanilla/list"],function(t,e,i,n,o,s,a,r){function l(){n.apply(this,arguments)}return e(l,n,{getAdditionalData:function(){var t={};return t.shareTools=this.getShareTools("small share--article"),t},getArticleBody:function(){return new o(this.getEntity(),t.merge({appendGallery:!0},this.getConfig())).setSourceData({},!1)}}),l}),define("common/view/model-v2/document/article/infographic",["lodash","common/util/extends","common/util/logger","common/view/model-v2/document/article/image","common/view/model-v2/promo/hero-unit"],function(t,e,i,n,o){function s(){n.apply(this,arguments)}return e(s,n,{getHeroUnit:function(e){return new o(this.getEntity(),t.merge({class:"","hide-heading":!1,context:"collection-and-tags",showIntro:!0},this.getConfig().get("heroUnit",{}))).setSourceData({},!1)},getAdditionalData:function(){var t={};return t.infographic=this.getInfographicURL(),t.shareTools=this.getShareTools("small share--article"),t},getInfographicURL:function(){var e=this.getEntity(),i=this.getConfig(),n=e.getInfographic();if(!1!==n&&t.has(i,"domain")&&t.has(i,"module")&&t.has(i.module,"domain")){return["http:/",i.domain,i.module.domain,"bespoke",n].join("/")}return""}}),s}),define("common/view/model-v2/document/article/base",["lodash","common/util/extends","common/view/model-v2/base","common/view/model-v2/document/article/image","common/view/model-v2/document/article/video","common/view/model-v2/document/article/slideshow","common/view/model-v2/document/article/infographic","common/interface/entity/document/article","common/util/logger"],function(t,e,i,n,o,s,a,r,l){function c(){i.apply(this,arguments)}return e(c,i,{entityInterface:r,setViewData:function(){var t;switch(this.getEntity().getType()){case"video":case"audio":t=new o(this.getEntity(),this.getConfig());break;case"slideshow":t=new s(this.getEntity(),this.getConfig());break;case"infographic":t=new a(this.getEntity(),this.getConfig());break;default:t=new n(this.getEntity(),this.getConfig())}this.viewData=t.setSourceData({},!1),this.viewData.hideStory=!!t.config.hideStory&&t.config.hideStory,this.viewData.showStoryId=!!t.config.showStoryId&&t.config.showStoryId}}),c}),define("component/super-section-story-detail",["lodash","common/config","module/MVVM-component","common/model/story/story-by-id","common/view/model/story/base","common/entity/habitat/story/article","common/view/model-v2/document/article/base","common/view/model-v2/promo/context-heading-types","templates"],function(t,e,i,n,o,s,a,r,l){return function(o){var c={heroUnit:{context:r.NONE},"source-attribution":{image:{show:!0,format:{landscape:{x:"480",y:"480"}}}},includeSeries:!0},d=new n(t.extend({},e.get(),o)),u=new a(new s({}),t.extend(c,o));return new i(d,u,l["super-section-story-detail"])}}),define("common/_modules/super-section-index/models/top-stories",["lodash","common/util/extends","common/model/story/story-by"],function(t,e,i){function n(t,e){e=e||8,i.call(this,t),this.setItemsPerPage(e)}return e(n,i,{URLScheme:"/{moduleId}/supersection/{superSectionId}",arrRequiredConfig:["superSectionId"],parseHabitatData:function(e){return!(!e.results||!t.has(e.results[0],"Content.TopStories"))&&(t.has(this.config,"superSectionId")&&(e.superSectionId=this.config.superSectionId),e)}}),n}),define("common/_modules/super-section-index/entities/promo",["lodash","common/util/extends","common/util/logger","common/entity/habitat/story/promo","common/helper/domain-brand-mapper"],function(t,e,i,n,o){function s(e){var i={hasLeadAsset:!1,superSection:!1};n.call(this,t.extend(i,e))}return e(s,n,{init:function(t){n.prototype.init.call(this,t),this.map("HeadlineShort","title"),this.map("SummaryShort","summary"),this.initImage("image",this.getPromoImage(),o.getBrand(this.getURL())+"-external-promotion"),this.set("superSection",!!this.getArrayNestedAsset("superSection")),this.initHasLeadAssetModule()},getPromoImage:function(){var t=this.getArrayNestedAsset("assetImagePromo"),e=this.getArrayNestedAsset("promoImageOverride");return t||(e||this.getArrayNestedAsset("assetImage"))},getNonEmptyArray:function(t){var e=this.get(t,[]);return e instanceof Array&&e.length>0&&e},initHasLeadAssetModule:function(){var e=!1;e="slideshow"===this.getType()||"video"===this.getType()||"slideshow-gallery"===this.get("entityType")||t.filter(["assetVideoIb2","assetVideoMps","assetIbroadcast","assetImage"],function(t){var e=this.getNonEmptyArray(t);return!1!==e&&("assetImage"!==t||e.length>1)},this).length>0,this.set("hasLeadAsset",e)},hasEmbeddedContent:function(){return this.get("assetInfographic",!1)||this.get("assetCustom",!1)},isSuperSectionStory:function(){return this.superSection},isSuperSectionLayout:function(){var t=["story","image","audio"];return this.isSuperSectionStory()&&-1!==t.indexOf(this.getType())&&!this.hasLeadAssetModule()&&!this.hasEmbeddedContent()},hasLeadAssetModule:function(){return this.hasLeadAsset}}),s}),define("common/_modules/super-section-index/entities/story-list",["lodash","common/util/extends","common/entity/list/entity","common/_modules/super-section-index/entities/promo"],function(t,e,i,n){function o(t,e){i.call(this,t,e)}return e(o,i,{entityFactoryDependencies:[],createEntity:function(t){return new n(t)}}),o}),define("common/_modules/super-section-index/entities/top-stories",["lodash","common/util/extends","common/util/logger","common/entity/habitat/document","common/_modules/super-section-index/entities/story-list","common/view/entity-URL-router"],function(t,e,i,n,o,s){function a(e,i){var o={topStories:!1,theme:!1,description:!1,title:!1,adZoneId:!1,banner:!1};n.call(this,t.extend(o,e),i)}return e(a,n,{init:function(e){n.prototype.init.call(this,t.has(e,"results")?e.results[0]:e),this.initPageProperties(),this.initTopStories(),this.map("superSectionId","shortId"),this.set("URL",s.getFullURL(this.getId()))},initTopStories:function(){var e=this.get("Content");t.has(e,"TopStories")?this.set("topStories",new o({listItems:e.TopStories})):this.set("topStories",!1)},getKeywords:function(){return{pageType:"INDEX",sectn:"super_"+this.getAdZoneId(),wwsupersection:this.getAdZoneId()}},getTopStories:function(){return this.topStories},getTheme:function(){return this.theme},getSummary:function(){return this.description},getTitle:function(){return this.title},getAdZoneId:function(){return this.adZoneId},getSectionId:function(){return this.banner},initPageProperties:function(){var e=this.get("Content");if(t.has(e,"General")){var i=e.General;t.each({theme:"Theme",description:"Description",title:"Name",adZoneId:"AdTargetingId",banner:"Banner",moduleId:"PrimaryVertical"},function(t,e){i[t]&&(this[e]=i[t])},this)}}}),a}),define("component/infinite-ads-renderer",["lodash","jquery","model/mediaQuery","model/geolocation","templates"],function(t,e,i,n,o){var s=function(t,e){this.setSelector(t),this.setAdId(e)};return t.extend(s.prototype,{render:function(t){n.isUK()||this.renderInfiniteAds()},renderInfiniteAds:function(){var t,i,n,s,a=[1,2,3,4],r={id:"leaderboard_"+this.getAdId(),groups:a.join("_")},l=o["ad-slot-infinite"](r),c=[1,2,3,4],d={id:"sponsor_slot_"+this.getAdId(),groups:c.join("_"),"slot-class":"bbccom_sponsor_section_slot"},u=o["ad-slot-infinite"](d),p={};this.isMobile()?(t=[1,2],s=" .top-unit"):(t=[3,4],s=" .sticky-side"),i={id:"mpu_"+this.getAdId(),groups:t.join("_")},n=o["ad-slot-infinite-mpu"](i),p[r.id]=a,p[d.id]=c,p[i.id]=t,e(this.getSelector()+" .top-leaderboard").html(l),e(this.getSelector()+" .hero-unit .secondary-header-wrapper").html(u),e(this.getSelector()+s).prepend(n),"undefined"!=typeof bbcdotcom&&void 0!==bbcdotcom.registerAd&&bbcdotcom.registerAd(p)},isMobile:function(){return!(4===i.getGroup()&&!i.isFixedWidthLayout())},setSelector:function(t){this.selector=t},getSelector:function(){return this.selector+" "},setAdId:function(t){this.adId=t},getAdId:function(){return this.adId}}),s}),define("component/super-section-story-change-listener",["lodash","util/content-loader-event-handler","component/story-detail-way-points-collection","component/infinite-ads-renderer","model/mediaQuery"],function(t,e,i,n,o){var s=e.ACTION_STORY_BLOCK_CHANGED,a=e.ACTION_LAZY_LOADED_STORY,r=function(){};return t.extend(r.prototype,{init:function(){this.registerStoryBlockLoad(),this.registerStoryBlockChange()},changeUrl:function(t,e){var i=window.location,n=i.origin+t+i.search;window.history.replaceState({},e,n)},isMobile:function(){return!(4===o.getGroup()&&!o.isFixedWidthLayout())},registerStoryBlockLoad:function(){var t=this;e.on(a,function(e,i,o,s){s>0&&new n(t.getBlockId(s),s).render()})},registerStoryBlockChange:function(){var t=this;e.on(s,function(e,i,n,o,s){null!==n&&t.changeUrl(i.storyEntity.getShortURL())})},cleanBlockOnStoryBlockChange:function(){var n=this,o={};e.on(s,function(e,s,a,r,l){if(null!==a)for(var c=i.getAllInstances(),d=t.keys(c).length,u=0;u<d;u++){var p=$(n.getBlockId(u));u>=r-1&&u<=r+1?t.has(o,u)&&(p.height(""),p.html(o[u]),setTimeout(function(){c[n.getBlockId(u)].init()},10)):t.has(o,u)||(p.height(p.height()),c[n.getBlockId(u)].reset().clearCache(),o[u]=p.html())}})},getBlockId:function(t){return"#story-block-"+t}}),r}),define("interaction-controller/super-section-story",["require","lodash","jquery","q","component/story-way-points","component/story-detail-way-points-collection","component/super-section-story-detail","util/content-loader-event-handler","layouts/super-section-story","common/config","common/_modules/super-section-index/models/top-stories","common/_modules/super-section-index/entities/top-stories","model/exposed-data","common/_modules/super-section-index/entities/promo","common/model/story/story","common/entity/habitat/story/article","component/super-section-story-change-listener","module/loader"],function(t,e,i,n,o,s,a,r,l,c,d,u,p,h,m,g,f,b){function y(){this.currentBlockId=0,this.objArticleEntity=null,this.stickyTopBarInitialised=!1}var v=r.ACTION_STORY_BLOCK_CHANGED,w=r.ACTION_LAZY_LOADED_STORY,S=r.TYPE_FULL_STORY;return e.extend(y.prototype,{init:function(t){var e=this;this.setVariation(t),this.initStoryData(),this.setupStickyElements(this.currentBlockId),this.initStories().then(function(t){e.stories=t,e.registerBlockChangeEvent(e.currentBlockId)}),this.registerStoryBlockChangeListener()},setVariation:function(t){this.variation=t,this.setHiddenStory(t)},setHiddenStory:function(t){this.hiddenStory="t004-var-2"===t||"t004-var-3"===t},initStoryData:function(){this.storyModel=new m(e.extend({id:!1},c.get())),this.storyModel.populate(p.story),this.objArticleEntity=new g(this.storyModel.getData())},initStories:function(){var t={moduleId:this.getModuleId(),superSectionId:this.objArticleEntity.getSupersection().get("shortId")},i=new d(e.extend({},c.get(),t),15),n=this;return i.load().then(function(t){var i=new u(t),o=n.createStoryItem(new h(p.story));o.loaded=!0;var s=[o];return e.each(i.getTopStories().getListItems(),function(t){o.id!==t.getId()&&t.isSuperSectionLayout()&&s.push(n.createStoryItem(t))}),s},function(t){console.log(t)})},createStoryItem:function(t){return{id:t.getId(),loaded:!1,firstAppearance:!0,storyEntity:t}},setupStickyElements:function(t){if(!this.stickyTopBarInitialised){var e=new o(".topbar",!0);e.stick().showOnSlideUp(),e.init(),this.stickyTopBarInitialised=!0}var i=new s(this.getBlockId(t));this.delay(function(){this.loadNext(i,t)},100)},loadNext:function(t,i){var n=this,s=parseInt(i)+1,a=new o(this.getBlockId(i)+" #story-page",!0),r=40;this.hiddenStory&&i>0&&(r=15),a.init().onPassedThrought("top",function(t){e.has(n.stories,s)&&!n.stories[s].loaded&&t>r&&(n.loadStory(n.stories[s].id,s),n.stories[s].loaded=!0)}),t.add(a)},initLoader:function(t){this.spinner=new b(t.find("#loader").css({position:"relative",height:308}).get(0),"#333")},stopLoader:function(){this.spinner.stop()},loadStory:function(t,e){var n=this;i("#page-lining").append('<div id="'+this.getBlockId(e,!0)+'" class="gutter-top"><div id="loader"></div></div>');var o=!!(this.hiddenStory&&e>0),s="showStoryId"+e,c=i(this.getBlockId(e)),d=new a({id:t,hideStory:o,showStoryId:s});return this.initLoader(c),d.load().then(function(){n.stopLoader(),c.html(d.render()),n.stories[e].storyEntity=d.viewModel.entity,r.trigger(w,S,n.getStory(e),e),new l(n.getBlockId(e),d.getModel().getData(),n.variation,o,s).init(),n.registerBlockChangeEvent(e),n.setupStickyElements(e)},function(t){n.stopLoader(),c.html("")})},registerBlockChangeEvent:function(t){var e=this;new o(this.getBlockId(t),!0).init().onPassedThrought("top",function(i){i>0&&i<100&&e.currentBlockId!==t&&(r.trigger(v,e.getStory(t),e.getStory(e.currentBlockId),t,e.currentBlockId),e.registerFirstStoryAppearance(t),function(){var e=this,i=this.currentBlockId;this.delay(function(){s.getBlockInstance(e.getBlockId(i)).stop(!0),s.getBlockInstance(e.getBlockId(t)).start()},10)}.bind(e)(),e.currentBlockId=t)})},getNextBlockId:function(){return parseInt(this.currentBlockId)+1},getBlockId:function(t,e){return(e?"":"#")+"story-block-"+t},getStory:function(t){return this.stories[t]},registerFirstStoryAppearance:function(t){this.stories[t].firstAppearance=!1},delay:function(t,e){return setTimeout(t.bind(this),e)},registerStoryBlockChangeListener:function(){(new f).init()},getModuleId:function(){return this.objArticleEntity.getSupersection().get("project")}}),y}),define("layouts/top-bar",["lodash","jquery","module/topbar-menu"],function(t,e,i){var n=function(t){this.topBarMenuMobileSelector="[data-topbar-menu-mobile]",this.setSelector(t)};return t.extend(n.prototype,{init:function(){this.initTopBar()},initTopBar:function(){e(this.topBarMenuMobileSelector).length>0&&(this.topbar=new i(this.topBarMenuMobileSelector),this.topbar.init())},setSelector:function(t){this.selector=e(t)},getSelector:function(){return this.selector}}),n}),define("layouts/super-section-story-page-load",["lodash","common/util/extends","layouts/super-section-story","interaction-controller/super-section-story","util/content-loader-event-handler","layouts/top-bar"],function(t,e,i,n,o,s){var a=o.ACTION_STORY_BLOCK_CHANGED,r=o.ACTION_LAZY_LOADED_STORY,l=o.TYPE_FULL_STORY,c="",d=function(){i.apply(this,arguments,u())},u=function(){var t=document.getElementById("master-orb-body").className;return c="",t.includes("t004-var-1")&&(c="t004-var-1"),t.includes("t004-var-2")&&(c="t004-var-2"),t.includes("t004-var-3")&&(c="t004-var-3"),t.includes("t003-var-1")&&(c="t003-var-1"),t.includes("t003-var-2")&&(c="t003-var-2"),t.includes("t003-var-3")&&(c="t003-var-3"),c};return e(d,i,{init:function(){this.variation=u(),i.prototype.init.apply(this,arguments,this.variation),this.initSuperSectionLayout(),this.intNavBarRenderer("#page")},initSuperSectionLayout:function(){(new n).init(this.variation);o.trigger(r,l,this.storyEntity,0),o.trigger(a,this.storyEntity,null,0,null)},intNavBarRenderer:function(t){new s(t).init()},setupRenderImages:function(){}}),d}),define("common/_modules/super-section-index/models/all-stories",["lodash","common/util/extends","common/model/story/story-by"],function(t,e,i){function n(t){i.call(this,t),this.setItemsPerPage(8)}return e(n,i,{URLScheme:"/search/supersection/{moduleId}/{superSectionId}/more-stories",arrRequiredConfig:["superSectionId"]}),n}),define("layouts/index/super-section",["lodash","common/util/extends","layouts/index/base","model/exposed-data","common/config","common/_modules/super-section-index/models/all-stories","common/_modules/super-section-index/entities/promo","common/entity/factory","component/promo-group/set","common/view/model-v2/promo/context-heading-types","common/entity/habitat/paging"],function(t,e,i,n,o,s,a,r,l,c,d){function u(t,e){this.moreResultsSelector="#more-stories-wrapper",this.loadMoreWrapperSelector="#load-more-wrapper",i.call(this,t)}return e(u,i,{listItemEntity:a,promoGroupComponent:l,promoGroupTemplate:"promo-group-more-stories",getListConfig:function(){var e={context:c.NONE,"include-branded-class":!0};return t.has(n,"more-stories-promo-groups.groups")?t.extend(e,{groups:n["more-stories-promo-groups"].groups}):e},getPagingData:function(){var e;if(t.has(n,"more-stories.paging"))return e=new d(n["more-stories"].paging),e.setPage(e.getPage()-1),e},setModel:function(e){t.has(n,"page.superSectionId")&&(e=t.extend({superSectionId:n.page.superSectionId},e)),this.model=new s(e)}}),u}),define("common/helper/routing/routing-domain-list",["lodash"],function(t){var e=[{id:"wwfuture",domain:"future"},{id:"wwculture",domain:"culture"},{id:"wwtravel",domain:"travel"},{id:"wwautos",domain:"autos"},{id:"wwearth",domain:"earth"},{id:"wwcapital",domain:"capital"}],i={};return i.getDomainList=function(i){for(var n=t.clone(e,!0),o=0;o<n.length;o++){if(n[o].id===i){n.splice(o,1);break}}return n},i}),define("common/helper/routes",["lodash","common/util/logger","common/helper/routing/routing-domain-list"],function(t,e,i){return{prepareRulesForRoutes:function(e,i){return t.each(e,function(e,n){t.each(e.rules,function(n,o){t.isString(n)&&(t.isFunction(i[n])?e.rules[o]=i[n]:e.rules[o]=new RegExp(n))})}),e},addModuleDomainToRoutes:function(e,n){return t.has(n,"module")&&t.has(n.module,"domain")&&t.each(e,function(o,s){if(t.has(o,"cross-domain")&&!0===o["cross-domain"]){var a=i.getDomainList(n.module.id);t.each(a,function(i,n){var a=i.id+"-"+s,r=t.clone(o,!0);e[a]=this.addModuleDomainToRoute(r,i)},this)}e[s]=this.addModuleDomainToRoute(o,n.module)},this),e},addModuleDomainToRoute:function(e,i){return t.has(e,"route")&&(e.route="/"+i.domain+e.route),t.has(e,"entity-mapping")&&(e["entity-mapping"]=this.prepareEntityMapping(e["entity-mapping"],i)),e},addOptionalQueryStringToRoutes:function(e){return t.each(e,function(i,n){t.has(i,"route")&&-1===i.route.indexOf(":?query:")&&(e[n].route=i.route+":?query:")}),e},prepareRoutes:function(t,e,i){return t=this.getRoutesForEnviroment(t,e.environment),t=this.prepareRulesForRoutes(t,i),t=this.addOptionalQueryStringToRoutes(t),this.addModuleDomainToRoutes(t,e)},getRoutesForEnviroment:function(e,i){e=t.clone(e,!0);var n={};return t.each(e,function(e,o){t.has(e,"environments")&&!t.contains(e.environments,i)||(n[o]=e)}),n},getEntityRoutes:function(e,i){e=t.clone(e,!0);var n={};return t.each(e,function(e,i){t.has(e,"entity-mapping")&&(n[i]=e,delete n[i].handler)},this),this.addModuleDomainToRoutes(n,i)},prepareEntityMapping:function(e,i){return t.isString(e)?e.replace("{moduleId}",i.id):e}}}),define("common/helper/routing/is-numeric",[],function(){var t=new RegExp(/^\d+$/);return function(e){return t.test(e)}}),define("common/helper/routing/rules",["lodash","common/helper/routing/is-numeric"],function(t,e){return{isNumeric:e}}),define("model/exposed-routes",["common/helper/routes","common/helper/routing/rules"],function(t,e){return t.prepareRulesForRoutes(_routes,e)}),define("module/router",["lodash","util/logger","crossroads"],function(t,e,i){var n=function(t){this.setURL(t),this.router=i.create()}
;return t.extend(n.prototype,{addRoute:function(t,e){var i=this.router.addRoute(t["entity-mapping"]),n=function(t,e){e(this.getParamsFromURLForRoute(t.route))};return i.matched.add(n.bind(this,t,e)),i},setURL:function(t){this.URL=t},getParamsFromURLForRoute:function(t){var e=i.create(),n=e.addRoute(t);if(n.match(this.URL))return n._getParamsObject(this.URL)},parse:function(t){this.router.parse(t)}}),n}),define("glaze-main-app",["model/mediaQuery","lodash","lib/domReady","orb/api","jquery","util/logger","layouts/base","layouts/page","layouts/slideshow-gallery","layouts/third-party-content","layouts/index/story/front-page","layouts/index/story/collection","layouts/index/entity/collection","layouts/index/story/tag","layouts/index/entity/tag","layouts/index/story/search-results","layouts/story","layouts/super-section-story-page-load","layouts/index/super-section","config","model/exposed-config","common/util/logger","model/exposed-data","model/exposed-routes","common/config","module/bbcdotcomMediator","common/view/entity-URL-router","module/router","common/util/request","model/geolocation","common/entity/habitat/story/article"],function(t,e,i,n,o,s,a,r,l,c,d,u,p,h,m,g,f,b,y,v,w,S,x,I,C,T,_,k,E,A,L){C.set(w),_.init(I),E.set({isUK:A.isUK()});var P=function(){i(this.init.bind(this))};return e.extend(P.prototype,{init:function(){t.setFixedWidthLayout(hasFixedWidthLayout()),s.useDefaults(),S.set(s),v.setup(this.getSettings()),T.init(),this.pageLayout=new r("#page"),this.pageLayout.init(),this.addEventListeners(),this.isErrorPage()||this.initRouter()},isErrorPage:function(){return o("#wwfeatures-container > #error-container").length>0},initRouter:function(){this.router=new k(window.location.pathname),this.addRoutes(),this.router.parse(x.entityMapping)},addEventListeners:function(){n.layout(this.layout.bind(this))},layout:function(){this.pageLayout.layout(),T.layoutAds()},getIndexSelector:function(){return e.first(o(".container-index"))},addRoutes:function(){this.router.addRoute(I.story,this.storyLayout.bind(this,!1)),this.router.addRoute(I["story-preview"],this.storyLayout.bind(this,!1)),this.router.addRoute(I["slideshow-gallery"],this.slideshowGalleryLayout.bind(this)),this.router.addRoute(I["article-third-party-content"],this.thirdPartyContentLayout.bind(this)),this.router.addRoute(I["front-page"],this.frontPageLayout.bind(this)),void 0!==I["front-page-americas-edition"]&&this.router.addRoute(I["front-page-americas-edition"],this.frontPageLayout.bind(this)),this.router.addRoute(I.search,this.searchResultsLayout.bind(this)),this.router.addRoute(I["column-index"],this.columnIndexLayout.bind(this)),this.router.addRoute(I["column-results"],this.columnLayout.bind(this)),this.router.addRoute(I.tag,this.tagLayout.bind(this)),this.router.addRoute(I["tag-index"],this.tagIndexLayout.bind(this)),e.has(I,"section-index")&&e.has(I,"section-results")&&(this.router.addRoute(I["section-index"],this.sectionIndexLayout.bind(this)),this.router.addRoute(I["section-results"],this.sectionLayout.bind(this))),e.has(I,"native-column")&&e.has(I,"native-story")&&(this.router.addRoute(I["native-column"],this.columnLayout.bind(this)),this.router.addRoute(I["native-story"],this.storyLayout.bind(this,!0))),e.has(x,"page.superSectionId")&&new y(this.getIndexSelector())},frontPageLayout:function(){new d(this.getIndexSelector())},sectionIndexLayout:function(){new p(this.getIndexSelector(),"section")},sectionLayout:function(t){e.has(t,"id")&&new u(this.getIndexSelector(),"section",t.id)},columnIndexLayout:function(){new p(this.getIndexSelector(),"column")},columnLayout:function(t){e.has(t,"id")&&new u(this.getIndexSelector(),"column",t.id)},tagIndexLayout:function(){new m(this.getIndexSelector())},tagLayout:function(t){e.has(t,"id")&&new h(this.getIndexSelector(),t.id)},searchResultsLayout:function(t){e.has(t,"keywords")&&new g(this.getIndexSelector(),t.keywords)},storyLayout:function(t){var i=!1;if(e.has(x,"story")){i=new L(x.story).isSuperSectionLayout()?new b("#story-block-0",x.story):new f("#story-page",x.story)}else i=new f("#story-page");i.init()},slideshowGalleryLayout:function(t){new l('[data-sg="main"]').init()},thirdPartyContentLayout:function(t){new c('[data-tpc="frame"]').init()},getSettings:function(){return{}}}),P}),define("common/helper/request",["lodash"],function(t){return{getParamsFromURL:function(e){var i,n=e.split("/"),o=parseInt(t.last(n))||1;return o>1&&n.pop(),i=t.last(n),{id:i,page:o}}}}),define("module/story-of-life/catch-page",[],function(){return new function(){this.init=function(){window.addEventListener("resize",this.adjustHeight.bind(this))},this.windowSizeHandler=function(){var t=document.getElementsByClassName("continue-promo"),e=null!==t&&t.length>0?t[0].getBoundingClientRect().bottom-t[0].getBoundingClientRect().top:0;if(e>0){var i=document.getElementsByTagName("body")[0].style;i.paddingBottom=e+"px",i.backgroundColor="#4c4c4c"}},this.adjustHeight=function(t){setTimeout(this.windowSizeHandler,0)}}}),define("layouts/sol-catch-page",["lodash","common/util/extends","layouts/base","module/story-of-life/catch-page"],function(t,e,i,n){var o=function(t){i.call(this,t)};return e(o,i,{init:function(){n.init(),n.adjustHeight()}}),o}),define("common/interface/entity/video/playlist-player/collection",["lodash","common/util/interface","common/interface/entity/base"],function(t,e){return new e("VideoCollectionEntity",["getTitle","getDescription","getCoverImage","getCuratorName","getClips"])}),define("common/interface/entity/video/playlist-player/clip-promo",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,i){return new e("ClipPromo",i.methods.concat(["getImage","getTitle","getDescription","getVideo","getDurationSeconds"]))}),define("common/view/model-v2/video/playlist-player/clip-promo",["lodash","common/util/extends","common/util/interface","common/view/model-v2/base","common/interface/entity/video/playlist-player/clip-promo","common/interface/entity/video/video","common/view/model-v2/image/html-element","common/helper/date-formatter"],function(t,e,i,n,o,s,a,r){function l(){n.apply(this,arguments)}return e(l,n,{entityInterface:o,setViewData:function(){var t=this.getEntity(),e={title:t.getTitle(),image:this.getImage(),description:t.getDescription(),duration:this.getDuration(),vpid:this.getVpid(),"is-active":this.isActive()};this.viewData=e},isActive:function(){return!0===this.getConfig().get("is-active",!1)},getImage:function(){var e=this.getEntity().getImage(),i={class:""},n=this.getConfig().get("image",{}),o=t.merge(i,n),s="play";return e?(t.has(o,"iconType")&&(s=o.iconType),e.setIconType(s),new a(e,o).setSourceData({},!1)):{}},getVpid:function(){var t=this.getEntity().getVideo();return!!t&&(i.ensureImplements(t,s),t.getVpid())},getDuration:function(){var e=this.getEntity();if(e.getDurationSeconds()){var i=r.secondsToMinutesAndSeconds(e.getDurationSeconds()),n={};if(t.has(i,"minutes")&&t.has(i,"seconds"))return n.minutes=i.minutes,n.seconds=r.padZero(i.seconds),n}return!1}}),l}),define("common/view/model-v2/video/playlist-player/clip-viewer",["lodash","common/util/extends","common/view/model-v2/base","common/util/interface","common/interface/entity/video/playlist-player/collection","common/interface/entity/video/video","common/interface/entity/video/playlist-player/clip-promo","common/view/model-v2/image/html-element","common/view/model-v2/video/stand-alone-html-element","common/view/model-v2/video/playlist-player/clip-promo"],function(t,e,i,n,o,s,a,r,l,c){function d(){i.apply(this,arguments)}return e(d,i,{entityInterface:o,setViewData:function(){var e,i,n=this.getEntity(),o=this.getConfig(),s={};t.has(o,"vpid")&&(e=this.getClipEntityByVpid(o.vpid),i=this.getClip(e),t.isObject(i)&&(s["clip-metadata"]={title:i.title,description:i.description,duration:i.duration},s.title=i.title,s.description=i.description,s.duration=i.duration,s.image=i.image,s.video=this.getVideo(e.getVideo(),e.getImage()))),s["playlist-metadata"]={title:n.getTitle(),description:n.getDescription(),curatorName:n.getCuratorName()},this.viewData=s},getClip:function(t){var e;return!!t&&(n.ensureImplements(t,a),e=new c(t,this.getConfig().get("clip",{})),e.setSourceData({},!1))},getClipEntityByVpid:function(e){if(t.isString(e)){var i=this.getEntity().getClips();return t.find(i,function(t){var i;if(i=t.getVideo(),i.getVpid()===e)return t})}return!1},getVideo:function(t,e){if(t)return n.ensureImplements(t,s),t.setImage(e),new l(t,this.getVideoConfig()).setSourceData({},!1)},getVideoConfig:function(){var e=(this.getConfig(),{brandColor:!1,image:{format:{landscape:{x:"224",y:"125"}}}}),i=t.merge(e,this.getConfig().get("video",!1));return i&&t.has(i,"brandColor")&&(i.brandColor=i.brandColor),i&&t.has(i,"idPrefix")&&(i.idPrefix=i.idPrefix),i}}),d}),define("module/video/playlist-player/clip-player",["q","lodash","lib/ecmaScript5","jquery","signals","util/logger","common/view/model-v2/video/playlist-player/clip-viewer","common/util/interface","common/interface/entity/video/playlist-player/collection","templates","module/video/SMPPlayer"],function(t,e,i,n,o,s,a,r,l,c,d){var u=function(t){return this.defaultConfig={selector:null,collectionEntity:null,collectionType:null,model:null,videoPlayer:null,selectors:{videoContainer:"[data-vpp-video]",videoPlayer:"[data-video-player]",controlPanel:"[data-vpp-control-panel]",controlPanelMetaData:"[data-vpp-control-panel-metadata]",clipViewerPlayer:"[data-vpp-clip-viewer-player-container]",clipViewerPlayerActive:"vpp-clip-viewer__player--is-active"},clipViewerConfig:{}},this.config=e.merge({},this.defaultConfig,t||{}),this.initialised=!1,this.videoPlayerElementReady=!1,this.videoPlayerFirstPlay=!0,this.setupSignals(),this};return u.prototype.init=function(){var i=t.defer();return this.setSelector(this.config.selector)&&(s.debug("ClipPlayer:init"),e.has(this.config,"vpid")&&this.setCurrentVpid(this.config.vpid),this.setupSelectors(this.config.selectors),this.setModel(this.config.model),this.setCollectionEntity(this.config.collectionEntity),this.setCollectionType(this.config.collectionType),this.setupViewModel(),this.updateViewData(),this.initialised=!0,i.resolve()),i.reject(new Error("ClipPlayer:init: Invalid selector specified")),i.promise},u.prototype.setupSelectors=function(t){var e=this.getSelector();this.elements={clipViewerPlayer:e.find(this.defaultConfig.selectors.clipViewerPlayer),videoContainer:e.find(this.defaultConfig.selectors.videoContainer),controlPanel:e.find(this.defaultConfig.selectors.controlPanel),controlPanelMetaData:e.find(this.defaultConfig.selectors.controlPanelMetaData)}},u.prototype.setupSignals=function(){this.playlistEndedSignal=new o.Signal,this.clipPlayingSignal=new o.Signal},u.prototype.setupVideoListeners=function(){this.getSMPPlayer().subscribe("playlistEnded",this.playlistEndedSignal.dispatch.bind(this)),this.getSMPPlayer().subscribe("videoPlaying",this.clipPlayingSignal.dispatch.bind(this))},u.prototype.subscribe=function(t,e){switch(t){case"playlist-ended":this.playlistEndedSignal.add(e);break;case"clip-playing":this.clipPlayingSignal.add(e)}},u.prototype.setModel=function(t){e.isObject(t)&&(this.model=t)},u.prototype.getModel=function(){return this.model},u.prototype.setCollectionEntity=function(t){var e=new t;r.ensureImplements(e,l),this.collectionEntity=e},u.prototype.getCollectionEntity=function(){return this.collectionEntity},u.prototype.setCollectionType=function(t){e.isString(t)&&(this.collectionType=t)},u.prototype.getCollectionType=function(){return this.collectionType},u.prototype.setupViewModel=function(){this.clipViewerViewModel=new a(this.getCollectionEntity())},u.prototype.getClipViewerViewModel=function(){return this.clipViewerViewModel},u.prototype.getCollectionData=function(){return this.collectionData},u.prototype.setViewData=function(t){if(e.isObject(t)){var i=this.getClipViewerViewModel(),n=this.getClipViewerConfig(),o={vpid:this.getCurrentVpid()};e.has(n,"video")&&(o.video=n.video),e.has(n,"clip")&&(o.clip=n.clip),i.setConfig(o),i.setSourceData(t,!0)}},u.prototype.getViewData=function(){return this.getClipViewerViewModel().getViewData()},u.prototype.getCurrentVpid=function(){return this.currentPid},u.prototype.setCurrentVpid=function(t){e.isString(t)&&(this.currentPid=t)},u.prototype.getVideoTemplate=function(){return c["vpp-video-player"]},u.prototype.getControlPanelMetaDataTemplate=function(){return c["vpp-control-panel-metadata"]},u.prototype.renderTemplate=function(t,i){if(e.isFunction(t)&&e.isObject(i))return t(i)},u.prototype.getVideoElement=function(){return this.videoElement},u.prototype.setVideoElement=function(){var t=this.getSelector().find(this.defaultConfig.selectors.videoPlayer);t.length>0&&(this.videoElement=t)},u.prototype.getVideoMetaData=function(){var t=this.getViewData(),e={title:t.title,holdingImageURL:t.image.url,items:[{vpid:this.getCurrentVpid(),title:t.title,imageURL:t.image.url}]};return this.isFirstPlay()&&(e.items.unshift(this.getAdvertPlaylistItem()),this.setFirstPlay(!1)),e},u.prototype.updateControlPanelMetaDataView=function(){var t=this.elements.controlPanelMetaData,e=this.getControlPanelMetaDataTemplate(),i=this.renderTemplate(e,this.getViewData());t.html(i)},u.prototype.setVideoPlayerElementReady=function(){!1===this.isVideoPlayerElementReady()&&(this.videoPlayerElementReady=!0)},u.prototype.isVideoPlayerElementReady=function(){return this.videoPlayerElementReady},u.prototype.loadClip=function(t){this.setCurrentVpid(t),this.updateViewData(),this.isVideoPlayerElementReady()||this.setupVideoPlayer(),this.loadVideo(t),this.updateControlPanelMetaDataView()},u.prototype.setupVideoPlayer=function(){var t=(this.getCurrentVpid(),this.getVideoTemplate()),e=this.renderTemplate(t,this.getViewData()),i=this.getVideoPlayerConfig();this.showClipViewerPlayer(),this.elements.videoContainer.html(e),this.setVideoElement(),this.smpPlayer=new d(this.getVideoElement(),i),this.smpPlayer.init(),this.smpPlayer.resize(),this.setupVideoListeners(),this.setVideoPlayerElementReady()},u.prototype.showClipViewerPlayer=function(){this.elements.clipViewerPlayer.addClass(this.defaultConfig.selectors.clipViewerPlayerActive)},u.prototype.hideClipViewerPlayer=function(){this.elements.clipViewerPlayer.removeClass(this.defaultConfig.selectors.clipViewerPlayerActive)},u.prototype.showControlPanel=function(){this.elements.controlPanel.addClass(this.defaultConfig.selectors.controlPanelActive)},u.prototype.hideControlPanel=function(){this.elements.controlPanel.removeClass(this.defaultConfig.selectors.controlPanelActive)},u.prototype.loadVideo=function(){var t=this.getVideoMetaData();this.getSMPPlayer().loadPlaylist(t)},u.prototype.isFirstPlay=function(){return this.videoPlayerFirstPlay},u.prototype.setFirstPlay=function(t){e.isBoolean(t)&&(this.videoPlayerFirstPlay=t)},u.prototype.getAdvertPlaylistItem=function(){return{kind:"advert"}},u.prototype.updateViewData=function(){this.setViewData(this.getModel())},u.prototype.setSMPPlayer=function(t){t instanceof d&&(this.smpPlayer=t)},u.prototype.getSMPPlayer=function(){return this.smpPlayer},u.prototype.getClipViewerConfig=function(){return this.config.clipViewerViewModel},u.prototype.getVideoPlayerConfig=function(){return this.config.videoPlayer},u.prototype.setSelector=function(t){return this.selector=n(t),this.selector.length>0},u.prototype.getSelector=function(){return this.selector},u}),define("module/video/playlist-player/playlist-ui-manager",["lodash","lib/ecmaScript5","jquery","lib/domReady","util/logger","signals"],function(t,e,i,n,o,s){var a=function(e,i){this.defaultConfig={playlistManagerEvents:null,selectors:{playlist:"[data-vpp-playlist]",playlistItem:"[data-vpp-playlist-item]",playlistItemButton:"[data-vpp-playlist-button]",playlistItemActive:"vpp-playlist__item--is-active",playlistItemPlaying:"vpp-playlist__item--is-playing",playCollectionButton:"[data-vpp-control-play]",playCollectionButtonActive:"vpp-play-control--is-active",skipButton:"[data-vpp-control-skip]",skipButtonInactive:"vpp-skip-control--is-inactive",skipButtonReady:"vpp-skip-control--is-ready",skipButtonActive:"vpp-skip-control--is-active",skipButtonHidden:"vpp-skip-control--is-hidden",clipViewerPlayer:"[data-vpp-clip-viewer-player-container]",clipViewerPlayerActive:"vpp-clip-viewer__player--is-active",clipViewerPreview:"[data-vpp-clip-viewer-preview-container]",clipViewerPreviewActive:"vpp-clip-viewer__preview--is-active"}},this.config=t.merge({},this.defaultConfig,i||{}),this.setSelector(e)};return t.extend(a.prototype,{init:function(){if(this.getSelector())return o.debug("PlaylistUIManager:init"),this.setupSelectors(this.config.selectors),this.addEventListeners(),this.setupSignals(),void this.setupInitialControlState();throw"PlaylistUIManager:init: Invalid selector specified"},setupSelectors:function(t){var e=this.getSelector();this.elements={playlist:e.find(t.playlist),playlistItems:e.find(t.playlistItem),playlistItemButton:e.find(t.playlistItemButton),playCollectionButton:e.find(t.playCollectionButton),skipButton:e.find(t.skipButton),clipViewerPlayer:e.find(t.clipViewerPlayer),clipViewerPreview:e.find(t.clipViewerPreview)}},setupInitialControlState:function(){this.getPlaylistItemsLength()>1&&this.setSkipButtonState("ready")},getPlaylistItemsLength:function(){return this.elements.playlistItems.length},setupSignals:function(){this.playlistNavUpdateSignal=new s.Signal,this.playlistPlayCollectionSignal=new s.Signal,this.playlistSkipSignal=new s.Signal},addEventListeners:function(){this.elements.playlistItems.on("click",this.handlePlaylistNavUpdate.bind(this)),this.elements.playCollectionButton.on("click",this.handlePlayCollectionButtonClick.bind(this)),this.elements.skipButton.on("click",this.handleSkipButtonClick.bind(this))},handlePlayCollectionButtonClick:function(t){this.updatePlaylist(this.elements.playlistItems.first()),this.playlistPlayCollectionSignal.dispatch(t)},handleSkipButtonClick:function(t){var e=this.getNextItemFromPlaylist();this.playlistSkipSignal.dispatch(t),this.updatePlaylist(e)},handlePlaylistNavUpdate:function(t){var e=i(t.currentTarget);this.updatePlaylist(e),this.playlistNavUpdateSignal.dispatch(this.getVpidFromElement(e))},isLastItemInPlaylist:function(t){var e=this.elements.playlistItems;return e.filter(t).index()===e.length-1},setSkipButtonState:function(t){function e(){return Array.prototype.slice.apply(arguments).join(" ")}var i=this.elements.skipButton,n=this.config.selectors.skipButtonInactive,o=this.config.selectors.skipButtonActive,s=this.config.selectors.skipButtonHidden,a=this.config.selectors.skipButtonReady;switch(t){case"ready":i.removeClass(e(o,n,s)).addClass(a).attr("disabled",!0);break;case"inactive":i.removeClass(e(o,s,a)).addClass(n).attr("disabled",!0);break;case"active":i.removeClass(e(n,s)).addClass(e(o,a)).attr("disabled",!1);break;case"hidden":i.removeClass(e(o,n,a)).addClass(s).attr("disabled",!0)}},getPlaylistItemElementByVpid:function(t){var e=this;return this.elements.playlistItems.filter(function(){var n=i(this);if(e.getVpidFromElement(n)===t)return n})},updatePlaylistByVpid:function(t){var e=this.getPlaylistItemElementByVpid(t);this.setPlaying(this.getCurrentActivePlaylistItem(),!1),this.updatePlaylist(e)},updateCurrentlyPlayingByVpid:function(t){var e=this.getPlaylistItemElementByVpid(t);this.setPlaying(this.getCurrentActivePlaylistItem(),!1),this.setPlaying(e,!0)},setPlaying:function(e,i){var n=this.config.selectors.playlistItemPlaying;t.isBoolean(i)&&this.isElement(e)&&this.setClass(e,i,n)},setActive:function(e,i){var n=this.config.selectors.playlistItemActive;t.isBoolean(i)&&this.isElement(e)&&this.setClass(e,i,n)},updatePlaylist:function(t){if(this.isElement(t)){var e=this.getCurrentActivePlaylistItem(),i=this.config.selectors.playlistItemActive;if(t.is(e)||this.setPlaying(e,!1),t.is(e))return;this.isElement(e)&&this.setActive(e,!1),this.setActive(t,!0,i),this.setCurrentActivePlaylistItem(t),this.isLastItemInPlaylist(t)?this.getPlaylistItemsLength()>1?this.setSkipButtonState("inactive"):this.setSkipButtonState("hidden"):this.setSkipButtonState("active")}},getNextItemFromPlaylist:function(){var t=this.getCurrentActivePlaylistItem(),e=this.elements.playlistItems,n=e.filter(t).index()+1;return n<=e.length-1&&i(e.get(n))},getVpidFromElement:function(t){var e=this.config.selectors.playlistItem;return!!this.isElement(t)&&t.attr(this.getValidAttrStringFromDataSelector(e))},getValidAttrStringFromDataSelector:function(t){return t.replace(/[\[\]]/gi,"")},isElement:function(t){return t&&t.length>0},setClass:function(t,e,i){this.isElement(t)&&(!0===e?t.addClass(i):t.removeClass(i))},setCurrentActivePlaylistItem:function(t){this.isElement(t)&&(this.currentActivePlaylistItem=t)},getCurrentActivePlaylistItem:function(){return this.currentActivePlaylistItem},showPlayControls:function(){var t=this.elements.playCollectionButton;this.setClass(t,!0,this.config.selectors.playCollectionButtonActive)},subscribe:function(t,e){switch(t){case"playlist-nav-updated":this.playlistNavUpdateSignal.add(e);break;case"playlist-play-selected":this.playlistPlayCollectionSignal.add(e);break;case"playlist-skip-selected":this.playlistSkipSignal.add(e)}},setSelector:function(t){return t=i(t),t.length>0&&(this.selector=t),!1},getSelector:function(){return this.selector},hidePreview:function(){this.setClass(this.elements.clipViewerPreview,!1,this.config.selectors.clipViewerPreviewActive)},showPlayer:function(){this.setClass(this.elements.clipViewerPlayer,!0,this.config.selectors.clipViewerPlayerActive)}}),a}),define("module/video/playlist-player/playlist-manager",["q","lodash","lib/ecmaScript5","jquery","lib/domReady","util/logger","module/video/playlist-player/clip-player","module/video/playlist-player/playlist-ui-manager","model/exposed-data","common/util/interface","common/interface/entity/video/playlist-player/collection","common/interface/entity/video/playlist-player/clip-promo","common/interface/entity/video/video"],function(t,e,i,n,o,s,a,r,l,c,d,u,p){var h=function(t,i){this.defaultConfig={selectors:{}},this.config=e.merge({},this.defaultConfig,i||{}),this.setSelector(t),this.setPlaylist([])};return e.extend(h.prototype,{init:function(){if(this.getSelector())return s.debug("VideoPlaylistPlayerManager:init"),this.setCurrentIndex(0),this.setupCollectionEntity(this.getCollectionType()),this.setModel(this.getCollectionModelData()),this.setPlaylist(this.getVpidsFromCollectionEntity()),this.setupPlaylistUIManager(),this.setupClipPlayer({}),void this.setupEventListeners();throw"VideoPlaylistPlayerManager:init: Invalid selector specified"},setupEventListeners:function(){this.playlistUIManager.subscribe("playlist-nav-updated",this.handlePlaylistNavUpdate.bind(this)),this.playlistUIManager.subscribe("playlist-play-selected",this.handlePlayCollectionSelection.bind(this)),this.playlistUIManager.subscribe("playlist-skip-selected",this.handleSkip.bind(this)),this.clipPlayer.subscribe("playlist-ended",this.handlePlaylistEnded.bind(this)),this.clipPlayer.subscribe("clip-playing",this.handleClipPlaying.bind(this))},getVpidsFromCollectionEntity:function(){var t,i=this.getModel(),n=this.getCollectionEntity(),o=[];c.ensureImplements(new n,d),t=new n(i),e.each(t.getClips(),function(t){c.ensureImplements(t,u);var e=t.getVideo();c.ensureImplements(e,p),o.push(t.getVideo().getVpid())},this),this.setPlaylist(o)},setCurrentIndex:function(t){0===t?this.currentIndex=0:e.isNumber(t)&&(this.currentIndex=Math.min(this.getPlaylistLength()-1,Math.max(0,t)))},getCurrentIndex:function(){return this.currentIndex},getPlaylistLength:function(){return this.getPlaylist().length},playFirstItemInPlaylist:function(){var t=this.getPlaylistItemByIndex(0);this.setupPlayerView(),this.setCurrentVpid(t),this.playlistUIManager.updatePlaylistByVpid(t)},handlePlaylistNavUpdate:function(t){this.setCurrentIndex(this.getItemIndexByVpid(t)),this.updateView(t)},handlePlayCollectionSelection:function(){this.setupPlayerView()},handlePlaylistEnded:function(){this.goToNextClip(),this.playlistUIManager.updatePlaylistByVpid(this.getCurrentVpid())},handleClipPlaying:function(){this.playlistUIManager.updateCurrentlyPlayingByVpid(this.getCurrentVpid())},handleClipPlayerInitialised:function(){this.playlistUIManager.showPlayControls()},handleSkip:function(){this.goToNextClip()},setupPlayerView:function(){this.setCurrentIndex(0),this.updateView(this.getPlaylistItemByIndex(0))},getItemIndexByVpid:function(t){return e.indexOf(this.getPlaylist(),t)},getPlaylist:function(){return this.playlist},getPlaylistItemByIndex:function(t){if(e.isNumber(t))return this.getPlaylist()[t]},setPlaylist:function(t){e.isArray(t)&&(this.playlist=t)},setModel:function(t){e.isObject(t)&&(this.model=t)},loadClip:function(t){t!==this.getCurrentVpid()&&(this.setCurrentVpid(t),this.clipPlayer.loadClip(t))},getCurrentVpid:function(){return this.currentPid},setCurrentVpid:function(t){e.isString(t)&&(this.currentPid=t)},goToNextClip:function(){this.goTo(this.getCurrentIndex()+1)},goTo:function(t){var i;e.isNumber(t)&&(this.setCurrentIndex(t),i=this.getPlaylistItemByIndex(this.getCurrentIndex()),this.updateView(i))},updateView:function(t){this.playlistUIManager.hidePreview(),this.playlistUIManager.showPlayer(),this.loadClip(t)},getModel:function(){return this.model},getCollectionEntity:function(){return this.collectionEntity},getCollectionType:function(){return!!e.has(l,"video-collection-meta-data.type")&&l["video-collection-meta-data"].type},getCollectionModelData:function(){return!!e.has(l,"video-collection")&&l["video-collection"]},setupCollectionEntity:function(t){var e;c.ensureImplements(new e,d),this.collectionEntity=e},getDefaultConfig:function(){return{selector:this.selector,collectionType:this.getCollectionType(),collectionEntity:this.getCollectionEntity(),model:this.getCollectionModelData()}},setupClipPlayer:function(){this.clipPlayer=new a(this.getDefaultConfig()),this.clipPlayer.init().then(this.handleClipPlayerInitialised.bind(this))},setupPlaylistUIManager:function(){this.playlistUIManager=new r(this.getSelector()),this.playlistUIManager.init()},getPlaylistUIManager:function(){return this.playlistUIManager},setSelector:function(t){return t=n(t),t.length>0&&(this.selector=t),!1},getSelector:function(){return this.selector}}),h}),define("common/entity/vanilla/video",["lodash","common/util/extends","common/entity/base"],function(t,e,i){function n(e){var n={id:!1,vpid:!1,title:"",image:!1,provider:!1,mediator:!1};i.call(this,t.extend(n,e))}return e(n,i,{getId:function(){return this.id},getVpid:function(){return this.vpid},getTitle:function(){return this.title},setImage:function(t){this.image=t},getImage:function(){return this.image},setProvider:function(t){this.provider=t},getProvider:function(){return this.provider},getMediator:function(){return this.mediator}}),n}),define("common/helper/sol-url-helper",["lodash","common/config"],function(t,e){var i=function(t,e){return t.replace(e,"$recipe")},n=function(t,e){var i=new RegExp("(wwfeatures/)("+e+"/)","i");return t.replace(i,"$1")};return{getFormattedImageURL:function(o){if(t.isString(o)){var s=e.get();if(t.has(s,"story-of-life.image-url.recipe-placeholder")&&t.has(s,"story-of-life.image-url.directory")){var a=s["story-of-life"]["image-url"],r=a.directory,l=a["recipe-placeholder"];o=n(o,r),o=i(o,l)}return o}return!1}}}),define("common/entity/habitat/story-of-life/clip",["lodash","common/util/extends","common/entity/vanilla/image","common/entity/vanilla/video","common/helper/placeholder-images","common/entity/habitat/base","common/helper/sol-url-helper"],function(t,e,i,n,o,s,a){function r(e){var i={clipId:!1,hidden:!1,createdDate:!1,modifiedDate:!1,transmissionDate:!1,title:!1,description:!1,durationSeconds:!1,image:!1,video:!1,seriesName:!1,animalTag:!1,habitatTag:!1,speciesTag:!1,animalGroupLifeTag:!1,attributeTags:[],behaviourTags:[]};s.call(this,t.extend(i,e))}return e(r,s,{init:function(t){s.prototype.init.call(this,t),this.map("clip_id","clipId"),this.map("duration_seconds","durationSeconds"),this.map("series_name","seriesName"),this.setupImage(),this.setupVideo(),this.setupTags(),this.setupDates()},setupImage:function(){var t,e=this.get("image",!1);t=e?new i({title:this.getTitle(),URL:a.getFormattedImageURL(e)}):o.get("sol-clip"),this.set("image",t)},setupVideo:function(){var t=this.get("pid",!1),e=!1;t&&(e=new n({id:this.getId(),title:this.getTitle(),image:this.getImage(),vpid:t})),this.set("video",e)},setupTags:function(){var e=this.get("tags",!1);e&&(void 0!==e.animal&&(this.animalTag=e.animal),void 0!==e.animal_group_life&&(this.animalGroupLifeTag=e.animal_group_life),void 0!==e.habitat&&(this.habitatTag=e.habitat),t.isArray(e.attributes)&&(this.attributeTags=e.attributes),t.isArray(e.behaviour)&&(this.behaviourTags=e.behaviour))},setupDates:function(){this.get("created",!1)&&(this.createdDate=this.createDate(this.get("created"))),this.get("modified",!1)&&(this.modifiedDate=this.createDate(this.get("modified"))),this.get("transmission_date",!1)&&(this.transmissionDate=this.createDate(this.get("transmission_date")))},createDate:function(t){return new Date(1e3*t)},getId:function(){return this.clipId},isHidden:function(){return this.hidden},getTitle:function(){return this.title},getDescription:function(){return this.description},getDurationSeconds:function(){return this.durationSeconds},getSeriesName:function(){return this.seriesName},getImage:function(){return this.image},getVideo:function(){return this.video},getAnimalTag:function(){return this.animalTag},getHabitatTag:function(){return this.habitatTag},getSpeciesTag:function(){return this.speciesTag},getAnimalGroupLifeTag:function(){return this.animalGroupLifeTag},getAttributeTags:function(){return this.attributeTags},getBehaviourTags:function(){return this.behaviourTags},getCreatedDate:function(){return this.createdDate},getModifiedDate:function(){return this.modifiedDate},getTransmissionDate:function(){return this.transmissionDate}}),r}),define("common/entity/habitat/story-of-life/clip-collection",["lodash","common/util/extends","common/entity/habitat/paged-list","common/entity/habitat/story-of-life/clip"],function(t,e,i,n){function o(e,n){var o={primaryClip:!1,listType:!1,title:!1,description:!1,coverImage:!1,curatorName:!1,queryParams:!1};i.apply(this,[t.extend(o,e),n])}return e(o,i,{entityFactoryDependencies:[],init:function(t){i.prototype.init.apply(this,arguments),this.get("primaryClip",!1)&&(this.primaryClip=new n(this.primaryClip),this.title=this.primaryClip.getTitle(),this.description=this.primaryClip.getDescription(),this.coverImage=this.primaryClip.getImage()),this.prepareQueryParams()},createEntity:function(t){return new n(t)},prepareQueryParams:function(){switch(this.getType()){case"single":this.queryParams=this.buildSingleClipQueryParams();break;case"custom":this.queryParams=this.buildCustomCollectionQueryParams();break;default:this.queryParams=!1}},buildSingleClipQueryParams:function(){var t=this.getPrimaryClip();return!1!==t&&{clipID:t.getId()}},buildCustomCollectionQueryParams:function(){var t=this.getPrimaryClip(),e=this.getClips(),i=!1;if(!1!==t&&e.length>0){i={imageClipID:t.getId()};for(var n=1;n<=e.length;n++)i["clip"+n]=e[n-1].getId()}return i},getQueryParams:function(){return this.queryParams},getPrimaryClip:function(){return this.primaryClip},getType:function(){return this.listType},getTitle:function(){return this.title},getDescription:function(){return this.description},getCoverImage:function(){return this.coverImage},getCuratorName:function(){return this.curatorName},getClips:function(){return this.getListItems()}}),o}),define("common/entity/habitat/story-of-life/curated-collection",["lodash","common/util/extends","common/entity/habitat/story-of-life/clip","common/entity/vanilla/image","common/helper/placeholder-images","common/entity/habitat/base","common/helper/sol-url-helper"],function(t,e,i,n,o,s,a){function r(e){var i={collectionId:!1,listType:"curated",title:!1,description:!1,featured:!1,curatorName:!1,curatorSignatureImage:!1,
createdDate:!1,modifiedDate:!1,coverImage:!1,clips:[],queryParams:!1};s.call(this,t.extend(i,e))}return e(r,s,{init:function(t){s.prototype.init.call(this,t),this.map("collection_id","collectionId"),this.map("curator","curatorName"),this.setupClips(),this.setupImages(),this.setupDates(),this.setupQueryParams()},setupClips:function(){var e=this.get("clips",[]),n=[];t.isArray(e)&&t.each(e,function(t){n.push(new i(t))},this),this.set("clips",n)},setupImages:function(){var t,e=this.get("cover_image",!1),i=this.get("signature_image",!1);t=e?new n({title:this.getTitle(),URL:a.getFormattedImageURL(e)}):o.get("sol-collection"),this.set("coverImage",t),i&&this.set("curatorSignatureImage",new n({URL:a.getFormattedImageURL(i)}))},setupDates:function(){this.get("created",!1)&&(this.createdDate=this.createDate(this.get("created"))),this.get("modified",!1)&&(this.modifiedDate=this.createDate(this.get("modified")))},createDate:function(t){return new Date(1e3*t)},setupQueryParams:function(){switch(this.getType()){case"curated":this.queryParams=this.buildCuratedCollectionQueryParams();break;default:this.queryParams=!1}},buildCuratedCollectionQueryParams:function(){var t=this.getCollectionId();return!1!==t&&{collectionID:t}},getCollectionId:function(){return this.collectionId},getType:function(){return this.listType},getTitle:function(){return this.title},getDescription:function(){return this.description},getCuratorName:function(){return this.curatorName},getCuratorSignatureImage:function(){return this.curatorSignatureImage},isFeatured:function(){return this.featured},getCreatedDate:function(){return this.createdDate},getModifiedDate:function(){return this.modifiedDate},getCoverImage:function(){return this.coverImage},getClips:function(){return this.clips},getQueryParams:function(){return this.queryParams}}),r}),define("module/video/playlist-player/sol-playlist-manager",["lodash","lib/ecmaScript5","jquery","lib/domReady","util/logger","common/util/extends","module/video/playlist-player/clip-player","module/video/playlist-player/playlist-manager","model/exposed-data","common/entity/habitat/story-of-life/clip-collection","common/entity/habitat/story-of-life/curated-collection","common/util/interface","common/interface/entity/video/playlist-player/collection","model/exposed-config"],function(t,e,i,n,o,s,a,r,l,c,d,u,p,h){var m=function(t){r.apply(this,arguments)};return s(m,r,{init:function(){o.debug("SOLVideoPlaylistPlayerManager:init"),r.prototype.init.apply(this,arguments)},getCollectionType:function(){return!!t.has(l,"sol-collection-meta-data.type")&&l["sol-collection-meta-data"].type},getCollectionModelData:function(){return!!t.has(l,"sol-collection")&&l["sol-collection"]},setupCollectionEntity:function(t){var e;switch(t){case"single":case"custom":e=c;break;case"curated":e=d}u.ensureImplements(new e,p),this.collectionEntity=e},handleClipPlayerInitialised:function(){"single"===this.getCollectionType()&&this.playFirstItemInPlaylist(),r.prototype.handleClipPlayerInitialised.apply(this)},setupClipPlayer:function(){var e,i=!1,n=this.getCollectionType();h&&t.has(h,"module.brandColor")&&(i=h.module.brandColor),e=t.extend(this.getDefaultConfig(),{clipViewerViewModel:{video:{brandColor:i,idPrefix:"sol",image:{format:{landscape:{x:"976",y:"549"}}}},clip:{image:{format:{landscape:{x:"976",y:"549"}}}}},videoPlayer:{canAutoplayInUK:!0}}),"single"===n&&t.has(e,"videoPlayer")&&(e.videoPlayer.canAutoplayInUK=!1),this.clipPlayer=new a(e),this.clipPlayer.init().then(this.handleClipPlayerInitialised.bind(this))}}),m}),define("layouts/player/story-of-life",["lodash","common/util/extends","util/logger","lib/ecmaScript5","jquery","lib/domReady","orb/api","layouts/base","module/topbar-menu","module/video/playlist-player/sol-playlist-manager","module/share-tools/base"],function(t,e,i,n,o,s,a,r,l,c,d){var u=function(t){r.call(this,t)};return e(u,r,{init:function(){i.debug("SOLVideoPlayerLayout:init"),this.setupSOLPlaylistPlayerManager(),this.setupShareTools()},setupShareTools:function(){this.shareTools=new d({selector:"[data-vpp-share-tools] [data-share]",class:"share-tools--expandable share-tools--expandable-right"}),this.shareTools.init()},setupSOLPlaylistPlayerManager:function(){this.solPlaylistPlayerManager=new c("[data-vpp-main]"),this.solPlaylistPlayerManager.init()}}),u}),define("wwearth/main",["lodash","common/util/extends","glaze-main-app","model/exposed-routes","common/helper/request","layouts/sol-catch-page","layouts/player/story-of-life"],function(t,e,i,n,o,s,a){var r=function(){i.call(this)};return e(r,i,{addRoutes:function(){i.prototype.addRoutes.call(this),t.has(n,"sol-player")&&this.router.addRoute(n["sol-player"],this.playerLayout.bind(this)),t.has(n,"sol-catch-page")&&this.router.addRoute(n["sol-catch-page"],this.solCatchPageLayout.bind(this))},playerLayout:function(t){new a("[data-vpp-main]").init()},solCatchPageLayout:function(t){new s("#sol-catch-page").init()}}),r});